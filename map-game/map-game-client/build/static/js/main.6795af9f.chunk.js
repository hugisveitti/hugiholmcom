(this["webpackJsonpmap-game-client"]=this["webpackJsonpmap-game-client"]||[]).push([[0],{113:function(t,e,n){},145:function(t,e){},167:function(t,e,n){},171:function(t,e,n){},172:function(t,e,n){"use strict";n.r(e);var c=n(7),o=n(0),i=n.n(o),a=n(29),r=n.n(a),s=(n(113),n(103)),l=n(9),j=n(14),u=n(89),b=n.n(u),d=n(104),h=(n(167),n(187)),O=n(188),g=function(t){var e=t.socket,n=Object(o.useState)(0),i=Object(j.a)(n,2),a=i[0],r=i[1],s=Object(o.useState)(""),l=Object(j.a)(s,2),u=l[0],b=l[1],g=Object(o.useState)([]),f=Object(j.a)(g,2),p=f[0],x=f[1];Object(o.useEffect)((function(){e&&e.on("sendSequence",(function(t){var e=[];if(t.features.length>0){for(var n=0;n<t.features.length;n++){var c=t.features[n].properties.key,o="https://images.mapillary.com/".concat(c,"/thumb-2048.jpg");e.push(o)}x(e),b(e[0])}}))}),[e]);var m=function(t){console.log("currentIndex",t),console.log(p[t]),b(p[t])};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h4",{children:"Image component"}),p.length>0?Object(c.jsxs)("div",{className:"pano-container",children:[Object(c.jsxs)(h.a,{style:{textAlign:"center"},children:[a+1," / ",p.length," "]}),Object(c.jsx)("button",{className:"pano-btn",id:"pano-prev-btn",onClick:function(){var t=-1;0===a?(r(p.length-1),t=p.length-1):(r(a-1),t=a-1),m(t)},children:Object(c.jsx)("i",{className:"arrow arrow-left"})}),Object(c.jsx)("button",{className:"pano-btn arrow-right",id:"pano-next-btn",onClick:function(){var t=-1;a===p.length-1?(r(0),t=0):(r(a+1),t=a+1),m(t)},children:Object(c.jsx)("i",{className:"arrow"})}),Object(c.jsx)(d.a,{width:"100%",height:"500px",image:u,pitch:10,yaw:180,hfov:110,autoLoad:!0,onLoad:function(){console.log("panorama loaded")}})]}):Object(c.jsx)("div",{style:{textAlign:"center"},children:Object(c.jsx)(O.a,{})})]})},f={ENDPOINT:window.location.hostname},p=n(30),x=n.n(p),m=n(100),v=(n(169),n(101)),k=n(189),S=n(190),w=n(191),y=n(193),N=n(192),C=function(t){var e=t.socket,n=Object(o.useState)([51.505,-.09]),i=Object(j.a)(n,2),a=i[0],r=i[1],s=Object(o.useState)(-1),l=Object(j.a)(s,2),u=l[0],b=l[1],d=Object(o.useState)(void 0),O=Object(j.a)(d,2),g=O[0],f=O[1];Object(o.useEffect)((function(){e&&e.on("handleCorrectPosition",(function(t){b(+t.distance),f(t.correctPosition)}))}),[e]);var p=function(t){return x.a.icon({iconUrl:m.a,shadowUrl:v.a,iconSize:[25,41],iconAnchor:[10,41],html:'<span style="background-color:'.concat(t,'" />')})},C=function(){return Object(k.a)({click:function(t){console.log("map cliiiick",t),r([t.latlng.lat,t.latlng.lng])}}),Object(c.jsx)(S.a,{icon:p("blue"),position:a})},E=function(){return g?Object(c.jsx)(S.a,{icon:p("green"),position:g}):null};return Object(c.jsxs)("div",{style:{padding:20},children:[Object(c.jsxs)(w.a,{center:[51.505,-.09],zoom:2,style:{height:400,width:"70%",margin:"auto",marginBottom:15},children:[Object(c.jsx)(C,{}),Object(c.jsx)(E,{}),Object(c.jsx)(y.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})]}),-1!==u&&Object(c.jsxs)(h.a,{style:{textAlign:"center"},children:["You were ",u.toLocaleString()," KM from the correct position."]}),Object(c.jsx)("div",{style:{textAlign:"center",paddingBottom:20},children:Object(c.jsx)(N.a,{onClick:function(){e.emit("handleSendGuess",{position:{lat:a[0],lng:a[1]}})},variant:"contained",children:"Send"})})]})},E=f.ENDPOINT,I=function(){var t=Object(o.useState)(void 0),e=Object(j.a)(t,2),n=e[0],i=e[1];return console.log("config",f),Object(o.useEffect)((function(){var t=b.a.connect(E);i(t),t.on("connectedToRoomCallBack",(function(t){console.log("callback",t)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Frontpage"}),Object(c.jsx)(g,{socket:n}),Object(c.jsx)(C,{socket:n})]})},P=function(){return Object(c.jsx)(l.c,{children:Object(c.jsx)(l.a,{to:"/",component:I})})};n(171);var A=function(){return Object(c.jsx)(s.a,{children:Object(c.jsx)(P,{})})},B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,194)).then((function(e){var n=e.getCLS,c=e.getFID,o=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),c(t),o(t),i(t),a(t)}))};r.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(A,{})}),document.getElementById("root")),B()}},[[172,1,2]]]);
//# sourceMappingURL=main.6795af9f.chunk.js.map
(this["webpackJsonpmap-game-client"]=this["webpackJsonpmap-game-client"]||[]).push([[0],{113:function(t,e,n){},145:function(t,e){},167:function(t,e,n){},171:function(t,e,n){},172:function(t,e,n){"use strict";n.r(e);var c=n(7),i=n(0),o=n.n(i),a=n(29),s=n.n(a),r=(n(113),n(103)),l=n(9),j=n(14),u=n(89),b=n.n(u),d=n(104),h=n(190),O=n(191),g=(n(167),n(30)),x=n.n(g),f=n(96),p=(n(168),n(97)),m=n(187),v=n(188),S=n(189),k=n(193),y=n(192),w=function(t){var e=t.socket,n=t.setImageUrls,o=Object(i.useState)([51.505,-.09]),a=Object(j.a)(o,2),s=a[0],r=a[1],l=Object(i.useState)(-1),u=Object(j.a)(l,2),b=u[0],d=u[1],O=Object(i.useState)(void 0),g=Object(j.a)(O,2),w=g[0],N=g[1],C=Object(i.useState)(!1),P=Object(j.a)(C,2),A=P[0],B=P[1];Object(i.useEffect)((function(){e&&e.on("handleCorrectPosition",(function(t){d(+t.distance),console.log(t),N(t.correctPosition),B(!0)}))}),[e]);var E=function(t){return x.a.icon({iconUrl:f.a,shadowUrl:p.a,iconSize:[25,41],iconAnchor:[10,41],html:'<span style="background-color:'.concat(t,'" />')})},I=function(){return Object(m.a)({click:function(t){console.log("map cliiiick",t),r([t.latlng.lat,t.latlng.lng])}}),Object(c.jsx)(v.a,{icon:E("blue"),position:s})},T=function(){return w?Object(c.jsx)(v.a,{icon:E("green"),position:w}):null};return Object(c.jsxs)("div",{style:{padding:20},children:[Object(c.jsxs)(S.a,{center:[51.505,-.09],zoom:2,style:{height:400,width:"70%",margin:"auto",marginBottom:15},children:[Object(c.jsx)(I,{}),Object(c.jsx)(T,{}),Object(c.jsx)(k.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})]}),-1!==b&&Object(c.jsxs)(h.a,{style:{textAlign:"center"},children:["You were ",b.toLocaleString()," KM from the correct position."]}),Object(c.jsx)("div",{style:{textAlign:"center",paddingBottom:20},children:Object(c.jsx)(y.a,{onClick:function(){e.emit("handleSendGuess",{position:{lat:s[0],lng:s[1]}})},variant:"contained",children:"Send"})}),A&&Object(c.jsx)("div",{style:{textAlign:"center",paddingBottom:20},children:Object(c.jsx)(y.a,{onClick:function(){e.emit("handleGetNextPosition",{}),n([]),N(void 0),B(!1),d(-1)},variant:"contained",children:"Get Next Position"})})]})},N=function(t){var e=t.socket,n=Object(i.useState)(0),o=Object(j.a)(n,2),a=o[0],s=o[1],r=Object(i.useState)(""),l=Object(j.a)(r,2),u=l[0],b=l[1],g=Object(i.useState)([]),x=Object(j.a)(g,2),f=x[0],p=x[1];Object(i.useEffect)((function(){e&&e.on("sendSequence",(function(t){var e=[];if(t.features.length>0){for(var n=0;n<t.features.length;n++){var c=t.features[n].properties.key,i="https://images.mapillary.com/".concat(c,"/thumb-2048.jpg");e.push(i)}s(0),p(e),b(e[0])}}))}),[e]);var m=function(t){b(f[t])};return Object(c.jsxs)("div",{children:[f.length>0?Object(c.jsxs)("div",{className:"pano-container",children:[Object(c.jsxs)(h.a,{style:{textAlign:"center"},children:[a+1," / ",f.length," "]}),Object(c.jsx)("button",{className:"pano-btn",id:"pano-prev-btn",onClick:function(){var t=-1;0===a?(s(f.length-1),t=f.length-1):(s(a-1),t=a-1),m(t)},children:Object(c.jsx)("i",{className:"arrow arrow-left"})}),Object(c.jsx)("button",{className:"pano-btn arrow-right",id:"pano-next-btn",onClick:function(){var t=-1;a===f.length-1?(t=0,s(0)):(t=a+1,s(a+1)),m(t)},children:Object(c.jsx)("i",{className:"arrow"})}),Object(c.jsx)(d.a,{width:"100%",height:"500px",image:u,pitch:10,yaw:180,hfov:110,autoLoad:!0})]}):Object(c.jsx)("div",{style:{textAlign:"center"},children:Object(c.jsx)(O.a,{})}),Object(c.jsx)(w,{socket:e,setImageUrls:p})]})},C={ENDPOINT:window.location.hostname}.ENDPOINT,P=function(){var t=Object(i.useState)(void 0),e=Object(j.a)(t,2),n=e[0],o=e[1];return Object(i.useEffect)((function(){var t=b.a.connect(C);o(t),t.on("connectedToRoomCallBack",(function(t){}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{style:{textAlign:"center"},children:[Object(c.jsx)("h2",{children:"Map game"}),Object(c.jsx)("p",{children:"Still in development"})]}),Object(c.jsx)(N,{socket:n})]})},A=function(){return Object(c.jsx)(l.c,{children:Object(c.jsx)(l.a,{to:"/",component:P})})};n(171);var B=function(){return Object(c.jsx)(r.a,{children:Object(c.jsx)(A,{})})},E=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,194)).then((function(e){var n=e.getCLS,c=e.getFID,i=e.getFCP,o=e.getLCP,a=e.getTTFB;n(t),c(t),i(t),o(t),a(t)}))};s.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(B,{})}),document.getElementById("root")),E()}},[[172,1,2]]]);
//# sourceMappingURL=main.f1053211.chunk.js.map
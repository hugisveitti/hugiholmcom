/*! For license information please see main.f7ab7bf5.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},463:function(e,t,n){"use strict";var r=n(791),a=n(296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),E=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var U,j=Object.assign;function O(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var l="\n"+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?O(e):""}function z(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case M:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){Q(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ie(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Se=null;function Me(e){if(e=ga(e)){if("function"!==typeof _e)throw Error(i(280));var t=e.stateNode;t&&(t=ya(t),_e(e.stateNode,e.type,t))}}function Te(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ee(){if(ke){var e=ke,t=Se;if(Se=ke=null,Me(e),t)for(e=0;e<t.length;e++)Me(t[e])}}function Ae(e,t){return e(t)}function Ce(){}var Le=!1;function Re(e,t,n){if(Le)return e(t,n);Le=!0;try{return Ae(e,t,n)}finally{Le=!1,(null!==ke||null!==Se)&&(Ce(),Ee())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=ya(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(c)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ce){Pe=!1}function De(e,t,n,r,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ue=!1,je=null,Oe=!1,Fe=null,Be={onError:function(e){Ue=!0,je=e}};function ze(e,t,n,r,a,i,o,s,l){Ue=!1,je=null,De.apply(Be,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(He(e)!==e)throw Error(i(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Ge(a),e;if(o===r)return Ge(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=a.unstable_scheduleCallback,Xe=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Je=a.unstable_requestPaint,Qe=a.unstable_now,Ze=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=ht(s):0!==(i&=o)&&(r=ht(i))}else 0!==(o=n&~a)?r=ht(o):0!==i&&(r=ht(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,_t,kt,St,Mt=!1,Tt=[],Et=null,At=null,Ct=null,Lt=new Map,Rt=new Map,Nt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function It(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Dt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ga(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ut(e){var t=ma(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ga(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ot(e,t,n){jt(e)&&n.delete(t)}function Ft(){Mt=!1,null!==Et&&jt(Et)&&(Et=null),null!==At&&jt(At)&&(At=null),null!==Ct&&jt(Ct)&&(Ct=null),Lt.forEach(Ot),Rt.forEach(Ot)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Mt||(Mt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ft)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Bt(Et,e),null!==At&&Bt(At,e),null!==Ct&&Bt(Ct,e),Lt.forEach(t),Rt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Nt.shift()}var Ht=x.ReactCurrentBatchConfig;function Vt(e,t,n,r){var a=yt,i=Ht.transition;Ht.transition=null;try{yt=1,Wt(e,t,n,r)}finally{yt=a,Ht.transition=i}}function Gt(e,t,n,r){var a=yt,i=Ht.transition;Ht.transition=null;try{yt=4,Wt(e,t,n,r)}finally{yt=a,Ht.transition=i}}function Wt(e,t,n,r){var a=Kt(e,t,n,r);if(null===a)Hr(e,t,r,qt,n),It(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Et=Dt(Et,e,t,n,r,a),!0;case"dragenter":return At=Dt(At,e,t,n,r,a),!0;case"mouseover":return Ct=Dt(Ct,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Lt.set(i,Dt(Lt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Rt.set(i,Dt(Rt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(It(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==a;){var i=ga(a);if(null!==i&&xt(i),null===(i=Kt(e,t,n,r))&&Hr(e,t,r,qt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Hr(e,t,r,null,n)}var qt=null;function Kt(e,t,n,r){if(qt=null,null!==(e=ma(e=we(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Qt=null;function Zt(){if(Qt)return Qt;var e,t,n=Jt,r=n.length,a="value"in Yt?Yt.value:Yt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Qt=a.slice(e,1<t?1-t:void 0)}function $t(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?en:tn,this.isPropagationStopped=tn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var rn,an,on,sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=nn(sn),un=j({},sn,{view:0,detail:0}),cn=nn(un),hn=j({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(rn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=rn=0,on=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=nn(hn),dn=nn(j({},hn,{dataTransfer:0})),pn=nn(j({},un,{relatedTarget:0})),mn=nn(j({},sn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=j({},sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=nn(gn),yn=nn(j({},sn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function kn(){return _n}var Sn=j({},un,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$t(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?$t(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$t(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mn=nn(Sn),Tn=nn(j({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=nn(j({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),An=nn(j({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=j({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=nn(Cn),Rn=[9,13,27,32],Nn=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var In=c&&"TextEvent"in window&&!Pn,Dn=c&&(!Nn||Pn&&8<Pn&&11>=Pn),Un=String.fromCharCode(32),jn=!1;function On(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Vn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Wn=null;function qn(e){Ur(e,0)}function Kn(e){if(K(va(e)))return e}function Xn(e,t){if("change"===e)return t}var Yn=!1;if(c){var Jn;if(c){var Qn="oninput"in document;if(!Qn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Qn="function"===typeof Zn.oninput}Jn=Qn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function $n(){Gn&&(Gn.detachEvent("onpropertychange",er),Wn=Gn=null)}function er(e){if("value"===e.propertyName&&Kn(Wn)){var t=[];Vn(t,Wn,e,we(e)),Re(qn,t)}}function tr(e,t,n){"focusin"===e?($n(),Wn=n,(Gn=t).attachEvent("onpropertychange",er)):"focusout"===e&&$n()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Wn)}function rr(e,t){if("click"===e)return Kn(t)}function ar(e,t){if("input"===e||"change"===e)return Kn(t)}var ir="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ir(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!h.call(t,a)||!ir(e[a],t[a]))return!1}return!0}function sr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=sr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function cr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=cr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=lr(n,i);var o=lr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=c&&"documentMode"in document&&11>=document.documentMode,pr=null,mr=null,gr=null,vr=!1;function yr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==pr||pr!==X(r)||("selectionStart"in(r=pr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&or(gr,r)||(gr=r,0<(r=Gr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},wr={},_r={};function kr(e){if(wr[e])return wr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return wr[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=kr("animationend"),Mr=kr("animationiteration"),Tr=kr("animationstart"),Er=kr("transitionend"),Ar=new Map,Cr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Ar.set(e,t),l(t,[e])}for(var Rr=0;Rr<Cr.length;Rr++){var Nr=Cr[Rr];Lr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Lr(Sr,"onAnimationEnd"),Lr(Mr,"onAnimationIteration"),Lr(Tr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Er,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Dr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,l,u){if(ze.apply(this,arguments),Ue){if(!Ue)throw Error(i(198));var c=je;Ue=!1,je=null,Oe||(Oe=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;Dr(a,s,u),i=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;Dr(a,s,u),i=l}}}if(Oe)throw e=Fe,Oe=!1,Fe=null,e}function jr(e,t){var n=t[fa];void 0===n&&(n=t[fa]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Or(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Fr]){e[Fr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Ir.has(t)||Or(t,!1,e),Or(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Or("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Xt(t)){case 1:var a=Vt;break;case 4:a=Gt;break;default:a=Wt}n=a.bind(null,t,n,e),a=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ma(s)))return;if(5===(l=o.tag)||6===l){r=i=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=i,a=we(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var l=ln,u=e;switch(e){case"keypress":if(0===$t(n))break e;case"keydown":case"keyup":l=Mn;break;case"focusin":u="focus",l=pn;break;case"focusout":u="blur",l=pn;break;case"beforeblur":case"afterblur":l=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Sr:case Mr:case Tr:l=mn;break;case Er:l=An;break;case"scroll":l=cn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var m=(d=p).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==f&&(null!=(m=Ne(p,f))&&c.push(Vr(p,m,d)))),h)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,a),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!ma(u)&&!u[ha])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ma(u):null)&&(u!==(h=He(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,m="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==l?s:va(l),d=null==u?s:va(u),(s=new c(m,p+"leave",l,n,a)).target=h,s.relatedTarget=d,m=null,ma(a)===r&&((c=new c(f,p+"enter",u,n,a)).target=d,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(f=u,p=0,d=c=l;d;d=Wr(d))p++;for(d=0,m=f;m;m=Wr(m))d++;for(;0<p-d;)c=Wr(c),p--;for(;0<d-p;)f=Wr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Wr(c),f=Wr(f)}c=null}else c=null;null!==l&&qr(o,s,l,c,!1),null!==u&&null!==h&&qr(o,h,u,c,!0)}if("select"===(l=(s=r?va(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Xn;else if(Hn(s))if(Yn)g=ar;else{g=nr;var v=tr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=rr);switch(g&&(g=g(e,r))?Vn(o,g,n,a):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?va(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(pr=v,mr=r,gr=null);break;case"focusout":gr=mr=pr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,yr(o,n,a);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":yr(o,n,a)}var y;if(Nn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?On(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=Zt()):(Jt="value"in(Yt=a)?Yt.value:Yt.textContent,Bn=!0)),0<(v=Gr(r,b)).length&&(b=new yn(b,e,null,n,a),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=Fn(n))&&(b.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Nn&&On(e,t)?(e=Zt(),Qt=Jt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(a=new yn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}Ur(o,t)}))}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Ne(e,n))&&r.unshift(Vr(e,i,a)),null!=(i=Ne(e,t))&&r.push(Vr(e,i,a))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,a?null!=(l=Ne(n,i))&&o.unshift(Vr(n,l,s)):a||null!=(l=Ne(n,i))&&o.push(Vr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Kr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(i(425))}function Qr(){}var Zr=null;function $r(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ea="function"===typeof setTimeout?setTimeout:void 0,ta="function"===typeof clearTimeout?clearTimeout:void 0,na="function"===typeof Promise?Promise:void 0,ra="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof na?function(e){return na.resolve(null).then(e).catch(aa)}:ea;function aa(e){setTimeout((function(){throw e}))}function ia(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);zt(t)}function oa(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function sa(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var la=Math.random().toString(36).slice(2),ua="__reactFiber$"+la,ca="__reactProps$"+la,ha="__reactContainer$"+la,fa="__reactEvents$"+la,da="__reactListeners$"+la,pa="__reactHandles$"+la;function ma(e){var t=e[ua];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ha]||n[ua]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=sa(e);null!==e;){if(n=e[ua])return n;e=sa(e)}return t}n=(e=n).parentNode}return null}function ga(e){return!(e=e[ua]||e[ha])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function va(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ya(e){return e[ca]||null}var ba=[],xa=-1;function wa(e){return{current:e}}function _a(e){0>xa||(e.current=ba[xa],ba[xa]=null,xa--)}function ka(e,t){xa++,ba[xa]=e.current,e.current=t}var Sa={},Ma=wa(Sa),Ta=wa(!1),Ea=Sa;function Aa(e,t){var n=e.type.contextTypes;if(!n)return Sa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ca(e){return null!==(e=e.childContextTypes)&&void 0!==e}function La(){_a(Ta),_a(Ma)}function Ra(e,t,n){if(Ma.current!==Sa)throw Error(i(168));ka(Ma,t),ka(Ta,n)}function Na(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,V(e)||"Unknown",a));return j({},n,r)}function Pa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sa,Ea=Ma.current,ka(Ma,e),ka(Ta,Ta.current),!0}function Ia(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Na(e,t,Ea),r.__reactInternalMemoizedMergedChildContext=e,_a(Ta),_a(Ma),ka(Ma,e)):_a(Ta),ka(Ta,n)}var Da=null,Ua=!1,ja=!1;function Oa(e){null===Da?Da=[e]:Da.push(e)}function Fa(){if(!ja&&null!==Da){ja=!0;var e=0,t=yt;try{var n=Da;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Da=null,Ua=!1}catch(a){throw null!==Da&&(Da=Da.slice(e+1)),Ke($e,Fa),a}finally{yt=t,ja=!1}}return null}var Ba=x.ReactCurrentBatchConfig;function za(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ha=wa(null),Va=null,Ga=null,Wa=null;function qa(){Wa=Ga=Va=null}function Ka(e){var t=Ha.current;_a(Ha),e._currentValue=t}function Xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ya(e,t){Va=e,Wa=Ga=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vs=!0),e.firstContext=null)}function Ja(e){var t=e._currentValue;if(Wa!==e)if(e={context:e,memoizedValue:t,next:null},null===Ga){if(null===Va)throw Error(i(308));Ga=e,Va.dependencies={lanes:0,firstContext:e}}else Ga=Ga.next=e;return t}var Qa=null,Za=!1;function $a(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ei(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ti(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ni(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==yl&&0!==(1&e.mode)&&0===(2&vl)?(null===(e=n.interleaved)?(t.next=t,null===Qa?Qa=[n]:Qa.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function ri(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function ai(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ii(e,t,n,r){var a=e.updateQueue;Za=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?i=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==i){var h=a.baseState;for(o=0,c=u=l=null,s=i;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(f=t,d=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=m.payload)?p.call(d,h,f):p)||void 0===f)break e;h=j({},h,f);break e;case 2:Za=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=d,l=h):c=c.next=d,o|=f;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===c&&(l=h),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=h}}function oi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var si=(new r.Component).refs;function li(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ui={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Hl(),a=Vl(e),i=ti(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ni(e,i),null!==(t=Gl(e,a,r))&&ri(t,e,a)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Hl(),a=Vl(e),i=ti(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ni(e,i),null!==(t=Gl(e,a,r))&&ri(t,e,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Hl(),r=Vl(e),a=ti(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),ni(e,a),null!==(t=Gl(e,r,n))&&ri(t,e,r)}};function ci(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(a,i))}function hi(e,t,n){var r=!1,a=Sa,i=t.contextType;return"object"===typeof i&&null!==i?i=Ja(i):(a=Ca(t)?Ea:Ma.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Aa(e,a):Sa),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ui,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function fi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ui.enqueueReplaceState(t,t.state,null)}function di(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=si,$a(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Ja(i):(i=Ca(t)?Ea:Ma.current,a.context=Aa(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(li(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ui.enqueueReplaceState(a,a.state,null),ii(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}var pi=[],mi=0,gi=null,vi=0,yi=[],bi=0,xi=null,wi=1,_i="";function ki(e,t){pi[mi++]=vi,pi[mi++]=gi,gi=e,vi=t}function Si(e,t,n){yi[bi++]=wi,yi[bi++]=_i,yi[bi++]=xi,xi=e;var r=wi;e=_i;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,wi=1<<32-ot(t)+a|n<<a|r,_i=i+e}else wi=1<<i|n<<a|r,_i=e}function Mi(e){null!==e.return&&(ki(e,1),Si(e,1,0))}function Ti(e){for(;e===gi;)gi=pi[--mi],pi[mi]=null,vi=pi[--mi],pi[mi]=null;for(;e===xi;)xi=yi[--bi],yi[bi]=null,_i=yi[--bi],yi[bi]=null,wi=yi[--bi],yi[bi]=null}var Ei=null,Ai=null,Ci=!1,Li=null;function Ri(e,t){var n=xu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ni(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ei=e,Ai=oa(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ei=e,Ai=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xi?{id:wi,overflow:_i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=xu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ei=e,Ai=null,!0);default:return!1}}function Pi(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Ii(e){if(Ci){var t=Ai;if(t){var n=t;if(!Ni(e,t)){if(Pi(e))throw Error(i(418));t=oa(n.nextSibling);var r=Ei;t&&Ni(e,t)?Ri(r,n):(e.flags=-4097&e.flags|2,Ci=!1,Ei=e)}}else{if(Pi(e))throw Error(i(418));e.flags=-4097&e.flags|2,Ci=!1,Ei=e}}}function Di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ei=e}function Ui(e){if(e!==Ei)return!1;if(!Ci)return Di(e),Ci=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!$r(e.type,e.memoizedProps)),t&&(t=Ai)){if(Pi(e)){for(e=Ai;e;)e=oa(e.nextSibling);throw Error(i(418))}for(;t;)Ri(e,t),t=oa(t.nextSibling)}if(Di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ai=oa(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ai=null}}else Ai=Ei?oa(e.stateNode.nextSibling):null;return!0}function ji(){Ai=Ei=null,Ci=!1}function Oi(e){null===Li?Li=[e]:Li.push(e)}function Fi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===si&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Bi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zi(e){return(0,e._init)(e._payload)}function Hi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=_u(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Tu(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){var i=n.type;return i===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&zi(i)===t.type)?((r=a(t,n.props)).ref=Fi(e,t,n),r.return=e,r):((r=ku(n.type,n.key,n.props,null,e.mode,r)).ref=Fi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Eu(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Su(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Tu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=ku(t.type,t.key,t.props,null,e.mode,n)).ref=Fi(e,null,t),n.return=e,n;case _:return(t=Eu(t,e.mode,n)).return=e,t;case N:return f(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Su(t,e.mode,n,null)).return=e,t;Bi(e,t)}return null}function d(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?u(e,t,n,r):null;case _:return n.key===a?c(e,t,n,r):null;case N:return d(e,t,(a=n._init)(n._payload),r)}if(te(n)||D(n))return null!==a?null:h(e,t,n,r,null);Bi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case N:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||D(r))return h(t,e=e.get(n)||null,r,a,null);Bi(t,r)}return null}function m(a,i,s,l){for(var u=null,c=null,h=i,m=i=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=d(a,h,s[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(a,h),i=o(v,i,m),null===c?u=v:c.sibling=v,c=v,h=g}if(m===s.length)return n(a,h),Ci&&ki(a,m),u;if(null===h){for(;m<s.length;m++)null!==(h=f(a,s[m],l))&&(i=o(h,i,m),null===c?u=h:c.sibling=h,c=h);return Ci&&ki(a,m),u}for(h=r(a,h);m<s.length;m++)null!==(g=p(h,a,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),i=o(g,i,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(a,e)})),Ci&&ki(a,m),u}function g(a,s,l,u){var c=D(l);if("function"!==typeof c)throw Error(i(150));if(null==(l=c.call(l)))throw Error(i(151));for(var h=c=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=d(a,m,y.value,u);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(a,m),s=o(b,s,g),null===h?c=b:h.sibling=b,h=b,m=v}if(y.done)return n(a,m),Ci&&ki(a,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=f(a,y.value,u))&&(s=o(y,s,g),null===h?c=y:h.sibling=y,h=y);return Ci&&ki(a,g),c}for(m=r(a,m);!y.done;g++,y=l.next())null!==(y=p(m,a,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(a,e)})),Ci&&ki(a,g),c}return function e(r,i,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var u=o.key,c=i;null!==c;){if(c.key===u){if((u=o.type)===k){if(7===c.tag){n(r,c.sibling),(i=a(c,o.props.children)).return=r,r=i;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===N&&zi(u)===c.type){n(r,c.sibling),(i=a(c,o.props)).ref=Fi(r,c,o),i.return=r,r=i;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===k?((i=Su(o.props.children,r.mode,l,o.key)).return=r,r=i):((l=ku(o.type,o.key,o.props,null,r.mode,l)).ref=Fi(r,i,o),l.return=r,r=l)}return s(r);case _:e:{for(c=o.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Eu(o,r.mode,l)).return=r,r=i}return s(r);case N:return e(r,i,(c=o._init)(o._payload),l)}if(te(o))return m(r,i,o,l);if(D(o))return g(r,i,o,l);Bi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Tu(o,r.mode,l)).return=r,r=i),s(r)):n(r,i)}}var Vi=Hi(!0),Gi=Hi(!1),Wi={},qi=wa(Wi),Ki=wa(Wi),Xi=wa(Wi);function Yi(e){if(e===Wi)throw Error(i(174));return e}function Ji(e,t){switch(ka(Xi,t),ka(Ki,e),ka(qi,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_a(qi),ka(qi,t)}function Qi(){_a(qi),_a(Ki),_a(Xi)}function Zi(e){Yi(Xi.current);var t=Yi(qi.current),n=le(t,e.type);t!==n&&(ka(Ki,e),ka(qi,n))}function $i(e){Ki.current===e&&(_a(qi),_a(Ki))}var eo=wa(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var ao=x.ReactCurrentDispatcher,io=x.ReactCurrentBatchConfig,oo=0,so=null,lo=null,uo=null,co=!1,ho=!1,fo=0,po=0;function mo(){throw Error(i(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function vo(e,t,n,r,a,o){if(oo=o,so=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ao.current=null===e||null===e.memoizedState?$o:es,e=n(r,a),ho){o=0;do{if(ho=!1,fo=0,25<=o)throw Error(i(301));o+=1,uo=lo=null,t.updateQueue=null,ao.current=ts,e=n(r,a)}while(ho)}if(ao.current=Zo,t=null!==lo&&null!==lo.next,oo=0,uo=lo=so=null,co=!1,t)throw Error(i(300));return e}function yo(){var e=0!==fo;return fo=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===uo?so.memoizedState=uo=e:uo=uo.next=e,uo}function xo(){if(null===lo){var e=so.alternate;e=null!==e?e.memoizedState:null}else e=lo.next;var t=null===uo?so.memoizedState:uo.next;if(null!==t)uo=t,lo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(lo=e).memoizedState,baseState:lo.baseState,baseQueue:lo.baseQueue,queue:lo.queue,next:null},null===uo?so.memoizedState=uo=e:uo=uo.next=e}return uo}function wo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=xo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=lo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var l=s=null,u=null,c=o;do{var h=c.lane;if((oo&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=f,s=r):u=u.next=f,so.lanes|=h,Ml|=h}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,ir(r,t.memoizedState)||(vs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,so.lanes|=o,Ml|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ko(e){var t=xo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);ir(o,t.memoizedState)||(vs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function Mo(e,t){var n=so,r=xo(),a=t(),o=!ir(r.memoizedState,a);if(o&&(r.memoizedState=a,vs=!0),r=r.queue,Uo(Ao.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==uo&&1&uo.memoizedState.tag){if(n.flags|=2048,Ro(9,Eo.bind(null,n,r,a,t),void 0,null),null===yl)throw Error(i(349));0!==(30&oo)||To(n,t,a)}return a}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=so.updateQueue)?(t={lastEffect:null,stores:null},so.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Eo(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&Gl(e,1,-1)}function Ao(e,t,n){return n((function(){Co(t)&&Gl(e,1,-1)}))}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ir(e,n)}catch(r){return!0}}function Lo(e){var t=bo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ko.bind(null,so,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=so.updateQueue)?(t={lastEffect:null,stores:null},so.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function No(){return xo().memoizedState}function Po(e,t,n,r){var a=bo();so.flags|=e,a.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Io(e,t,n,r){var a=xo();r=void 0===r?null:r;var i=void 0;if(null!==lo){var o=lo.memoizedState;if(i=o.destroy,null!==r&&go(r,o.deps))return void(a.memoizedState=Ro(t,n,i,r))}so.flags|=e,a.memoizedState=Ro(1|t,n,i,r)}function Do(e,t){return Po(8390656,8,e,t)}function Uo(e,t){return Io(2048,8,e,t)}function jo(e,t){return Io(4,2,e,t)}function Oo(e,t){return Io(4,4,e,t)}function Fo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Io(4,4,Fo.bind(null,t,e),n)}function zo(){}function Ho(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{yt=n,io.transition=r}}function Wo(){return xo().memoizedState}function qo(e,t,n){var r=Vl(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e)?Yo(t,n):(Jo(e,t,n),null!==(e=Gl(e,r,n=Hl()))&&Qo(e,t,r))}function Ko(e,t,n){var r=Vl(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))Yo(t,a);else{Jo(e,t,a);var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,ir(s,o))return}catch(l){}null!==(e=Gl(e,r,n=Hl()))&&Qo(e,t,r)}}function Xo(e){var t=e.alternate;return e===so||null!==t&&t===so}function Yo(e,t){ho=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){null!==yl&&0!==(1&e.mode)&&0===(2&vl)?(null===(e=t.interleaved)?(n.next=n,null===Qa?Qa=[t]:Qa.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function Qo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Zo={readContext:Ja,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},$o={readContext:Ja,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:Ja,useEffect:Do,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,Fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=bo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qo.bind(null,so,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:Lo,useDebugValue:zo,useDeferredValue:function(e){var t=Lo(e),n=t[0],r=t[1];return Do((function(){var t=io.transition;io.transition={};try{r(e)}finally{io.transition=t}}),[e]),n},useTransition:function(){var e=Lo(!1),t=e[0];return e=Go.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=so,a=bo();if(Ci){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===yl)throw Error(i(349));0!==(30&oo)||To(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Do(Ao.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,Eo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=bo(),t=yl.identifierPrefix;if(Ci){var n=_i;t=":"+t+"R"+(n=(wi&~(1<<32-ot(wi)-1)).toString(32)+n),0<(n=fo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ja,useCallback:Ho,useContext:Ja,useEffect:Uo,useImperativeHandle:Bo,useInsertionEffect:jo,useLayoutEffect:Oo,useMemo:Vo,useReducer:_o,useRef:No,useState:function(){return _o(wo)},useDebugValue:zo,useDeferredValue:function(e){var t=_o(wo),n=t[0],r=t[1];return Uo((function(){var t=io.transition;io.transition={};try{r(e)}finally{io.transition=t}}),[e]),n},useTransition:function(){return[_o(wo)[0],xo().memoizedState]},useMutableSource:So,useSyncExternalStore:Mo,useId:Wo,unstable_isNewReconciler:!1},ts={readContext:Ja,useCallback:Ho,useContext:Ja,useEffect:Uo,useImperativeHandle:Bo,useInsertionEffect:jo,useLayoutEffect:Oo,useMemo:Vo,useReducer:ko,useRef:No,useState:function(){return ko(wo)},useDebugValue:zo,useDeferredValue:function(e){var t=ko(wo),n=t[0],r=t[1];return Uo((function(){var t=io.transition;io.transition={};try{r(e)}finally{io.transition=t}}),[e]),n},useTransition:function(){return[ko(wo)[0],xo().memoizedState]},useMutableSource:So,useSyncExternalStore:Mo,useId:Wo,unstable_isNewReconciler:!1};function ns(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function rs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var as,is,os,ss="function"===typeof WeakMap?WeakMap:Map;function ls(e,t,n){(n=ti(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Nl||(Nl=!0,Pl=r),rs(0,t)},n}function us(e,t,n){(n=ti(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){rs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){rs(0,t),"function"!==typeof r&&(null===Il?Il=new Set([this]):Il.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function cs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ss;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=pu.bind(null,e,t,n),t.then(e,e))}function hs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fs(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ti(-1,1)).tag=2,ni(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}function ds(e,t){if(!Ci)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ps(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ms(e,t,n){var r=t.pendingProps;switch(Ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ps(t),null;case 1:case 17:return Ca(t.type)&&La(),ps(t),null;case 3:return r=t.stateNode,Qi(),_a(Ta),_a(Ma),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ui(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Li&&(Yl(Li),Li=null))),ps(t),null;case 5:$i(t);var a=Yi(Xi.current);if(n=t.type,null!==e&&null!=t.stateNode)is(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return ps(t),null}if(e=Yi(qi.current),Ui(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ua]=t,r[ca]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(a=0;a<Pr.length;a++)jr(Pr[a],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":J(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ae(r,o),jr("invalid",r)}for(var l in ye(n,o),a=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(Jr(r.textContent,u,e),a=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(Jr(r.textContent,u,e),a=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":q(r),$(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Qr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ua]=t,e[ca]=r,as(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":jr("cancel",e),jr("close",e),a=r;break;case"iframe":case"object":case"embed":jr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Pr.length;a++)jr(Pr[a],e);a=r;break;case"source":jr("error",e),a=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),a=r;break;case"details":jr("toggle",e),a=r;break;case"input":J(e,r),a=Y(e,r),jr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=j({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),jr("invalid",e)}for(o in ye(n,a),u=a)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&jr("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":q(e),$(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ps(t),null;case 6:if(e&&null!=t.stateNode)os(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Xi.current),Yi(qi.current),Ui(t)){if(r=t.stateNode,n=t.memoizedProps,r[ua]=t,(o=r.nodeValue!==n)&&null!==(e=Ei))switch(l=0!==(1&e.mode),e.tag){case 3:Jr(r.nodeValue,n,l);break;case 5:!0!==e.memoizedProps[void 0]&&Jr(r.nodeValue,n,l)}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ua]=t,t.stateNode=r}return ps(t),null;case 13:if(_a(eo),r=t.memoizedState,Ci&&null!==Ai&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ai;r;)r=oa(r.nextSibling);return ji(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ui(t),null===e){if(!r)throw Error(i(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(i(317));r[ua]=t}else ji(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return ps(t),null}return null!==Li&&(Yl(Li),Li=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ui(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===kl&&(kl=3):au())),null!==t.updateQueue&&(t.flags|=4),ps(t),null);case 4:return Qi(),null===e&&Br(t.stateNode.containerInfo),ps(t),null;case 10:return Ka(t.type._context),ps(t),null;case 19:if(_a(eo),null===(o=t.memoizedState))return ps(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)ds(o,!1);else{if(0!==kl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=to(e))){for(t.flags|=128,ds(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ka(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Rl&&(t.flags|=128,r=!0,ds(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ds(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!Ci)return ps(t),null}else 2*Qe()-o.renderingStartTime>Rl&&1073741824!==n&&(t.flags|=128,r=!0,ds(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=eo.current,ka(eo,r?1&n|2:1&n),t):(ps(t),null);case 22:case 23:return eu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&wl)&&(ps(t),6&t.subtreeFlags&&(t.flags|=8192)):ps(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}as=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},is=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Yi(qi.current);var i,o=null;switch(n){case"input":a=Y(e,a),r=Y(e,r),o=[];break;case"select":a=j({},a,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(c in ye(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var l=a[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&jr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},os=function(e,t,n,r){n!==r&&(t.flags|=4)};var gs=x.ReactCurrentOwner,vs=!1;function ys(e,t,n,r){t.child=null===e?Gi(t,null,n,r):Vi(t,e.child,n,r)}function bs(e,t,n,r,a){n=n.render;var i=t.ref;return Ya(t,a),r=vo(e,t,n,r,i,a),n=yo(),null===e||vs?(Ci&&n&&Mi(t),t.flags|=1,ys(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Fs(e,t,a))}function xs(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||wu(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ku(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ws(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:or)(o,r)&&e.ref===t.ref)return Fs(e,t,a)}return t.flags|=1,(e=_u(i,r)).ref=t.ref,e.return=t,t.child=e}function ws(e,t,n,r,a){if(null!==e&&or(e.memoizedProps,r)&&e.ref===t.ref){if(vs=!1,0===(e.lanes&a))return t.lanes=e.lanes,Fs(e,t,a);0!==(131072&e.flags)&&(vs=!0)}return Ss(e,t,n,r,a)}function _s(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},ka(_l,wl),wl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,ka(_l,wl),wl|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==i?i.baseLanes:n,ka(_l,wl),wl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,ka(_l,wl),wl|=r;return ys(e,t,a,n),t.child}function ks(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,n,r,a){var i=Ca(n)?Ea:Ma.current;return i=Aa(t,i),Ya(t,a),n=vo(e,t,n,r,i,a),r=yo(),null===e||vs?(Ci&&r&&Mi(t),t.flags|=1,ys(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Fs(e,t,a))}function Ms(e,t,n,r,a){if(Ca(n)){var i=!0;Pa(t)}else i=!1;if(Ya(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),hi(t,n,r),di(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ja(u):u=Aa(t,u=Ca(n)?Ea:Ma.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&fi(t,o,r,u),Za=!1;var f=t.memoizedState;o.state=f,ii(t,r,o,a),l=t.memoizedState,s!==r||f!==l||Ta.current||Za?("function"===typeof c&&(li(t,n,c,r),l=t.memoizedState),(s=Za||ci(t,n,s,r,f,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ei(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:za(t.type,s),o.props=u,h=t.pendingProps,f=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ja(l):l=Aa(t,l=Ca(n)?Ea:Ma.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==l)&&fi(t,o,r,l),Za=!1,f=t.memoizedState,o.state=f,ii(t,r,o,a);var p=t.memoizedState;s!==h||f!==p||Ta.current||Za?("function"===typeof d&&(li(t,n,d,r),p=t.memoizedState),(u=Za||ci(t,n,u,r,f,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ts(e,t,n,r,i,a)}function Ts(e,t,n,r,a,i){ks(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&Ia(t,n,!1),Fs(e,t,i);r=t.stateNode,gs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Vi(t,e.child,null,i),t.child=Vi(t,null,s,i)):ys(e,t,s,i),t.memoizedState=r.state,a&&Ia(t,n,!0),t.child}function Es(e){var t=e.stateNode;t.pendingContext?Ra(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ra(0,t.context,!1),Ji(e,t.containerInfo)}function As(e,t,n,r,a){return ji(),Oi(a),t.flags|=256,ys(e,t,n,r),t.child}var Cs={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null}}function Rs(e,t,n){var r,a=t.pendingProps,o=eo.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ka(eo,1&o),null===e)return Ii(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=a.children,e=a.fallback,s?(a=t.mode,s=t.child,o={mode:"hidden",children:o},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=Mu(o,a,0,null),e=Su(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Cs,e):Ns(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,Ds(e,t,n,Error(i(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=a.fallback,o=t.mode,a=Mu({mode:"visible",children:a.children},o,0,null),(s=Su(s,o,n,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,0!==(1&t.mode)&&Vi(t,e.child,null,n),t.child.memoizedState=Ls(n),t.memoizedState=Cs,s);if(0===(1&t.mode))t=Ds(e,t,n,null);else if("$!"===r.data)t=Ds(e,t,n,Error(i(419)));else if(a=0!==(n&e.childLanes),vs||a){if(null!==(a=yl)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(a=0!==(s&(a.suspendedLanes|n))?0:s)&&a!==o.retryLane&&(o.retryLane=a,Gl(e,a,-1))}au(),t=Ds(e,t,n,Error(i(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=gu.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ai=oa(r.nextSibling),Ei=t,Ci=!0,Li=null,null!==n&&(yi[bi++]=wi,yi[bi++]=_i,yi[bi++]=xi,wi=n.id,_i=n.overflow,xi=t),(t=Ns(t,t.pendingProps.children)).flags|=4096);return t}return s?(a=Is(e,t,a.children,a.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Ls(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Cs,a):(n=Ps(e,t,a.children,n),t.memoizedState=null,n)}return s?(a=Is(e,t,a.children,a.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Ls(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Cs,a):(n=Ps(e,t,a.children,n),t.memoizedState=null,n)}function Ns(e,t){return(t=Mu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ps(e,t,n,r){var a=e.child;return e=a.sibling,n=_u(a,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Is(e,t,n,r,a){var i=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&i)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=_u(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=_u(o,r):(r=Su(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Ds(e,t,n,r){return null!==r&&Oi(r),Vi(t,e.child,null,n),(e=Ns(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Xa(e.return,t,n)}function js(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Os(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ys(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ka(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),js(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===to(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}js(t,!0,n,null,i);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=_u(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=_u(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Bs(e,t){switch(Ti(t),t.tag){case 1:return Ca(t.type)&&La(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qi(),_a(Ta),_a(Ma),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $i(t),null;case 13:if(_a(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));ji()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _a(eo),null;case 4:return Qi(),null;case 10:return Ka(t.type._context),null;case 22:case 23:return eu(),null;default:return null}}var zs=!1,Hs=!1,Vs="function"===typeof WeakSet?WeakSet:Set,Gs=null;function Ws(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){du(e,t,r)}else n.current=null}function qs(e,t,n){try{n()}catch(r){du(e,t,r)}}var Ks=!1;function Xs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&qs(t,n,i)}a=a.next}while(a!==r)}}function Ys(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Js(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function Qs(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var a=r,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&qs(t,n,i),r=r.next}while(r!==e)}break;case 1:if(Ws(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){du(t,n,o)}break;case 5:Ws(t,n);break;case 4:al(e,t,n)}}function Zs(e){var t=e.alternate;null!==t&&(e.alternate=null,Zs(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ua],delete t[ca],delete t[fa],delete t[da],delete t[pa])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $s(e){return 5===e.tag||3===e.tag||4===e.tag}function el(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||$s(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function tl(e){e:{for(var t=e.return;null!==t;){if($s(t))break e;t=t.return}throw Error(i(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(fe(t,""),n.flags&=-33),rl(e,n=el(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,nl(e,n=el(e),t);break;default:throw Error(i(161))}}function nl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(nl(e,t,n),e=e.sibling;null!==e;)nl(e,t,n),e=e.sibling}function rl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(rl(e,t,n),e=e.sibling;null!==e;)rl(e,t,n),e=e.sibling}function al(e,t,n){for(var r,a,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(i(160));switch(r=s.stateNode,s.tag){case 5:a=!1;break e;case 3:case 4:r=r.containerInfo,a=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var l=e,u=o,c=n,h=u;;)if(Qs(l,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===u)break e;for(;null===h.sibling;){if(null===h.return||h.return===u)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}a?(l=r,u=o.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):r.removeChild(o.stateNode)}else if(18===o.tag)a?(l=r,u=o.stateNode,8===l.nodeType?ia(l.parentNode,u):1===l.nodeType&&ia(l,u),zt(l)):ia(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,a=!0,o.child.return=o,o=o.child;continue}}else if(Qs(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function il(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return Xs(3,t,t.return),Ys(3,t),void Xs(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,a=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for("input"===e&&"radio"===r.type&&null!=r.name&&Q(n,r),be(e,a),t=be(e,r),a=0;a<o.length;a+=2){var s=o[a],l=o[a+1];"style"===s?ge(n,l):"dangerouslySetInnerHTML"===s?he(n,l):"children"===s?fe(n,l):b(n,s,l,t)}switch(e){case"input":Z(n,r);break;case"textarea":ie(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ne(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ne(n,!!r.multiple,r.defaultValue,!0):ne(n,!!r.multiple,r.multiple?[]:"",!1))}n[ca]=r}}return;case 6:if(null===t.stateNode)throw Error(i(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&zt(t.stateNode.containerInfo));case 13:case 19:return void ol(t)}throw Error(i(163))}function ol(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Vs),t.forEach((function(t){var r=vu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function sl(e,t,n){Gs=e,ll(e,t,n)}function ll(e,t,n){for(var r=0!==(1&e.mode);null!==Gs;){var a=Gs,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||zs;if(!o){var s=a.alternate,l=null!==s&&null!==s.memoizedState||Hs;s=zs;var u=Hs;if(zs=o,(Hs=l)&&!u)for(Gs=a;null!==Gs;)l=(o=Gs).child,22===o.tag&&null!==o.memoizedState?hl(a):null!==l?(l.return=o,Gs=l):hl(a);for(;null!==i;)Gs=i,ll(i,t,n),i=i.sibling;Gs=a,zs=s,Hs=u}ul(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Gs=i):ul(e)}}function ul(e){for(;null!==Gs;){var t=Gs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Hs||Ys(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Hs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:za(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&oi(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}oi(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(i(163))}Hs||512&t.flags&&Js(t)}catch(d){du(t,t.return,d)}}if(t===e){Gs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Gs=n;break}Gs=t.return}}function cl(e){for(;null!==Gs;){var t=Gs;if(t===e){Gs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Gs=n;break}Gs=t.return}}function hl(e){for(;null!==Gs;){var t=Gs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ys(4,t)}catch(l){du(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){du(t,a,l)}}var i=t.return;try{Js(t)}catch(l){du(t,i,l)}break;case 5:var o=t.return;try{Js(t)}catch(l){du(t,o,l)}}}catch(l){du(t,t.return,l)}if(t===e){Gs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Gs=s;break}Gs=t.return}}var fl,dl=Math.ceil,pl=x.ReactCurrentDispatcher,ml=x.ReactCurrentOwner,gl=x.ReactCurrentBatchConfig,vl=0,yl=null,bl=null,xl=0,wl=0,_l=wa(0),kl=0,Sl=null,Ml=0,Tl=0,El=0,Al=null,Cl=null,Ll=0,Rl=1/0,Nl=!1,Pl=null,Il=null,Dl=!1,Ul=null,jl=0,Ol=0,Fl=null,Bl=-1,zl=0;function Hl(){return 0!==(6&vl)?Qe():-1!==Bl?Bl:Bl=Qe()}function Vl(e){return 0===(1&e.mode)?1:0!==(2&vl)&&0!==xl?xl&-xl:null!==Ba.transition?(0===zl&&(e=ut,0===(4194240&(ut<<=1))&&(ut=64),zl=e),zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function Gl(e,t,n){if(50<Ol)throw Ol=0,Fl=null,Error(i(185));var r=Wl(e,t);return null===r?null:(gt(r,t,n),0!==(2&vl)&&r===yl||(r===yl&&(0===(2&vl)&&(Tl|=t),4===kl&&Jl(r,xl)),ql(r,n),1===t&&0===vl&&0===(1&e.mode)&&(Rl=Qe()+500,Ua&&Fa())),r)}function Wl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ql(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,l=a[o];-1===l?0!==(s&n)&&0===(s&r)||(a[o]=dt(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ft(e,e===yl?xl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Ua=!0,Oa(e)}(Ql.bind(null,e)):Oa(Ql.bind(null,e)),ra((function(){0===vl&&Fa()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=yu(n,Kl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Kl(e,t){if(Bl=-1,zl=0,0!==(6&vl))throw Error(i(327));var n=e.callbackNode;if(hu()&&e.callbackNode!==n)return null;var r=ft(e,e===yl?xl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=iu(e,r);else{t=r;var a=vl;vl|=2;var o=ru();for(yl===e&&xl===t||(Rl=Qe()+500,tu(e,t));;)try{su();break}catch(l){nu(e,l)}qa(),pl.current=o,vl=a,null!==bl?t=0:(yl=null,xl=0,t=kl)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=Xl(e,a))),1===t)throw n=Sl,tu(e,0),Jl(e,r),ql(e,Qe()),n;if(6===t)Jl(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!ir(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=iu(e,r))&&(0!==(o=pt(e))&&(r=o,t=Xl(e,o))),1===t))throw n=Sl,tu(e,0),Jl(e,r),ql(e,Qe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:cu(e,Cl);break;case 3:if(Jl(e,r),(130023424&r)===r&&10<(t=Ll+500-Qe())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&r)!==r){Hl(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ea(cu.bind(null,e,Cl),t);break}cu(e,Cl);break;case 4:if(Jl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dl(r/1960))-r)){e.timeoutHandle=ea(cu.bind(null,e,Cl),r);break}cu(e,Cl);break;default:throw Error(i(329))}}}return ql(e,Qe()),e.callbackNode===n?Kl.bind(null,e):null}function Xl(e,t){var n=Al;return e.current.memoizedState.isDehydrated&&(tu(e,t).flags|=256),2!==(e=iu(e,t))&&(t=Cl,Cl=n,null!==t&&Yl(t)),e}function Yl(e){null===Cl?Cl=e:Cl.push.apply(Cl,e)}function Jl(e,t){for(t&=~El,t&=~Tl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function Ql(e){if(0!==(6&vl))throw Error(i(327));hu();var t=ft(e,0);if(0===(1&t))return ql(e,Qe()),null;var n=iu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=Xl(e,r))}if(1===n)throw n=Sl,tu(e,0),Jl(e,t),ql(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cu(e,Cl),ql(e,Qe()),null}function Zl(e,t){var n=vl;vl|=1;try{return e(t)}finally{0===(vl=n)&&(Rl=Qe()+500,Ua&&Fa())}}function $l(e){null!==Ul&&0===Ul.tag&&0===(6&vl)&&hu();var t=vl;vl|=1;var n=gl.transition,r=yt;try{if(gl.transition=null,yt=1,e)return e()}finally{yt=r,gl.transition=n,0===(6&(vl=t))&&Fa()}}function eu(){wl=_l.current,_a(_l)}function tu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ta(n)),null!==bl)for(n=bl.return;null!==n;){var r=n;switch(Ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&La();break;case 3:Qi(),_a(Ta),_a(Ma),ro();break;case 5:$i(r);break;case 4:Qi();break;case 13:case 19:_a(eo);break;case 10:Ka(r.type._context);break;case 22:case 23:eu()}n=n.return}if(yl=e,bl=e=_u(e.current,null),xl=wl=t,kl=0,Sl=null,El=Tl=Ml=0,Cl=Al=null,null!==Qa){for(t=0;t<Qa.length;t++)if(null!==(r=(n=Qa[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}Qa=null}return e}function nu(e,t){for(;;){var n=bl;try{if(qa(),ao.current=Zo,co){for(var r=so.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}co=!1}if(oo=0,uo=lo=so=null,ho=!1,fo=0,ml.current=null,null===n||null===n.return){kl=1,Sl=t,bl=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=xl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=hs(s);if(null!==p){p.flags&=-257,fs(p,s,l,0,t),1&p.mode&&cs(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){cs(o,c,t),au();break e}u=Error(i(426))}else if(Ci&&1&l.mode){var v=hs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),fs(v,s,l,0,t),Oi(u);break e}}o=u,4!==kl&&(kl=2),null===Al?Al=[o]:Al.push(o),u=ns(u,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,ai(l,ls(0,u,t));break e;case 1:o=u;var y=l.type,b=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Il||!Il.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t,ai(l,us(l,o,t));break e}}l=l.return}while(null!==l)}uu(n)}catch(x){t=x,bl===n&&null!==n&&(bl=n=n.return);continue}break}}function ru(){var e=pl.current;return pl.current=Zo,null===e?Zo:e}function au(){0!==kl&&3!==kl&&2!==kl||(kl=4),null===yl||0===(268435455&Ml)&&0===(268435455&Tl)||Jl(yl,xl)}function iu(e,t){var n=vl;vl|=2;var r=ru();for(yl===e&&xl===t||tu(e,t);;)try{ou();break}catch(a){nu(e,a)}if(qa(),vl=n,pl.current=r,null!==bl)throw Error(i(261));return yl=null,xl=0,kl}function ou(){for(;null!==bl;)lu(bl)}function su(){for(;null!==bl&&!Ye();)lu(bl)}function lu(e){var t=fl(e.alternate,e,wl);e.memoizedProps=e.pendingProps,null===t?uu(e):bl=t,ml.current=null}function uu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ms(n,t,wl)))return void(bl=n)}else{if(null!==(n=Bs(n,t)))return n.flags&=32767,void(bl=n);if(null===e)return kl=6,void(bl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(bl=t);bl=t=e}while(null!==t);0===kl&&(kl=5)}function cu(e,t){var n=yt,r=gl.transition;try{gl.transition=null,yt=1,function(e,t,n){do{hu()}while(null!==Ul);if(0!==(6&vl))throw Error(i(327));var r=e.finishedWork,a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===yl&&(bl=yl=null,xl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Dl||(Dl=!0,yu(tt,(function(){return hu(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=gl.transition,gl.transition=null;var s=yt;yt=1;var l=vl;vl|=4,ml.current=null,function(e,t){if(hr(e=cr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==a&&3!==f.nodeType||(l=s+a),f!==o||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===a&&(l=s),d===o&&++h===r&&(u=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zr={focusedElem:e,selectionRange:n},Gs=t;null!==Gs;)if(e=(t=Gs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Gs=e;else for(;null!==Gs;){t=Gs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:za(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;if(1===x.nodeType)x.textContent="";else if(9===x.nodeType){var w=x.body;null!=w&&(w.textContent="")}break;default:throw Error(i(163))}}catch(_){du(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Gs=e;break}Gs=t.return}m=Ks,Ks=!1}(e,r),function(e,t){for(Gs=t;null!==Gs;){var n=(t=Gs).deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{al(e,a,t);var i=a.alternate;null!==i&&(i.return=null),a.return=null}catch(S){du(a,t,S)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,Gs=n;else for(;null!==Gs;){t=Gs;try{var o=t.flags;if(32&o&&fe(t.stateNode,""),512&o){var s=t.alternate;if(null!==s){var l=s.ref;null!==l&&("function"===typeof l?l(null):l.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(Ll=Qe())}break;case 22:var c=null!==t.memoizedState,h=t.alternate,f=null!==h&&null!==h.memoizedState;e:{a=c;for(var d=null,p=r=n=t;;){if(5===p.tag){if(null===d){d=p;var m=p.stateNode;if(a){var g=m.style;"function"===typeof g.setProperty?g.setProperty("display","none","important"):g.display="none"}else{var v=p.stateNode,y=p.memoizedProps.style,b=void 0!==y&&null!==y&&y.hasOwnProperty("display")?y.display:null;v.style.display=me("display",b)}}}else if(6===p.tag)null===d&&(p.stateNode.nodeValue=a?"":p.memoizedProps);else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}if(c&&!f&&0!==(1&n.mode)){Gs=n;for(var x=n.child;null!==x;){for(n=Gs=x;null!==Gs;){var w=(r=Gs).child;switch(r.tag){case 0:case 11:case 14:case 15:Xs(4,r,r.return);break;case 1:Ws(r,r.return);var _=r.stateNode;if("function"===typeof _.componentWillUnmount){var k=r.return;try{_.props=r.memoizedProps,_.state=r.memoizedState,_.componentWillUnmount()}catch(S){du(r,k,S)}}break;case 5:Ws(r,r.return);break;case 22:if(null!==r.memoizedState){cl(n);continue}}null!==w?(w.return=r,Gs=w):cl(n)}x=x.sibling}}}switch(4102&o){case 2:tl(t),t.flags&=-3;break;case 6:tl(t),t.flags&=-3,il(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,il(t.alternate,t);break;case 4:il(t.alternate,t)}}catch(S){du(t,t.return,S)}if(null!==(n=t.sibling)){n.return=t.return,Gs=n;break}Gs=t.return}}}(e,r),fr(Zr),Zr=null,e.current=r,sl(r,e,a),Je(),vl=l,yt=s,gl.transition=o}else e.current=r;if(Dl&&(Dl=!1,Ul=e,jl=a),0===(o=e.pendingLanes)&&(Il=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),ql(e,Qe()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(Nl)throw Nl=!1,e=Pl,Pl=null,e;0!==(1&jl)&&0!==e.tag&&hu(),0!==(1&(o=e.pendingLanes))?e===Fl?Ol++:(Ol=0,Fl=e):Ol=0,Fa()}(e,t,n)}finally{gl.transition=r,yt=n}return null}function hu(){if(null!==Ul){var e=bt(jl),t=gl.transition,n=yt;try{if(gl.transition=null,yt=16>e?16:e,null===Ul)var r=!1;else{if(e=Ul,Ul=null,jl=0,0!==(6&vl))throw Error(i(331));var a=vl;for(vl|=4,Gs=e.current;null!==Gs;){var o=Gs,s=o.child;if(0!==(16&Gs.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Gs=c;null!==Gs;){var h=Gs;switch(h.tag){case 0:case 11:case 15:Xs(8,h,o)}var f=h.child;if(null!==f)f.return=h,Gs=f;else for(;null!==Gs;){var d=(h=Gs).sibling,p=h.return;if(Zs(h),h===c){Gs=null;break}if(null!==d){d.return=p,Gs=d;break}Gs=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Gs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Gs=s;else e:for(;null!==Gs;){if(0!==(2048&(o=Gs).flags))switch(o.tag){case 0:case 11:case 15:Xs(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Gs=y;break e}Gs=o.return}}var b=e.current;for(Gs=b;null!==Gs;){var x=(s=Gs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Gs=x;else e:for(s=b;null!==Gs;){if(0!==(2048&(l=Gs).flags))try{switch(l.tag){case 0:case 11:case 15:Ys(9,l)}}catch(_){du(l,l.return,_)}if(l===s){Gs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Gs=w;break e}Gs=l.return}}if(vl=a,Fa(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(_){}r=!0}return r}finally{yt=n,gl.transition=t}}return!1}function fu(e,t,n){ni(e,t=ls(0,t=ns(n,t),1)),t=Hl(),null!==(e=Wl(e,1))&&(gt(e,1,t),ql(e,t))}function du(e,t,n){if(3===e.tag)fu(e,e,n);else for(;null!==t;){if(3===t.tag){fu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Il||!Il.has(r))){ni(t,e=us(t,e=ns(n,e),1)),e=Hl(),null!==(t=Wl(t,1))&&(gt(t,1,e),ql(t,e));break}}t=t.return}}function pu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Hl(),e.pingedLanes|=e.suspendedLanes&n,yl===e&&(xl&n)===n&&(4===kl||3===kl&&(130023424&xl)===xl&&500>Qe()-Ll?tu(e,0):El|=n),ql(e,t)}function mu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=Hl();null!==(e=Wl(e,t))&&(gt(e,t,n),ql(e,n))}function gu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),mu(e,n)}function vu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),mu(e,n)}function yu(e,t){return Ke(e,t)}function bu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xu(e,t,n,r){return new bu(e,t,n,r)}function wu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function _u(e,t){var n=e.alternate;return null===n?((n=xu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ku(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)wu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Su(n.children,a,o,t);case S:s=8,a|=8;break;case M:return(e=xu(12,n,t,2|a)).elementType=M,e.lanes=o,e;case C:return(e=xu(13,n,t,a)).elementType=C,e.lanes=o,e;case L:return(e=xu(19,n,t,a)).elementType=L,e.lanes=o,e;case P:return Mu(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case E:s=9;break e;case A:s=11;break e;case R:s=14;break e;case N:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=xu(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Su(e,t,n,r){return(e=xu(7,e,r,t)).lanes=n,e}function Mu(e,t,n,r){return(e=xu(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={},e}function Tu(e,t,n){return(e=xu(6,e,null,t)).lanes=n,e}function Eu(e,t,n){return(t=xu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Au(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Cu(e,t,n,r,a,i,o,s,l){return e=new Au(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=xu(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},$a(i),e}function Lu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Ru(e){if(!e)return Sa;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ca(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ca(n))return Na(e,n,t)}return t}function Nu(e,t,n,r,a,i,o,s,l){return(e=Cu(n,r,!0,e,0,i,0,s,l)).context=Ru(null),n=e.current,(i=ti(r=Hl(),a=Vl(n))).callback=void 0!==t&&null!==t?t:null,ni(n,i),e.current.lanes=a,gt(e,a,r),ql(e,r),e}function Pu(e,t,n,r){var a=t.current,i=Hl(),o=Vl(a);return n=Ru(n),null===t.context?t.context=n:t.pendingContext=n,(t=ti(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ni(a,t),null!==(e=Gl(a,o,i))&&ri(e,a,o),o}function Iu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Du(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Uu(e,t){Du(e,t),(e=e.alternate)&&Du(e,t)}fl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)vs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vs=!1,function(e,t,n){switch(t.tag){case 3:Es(t),ji();break;case 5:Zi(t);break;case 1:Ca(t.type)&&Pa(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;ka(Ha,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ka(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Rs(e,t,n):(ka(eo,1&eo.current),null!==(e=Fs(e,t,n))?e.sibling:null);ka(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Os(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),ka(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,_s(e,t,n)}return Fs(e,t,n)}(e,t,n);vs=0!==(131072&e.flags)}else vs=!1,Ci&&0!==(1048576&t.flags)&&Si(t,vi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var a=Aa(t,Ma.current);Ya(t,n),a=vo(null,t,r,e,a,n);var o=yo();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ca(r)?(o=!0,Pa(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,$a(t),a.updater=ui,t.stateNode=a,a._reactInternals=t,di(t,r,e,n),t=Ts(null,t,r,!0,o,n)):(t.tag=0,Ci&&o&&Mi(t),ys(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return wu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===R)return 14}return 2}(r),e=za(r,e),a){case 0:t=Ss(null,t,r,e,n);break e;case 1:t=Ms(null,t,r,e,n);break e;case 11:t=bs(null,t,r,e,n);break e;case 14:t=xs(null,t,r,za(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ss(e,t,r,a=t.elementType===r?a:za(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ms(e,t,r,a=t.elementType===r?a:za(r,a),n);case 3:e:{if(Es(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,ei(e,t),ii(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,r,n,a=Error(i(423)));break e}if(r!==a){t=As(e,t,r,n,a=Error(i(424)));break e}for(Ai=oa(t.stateNode.containerInfo.firstChild),Ei=t,Ci=!0,Li=null,n=Gi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ji(),r===a){t=Fs(e,t,n);break e}ys(e,t,r,n)}t=t.child}return t;case 5:return Zi(t),null===e&&Ii(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,$r(r,a)?s=null:null!==o&&$r(r,o)&&(t.flags|=32),ks(e,t),ys(e,t,s,n),t.child;case 6:return null===e&&Ii(t),null;case 13:return Rs(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Vi(t,null,r,n):ys(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,bs(e,t,r,a=t.elementType===r?a:za(r,a),n);case 7:return ys(e,t,t.pendingProps,n),t.child;case 8:case 12:return ys(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,ka(Ha,r._currentValue),r._currentValue=s,null!==o)if(ir(o.value,s)){if(o.children===a.children&&!Ta.current){t=Fs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=ti(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Xa(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ys(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ya(t,n),r=r(a=Ja(a)),t.flags|=1,ys(e,t,r,n),t.child;case 14:return a=za(r=t.type,t.pendingProps),xs(e,t,r,a=za(r.type,a),n);case 15:return ws(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:za(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ca(r)?(e=!0,Pa(t)):e=!1,Ya(t,n),hi(t,r,a),di(t,r,a,n),Ts(null,t,r,!0,e,n);case 19:return Os(e,t,n);case 22:return _s(e,t,n)}throw Error(i(156,t.tag))};var ju="function"===typeof reportError?reportError:function(e){console.error(e)};function Ou(e){this._internalRoot=e}function Fu(e){this._internalRoot=e}function Bu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Hu(){}function Vu(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Iu(o);s.call(e)}}Pu(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Iu(o);i.call(e)}}var o=Nu(t,r,e,0,null,!1,0,"",Hu);return e._reactRootContainer=o,e[ha]=o.current,Br(8===e.nodeType?e.parentNode:e),$l(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Iu(l);s.call(e)}}var l=Cu(e,0,!1,null,0,!1,0,"",Hu);return e._reactRootContainer=l,e[ha]=l.current,Br(8===e.nodeType?e.parentNode:e),$l((function(){Pu(t,l,n,r)})),l}(n,t,e,a,r);return Iu(o)}Fu.prototype.render=Ou.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Pu(e,t,null,null)},Fu.prototype.unmount=Ou.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;$l((function(){Pu(null,e,null,null)})),t[ha]=null}},Fu.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Ut(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ql(t,Qe()),0===(6&vl)&&(Rl=Qe()+500,Fa()))}break;case 13:var r=Hl();$l((function(){return Gl(e,1,r)})),Uu(e,1)}},wt=function(e){13===e.tag&&(Gl(e,134217728,Hl()),Uu(e,134217728))},_t=function(e){if(13===e.tag){var t=Hl(),n=Vl(e);Gl(e,n,t),Uu(e,n)}},kt=function(){return yt},St=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ya(r);if(!a)throw Error(i(90));K(r),Z(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=Zl,Ce=$l;var Gu={usingClientEntryPoint:!1,Events:[ga,va,ya,Te,Ee,Zl]},Wu={findFiberByHostInstance:ma,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},qu={bundleType:Wu.bundleType,version:Wu.version,rendererPackageName:Wu.rendererPackageName,rendererConfig:Wu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:Wu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ku.isDisabled&&Ku.supportsFiber)try{at=Ku.inject(qu),it=Ku}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Bu(t))throw Error(i(200));return Lu(e,t,null,n)},t.createRoot=function(e,t){if(!Bu(e))throw Error(i(299));var n=!1,r="",a=ju;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Cu(e,1,!1,null,0,n,0,r,a),e[ha]=t.current,Br(8===e.nodeType?e.parentNode:e),new Ou(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return $l(e)},t.hydrate=function(e,t,n){if(!zu(t))throw Error(i(200));return Vu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Bu(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=ju;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Nu(t,null,e,1,null!=n?n:null,a,0,o,s),e[ha]=t.current,Br(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Fu(t)},t.render=function(e,t,n){if(!zu(t))throw Error(i(200));return Vu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!zu(e))throw Error(i(40));return!!e._reactRootContainer&&($l((function(){Vu(null,null,e,!1,(function(){e._reactRootContainer=null,e[ha]=null}))})),!0)},t.unstable_batchedUpdates=Zl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!zu(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Vu(e,t,n,!1,r)},t.version="18.0.0-fc46dba67-20220329"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,i={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:u,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=u,t.jsxs=u},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,a)&&!S.hasOwnProperty(a)&&(i[a]=t[a]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===i?"."+A(l,0):i,w(o)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),C(o,t,a,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(l=0,i=""===i?".":i+":",w(e))for(var u=0;u<e.length;u++){var c=i+A(s=e[u],u);l+=C(s,t,a,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=C(s=s.value,t,a,c=i+A(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function L(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},P={transition:null},I={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};t.Children={map:L,forEach:function(e,t,n){L(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return L(e,(function(){t++})),t},toArray:function(e){return L(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_.call(t,u)&&!S.hasOwnProperty(u)&&(a[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=M,t.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(R){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),o=new A(r||[]);return i._invoke=function(e,t,n){var r=h;return function(a,i){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===a)throw i;return L()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=M(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var l=c(e,t,n);if("normal"===l.type){if(r=n.done?p:f,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(e,n,o),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(C([])));w&&w!==n&&r.call(w,i)&&(b=w);var _=y.prototype=g.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,i,o,s){var l=c(e[a],e,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(h).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function M(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=c(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:L}}function L(){return{value:t,done:!0}}return v.prototype=y,l(_,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},k(S.prototype),l(S.prototype,o,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new S(u(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(_),l(_,s,"Generator"),l(_,i,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>i(l,n))u<a&&0>i(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<a&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,f=null,d=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,x(e),!m)if(null!==r(u))m=!0,P(_);else{var t=r(c);null!==t&&I(w,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,y(T),T=-1),p=!0;var i=d;try{for(x(n),f=r(u);null!==f&&(!(f.expirationTime>n)||e&&!C());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(u)&&a(u),x(n)}else a(u);f=r(u)}if(null!==f)var l=!0;else{var h=r(c);null!==h&&I(w,h.startTime-n),l=!1}return l}finally{f=null,d=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,M=null,T=-1,E=5,A=-1;function C(){return!(t.unstable_now()-A<E)}function L(){if(null!==M){var e=t.unstable_now();A=e;var n=!0;try{n=M(!0,e)}finally{n?k():(S=!1,M=null)}}else S=!1}if("function"===typeof b)k=function(){b(L)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,N=R.port2;R.port1.onmessage=L,k=function(){N.postMessage(null)}}else k=function(){v(L,0)};function P(e){M=e,S||(S=!0,k())}function I(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(c,e),null===r(u)&&e===r(c)&&(g?(y(T),T=-1):g=!0,I(w,i-o))):(e.sortIndex=s,n(u,e),m||p||(m=!0,P(_))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},468:function(e){"use strict";e.exports=JSON.parse('[{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Tjaldur34.jpg","name":"Tjaldur","soundUrl":"https://fuglavefur.is/audio/tjaldur.ogg","thumb":"https://fuglavefur.is/thumbs/tjaldur.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/tjaldur.jpg","https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/Haematopus_ostralegus_Norway.jpg/240px-Haematopus_ostralegus_Norway.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Sandloa17.jpg","name":"Sandl\xf3a","soundUrl":"https://fuglavefur.is/audio/sandloa.ogg","thumb":"https://fuglavefur.is/thumbs/sandloa.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/sandloa.jpg","data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBUWFRgWFhYZGRgaGhocHBoaGBgaHBkaGhgaGRoYHBocIS4lHB4rIRgYJjgmKy8xNTU1GiQ7QDs0Py40NTEBDAwMEA8QHhISHzYrJSs0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NP/AABEIALYBFQMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAADAAECBAUGB//EAEAQAAEDAgQEAwUFBwMDBQAAAAEAAhEDIQQSMUEFUWFxIoGRBhMyobFCYnLB0QcUFSNS8PEzguEWc5I0Q0RTov/EABkBAAMBAQEAAAAAAAAAAAAAAAABAgMEBf/EACYRAAICAgICAgIDAQEAAAAAAAABAhEDIRIxQVEEEyJhFJGhwYH/2gAMAwEAAhEDEQA/AN1uEc5S/dCF0IptCi9rFv8AaYfUc69iBUat2vSYqb6DFSmmS4NGS0JZei1mYdin7hifJBxZkhhOyPRwqvimxHphqdoXFg6GFCsigjU4VlgCzlItRKgZCBVcVpOYFVr2Ginsvoya1ZyrGo47ouLcbrMdiHAqkv0Q3+zRYxx3RBTKosx0KwzGhVQgzi4IT8SQitrgqL2gooVlc47mhvrAoGKokXCz3PO6iU+JcY8iziKYKpCQUb3hhDlc2TMpLRvDHXY91KFJpTyublL2bUgRBTNJVmmE1RsKGyqINKIAk0KQIUjQgkk1De+6BsIiNQ2qTXJFBGtUgkHBMH3QBOEkTOE6ALVbiXIqm7HvO6AykOaIGNGq9ngvJ5fJifinndMys47qL3tlOHt2VqKRLk2TLn7FO4v2lKlmJsFqUMI87JNIabMkGojU6j1t08KBqFZbQZ0SbSGk2YTMS8bFXqOJfyWq2izomeWDks3JFqLKRxbhqhux8pYnEs6LPfimITQNMPUeHKu7CA7JmYpnNWaeKZzWnJEcWVf4cnGAhXhiGpn4tqOQcSqMPCZ1Mp6mKCrOxkIsVAsS8jULOrvCvYjFtIWY+oCVjllSNoRsg0ojSmbCUrgk2dSQUOShQEqRKjZQRoTlCbKmFLGiIephqGWIrCiwoZj7pntvKkWbpwZKLCh2qbQowlogonEpsqZuqK9yAGBTpAJJBQ7GBqT2A6BW87f6fkrWDZP2YXvHkGdh+HE6rUwXDG7haVNrQpPLdiocilEVKgxuytCu0cljYnFFu6ynYl7jqpcW9lppaOixWIbzWNicdG6za+fmVBtKdU1FickWTxN2xQanEHn7ScYAHRI8NKHBByKVWuTuosA5rUZwidlaHABFyikhW2YDo5ojCditWpwRg3Qhw9jdXITQbK9Jx5q0ykTuq1ZjR8JUaGKLdU7S8BTfkuuwpVWvSjVGHFAdkN+Ia/ZDaa0CTT2ZVfVKkydEbE4fcINF8Lz8ykns7Mbi1onVpWQ2PAsnfWJSZTkyuezUNnTJGN07SlsND5LKLGHdSLlJ7wgKIOEKYFkz3WTMfIsgYRpUTrZJhuptQBJoTO1umJgpolIYdrwdE5EoNxop03oGHaEk2dJIC5gqmfUQrwB2Kx2aXN0Rr3t+0vdadaPJVWajsQdCqWLxgG6q4nEOiS4DqTH1VNrCTLiCPr2UcdFcg767juYT0nkayrFB7AcpY8/hDH//AJa4u9QtL3bIByuEibtg+bTcHoQm5Rj2wSlLpGO/GjSLof7191E4h7lrvjyn7zXj5kQst+Pj4cru7mjz/wAwk8kauxxhLqjZp4k/0qw2seS548RfF3NB2AgyOcA5vkp0sVVInNb8G/UTMLP+RAv6JHRHGFqi7jEarnRi3kwYPTxMPbxC6kHk7OB5EBH245eQ4TibFXigKznuzHVVH1Bu6O4PfkrtCmX0RWaA6nmLc4IIzC0GNL2ur5QSuyeMm+grKTeatDCAhYlUxdpB81HD8Tfmy6Hbl5qPvj0ivql5Nd+BygrOqVSw2CelxJ9QS24kg9CDBB5EGVfw9AH4gtI/kjN6KBxbiLNVV1QnVsLoDhWhU8TQbqClONqmOMmnozG0wiaJVKTh2TB8rz8kUn0dkG2ghYDqVB7QLAqDnFO4WBWOjQnTpSnqMUbgJAFFBYQMkKYpgaIUzbROGxBmUhifTINkbLEEoRqBSzIBD1Gyp0wAkwXlO2pBNkhjsgzyUHMBslnk20OqMRF0DFRY6NUkhWTJAaGG91YEgd1pswDNQAVgVKFF0EEHuVYpyweF57TK9yVvo8qPFdgON8JxD8xoVWGP/j1GUnh9rhmdt/wyO65PDMJc5pwzGVGyHGg9+Ge38TGuyk66hdmHl3xO9Uei8lwORr40L2B0dA/4gOgIWUscu4v+zSOSPTRy78HicsCqHs3ZiG03g93tDc3mnHA8QAHBrKdrPovexvkxssHaCusrcIFSSxjWx9hwlv8AsPxM/CDF1kVcNkm9SmeYcXt9QRy0grjyOadSOqCi1aMZ2ErG9V5e+ReplgNE2aWkFhvrcGNFZxHAmQHUzAsYe2/k6S146gjsFbqYlpEPex45nwO9YA+SP75taR70N++WD0JBhY2zWkYj+GQPEWt5kM+RTOptAiQY0gR20PdalfBsZGcl5jmfoEF9NhacsCPsmB9ExMosY8iMxEdf1CdmIcBDiToOX1OihXe4GJi+2nrCrvJIseXyPzTRBYfiJkf8bafVVvZr2nbg8S6lVGbCYgxUa7RrzYVBPkD0vsFFji4nlHS3Rc77S4Z0F2jRcdZdBj1C0h2KW0ek+1lD+HVWVqbPeUniQ10loI2LwDAvIJ5rB4j+0Aln8nA4Zj5HicQ/e8ANaCdtTruuz9isUzifChh6rgXtZ7p9yXNy2pvM3kgAqlwj9l9Fgc7FvL7+FtN72tygakiCT9FfGn0RytHK+y3EmMzsc8OzF1Z9QtytY9/u25ZOwi7iB8QtYrqKmKIEi45jcc1cxmGwzG+6o0GsEAF4ANQltvE5wLneZ3XPYHgXuXPLa73B8ktcBEkgza066ATN5sujG8i01rwzKah2nvyEq8RJMKvUxB3QauEDXyTKlkGhWM8rTqjSME1dhm4giyC1lyVKnEqe0grmlNyVM2jGhw0lSIOiZ9SEmvEzBWdIrY7nkaqIfFyVJrpOiFiKgAl1gOdkcQsK6CJTyYVkYIsAJIhwDmkeIFpEyCnq4VwEi45ocQ5FQCdkZpNwAh18RkY97myGNJtqQP7+ShQxrXsD2GQ64KTix2iy15HdO525Q6b+qkCe6VMq0JvwlFL4AB7phT6qTmAQQUqAkANzCZOwAymTAX8NL2y5wbfbWEqfB3B3xPjouhZRgWCKx4byPde06PKVmBivZ17xLKz6b7a+Nh7sOh6j0KzcRieL4YDwMrsH2msB9QzK4d4hdoMW0akKNTiLNntHSVnJW/RpHX7OLw/7QXk5H4Y5jI/luO2tnCPmrH/VDHk+A2F81o5DO0yOwt0KvcV9zV+NjHO2dIDu2cHMsF/DdmvLRsyoS5ojlMR81lKE5Ku0axlFP0XqfFMM/wAbmOaRYu8L2TocpMPcR+FXcVTY8RmMgRF9h/SYK4zFYF4OUML9f9Ml48hAKJh/ax9GKdakagB0qF7KgHQkE+srleNrwbKaZ2mAouaC1zgRHgDgIHSfyVXE4XN4iG2JFlRwvF6VUfy35c0wypDXWtYSQ7a7SRe8K3hnugh3hI0kNE6XDSfyU9dl6fRl4mnMtJFpIMiCNZVZjWEG/i8so66yui92x8kOEyLHwlp3IMeJDdwwOmwLToDykxe8z1P6JWFGLwzCNrPDAYbqXRrcyGnn+vkq/wC0LCZcMx4GUNquYBBAcHNzAjzYbrosJQDXBmaDMD4db2i0aKz7VYFlXDfuxOapLXamA4TqRpYkdFriTkzObUUeReyvHq2Drtq0ZJ0LNng/ZI7xpdexN41i67M7qZog3ylwLj/tHw+Zlc/7OcCp4NubLnqEeJ5Fx91g+yOup+Q2zxBh3I8l2qKT/I5nJtfiZ9XEPBOZ0TzVZz3TMomPdmdoHDmPzVdt9Nom3NYZcjTpGmOFq2IMkkvOyhTY0HUnuiugiMuhuemxQq9ZjZkAzyIPay5nJy7N0kgrgBoT6aJ2ZQB4gep27p8O9ryZcGaAA2DvNSxOBiAAXdAPD6pDE6o0ReZ7AHtzSqPknKLjqj4Xhby0GBm3cfsjkOSO6hq3O0kf3KAoyq0x8Rzcp/RV8S85SHGQbHfbqrtXDPDpAlyAzBl93uDRNyenIJpiYP2P421jjgMUf5Tz/IqH/wBt7j8M/wBJJ/uba+K9tBw2q7D4jDlzm7giHD7LhOoIWTxfgTMVRDaJHvGnwkjKD0J6qXCMJ/GaH7vXeKeMwpyh7hmL6dxDhIJIIg32HNbJKWzJtrRj+2Ht87GMdSp0GUaZIzEmXG4IuLC/da3s7RpfuzadN3vHMl1RzZy5nkkNBPID+5Wrw79jNMFrq9cuaJzNY2J5Q7YK9icFQwZdRwrSBmLoeZAOUDU3cJ581HyG4w/FW/ReFJy26M+IH5wisp3aZm26z+GMxAa41Xscc0iBAA3BHTZXGuJPxEDnqDubLnejZB3VSQREH5EbJm3F7TvsCpBzYtczEnkLxGw1Tte0jxQOh57aaBIZBgJmRHbdJDqV6oDSAwTM25FJFgblLiLHaujuCEVnEaOgewn8Q/VYAwNQ/F4v9rPqjfwZ0Xc0d8p+UL2WmeYmjfysO7VEYWkT4mt7wDbzWRRwUCA5zuzco9YQsaC0XoPf5k/II4v2O16LOM/d2W8M8m3+iz345gnKwAmIJNuWhKpvxrHENOHqNg3GSA7oSRcX2KN/D31SMlF7TG5A9ZK1io+jGTl4Y44+LBuWdOQPmh4jj4dLXsaRoQ8Zh6H5pVPZKtqQzzM/ksjieFex0PD2HnIM7aGZ23VpQkvBm3OLL7cBgsT4HUch2NNxaB/tHhjyWjQ4HWaWsGJc9jvhFZjXuMbioACYGxMaaLkGYU52PZleGvaS24FiC4coMRrvC6L2grPe9jw8inkhj2VMriSbtDNzcddlw5oRWZY6pNN3+zsxTk8Ln201/R0/8ExLPgex7RNneC0i12kHU2z7aqvjG4pmUU8OXz4s2djGN/GXPGUbxf1XFYgVWXOJrN71XmI+8x8N80DEY2nUhtXFVHxtUqVMovtMp/wlfZP8x10dUMS1mYvqU31SZhnwU7aNc+73XN7Dugtx8G885LmSTuSdSVyrH0h4GHPJt8bmz0BZcq1/DgR8DweQLW/KQV0x+PGK/FmEvkyk/wAkdMzidHUuE73lUOK8aw7YLHMncOJYR1mFi1cE0Nsyo22uUPt5EKsOGB2j3Tt4CPrZOeNONNijlly0jUbx7DkRnYCdRmBBPey0OG0xVGZj6Z2yxJ9MyxsHwGbufHTKw366rSHDKDRa7huA0R6QuGWBeGjshml5TNN/CniPCT+Gk36lynRwLmiXPDD/AE1MjQP/ABF0PAcTyWBcR969vzH6FdbgKDa7A40WOad+faVg8a6s3WR+jlWUabbvq0TfUNk+S0MNQD4cx0tHM5R/4rTx/B6TTJpw3YCJ7So0KeHbYU3eqX1vwPmvJUrEkZWiRpN4Q8PgnDw2Ii5OvYdFtO92SIa8GO8dghNw51DjPIjXvyQ4NApJlJ+FBPwGZG45Kq7hjXbReLj+wtmjgKztJk+Q7yreE4W5h8ZzFTGDbKckkZmG4ObBhDbjuvMvbvh1bA484ihnY12R+caBzviaSNZImOq9xeQ1cP8AtCx9GpRdQe6xIJjWWmQBG8wuiK4mMnyMvhX7S8XXaGtoNJFnVCSGi3xR+QRqrnvcXudrOY2OtyFwGHbiWQym1+QuMANLY83AOjqbWK2KWIxbQSxjsoLQ1j3B5AiHPzgthpcLDaeknDJcmawVI6J1MxlBuZAGsn/Cgx58TQ2MpAMxDpbIcOYJkTzBWeMXjmho93Sl0wM8GGgGLuvY7E6FVsTj8RMnDiWDN4ajbNI08Nzzi5t3WVGmzpGNtAEbC25jUzab3TskAczFudzF99ysCl7TMMh9J4dBP2TsHfaiwymbbbq1T9paFg55YSROdjgALCbSLX7jdLiws2PdAEyYv0NxrvzSWQ32hwwJAfMHWH362gfL1SRxYWbwxRA1HYSY9QETDcRYbZ78oLSPIrPotDoy1Q+IsXw7TkUXEMaPiYR1Amf/ABsvZavaPMTrTNh2IaRqD5qDqOcQHdNfldYVN9AES/J3BB5aCwXR4SiyAWunqSppLsq76Bs4ST8bzA2bDR6gStLDljAABA7/AJnVDIJHNU8Z7yPCk66Q17ZZx+ObEZoWLXxAeCH5XtP9QBHz/RAfg6hnM2egIv0UW4A//VB0l2U/QpqNeQbsy+I8Hw4Gc0Wx0LxPfK4Sj8LAbhxTazwy4t8TnQSSXCH3ym/zKsYlr2A6+bSQB0Oiq5STtEahkGLGJH6wuTP+U0vWzfDqLf8A4OOGA3LAI0DZ84Ijr6lU6vB6Lqmb+azm0S1p6628rK/SI0zMDokyY+Qv8lOswgS17z+FoMWnv/lbrK0tGUsab2DoYMMgtDI5kODvVxMrSp1iNA06aZT16fRZbcTVEgCqPxOa1vlmZ+asNxTiNKZI5vYXHmfC0j1Wscql7Mnjr0XnV51gdsw9boIwzHSQ0gnU6nU7/F890N9YtFwHcmscPQZWifVR/iIMSx7PQEDzum2vIJegb+GuuWenha4gecX6oDOHViXD3ZiIBzs1J+IQ631vqLrQ/ft21DHUTI7tH6pjxVo1fJ3E6+o6rOWGEt/9LjkktAH8OqkCWyIMjMwDrAnXlFldwvEq9AgEPDBp4ZEZtM82gQL7IbOKA38Q7gfqjjiVPd47GP7lQ8EfDor7n5RE+0lRzgXsEExY7yRoe1u66HhmOY8SyDz0seo2WDU928ybyCMw8JgiCAW3IUsKxtN2ZhmdiSJM6kgSfNZ/VJdbK+yL70de2vF3Ngc4lFZjWcxK5qt7YBnhNMiBewgcgBuTssfjnEQ5jMgs45jGpkCLeeixnlUJKL7ZtDE5Rcl0jvXY9gmHj1VPFcYYwST9JXnbap2NzMCTJi1gOacjdxm51MWAmZJ+XJDyAoG/xH2hc+QzzdyH6rFoNDnEv5GSRJjxTIkHY+gQK1URlBgDxC9gReZtpadjdArcRoAw6qy4kjMImDfK0mDeOuvbOTlLRSUYlp1MCfDBM/ZbNxETAsBEn73M2MfFlALYkWcHag7umxGbUjlJvCyRx7D2D6rXCbnK8wSNZAuBAjX5ypD2hoAQKoBAcB4XjUHpvJsRFz2U8JemVzj7Ro06Ql2WdDEmQ4FoAIBOsOmQY18xOwzCMjH5HNdctDc/w3bdpIFmw3XW15SwWKpvZmbUD2uIBuACb21BBHIj6orLkwYy+IloM8wCRAbz3mBaJUtUylsr0eF0Q2XgOdmbLnuLyPhgw6TMSbf0q3hyJDSD4RAbYgNPhAABAaPi3HaNXpUxlzkhxMkGANRlJDRbUkTEz3lTNNrGG/JxdAk/F4bjy0+wN0MZIVxTH+kCCTENBiIEeIW8vUpJm1XwIOv/AG48hU0306TsnS0KgVXC5T4w0doHzsUmVSz4PD2fPyLOvNWKNdx0fnH3m39ZSfUjWmY3Ig/LVe4ku0eW2+mBq4p+wa7qWsHlMglAe51/CAeeV/Lm160G0A4S1jO72ZfnCE6riG2DGxza2VLQ0ymx9QC0T/3KgCs4YVTcvA6Zy6fVFptqm5e2ejdfJFfUcB4i3tmyn0SSS2HJvQZj6g2B/wBysMzm7oaspuLbJ1no7TzlDq45zhDXjzLT9YWcpRs0imaeIDD9oenzWZiX0xqac7S0BZlc1yfiYR019AhNY/NdrT5H9VjJq+jWKddmoXMdJblk6j3jr+VrdFQxFEi4Y2OQL7HmiuyQczI6+L8ipMqUgLECOWf6SsWrfg0vRVGLqblwG2ZrnAnsVbZUe8AQxwOo92//AAFq4BzHDwu8gI+srSFIRouiEWvJjNp+DlDSqNaQxkPJn4WtBk/eklW8PhazvjZTy8nWvpJvf0W45tvhFrqpiKkaAnpB+i3Uf2YtlFnDyficwcg0On1JsiOp5BECesEkdwU4h0y17esR+aA+hF8r45/8SmrXQnT7IV6xOmZv4AR6/wDCznY5rAc7nHXVpn1dceS1HssXMHefzVE188tDQQLHv12RLLGL2gWKTWmYVT2hDSQwAcpLreU/ol/1DN8xB/ESPQ/RSxXsq1xJBLSbwC0mJ1hVavsk6384tkwJYDsT9lJfKhHpIb+NN9ss1eK1Kjf9QDYObAvydP6j8kuL4x/7lQexxD8zmPLdDlkX+Xqsyp7M4htw9pAMTe52tl0XS8B9nXPw1XD1XA+MOaWHNBgWHWQuP5eXG+M0un/jOn4uLIuUG+1/pw9XHVzMvqGfvu1/v81WDTy+nzXSYn2MqtflbVY4dQ9p9ACJ81XHszWLiGvpuAtOY72iIJC1jlxvpmcsU12jE92eg7wlfmI/vqunoeyD8wD6jG3g5QSe4JhamG9mqTQDknUAvcSHagECYMHlyUyzwXWwjhm+ziKGGqPgMa521hDZ5ExA8yuhoex1Qta59RjM2gb4z3kEDzC6mnRc20RERlygCOQiOaMymXHMRG4OsZhAFysJfIfjRvHAl3sxuH+zfuh/6h7M1yWsbldyOUglw19AtqhRALA9znEnxEMaBmHYbERMC/dJj52OtgBIGki/WPmiZQJ8Wp0J2HSBO6wlNy7NoxUeglFoNnTAzGfFGWNQNL2nv5IfuGZQ0mY0kBvXaYMk7DW0JmNBgAACAc2YtAIFm21FtEZ1MyOxO0euxsLTeFJREgCGyYaIGUAbkxubAt13zJJoGYy49BLrQTaxSRoDTr02DSlfzCFFT7ILekAj5o4rv5hI1632cq99njorPoMP+o93aICG1lJnwEk8i4hXKjHfaaCq5cAf9MKGUitUxVSfC1w5RcfJRbTqukuYD5C/rdaDMQ4iPlCsswpcPEVDje7LUq1RgtovcY90xo6wfzRKPCTfOWdICvYnhx1zO9VkYgOaYkrGUYrvZpGTfRbfgmDaSORIHmhswzZ+FvmSVSa1x7JnAjQn1U1HwXcvJdq02DVjPUqpUy/ZY0fNQL3d+6gKZ3P1UviCst4Zrhp+i6HCvMX+q5f3bh/lEZWe06lXCSXZMk2dexw3UaoasDB4x7rGVfdiYtquiLvoykqJVch5rOr0n/YfbkSnfxXx5HMtGqrPrASWn/hZ5JpIqEWUsbw01JBe9rZEw4iellVZwGjec4G38x3pqtNlUlwBMgdFMvnXna0rhyTbfZ1xgkij+7hrIa9zHbuiXHaBI+aKzh7AwgvqGQ2QXkSNc0CIvCtVDNrX31UaLybOiQfksG2zRJIbA0MrYzkwTGYzE6egU2sa5xJtluLRLps4HXkoOEm+5jSIH6IrSOdhr/lQ1ZSddAMdQqPMMqvYYMlp1BjbbRUmYb3YANR5m0yBfkRG+srYrVJMCQTud7KAymM4mDuNDKa0J7AsZAyi8E3IJk8yBqAjNeLb7C0do807HlpJiRcg/RJtWbBt9Z2HomBGhTu6LGZIBsZ1/sqw4AaiTFh0AnyugUXZXudGrYJ1t05J50PlbW6GBI3uTcR4QfOU+IcIgDUA/eidJmUshiRPnr3JSpyXXkgNEaaoQBvcERcm2hOumsb9uaaoLABxEmwibDnyH6KFOo7PJIda0DS+6VKk4OOUjK4b6/4TAOx9zGkDYa3nVJQfQcTYgWCSnRVsO5pJkBSGIcOStYfCt2JhS/cWT6ag3m23WAvebPIKYrPOx9VAg6gwrlXCSSGkQCBvu4s5cwqtXCxlOYeItjX7UwTI0sVLaGkxGo4CS4JU+IZdUn8OlpIJAEWcIOsG06T+fJHZwabZxqRpyE87Ib9DS9gH8SB2VCrUa46LbZwcEfEPnyB5cihN4O3UOG515a7KJbLWjIOGB2jsj0+FzzWwzCMZqRvzmBMmCOhR5aBrEcxpdog318QUKER8mZbOEN3JUKnCmD7RV/F12tE5tyNCNCeeuixcVWJ0KpY4rdCcpPQ1XCtH2lEUJ0KHSa47ErUwmGduITqPhC35I4bCvHKFebh+am226DVxAG6olgsTQbqQO6wq1KNCCr2McXfC7yWZGuxXNmmumjfHHyhi3KDrMqckiwM80QGQBqkxjmmVxNnUkQFVzBdHZUBEIZM3ISnpKkYUUwAXA67FVnvcZgWRH7RqVIEjVIYwJPiMzoP+EZ1GwJ+KPRRa0kW23UshiZSAamDG0qYbaBbcpmMJHh8+qI2mJ6oCgZABAIsf7umdGeZt8gneJJ+qm2lbaEwIkEzc316qTXwMrbCBKcM56fVEyNNtEgHDebbRCGylDja1hqnJIGvYImQEgjzQUPXF7GB0lJJ5G5CSBF8g8yhuoDmf86pJL3jyAZaBzQzTBSSUMqJB7DzTmo4aFMkhMbRJ1Z0aquahNpPqkkmwXQzu59VNrMxuT6lJJRRZep8PFpMq9S4ewbJJIAmQ1ugQK1fokkmIysdWOklZLy7N8RTJLnm3ZtFaLFFpM3Vd7DOqSS5cjZtBB6VMxePmkKcmJsnSWLNEPVFoCVGmRefkkkjwHklWeJ0UWgESkkkMNSZ4e6HUNgAkkkBYDYgTqoNcASISSQMmwWKYi3VMkhAyTW7JzqQkkgCJp+qlBiJskkhAwGJaJjkkkkmB/9k="]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Skogarth46.jpg","name":"Sk\xf3gar\xfer\xf6stur","soundUrl":"https://fuglavefur.is/audio/skogarthrostur.ogg","thumb":"https://fuglavefur.is/thumbs/skogarthrostur.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/skogarthrostur.jpg","https://fuglavefur.is/ungar/skogarthrostur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Louthraell22.jpg","name":"L\xf3u\xfer\xe6ll","soundUrl":"https://fuglavefur.is/audio/louthraell.ogg","thumb":"https://fuglavefur.is/thumbs/louthraell.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/louthraell.jpg","http://wildlife.is/wp-content/grand-media/image/4R0A2145_1600x1067.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Sanderla23.jpg","name":"Sanderla","soundUrl":"https://fuglavefur.is/audio/sanderla.ogg","thumb":"https://fuglavefur.is/thumbs/sanderla.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/sanderla.jpg","https://nmsi.is/wp-content/uploads/2021/08/Sanderla23at.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Raudbrystingur31.jpg","name":"Rau\xf0brystingur","soundUrl":"https://fuglavefur.is/audio/raudbrystingur.ogg","thumb":"https://fuglavefur.is/thumbs/raudbrystingur.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/raudbrystingur.jpg","http://ornosk.com/wp-content/uploads/2015/05/raudbrystingar-2.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Hrossi42.jpg","name":"Hrossagaukur","soundUrl":"https://fuglavefur.is/audio/hrossagaukur.ogg","thumb":"https://fuglavefur.is/thumbs/hrossagaukur.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/hrossagaukur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Heidlo40.jpg","name":"Hei\xf0l\xf3a","soundUrl":"https://fuglavefur.is/audio/heidloa.ogg","thumb":"https://fuglavefur.is/thumbs/heidloa.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/heidloa.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Sendlingur10.jpg","name":"Sendlingur","soundUrl":"https://fuglavefur.is/audio/sendlingur.ogg","thumb":"https://fuglavefur.is/thumbs/sendlingur.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/sendlingur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Spoi31.jpg","name":"Sp\xf3i","soundUrl":"https://fuglavefur.is/audio/spoi.ogg","thumb":"https://fuglavefur.is/thumbs/spoi.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/spoi.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Jadrakan34.jpg","name":"Ja\xf0rakan","soundUrl":"https://fuglavefur.is/audio/jadrakan.ogg","thumb":"https://fuglavefur.is/thumbs/jadrakan.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/jadrakan.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Odinshani09.jpg","name":"\xd3\xf0inshani","soundUrl":"https://fuglavefur.is/audio/odinshani.ogg","thumb":"https://fuglavefur.is/thumbs/odinshani.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/odinshani.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Hettumafur39.jpg","name":"Hettum\xe1fur","soundUrl":"https://fuglavefur.is/audio/hettumavur.ogg","thumb":"https://fuglavefur.is/thumbs/hettumavur.jpg","category":0,"imgs":["https://fuglavefur.is/thumbs/hettumavur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Kria31.jpg","name":"Kr\xeda","soundUrl":"https://fuglavefur.is/audio/kria.ogg","thumb":"https://fuglavefur.is/thumbs/kria.jpg","category":0,"imgs":["https://fuglavefur.is/thumbs/kria.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Silfurmafur22.jpg","name":"Silfurm\xe1fur","soundUrl":"https://fuglavefur.is/audio/silfurmafur.ogg","thumb":"https://fuglavefur.is/thumbs/silfurmavur.jpg","category":0,"imgs":["https://fuglavefur.is/thumbs/silfurmavur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Rita28.jpg","name":"Rita","soundUrl":"https://fuglavefur.is/audio/rita.ogg","thumb":"https://fuglavefur.is/thumbs/rita.jpg","category":0,"imgs":["https://fuglavefur.is/thumbs/rita.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Svartbakur21.jpg","name":"Svartbakur","soundUrl":"https://fuglavefur.is/audio/svartbakur.ogg","thumb":"https://fuglavefur.is/thumbs/svartbakur.jpg","category":0,"imgs":["https://fuglavefur.is/thumbs/svartbakur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Silamafur23.jpg","name":"S\xedlam\xe1fur","soundUrl":"https://fuglavefur.is/audio/silamavur.ogg","thumb":"https://fuglavefur.is/thumbs/silamavur.jpg","category":0,"imgs":["https://fuglavefur.is/thumbs/silamavur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Skumur14.jpg","name":"Sk\xfamur","soundUrl":"https://fuglavefur.is/audio/skumur.ogg","thumb":"https://fuglavefur.is/thumbs/skumur.jpg","category":0,"imgs":["https://fuglavefur.is/thumbs/skumur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Kjoi21.jpg","name":"Kj\xf3i","soundUrl":"https://fuglavefur.is/audio/kjoi.ogg","thumb":"https://fuglavefur.is/thumbs/kjoi.jpg","category":0,"imgs":["https://fuglavefur.is/thumbs/kjoi.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Thufutittl14.jpg","name":"\xde\xfafutittlingur","soundUrl":"https://fuglavefur.is/audio/thufutittlingur.ogg","thumb":"https://fuglavefur.is/thumbs/thufutittlingur.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/thufutittlingur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Steindepill12.jpg","name":"Steindepill","soundUrl":"https://fuglavefur.is/audio/steindepill.ogg","thumb":"https://fuglavefur.is/thumbs/steindepill.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/steindepill.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Stari51.jpg","name":"Stari","soundUrl":"https://fuglavefur.is/audio/stari.ogg","thumb":"https://fuglavefur.is/thumbs/stari.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/stari.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Snjotittlingur43.jpg","name":"Snj\xf3tittlingur","soundUrl":"https://fuglavefur.is/audio/snjotittlingur.ogg","thumb":"https://fuglavefur.is/thumbs/snjotittlingur.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/snjotittlingur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Mariuerla16.jpg","name":"Mar\xeduerla","soundUrl":"https://fuglavefur.is/audio/mariuerla.ogg","thumb":"https://fuglavefur.is/thumbs/mariuerla.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/mariuerla.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Musarrindill17.jpg","name":"M\xfasarrindill","soundUrl":"https://fuglavefur.is/audio/musarrindill.ogg","thumb":"https://fuglavefur.is/thumbs/musarrindill.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/musarrindill.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Hrafn65.jpg","name":"Hrafn","soundUrl":"https://fuglavefur.is/audio/hrafn.ogg","thumb":"https://fuglavefur.is/thumbs/hrafn.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/hrafn.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Audnutittlingur06e.jpg","name":"Au\xf0nutittlingur","soundUrl":"https://fuglavefur.is/audio/audnutittlingur.ogg","thumb":"https://fuglavefur.is/thumbs/audnutittlingur.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/audnutittlingur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Alft53.jpg","name":"\xc1lft","soundUrl":"https://fuglavefur.is/audio/alft.ogg","thumb":"https://fuglavefur.is/thumbs/alft.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/alft.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Gragaes25.jpg","name":"Gr\xe1g\xe6s","soundUrl":"https://fuglavefur.is/audio/gragaes.ogg","thumb":"https://fuglavefur.is/thumbs/gragaes.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/gragaes.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Margaes38.jpg","name":"Marg\xe6s","soundUrl":"https://fuglavefur.is/audio/margaes.ogg","thumb":"https://fuglavefur.is/thumbs/margaes.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/margaes.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Stokkond35.jpg","name":"Stokk\xf6nd","soundUrl":"https://fuglavefur.is/audio/stokkond.ogg","thumb":"https://fuglavefur.is/thumbs/stokkond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/stokkond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Skufond19.jpg","name":"Sk\xfaf\xf6nd","soundUrl":"https://fuglavefur.is/audio/skufond.ogg","thumb":"https://fuglavefur.is/thumbs/skufond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/skufond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Duggond14.jpg","name":"Dugg\xf6nd","soundUrl":"https://fuglavefur.is/audio/duggond.ogg","thumb":"https://fuglavefur.is/thumbs/duggond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/duggond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Havella32.jpg","name":"H\xe1vella","soundUrl":"https://fuglavefur.is/audio/havella.ogg","thumb":"https://fuglavefur.is/thumbs/havella.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/havella.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Toppond38.jpg","name":"Topp\xf6nd","soundUrl":"https://fuglavefur.is/audio/toppond.ogg","thumb":"https://fuglavefur.is/thumbs/toppond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/toppond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Aedur59.jpg","name":"\xc6\xf0arfugl","soundUrl":"https://fuglavefur.is/audio/aedarfugl.ogg","thumb":"https://fuglavefur.is/thumbs/aedarfugl.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/aedarfugl.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Heidagaes17.jpg","name":"Hei\xf0ag\xe6s","soundUrl":"https://fuglavefur.is/audio/heidagaes.ogg","thumb":"https://fuglavefur.is/thumbs/heidagaes.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/heidagaes.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Lomur23.jpg","name":"L\xf3mur","soundUrl":"https://fuglavefur.is/audio/lomur.ogg","thumb":"https://fuglavefur.is/thumbs/lomur.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/lomur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Himbrimi22.jpg","name":"Himbrimi","soundUrl":"https://fuglavefur.is/audio/himbrimi.ogg","thumb":"https://fuglavefur.is/thumbs/himbrimi.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/himbrimi.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Husond31.jpg","name":"H\xfas\xf6nd","soundUrl":"https://fuglavefur.is/audio/husond.ogg","thumb":"https://fuglavefur.is/thumbs/husond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/husond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Dilaskarfur25.jpg","name":"D\xedlaskarfur","soundUrl":"https://fuglavefur.is/audio/dilaskarfur.ogg","thumb":"https://fuglavefur.is/thumbs/dilaskarfur.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/dilaskarfur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Fyll31.jpg","name":"F\xfdll","soundUrl":"https://fuglavefur.is/audio/fyll.ogg","thumb":"https://fuglavefur.is/thumbs/fyll.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/fyll.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Sula55.jpg","name":"S\xfala","soundUrl":"https://fuglavefur.is/audio/sula.ogg","thumb":"https://fuglavefur.is/thumbs/sula.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/sula.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Alka14.jpg","name":"\xc1lka","soundUrl":"https://fuglavefur.is/audio/alka.ogg","thumb":"https://fuglavefur.is/thumbs/alka.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/alka.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Lundi344.jpg","name":"Lundi","soundUrl":"https://fuglavefur.is/audio/lundi.ogg","thumb":"https://fuglavefur.is/thumbs/lundi.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/lundi.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Teista10.jpg","name":"Teista","soundUrl":"https://fuglavefur.is/audio/teista.ogg","thumb":"https://fuglavefur.is/thumbs/teista.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/teista.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Stuttnefja18.jpg","name":"Stuttnefja","soundUrl":"https://fuglavefur.is/audio/stuttnefja.ogg","thumb":"https://fuglavefur.is/thumbs/stuttnefja.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/stuttnefja.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Langvia10.jpg","name":"Langv\xeda","soundUrl":"https://fuglavefur.is/audio/langvia.ogg","thumb":"https://fuglavefur.is/thumbs/langvia.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/langvia.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Falki62.jpg","name":"F\xe1lki","soundUrl":"https://fuglavefur.is/audio/falki.ogg","thumb":"https://fuglavefur.is/thumbs/falki.jpg","category":5,"imgs":["https://fuglavefur.is/thumbs/falki.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Smyrill37.jpg","name":"Smyrill","soundUrl":"https://fuglavefur.is/audio/smyrill.ogg","thumb":"https://fuglavefur.is/thumbs/smyrill.jpg","category":5,"imgs":["https://fuglavefur.is/thumbs/smyrill.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Orn44.jpg","name":"Haf\xf6rn","soundUrl":"https://fuglavefur.is/audio/haforn.ogg","thumb":"https://fuglavefur.is/thumbs/haforn.jpg","category":5,"imgs":["https://fuglavefur.is/thumbs/haforn.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Brandugla24.jpg","name":"Brandugla","soundUrl":"https://fuglavefur.is/audio/brandugla.ogg","thumb":"https://fuglavefur.is/thumbs/brandugla.jpg","category":5,"imgs":["https://fuglavefur.is/thumbs/brandugla.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Rjupa33.jpg","name":"Rj\xfapa","soundUrl":"https://fuglavefur.is/audio/rjupa.ogg","thumb":"https://fuglavefur.is/thumbs/rjupa.jpg","category":5,"imgs":["https://fuglavefur.is/thumbs/rjupa.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Stelkur31.jpg","name":"Stelkur","soundUrl":"https://fuglavefur.is/audio/stelkur.ogg","thumb":"https://fuglavefur.is/thumbs/stelkur.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/stelkur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Florgodi24.jpg","name":"Fl\xf3rgo\xf0i","soundUrl":"https://fuglavefur.is/audio/florgodi.ogg","thumb":"https://fuglavefur.is/thumbs/florgodi.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/florgodi.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Gargond08.jpg","name":"Garg\xf6nd","soundUrl":"https://fuglavefur.is/audio/gargond.ogg","thumb":"https://fuglavefur.is/thumbs/gargond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/gargond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Raudhofdi11.jpg","name":"Rau\xf0h\xf6f\xf0a\xf6nd","soundUrl":"https://fuglavefur.is/audio/raudhofdaond.ogg","thumb":"https://fuglavefur.is/thumbs/raudhofdi.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/raudhofdi.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Helsingi24.jpg","name":"Helsingi","soundUrl":"https://fuglavefur.is/audio/helsingi.ogg","thumb":"https://fuglavefur.is/thumbs/helsingi.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/helsingi.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Toppskarfur18.jpg","name":"Toppskarfur","soundUrl":"https://fuglavefur.is/audio/toppskarfur.ogg","thumb":"https://fuglavefur.is/thumbs/toppskarfur.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/toppskarfur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Hrafnsond09.jpg","name":"Hrafns\xf6nd","soundUrl":"https://fuglavefur.is/audio/hrafnsond.ogg","thumb":"https://fuglavefur.is/thumbs/hrafnsond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/hrafnsond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Straumond31.jpg","name":"Straum\xf6nd","soundUrl":"https://fuglavefur.is/audio/straumond.ogg","thumb":"https://fuglavefur.is/thumbs/straumond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/straumond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Svartthrostur22.jpg","name":"Svart\xfer\xf6stur","soundUrl":"https://fuglavefur.is/audio/svartthrostur.ogg","thumb":"https://fuglavefur.is/thumbs/svartthrostur.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/svartthrostur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Urtond39.jpg","name":"Urt\xf6nd","soundUrl":"https://fuglavefur.is/audio/urtond.ogg","thumb":"https://fuglavefur.is/thumbs/urtond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/urtond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Skeidond16.jpg","name":"Skei\xf0\xf6nd","soundUrl":"https://fuglavefur.is/audio/skeidond.ogg","thumb":"https://fuglavefur.is/thumbs/skeidond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/skeidond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Hvitmafur07p.jpg","name":"Hv\xedtm\xe1fur","soundUrl":"https://fuglavefur.is/audio/hvitmafur.ogg","thumb":"https://fuglavefur.is/thumbs/hvitmafur.jpg","category":0,"imgs":["https://fuglavefur.is/thumbs/hvitmafur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Thorshani18.jpg","name":"\xde\xf3rshani","soundUrl":"https://fuglavefur.is/audio/thorshani.ogg","thumb":"https://fuglavefur.is/thumbs/thorshani.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/thorshani.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Bjartmafur05.jpg","name":"Bjartm\xe1fur","soundUrl":"https://fuglavefur.is/audio/bjartmafur.ogg","thumb":"https://fuglavefur.is/thumbs/bjartmafur.jpg","category":0,"imgs":["https://fuglavefur.is/thumbs/bjartmafur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Grafond15.jpg","name":"Graf\xf6nd","soundUrl":"https://fuglavefur.is/audio/grafond.ogg","thumb":"https://fuglavefur.is/thumbs/grafond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/grafond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Bjargdufa12.jpg","name":"Bjargd\xfafa","soundUrl":"https://fuglavefur.is/audio/bjargdufa.ogg","thumb":"https://fuglavefur.is/thumbs/bjargdufa.jpg","category":5,"imgs":["https://fuglavefur.is/thumbs/bjargdufa.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Blesgaes37.jpg","name":"Blesg\xe6s","soundUrl":"https://fuglavefur.is/audio/blesgaes.ogg","thumb":"https://fuglavefur.is/thumbs/blesgaes.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/blesgaes.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Brandond13e.jpg","name":"Brand\xf6nd","soundUrl":"https://fuglavefur.is/audio/brandond.ogg","thumb":"https://fuglavefur.is/thumbs/brandond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/brandond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Gulond19.jpg","name":"Gul\xf6nd","soundUrl":"https://fuglavefur.is/audio/gulond.ogg","thumb":"https://fuglavefur.is/thumbs/gulond.jpg","category":3,"imgs":["https://fuglavefur.is/thumbs/gulond.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Graspor05.jpg","name":"Gr\xe1sp\xf6r","soundUrl":"https://fuglavefur.is/audio/graspor.ogg","thumb":"https://fuglavefur.is/thumbs/graspor.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/graspor.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Sjosvala07.jpg","name":"Sj\xf3svala","soundUrl":"https://fuglavefur.is/audio/sjosvala.ogg","thumb":"https://fuglavefur.is/thumbs/sjosvala.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/sjosvala.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Grathrostur13.jpg","name":"Gr\xe1\xfer\xf6stur","soundUrl":"https://fuglavefur.is/audio/grathrostur.ogg","thumb":"https://fuglavefur.is/thumbs/grathrostur.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/grathrostur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Skrofa12.jpg","name":"Skrofa","soundUrl":"https://fuglavefur.is/audio/skrofa.ogg","thumb":"https://fuglavefur.is/thumbs/skrofa.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/skrofa.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Stormmafur11.jpg","name":"Stormm\xe1fur","soundUrl":"https://fuglavefur.is/audio/stormmafur.ogg","thumb":"https://fuglavefur.is/thumbs/stormmafur.jpg","category":0,"imgs":["https://fuglavefur.is/thumbs/stormmafur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Stormsvala07.jpg","name":"Stormsvala","soundUrl":"https://fuglavefur.is/audio/stormsvala.ogg","thumb":"https://fuglavefur.is/thumbs/stormsvala.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/stormsvala.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Tildra21.jpg","name":"Tildra","soundUrl":"https://fuglavefur.is/audio/tildra.ogg","thumb":"https://fuglavefur.is/thumbs/tildra.jpg","category":4,"imgs":["https://fuglavefur.is/thumbs/tildra.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Haftyrdill07.jpg","name":"Haftyr\xf0ill","soundUrl":"https://fuglavefur.is/audio/haftyrdill.ogg","thumb":"https://fuglavefur.is/thumbs/haftyrdill.jpg","category":2,"imgs":["https://fuglavefur.is/thumbs/haftyrdill.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Glokollur19.jpg","name":"Gl\xf3kollur","soundUrl":"https://fuglavefur.is/audio/glokollur.ogg","thumb":"https://fuglavefur.is/thumbs/glokollur.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/glokollur.jpg"]},{"imgUrl":"https://fuglavefur.is/fuglamyndir/lg/Krossnefur14.jpg","name":"Krossnefur","soundUrl":"https://fuglavefur.is/audio/krossnefur.ogg","thumb":"https://fuglavefur.is/thumbs/krossnefur.jpg","category":1,"imgs":["https://fuglavefur.is/thumbs/krossnefur.jpg"]}]')},851:function(e){"use strict";e.exports=JSON.parse('[{"name":"Stykkish\xf3lmur","id":"stykkisholmur","image":"images/stykkisholmur.jpg","category":"town","imgUrl":"https://imgur.com/7MFBMPH.jpg"},{"name":"\xd3lafsv\xedk","id":"olafsvik","image":"images/olafsvik.jpg","category":"town","imgUrl":"https://imgur.com/mRsTITn.jpg"},{"name":"Sn\xe6fellsj\xf6kull","id":"","image":"images/snaefellsjokull.jpg","category":"glacier","imgUrl":"https://imgur.com/AktIIBw.jpg"},{"name":"Langj\xf6kull","id":"","image":"images/langjokull.jpg","category":"glacier","imgUrl":"https://imgur.com/xN8H79T.jpg"},{"name":"Hofsj\xf6kull","id":"","image":"images/hofsjokull.jpg","category":"glacier","imgUrl":"https://imgur.com/0sFVTYl.jpg"},{"name":"Drangaj\xf6kull","id":"","image":"images/drangajokull.jpg","category":"glacier","imgUrl":"https://imgur.com/fDuPmwa.jpg"},{"name":"Vatnaj\xf6kull","id":"","image":"images/vatnajokull.jpg","category":"glacier","imgUrl":"https://imgur.com/EJJGthS.jpg"},{"name":"M\xfdrdalsj\xf6kull","id":"","image":"images/myrdalsjokull","category":"glacier","imgUrl":"https://imgur.com/7rGkKqx.jpg"},{"name":"Eyjafjallajokull","id":"","image":"images/eyjafjallajokull.jpg","category":"glacier","imgUrl":"https://imgur.com/thVxrxv.jpg"},{"name":"Tindfjallajokull","id":"","image":"images/tindfjallajokull.jpg","category":"glacier","imgUrl":"https://imgur.com/vTi7STw.jpg"},{"name":"Eir\xedksj\xf6kull","id":"","image":"images/eiriksjokull.jpg","category":"glacier","imgUrl":"https://imgur.com/5m3XQQH.jpg"},{"name":"Raufarh\xf6fn","id":"","image":"images/raufarhofn.jpg","category":"town","imgUrl":"https://imgur.com/IGvwC7W.jpg"},{"name":"K\xf3pasker","id":"","image":"images/kopasker.jpg","category":"town","imgUrl":"https://imgur.com/S2bi9tm.jpg"},{"name":"Bakkafl\xf3i","id":"","image":"images/bakkafloi.jpg","category":"fjord","imgUrl":"https://imgur.com/TGEnCtX.jpg"},{"name":"\xdeistilfj\xf6r\xf0ur","id":"","image":"images/thistilfjordur.jpg","category":"fjord","imgUrl":"https://imgur.com/JhtZSUZ.jpg"},{"name":"Vopnafj\xf6r\xf0ur","id":"","image":"images/vopnafjordur.jpg","category":"fjord","imgUrl":"https://imgur.com/TovCUy9.jpg"},{"name":"Sey\xf0isfj\xf6r\xf0ur","id":"","image":"images/seydisfjordur.jpg","category":"fjord","imgUrl":"https://imgur.com/QSy2zto.jpg"},{"name":"Mj\xf3ifj\xf6r\xf0ur","id":"","image":"images/mjoifjordur.jpg","category":"fjord","imgUrl":"https://imgur.com/U88Gfup.jpg"},{"name":"Rey\xf0arfj\xf6r\xf0ur","id":"","image":"images/reydarfjordur.jpg","category":"fjord","imgUrl":"https://imgur.com/m3xyykA.jpg"},{"name":"Eskifj\xf6r\xf0ur","id":"","image":"images/eskifjordur.jpg","category":"fjord","imgUrl":"https://imgur.com/a4AlcHY.jpg"},{"name":"Eyjafj\xf6r\xf0ur","id":"","image":"images/eyjafjordur.jpg","category":"fjord","imgUrl":"https://imgur.com/g4ejchV.jpg"},{"name":"Skagafj\xf6r\xf0ur","id":"","image":"images/skagafjordur.jpg","category":"fjord","imgUrl":"https://imgur.com/mKnPuol.jpg"},{"name":"Skj\xe1lfandi","id":"","image":"images/skjalfandi.jpg","category":"fjord","imgUrl":"https://imgur.com/RLG8RHj.jpg"},{"name":"\xd6xarfj\xf6r\xf0ur","id":"","image":"images/oxnafjordur.jpg","category":"fjord","imgUrl":"https://imgur.com/atV2y8v.jpg"},{"name":"Bl\xf6ndul\xf3n","id":"","image":"images/blondulon.jpg","category":"lake","imgUrl":"https://imgur.com/IZKA2MZ.jpg"},{"name":"M\xfdvatn","id":"","image":"images/myvatn.jpg","category":"lake","imgUrl":"https://imgur.com/k3lNmNh.jpg"},{"name":"\xdeingvallavatn","id":"","image":"images/thingvallavatn.jpg","category":"lake","imgUrl":"https://imgur.com/i0VmB6d.jpg"},{"name":"Apavatn","id":"","image":"images/apavatn.jpg","category":"lake","imgUrl":"https://imgur.com/0VAcHH7.jpg"},{"name":"Hvolsv\xf6llur","id":"","image":"images/hvolsvollur.jpg","category":"town","imgUrl":"https://imgur.com/EtiuFFI.jpg"},{"name":"Markarflj\xf3t","id":"","image":"images/markarfljot.jpg","category":"river","imgUrl":"https://imgur.com/yZ9xcCm.jpg"},{"name":"\xdej\xf3rs\xe1","id":"","image":"images/thjorsa.jpg","category":"river","imgUrl":"https://imgur.com/RSA0Wvn.jpg"},{"name":"\xd6lfus\xe1","id":"","image":"images/olfusa.jpg","category":"river","imgUrl":"https://imgur.com/yxj3ivE.jpg"},{"name":"Kv\xedslavatn","id":"","image":"images/kvislavatn.jpg","category":"lake","imgUrl":"https://imgur.com/oK6fD9A.jpg"},{"name":"J\xf6kuls\xe1 \xe1 fj\xf6llum","id":"","image":"images/jokulsaafjollum.jpg","category":"river","imgUrl":"https://imgur.com/29HJacU.jpg"},{"name":"Lagarflj\xf3t","id":"","image":"images/lagarfljot.jpg","category":"river","imgUrl":"https://imgur.com/sjCBxVb.jpg"},{"name":"Blanda","id":"","image":"images/blanda.jpg","category":"river","imgUrl":"https://imgur.com/IqzeYDN.jpg"},{"name":"Skaft\xe1","id":"","image":"images/skafta.jpg","category":"river","imgUrl":"https://imgur.com/4qzfbRU.jpg"},{"name":"Skaftafells\xe1","id":"","image":"images/skafta.jpg","category":"river","imgUrl":"https://imgur.com/8DOY0iq.jpg"},{"name":"\xd6r\xe6faj\xf6kull","id":"","image":"images/oraefajokull.jpg","category":"glacier","imgUrl":"https://imgur.com/cd410N0.jpg"},{"name":"H\xe9ra\xf0sv\xf6tn","id":"","image":"images/heradsvotn.jpg","category":"river","imgUrl":"https://imgur.com/I8aXmD5.jpg"},{"name":"Faxafl\xf3i","id":"","image":"images/faxafloi.jpg","category":"fjord","imgUrl":"https://imgur.com/wLwaVjr.jpg"},{"name":"Hvalfj\xf6r\xf0ur","id":"","image":"images/hvalfjordur.jpg","category":"fjord","imgUrl":"https://imgur.com/5nGFmFp.jpg"},{"name":"Borgarfj\xf6r\xf0ur","id":"","image":"images/borgarfjordur.jpg","category":"fjord","imgUrl":"https://imgur.com/895KXO5.jpg"},{"name":"J\xf6kuls\xe1 \xed L\xf3ni","id":"","image":"images/jokulsailoni.jpg","category":"river","imgUrl":"https://imgur.com/P7DdiAj.jpg"},{"name":"\xde\xf3risvatn","id":"","image":"images/","category":"\xe1","imgUrl":"https://imgur.com/CiMeues.jpg"}]')},289:function(e){"use strict";e.exports=JSON.parse('[{"name":"Vallhumall","imgUrl":"https://myndir.ni.is/floraisl/hapl/achilmil2b.jpg","fullName":"Vallhumall (Achillea millefolium)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Silfurhnappur","imgUrl":"https://myndir.ni.is/floraisl/hapl/achilpta1b.jpg","fullName":"Silfurhnappur (Achillea ptarmica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"H\xe1l\xedngresi","imgUrl":"https://myndir.ni.is/floraisl/hapl/agroscap1g.jpg","fullName":"H\xe1l\xedngresi (Agrostis capillaris)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Skri\xf0l\xedngresi","imgUrl":"https://myndir.ni.is/floraisl/hapl/agrossto2g.jpg","fullName":"Skri\xf0l\xedngresi (Agrostis stolonifera)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Lyngb\xfai","imgUrl":"https://myndir.ni.is/floraisl/hapl/ajugapyr2b.jpg","fullName":"Lyngb\xfai (Ajuga pyramidalis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Lamiaceae"},{"name":"Lj\xf3nslappi","imgUrl":"https://myndir.ni.is/floraisl/hapl/alchealp1b.jpg","fullName":"Lj\xf3nslappi (Alchemilla alpina)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Mar\xeduv\xf6ttur","imgUrl":"https://myndir.ni.is/floraisl/hapl/alchefae1b.jpg","fullName":"Mar\xeduv\xf6ttur (Alchemilla faero\xebnsis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Hl\xed\xf0amar\xedustakkur","imgUrl":"https://myndir.ni.is/floraisl/hapl/alcheves1b.jpg","fullName":"Hl\xed\xf0amar\xedustakkur (Alchemilla filicaulis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Hno\xf0amar\xedustakkur","imgUrl":"https://myndir.ni.is/floraisl/hapl/alcheglo1b.jpg","fullName":"Hno\xf0amar\xedustakkur (Alchemilla glomerulans)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Hagamar\xedustakkur","imgUrl":"https://myndir.ni.is/floraisl/hapl/alchesub1b.jpg","fullName":"Hagamar\xedustakkur (Alchemilla subcrenata)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Villilaukur","imgUrl":"https://myndir.ni.is/floraisl/hapl/alliuole2g.jpg","fullName":"Villilaukur (Allium oleraceum)","category":"Tracheophyta","category2":"Liliopsida","category3":"Amaryllidaceae"},{"name":"Vatnsli\xf0agras","imgUrl":"https://myndir.ni.is/floraisl/hapl/alopeaeq1g.jpg","fullName":"Vatnsli\xf0agras (Alopecurus aequalis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Knj\xe1li\xf0agras","imgUrl":"https://myndir.ni.is/floraisl/hapl/alopegen1g.jpg","fullName":"Knj\xe1li\xf0agras (Alopecurus geniculatus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"H\xe1li\xf0agras","imgUrl":"https://myndir.ni.is/floraisl/hapl/alopepra1g.jpg","fullName":"H\xe1li\xf0agras (Alopecurus pratensis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Lj\xf3salyng","imgUrl":"https://myndir.ni.is/floraisl/hapl/andropol1b.jpg","fullName":"Lj\xf3salyng (Andromeda polifolia)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"\xc6tihv\xf6nn","imgUrl":"https://myndir.ni.is/floraisl/hapl/angelarc1b.jpg","fullName":"\xc6tihv\xf6nn (Angelica archangelica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Apiaceae"},{"name":"Geithv\xf6nn","imgUrl":"https://myndir.ni.is/floraisl/hapl/angelsyl1b.jpg","fullName":"Geithv\xf6nn (Angelica sylvestris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Apiaceae"},{"name":"Fjallal\xf3jurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/antenalp1b.jpg","fullName":"Fjallal\xf3jurt (Antennaria alpina)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Fjallareyr","imgUrl":"https://myndir.ni.is/floraisl/hapl/anthoodo1g.jpg","fullName":"Fjallareyr (Anthoxanthum odoratum)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Sk\xf3garkerfill","imgUrl":"https://myndir.ni.is/floraisl/hapl/anthrsyl2b.jpg","fullName":"Sk\xf3garkerfill (Anthriscus sylvestris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Apiaceae"},{"name":"Gullkollur","imgUrl":"https://myndir.ni.is/floraisl/hapl/anthyvul1b.jpg","fullName":"Gullkollur (Anthyllis vulneraria)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Fabaceae"},{"name":"Melabl\xf3m","imgUrl":"https://myndir.ni.is/floraisl/hapl/cardapet1b.jpg","fullName":"Melabl\xf3m (Arabidopsis petraea)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"Skri\xf0nabl\xf3m","imgUrl":"https://myndir.ni.is/floraisl/hapl/arabialp1b.jpg","fullName":"Skri\xf0nabl\xf3m (Arabis alpina)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"Sortulyng","imgUrl":"https://myndir.ni.is/floraisl/hapl/arctouva1b.jpg","fullName":"Sortulyng (Arctostaphylos uva-ursi)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"Skeggsandi","imgUrl":"https://myndir.ni.is/floraisl/hapl/arenanor1b.jpg","fullName":"Skeggsandi (Arenaria norvegica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"T\xe1gamura","imgUrl":"https://myndir.ni.is/floraisl/hapl/potenans1b.jpg","fullName":"T\xe1gamura (Argentina anserina)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Geldingahnappur","imgUrl":"https://myndir.ni.is/floraisl/hapl/armermar1b.jpg","fullName":"Geldingahnappur (Armeria maritima)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plumbaginaceae"},{"name":"Ginhafri","imgUrl":"https://myndir.ni.is/floraisl/hapl/arrheela1g.jpg","fullName":"Ginhafri (Arrhenatherum elatius)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Skeggburkni","imgUrl":"https://myndir.ni.is/floraisl/hapl/asplesep1y.jpg","fullName":"Skeggburkni (Asplenium septentrionale)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Aspleniaceae"},{"name":"Svartburkni","imgUrl":"https://myndir.ni.is/floraisl/hapl/aspletri3y.jpg","fullName":"Svartburkni (Asplenium trichomanes)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Aspleniaceae"},{"name":"Klettaburkni","imgUrl":"https://myndir.ni.is/floraisl/hapl/asplevir2y.jpg","fullName":"Klettaburkni (Asplenium viride)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Aspleniaceae"},{"name":"\xde\xfasundbla\xf0ar\xf3s","imgUrl":"https://myndir.ni.is/floraisl/hapl/athyrdis2y.jpg","fullName":"\xde\xfasundbla\xf0ar\xf3s (Athyrium distentifolium)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Athyriaceae"},{"name":"H\xe9lubla\xf0ka","imgUrl":"https://myndir.ni.is/floraisl/hapl/atriplon1b.jpg","fullName":"H\xe9lubla\xf0ka (Atriplex longipes)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Amaranthaceae"},{"name":"Bug\xf0upuntur","imgUrl":"https://myndir.ni.is/floraisl/hapl/deschfle1g.jpg","fullName":"Bug\xf0upuntur (Avenella flexuosa)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"D\xfanhafri","imgUrl":"https://myndir.ni.is/floraisl/hapl/avenupub2b.jpg","fullName":"D\xfanhafri (Avenula pubescens)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Smj\xf6rgras","imgUrl":"https://myndir.ni.is/floraisl/hapl/bartsalp1b.jpg","fullName":"Smj\xf6rgras (Bartsia alpina)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Orobanchaceae"},{"name":"J\xf6klas\xf3ley","imgUrl":"https://myndir.ni.is/floraisl/hapl/ranungla2b.jpg","fullName":"J\xf6klas\xf3ley (Beckwithia glacialis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ranunculaceae"},{"name":"Fagurf\xedfill","imgUrl":"https://myndir.ni.is/floraisl/hapl/belliper1b.jpg","fullName":"Fagurf\xedfill (Bellis perennis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Fjalldrapi","imgUrl":"https://myndir.ni.is/floraisl/hapl/betulnan1b.jpg","fullName":"Fjalldrapi (Betula nana)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Betulaceae"},{"name":"Birki","imgUrl":"https://myndir.ni.is/floraisl/hapl/betulpub2b.jpg","fullName":"Birki (Betula pubescens)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Betulaceae"},{"name":"Korns\xfara","imgUrl":"https://myndir.ni.is/floraisl/hapl/bistoviv1b.jpg","fullName":"Korns\xfara (Bistorta vivipara)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Polygonaceae"},{"name":"Skollakambur","imgUrl":"https://myndir.ni.is/floraisl/hapl/blechspi1y.jpg","fullName":"Skollakambur (Struthiopteris spicant)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Blechnaceae"},{"name":"Lensutungljurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/botrylan1y.jpg","fullName":"Lensutungljurt (Botrychium lanceolatum)","category":"Tracheophyta","category2":"Psilotopsida","category3":"Ophioglossaceae"},{"name":"Tungljurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/botrylun1y.jpg","fullName":"Tungljurt (Botrychium lunaria)","category":"Tracheophyta","category2":"Psilotopsida","category3":"Ophioglossaceae"},{"name":"Keilutungljurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/botrymin1y.jpg","fullName":"Keilutungljurt (Botrychium minganense)","category":"Tracheophyta","category2":"Psilotopsida","category3":"Ophioglossaceae"},{"name":"Renglutungljurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/botrysim1y.jpg","fullName":"Renglutungljurt (Botrychium simplex)","category":"Tracheophyta","category2":"Psilotopsida","category3":"Ophioglossaceae"},{"name":"Hjartapuntur","imgUrl":"https://myndir.ni.is/floraisl/hapl/brizamed2g.jpg","fullName":"Hjartapuntur (Briza media)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Bromus inermi","imgUrl":"https://myndir.ni.is/floraisl/hapl/bromuine1g.jpg","fullName":"Bromus inermis","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Fj\xf6ruk\xe1l","imgUrl":"https://myndir.ni.is/floraisl/hapl/cakilarc2b.jpg","fullName":"Fj\xf6ruk\xe1l (Cakile maritima)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"H\xe1lmgresi","imgUrl":"https://myndir.ni.is/floraisl/hapl/calamstr1g.jpg","fullName":"H\xe1lmgresi (Calamagrostis neglecta)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"S\xedkjabr\xfa\xf0a","imgUrl":"https://myndir.ni.is/floraisl/hapl/calliham1b.jpg","fullName":"S\xedkjabr\xfa\xf0a (Callitriche hamulata)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"Haustbr\xfa\xf0a","imgUrl":"https://myndir.ni.is/floraisl/hapl/calliher1b.jpg","fullName":"Haustbr\xfa\xf0a (Callitriche hermaphroditica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"Vorbr\xfa\xf0a","imgUrl":"https://myndir.ni.is/floraisl/hapl/callipal2b.jpg","fullName":"Vorbr\xfa\xf0a (Callitriche palustris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"Laugabr\xfa\xf0a","imgUrl":"https://myndir.ni.is/floraisl/hapl/callista1b.jpg","fullName":"Laugabr\xfa\xf0a (Callitriche stagnalis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"Beitilyng","imgUrl":"https://myndir.ni.is/floraisl/hapl/calluvul1b.jpg","fullName":"Beitilyng (Calluna vulgaris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"H\xf3fs\xf3ley","imgUrl":"https://myndir.ni.is/floraisl/hapl/calthpal3b.jpg","fullName":"H\xf3fs\xf3ley (Caltha palustris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ranunculaceae"},{"name":"Bl\xe1klukka","imgUrl":"https://myndir.ni.is/floraisl/hapl/camparot1b.jpg","fullName":"Bl\xe1klukka (Campanula rotundifolia)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Campanulaceae"},{"name":"Fjallabl\xe1klukka","imgUrl":"https://myndir.ni.is/floraisl/hapl/campauni2b.jpg","fullName":"Fjallabl\xe1klukka (Campanula uniflora)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Campanulaceae"},{"name":"Hjartarfi","imgUrl":"https://myndir.ni.is/floraisl/hapl/capsebur1b.jpg","fullName":"Hjartarfi (Capsella bursa-pastoris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"J\xf6klaklukka","imgUrl":"https://myndir.ni.is/floraisl/hapl/cardabel1b.jpg","fullName":"J\xf6klaklukka (Cardamine bellidifolia)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"Lambaklukka","imgUrl":"https://myndir.ni.is/floraisl/hapl/cardahir1b.jpg","fullName":"Lambaklukka (Cardamine hirsuta)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"Hrafnaklukka","imgUrl":"https://myndir.ni.is/floraisl/hapl/cardanym1b.jpg","fullName":"Hrafnaklukka (Cardamine pratensis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"S\xf3tst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/caratrat2g.jpg","fullName":"S\xf3tst\xf6r (Carex atrata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Hv\xedtst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carbicol1g.jpg","fullName":"Hv\xedtst\xf6r (Carex bicolor)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Bleikstinnungur","imgUrl":"https://myndir.ni.is/floraisl/hapl/carbigel1g.jpg","fullName":"Bleikstinnungur (Carex bigelowii)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"L\xednst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carbrunn1g.jpg","fullName":"L\xednst\xf6r (Carex brunnescens)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Bl\xe1toppast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carcurta2g.jpg","fullName":"Bl\xe1toppast\xf6r (Carex canescens)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"H\xe1rleggjast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carcapil2g.jpg","fullName":"H\xe1rleggjast\xf6r (Carex capillaris)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Hnappst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carcapit1g.jpg","fullName":"Hnappst\xf6r (Carex capitata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Vorst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carcaryo1g.jpg","fullName":"Vorst\xf6r (Carex caryophyllea)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Vetrarkv\xed\xf0ast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carchord1g.jpg","fullName":"Vetrarkv\xed\xf0ast\xf6r (Carex chordorrhiza)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Safast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/cardiand1g.jpg","fullName":"Safast\xf6r (Carex diandra)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"S\xe9rb\xfdlisst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/cardioec1g.jpg","fullName":"S\xe9rb\xfdlisst\xf6r (Carex dioica)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"\xcdgulst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carechin1g.jpg","fullName":"\xcdgulst\xf6r (Carex echinata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Gr\xe1st\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carflacc1g.jpg","fullName":"Gr\xe1st\xf6r (Carex flacca)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Trj\xf3nust\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carflava1g.jpg","fullName":"Trj\xf3nust\xf6r (Carex flava)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Dvergst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carglaci1g.jpg","fullName":"Dvergst\xf6r (Carex glacialis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Heigulst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carglare2g.jpg","fullName":"Heigulst\xf6r (Carex glareosa)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Hei\xf0ast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carheleo1g.jpg","fullName":"Hei\xf0ast\xf6r (Carex heleonastes)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Toppast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carkraus3g.jpg","fullName":"Toppast\xf6r (Carex krausei)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Rj\xfapust\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carlache1g.jpg","fullName":"Rj\xfapust\xf6r (Carex lachenalii)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Fl\xf3ast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carlimos1g.jpg","fullName":"Fl\xf3ast\xf6r (Carex limosa)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"F\xf6lvast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carlivid1g.jpg","fullName":"F\xf6lvast\xf6r (Carex livida)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Gulst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carlyngb1g.jpg","fullName":"Gulst\xf6r (Carex lyngbyei)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Skri\xf0st\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carmacke1g.jpg","fullName":"Skri\xf0st\xf6r (Carex mackenziei)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Kollst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carmaclo2g.jpg","fullName":"Kollst\xf6r (Carex macloviana)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Bj\xfagst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carmarit1g.jpg","fullName":"Bj\xfagst\xf6r (Carex maritima)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Broddast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carmicro1g.jpg","fullName":"Broddast\xf6r (Carex microglochin)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Finnungsst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carnardi1g.jpg","fullName":"Finnungsst\xf6r (Carex nardina)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"M\xfdrast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carnigra1g.jpg","fullName":"M\xfdrast\xf6r (Carex nigra)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Fjallast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carnorve1g.jpg","fullName":"Fjallast\xf6r (Carex norvegica)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Glj\xe1st\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carpalle1g.jpg","fullName":"Glj\xe1st\xf6r (Carex pallescens)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Belgjast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carpanic1g.jpg","fullName":"Belgjast\xf6r (Carex panicea)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Keldust\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carmagel1g.jpg","fullName":"Keldust\xf6r (Carex paupercula)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"D\xfanhulstrast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carpilul1g.jpg","fullName":"D\xfanhulstrast\xf6r (Carex pilulifera)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Hagast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carpulic1g.jpg","fullName":"Hagast\xf6r (Carex pulicaris)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Marst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carsalin1g.jpg","fullName":"Marst\xf6r (Carex ramenskii)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Hengist\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carrarif2g.jpg","fullName":"Hengist\xf6r (Carex rariflora)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Tjarnast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carrostr2g.jpg","fullName":"Tjarnast\xf6r (Carex rostrata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Rau\xf0st\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carrufin1g.jpg","fullName":"Rau\xf0st\xf6r (Carex rufina)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"M\xf3ast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carrupes2g.jpg","fullName":"M\xf3ast\xf6r (Carex rupestris)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Hrafnast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carsaxat1g.jpg","fullName":"Hrafnast\xf6r (Carex saxatilis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Fl\xe6\xf0ast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carsubsp1g.jpg","fullName":"Fl\xe6\xf0ast\xf6r (Carex subspathacea)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Sl\xed\xf0rast\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carvagin1g.jpg","fullName":"Sl\xed\xf0rast\xf6r (Carex vaginata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Gullst\xf6r","imgUrl":"https://myndir.ni.is/floraisl/hapl/carserot2g.jpg","fullName":"Gullst\xf6r (Carex viridula)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"K\xfamen","imgUrl":"https://myndir.ni.is/floraisl/hapl/carumcar1b.jpg","fullName":"K\xfamen (Carum carvi)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Apiaceae"},{"name":"Vatnsnarfagras","imgUrl":"https://myndir.ni.is/floraisl/hapl/catabaqu1g.jpg","fullName":"Vatnsnarfagras (Catabrosa aquatica)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Sno\xf0eyra","imgUrl":"https://myndir.ni.is/floraisl/hapl/cerasalp1b.jpg","fullName":"Sno\xf0eyra (Cerastium alpinum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"L\xe6kjafr\xe6hyrna","imgUrl":"https://myndir.ni.is/floraisl/hapl/cerascer1b.jpg","fullName":"L\xe6kjafr\xe6hyrna (Cerastium cerastoides)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Vegarfi","imgUrl":"https://myndir.ni.is/floraisl/hapl/cerasfon2b.jpg","fullName":"Vegarfi (Cerastium fontanum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Hno\xf0afr\xe6hyrna","imgUrl":"https://myndir.ni.is/floraisl/hapl/cerasglo1b.jpg","fullName":"Hno\xf0afr\xe6hyrna (Cerastium glomeratum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Br\xf6nugr\xf6s","imgUrl":"https://myndir.ni.is/floraisl/hapl/dactymac3g.jpg","fullName":"Br\xf6nugr\xf6s (Dactylorhiza maculata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Orchidaceae"},{"name":"Fjallapuntur","imgUrl":"https://myndir.ni.is/floraisl/hapl/deschalp2g.jpg","fullName":"Fjallapuntur (Deschampsia alpina)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Beringspuntur","imgUrl":"https://myndir.ni.is/floraisl/hapl/deschber2g.jpg","fullName":"Beringspuntur (Deschampsia beringensis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Snarr\xf3tarpuntur","imgUrl":"https://myndir.ni.is/floraisl/hapl/deschcae1g.jpg","fullName":"Snarr\xf3tarpuntur (Deschampsia cespitosa)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Fjallabr\xfa\xf0a","imgUrl":"https://myndir.ni.is/floraisl/hapl/diapelap1b.jpg","fullName":"Fjallabr\xfa\xf0a (Diapensia lapponica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Diapensiaceae"},{"name":"Litunarjafni","imgUrl":"https://myndir.ni.is/floraisl/hapl/diphaalp2y.jpg","fullName":"Litunarjafni (Diphasiastrum alpinum)","category":"Tracheophyta","category2":"Lycopodiopsida","category3":"Lycopodiaceae"},{"name":"Gr\xe1vorbl\xf3m","imgUrl":"https://myndir.ni.is/floraisl/hapl/drabainc1b.jpg","fullName":"Gr\xe1vorbl\xf3m (Draba incana)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"H\xe9luvorbl\xf3m","imgUrl":"https://myndir.ni.is/floraisl/hapl/drabaniv1b.jpg","fullName":"H\xe9luvorbl\xf3m (Draba nivalis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"Hagavorbl\xf3m","imgUrl":"https://myndir.ni.is/floraisl/hapl/drabanor1b.jpg","fullName":"Hagavorbl\xf3m (Draba norvegica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"Fjallavorbl\xf3m","imgUrl":"https://myndir.ni.is/floraisl/hapl/drabaalp1b.jpg","fullName":"Fjallavorbl\xf3m (Draba oxycarpa)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"S\xf3ld\xf6gg","imgUrl":"https://myndir.ni.is/floraisl/hapl/droserot1b.jpg","fullName":"S\xf3ld\xf6gg (Drosera rotundifolia)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Droseraceae"},{"name":"Holtas\xf3ley","imgUrl":"https://myndir.ni.is/floraisl/hapl/dryasoct2b.jpg","fullName":"Holtas\xf3ley (Dryas octopetala)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"D\xedlaburkni","imgUrl":"https://myndir.ni.is/floraisl/hapl/dryopass1y.jpg","fullName":"D\xedlaburkni (Dryopteris expansa)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Dryopteridaceae"},{"name":"St\xf3riburkni","imgUrl":"https://myndir.ni.is/floraisl/hapl/dryopfil2y.jpg","fullName":"St\xf3riburkni (Dryopteris filix-mas)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Dryopteridaceae"},{"name":"Efjusk\xfafur","imgUrl":"https://myndir.ni.is/floraisl/hapl/eleocaci1g.jpg","fullName":"Efjusk\xfafur (Eleocharis acicularis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Vatnsn\xe1l","imgUrl":"https://myndir.ni.is/floraisl/hapl/eleocpal1g.jpg","fullName":"Vatnsn\xe1l (Eleocharis palustris)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Fitjask\xfafur","imgUrl":"https://myndir.ni.is/floraisl/hapl/eleocqui1g.jpg","fullName":"Fitjask\xfafur (Eleocharis quinqueflora)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Kjarrhveiti","imgUrl":"https://myndir.ni.is/floraisl/hapl/elymucan2g.jpg","fullName":"Kjarrhveiti (Elymus alopex)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Bl\xe1hveiti","imgUrl":"https://myndir.ni.is/floraisl/hapl/elymuala1g.jpg","fullName":"Bl\xe1hveiti (Elymus macrourus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"H\xfasapuntur","imgUrl":"https://myndir.ni.is/floraisl/hapl/elymurep1g.jpg","fullName":"H\xfasapuntur (Elytrigia repens)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Kr\xe6kilyng","imgUrl":"https://myndir.ni.is/floraisl/hapl/empetnig1b.jpg","fullName":"Kr\xe6kilyng (Empetrum nigrum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"Lindad\xfanurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/epiloals1b.jpg","fullName":"Lindad\xfanurt (Epilobium alsinifolium)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Onagraceae"},{"name":"Fjallad\xfanurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/epiloana1b.jpg","fullName":"Fjallad\xfanurt (Epilobium anagallidifolium)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Onagraceae"},{"name":"Kirtild\xfanurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/epilowat1b.jpg","fullName":"Kirtild\xfanurt (Epilobium ciliatum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Onagraceae"},{"name":"Klappad\xfanurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/epilocol1b.jpg","fullName":"Klappad\xfanurt (Epilobium collinum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Onagraceae"},{"name":"Hei\xf0ad\xfanurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/epilohor1b.jpg","fullName":"Hei\xf0ad\xfanurt (Epilobium hornemannii)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Onagraceae"},{"name":"Lj\xf3sad\xfanurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/epilolac1b.jpg","fullName":"Lj\xf3sad\xfanurt (Epilobium lactiflorum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Onagraceae"},{"name":"M\xfdrad\xfanurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/epilopal1b.jpg","fullName":"M\xfdrad\xfanurt (Epilobium palustre)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Onagraceae"},{"name":"Kl\xf3elfting","imgUrl":"https://myndir.ni.is/floraisl/hapl/equisarv1y.jpg","fullName":"Kl\xf3elfting (Equisetum arvense)","category":"Tracheophyta","category2":"Equisetopsida","category3":"Equisetaceae"},{"name":"Fergin","imgUrl":"https://myndir.ni.is/floraisl/hapl/equisflu1y.jpg","fullName":"Fergin (Equisetum fluviatile)","category":"Tracheophyta","category2":"Equisetopsida","category3":"Equisetaceae"},{"name":"Eski","imgUrl":"https://myndir.ni.is/floraisl/hapl/equishye1y.jpg","fullName":"Eski (Equisetum hyemale)","category":"Tracheophyta","category2":"Equisetopsida","category3":"Equisetaceae"},{"name":"M\xfdrelfting","imgUrl":"https://myndir.ni.is/floraisl/hapl/equispal1y.jpg","fullName":"M\xfdrelfting (Equisetum palustre)","category":"Tracheophyta","category2":"Equisetopsida","category3":"Equisetaceae"},{"name":"Vallelfting","imgUrl":"https://myndir.ni.is/floraisl/hapl/equispra1y.jpg","fullName":"Vallelfting (Equisetum pratense)","category":"Tracheophyta","category2":"Equisetopsida","category3":"Equisetaceae"},{"name":"Sk\xf3gelfting","imgUrl":"https://myndir.ni.is/floraisl/hapl/equissyl1y.jpg","fullName":"Sk\xf3gelfting (Equisetum sylvaticum)","category":"Tracheophyta","category2":"Equisetopsida","category3":"Equisetaceae"},{"name":"Beitieski","imgUrl":"https://myndir.ni.is/floraisl/hapl/equisvar2y.jpg","fullName":"Beitieski (Equisetum variegatum)","category":"Tracheophyta","category2":"Equisetopsida","category3":"Equisetaceae"},{"name":"Jakobsf\xedfill","imgUrl":"https://myndir.ni.is/floraisl/hapl/erigebor1b.jpg","fullName":"Jakobsf\xedfill (Erigeron borealis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Sn\xe6kobbi","imgUrl":"https://myndir.ni.is/floraisl/hapl/erigehum1b.jpg","fullName":"Sn\xe6kobbi (Erigeron humilis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Fjallakobbi","imgUrl":"https://myndir.ni.is/floraisl/hapl/erigeuni1b.jpg","fullName":"Fjallakobbi (Erigeron uniflorus)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Kl\xf3f\xedfa","imgUrl":"https://myndir.ni.is/floraisl/hapl/eriopang1g.jpg","fullName":"Kl\xf3f\xedfa (Eriophorum angustifolium)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Hrafnaf\xedfa","imgUrl":"https://myndir.ni.is/floraisl/hapl/eriopsch2g.jpg","fullName":"Hrafnaf\xedfa (Eriophorum scheuchzeri)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Fjallafr\xe6hyrna","imgUrl":"https://myndir.ni.is/floraisl/hapl/cerasarc1b.jpg","fullName":"Fjallafr\xe6hyrna (Cerastium nigrescens)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Sigursk\xfafur","imgUrl":"https://myndir.ni.is/floraisl/hapl/epiloang1b.jpg","fullName":"Sigursk\xfafur (Chamerion angustifolium)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Onagraceae"},{"name":"Eyrarr\xf3s","imgUrl":"https://myndir.ni.is/floraisl/hapl/epilolat1b.jpg","fullName":"Eyrarr\xf3s (Chamerion latifolium)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Onagraceae"},{"name":"\xdeistill","imgUrl":"https://myndir.ni.is/floraisl/hapl/cirsiarv1b.jpg","fullName":"\xdeistill (Cirsium arvense)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Purpura\xfeistill","imgUrl":"https://myndir.ni.is/floraisl/hapl/cirsihel3b.jpg","fullName":"Purpura\xfeistill (Cirsium heterophyllum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Skarfak\xe1l","imgUrl":"https://myndir.ni.is/floraisl/hapl/cochloff1b.jpg","fullName":"Skarfak\xe1l (Cochlearia officinalis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"Barnar\xf3t","imgUrl":"https://myndir.ni.is/floraisl/hapl/coelovir1g.jpg","fullName":"Barnar\xf3t (Coeloglossum viride)","category":"Tracheophyta","category2":"Liliopsida","category3":"Orchidaceae"},{"name":"Engjar\xf3s","imgUrl":"https://myndir.ni.is/floraisl/hapl/potenpal2b.jpg","fullName":"Engjar\xf3s (Comarum palustre)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Mar\xeduvendlingur","imgUrl":"https://myndir.ni.is/floraisl/hapl/gentiten1b.jpg","fullName":"Mar\xeduvendlingur (Comastoma tenellum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Gentianaceae"},{"name":"Kr\xe6klur\xf3t","imgUrl":"https://myndir.ni.is/floraisl/hapl/coraltri1g.jpg","fullName":"Kr\xe6klur\xf3t (Corallorhiza trifida)","category":"Tracheophyta","category2":"Liliopsida","category3":"Orchidaceae"},{"name":"Hjartaf\xedfill","imgUrl":"https://myndir.ni.is/floraisl/hapl/crepipal1b.jpg","fullName":"Hjartaf\xedfill (Crepis paludosa)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Hl\xed\xf0aburkni","imgUrl":"https://myndir.ni.is/floraisl/hapl/cryptcri2y.jpg","fullName":"Hl\xed\xf0aburkni (Cryptogramma crispa)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Pteridaceae"},{"name":"T\xf3fugras","imgUrl":"https://myndir.ni.is/floraisl/hapl/cystofra1y.jpg","fullName":"T\xf3fugras (Cystopteris fragilis)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Cystopteridaceae"},{"name":"Axhno\xf0apuntur","imgUrl":"https://myndir.ni.is/floraisl/hapl/dactyglo1g.jpg","fullName":"Axhno\xf0apuntur (Dactylis glomerata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Aronsv\xf6ndur","imgUrl":"https://myndir.ni.is/floraisl/hapl/erysihie1b.jpg","fullName":"Aronsv\xf6ndur (Erysimum strictum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"Bakkaaugnfr\xf3","imgUrl":"https://myndir.ni.is/floraisl/hapl/euphrarc1b.jpg","fullName":"Bakkaaugnfr\xf3 (Euphrasia arctica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Orobanchaceae"},{"name":"Augnfr\xf3","imgUrl":"https://myndir.ni.is/floraisl/hapl/euphrfri1b.jpg","fullName":"Augnfr\xf3 (Euphrasia frigida)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Orobanchaceae"},{"name":"Rau\xf0vingull","imgUrl":"https://myndir.ni.is/floraisl/hapl/festuric1g.jpg","fullName":"Rau\xf0vingull (Festuca rubra)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Bl\xe1vingull","imgUrl":"https://myndir.ni.is/floraisl/hapl/festuviv1g.jpg","fullName":"Bl\xe1vingull (Festuca vivipara)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Mja\xf0jurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/filipulm1b.jpg","fullName":"Mja\xf0jurt (Filipendula ulmaria)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Jar\xf0arber","imgUrl":"https://myndir.ni.is/floraisl/hapl/fragaves1b.jpg","fullName":"Jar\xf0arber (Fragaria vesca)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Gar\xf0ahj\xe1lmgras","imgUrl":"https://myndir.ni.is/floraisl/hapl/galeotet1b.jpg","fullName":"Gar\xf0ahj\xe1lmgras (Galeopsis tetrahit)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Lamiaceae"},{"name":"Krossma\xf0ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/galiubor1b.jpg","fullName":"Krossma\xf0ra (Galium boreale)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rubiaceae"},{"name":"M\xfdrama\xf0ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/galiupal1b.jpg","fullName":"M\xfdrama\xf0ra (Galium palustre)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rubiaceae"},{"name":"\xderenningarma\xf0ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/galiutri1b.jpg","fullName":"\xderenningarma\xf0ra (Galium trifidum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rubiaceae"},{"name":"Laugama\xf0ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/galiuuli1b.jpg","fullName":"Laugama\xf0ra (Galium uliginosum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rubiaceae"},{"name":"Gulma\xf0ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/galiuver1b.jpg","fullName":"Gulma\xf0ra (Galium verum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rubiaceae"},{"name":"D\xfdragras","imgUrl":"https://myndir.ni.is/floraisl/hapl/gentiniv1b.jpg","fullName":"D\xfdragras (Gentiana nivalis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Gentianaceae"},{"name":"Gr\xe6nv\xf6ndur","imgUrl":"https://myndir.ni.is/floraisl/hapl/gentiama1b.jpg","fullName":"Gr\xe6nv\xf6ndur (Gentianella amarella)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Gentianaceae"},{"name":"Gullv\xf6ndur","imgUrl":"https://myndir.ni.is/floraisl/hapl/gentiaur1b.jpg","fullName":"Gullv\xf6ndur (Gentianella aurea)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Gentianaceae"},{"name":"Mar\xeduv\xf6ndur","imgUrl":"https://myndir.ni.is/floraisl/hapl/genticam1b.jpg","fullName":"Mar\xeduv\xf6ndur (Gentianella campestris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Gentianaceae"},{"name":"Engjav\xf6ndur","imgUrl":"https://myndir.ni.is/floraisl/hapl/gentidet1b.jpg","fullName":"Engjav\xf6ndur (Gentianopsis detonsa)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Gentianaceae"},{"name":"Bl\xe1gresi","imgUrl":"https://myndir.ni.is/floraisl/hapl/geransyl1b.jpg","fullName":"Bl\xe1gresi (Geranium sylvaticum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Geraniaceae"},{"name":"Fjalldalaf\xedfill","imgUrl":"https://myndir.ni.is/floraisl/hapl/geumriva1b.jpg","fullName":"Fjalldalaf\xedfill (Geum rivale)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Sandl\xe6\xf0ingur","imgUrl":"https://myndir.ni.is/floraisl/hapl/glauxmar1b.jpg","fullName":"Sandl\xe6\xf0ingur (Glaux maritima)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Primulaceae"},{"name":"Fl\xf3\xf0apuntur","imgUrl":"https://myndir.ni.is/floraisl/hapl/glyceflu1g.jpg","fullName":"Fl\xf3\xf0apuntur (Glyceria fluitans)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Gr\xe1mygla","imgUrl":"https://myndir.ni.is/floraisl/hapl/filaguli1b.jpg","fullName":"Gr\xe1mygla (Gnaphalium uliginosum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"\xder\xedlaufungur","imgUrl":"https://myndir.ni.is/floraisl/hapl/gymnodry1y.jpg","fullName":"\xder\xedlaufungur (Gymnocarpium dryopteris)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Cystopteridaceae"},{"name":"Mosalyng","imgUrl":"https://myndir.ni.is/floraisl/hapl/cassihyp2b.jpg","fullName":"Mosalyng (Harrimanella hypnoides)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"Fellaf\xedfill","imgUrl":"https://myndir.ni.is/floraisl/hapl/hieraalp1b.jpg","fullName":"Fellaf\xedfill (Hieracium alpinum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Reyrgresi","imgUrl":"https://myndir.ni.is/floraisl/hapl/hieroodo1g.jpg","fullName":"Reyrgresi (Hierochloe odorata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Fl\xe6\xf0al\xf3f\xf3tur","imgUrl":"https://myndir.ni.is/floraisl/hapl/hipputet2b.jpg","fullName":"Fl\xe6\xf0al\xf3f\xf3tur (Hippuris tetraphylla)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"L\xf3f\xf3tur","imgUrl":"https://myndir.ni.is/floraisl/hapl/hippuvul1b.jpg","fullName":"L\xf3f\xf3tur (Hippuris vulgaris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"Lo\xf0gresi","imgUrl":"https://myndir.ni.is/floraisl/hapl/holculan1g.jpg","fullName":"Lo\xf0gresi (Holcus lanatus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Fj\xf6ruarfi","imgUrl":"https://myndir.ni.is/floraisl/hapl/honckpep3b.jpg","fullName":"Fj\xf6ruarfi (Honckenya peploides)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Skollafingur","imgUrl":"https://myndir.ni.is/floraisl/hapl/huperses1y.jpg","fullName":"Skollafingur (Huperzia selago)","category":"Tracheophyta","category2":"Lycopodiopsida","category3":"Lycopodiaceae"},{"name":"Vatnsnafli","imgUrl":"https://myndir.ni.is/floraisl/hapl/hydrovul1b.jpg","fullName":"Vatnsnafli (Hydrocotyle vulgaris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Araliaceae"},{"name":"Mosaburkni","imgUrl":"https://myndir.ni.is/floraisl/hapl/hymenwil1y.jpg","fullName":"Mosaburkni (Hymenophyllum wilsonii)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Hymenophyllaceae"},{"name":"\xc1lftalaukur","imgUrl":"https://myndir.ni.is/floraisl/hapl/isoetech1y.jpg","fullName":"\xc1lftalaukur (Isoetes echinospora)","category":"Tracheophyta","category2":"Lycopodiopsida","category3":"Isoetaceae"},{"name":"M\xfdrasef","imgUrl":"https://myndir.ni.is/floraisl/hapl/juncualp1g.jpg","fullName":"M\xfdrasef (Juncus alpinoarticulatus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"Hrossan\xe1l","imgUrl":"https://myndir.ni.is/floraisl/hapl/juncuarc3g.jpg","fullName":"Hrossan\xe1l (Juncus arcticus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"Laugasef","imgUrl":"https://myndir.ni.is/floraisl/hapl/juncuart1g.jpg","fullName":"Laugasef (Juncus articulatus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"Flagasef","imgUrl":"https://myndir.ni.is/floraisl/hapl/juncubig1g.jpg","fullName":"Flagasef (Juncus biglumis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"Hn\xfa\xf0sef","imgUrl":"https://myndir.ni.is/floraisl/hapl/juncubul1g.jpg","fullName":"Hn\xfa\xf0sef (Juncus bulbosus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"D\xf6kkasef","imgUrl":"https://myndir.ni.is/floraisl/hapl/juncucas1g.jpg","fullName":"D\xf6kkasef (Juncus castaneus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"\xder\xe1\xf0sef","imgUrl":"https://myndir.ni.is/floraisl/hapl/juncufil1g.jpg","fullName":"\xder\xe1\xf0sef (Juncus filiformis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"Fitjasef","imgUrl":"https://myndir.ni.is/floraisl/hapl/juncuger1b.jpg","fullName":"Fitjasef (Juncus gerardii)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"Lindasef","imgUrl":"https://myndir.ni.is/floraisl/hapl/juncuran2g.jpg","fullName":"Lindasef (Juncus ranarius)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"Stinnasef","imgUrl":"https://myndir.ni.is/floraisl/hapl/juncusqu1b.jpg","fullName":"Stinnasef (Juncus squarrosus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"M\xf3asef","imgUrl":"https://myndir.ni.is/floraisl/hapl/junctrif1g.jpg","fullName":"M\xf3asef (Juncus trifidus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"Bl\xf3msef","imgUrl":"https://myndir.ni.is/floraisl/hapl/junctrig1g.jpg","fullName":"Bl\xf3msef (Juncus triglumis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"Einir","imgUrl":"https://myndir.ni.is/floraisl/hapl/junipcom2b.jpg","fullName":"Einir (Juniperus communis)","category":"Tracheophyta","category2":"Pinopsida","category3":"Cupressaceae"},{"name":"Rau\xf0kollur","imgUrl":"https://myndir.ni.is/floraisl/hapl/knautarv1b.jpg","fullName":"Rau\xf0kollur (Knautia arvensis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caprifoliaceae"},{"name":"\xdeursaskegg","imgUrl":"https://myndir.ni.is/floraisl/hapl/kobremyo1g.jpg","fullName":"\xdeursaskegg (Kobresia myosuroides)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Naflagras","imgUrl":"https://myndir.ni.is/floraisl/hapl/koeniisl1b.jpg","fullName":"Naflagras (Koenigia islandica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Polygonaceae"},{"name":"Lj\xf3satv\xedt\xf6nn","imgUrl":"https://myndir.ni.is/floraisl/hapl/lamiualb1b.jpg","fullName":"Lj\xf3satv\xedt\xf6nn (Lamium album)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Lamiaceae"},{"name":"Akurtv\xedt\xf6nn","imgUrl":"https://myndir.ni.is/floraisl/hapl/lamiupur1b.jpg","fullName":"Akurtv\xedt\xf6nn (Lamium purpureum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Lamiaceae"},{"name":"Baunagras","imgUrl":"https://myndir.ni.is/floraisl/hapl/lathyjap1b.jpg","fullName":"Baunagras (Lathyrus japonicus)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Fabaceae"},{"name":"M\xfdraertur","imgUrl":"https://myndir.ni.is/floraisl/hapl/lathypal1b.jpg","fullName":"M\xfdraertur (Lathyrus palustris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Fabaceae"},{"name":"Fuglaertur","imgUrl":"https://myndir.ni.is/floraisl/hapl/lathypra1b.jpg","fullName":"Fuglaertur (Lathyrus pratensis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Fabaceae"},{"name":"Skarif\xedfill","imgUrl":"https://myndir.ni.is/floraisl/hapl/leontaut1b.jpg","fullName":"Skarif\xedfill (Leontodon autumnalis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Hla\xf0kolla","imgUrl":"https://myndir.ni.is/floraisl/hapl/chamosua1b.jpg","fullName":"Hla\xf0kolla (Lepidotheca suaveolens)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Freyjubr\xe1","imgUrl":"https://myndir.ni.is/floraisl/hapl/leucavul1b.jpg","fullName":"Freyjubr\xe1 (Leucanthemum vulgare)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Melgresi","imgUrl":"https://myndir.ni.is/floraisl/hapl/leymuare1g.jpg","fullName":"Melgresi (Leymus arenarius)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"S\xe6hv\xf6nn","imgUrl":"https://myndir.ni.is/floraisl/hapl/ligussco1b.jpg","fullName":"S\xe6hv\xf6nn (Ligusticum scoticum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Apiaceae"},{"name":"Efjugras","imgUrl":"https://myndir.ni.is/floraisl/hapl/limosaqu1b.jpg","fullName":"Efjugras (Limosella aquatica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Scrophulariaceae"},{"name":"Villil\xedn","imgUrl":"https://myndir.ni.is/floraisl/hapl/linumcat1b.jpg","fullName":"Villil\xedn (Linum catharticum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Linaceae"},{"name":"Hjartatv\xedbla\xf0ka","imgUrl":"https://myndir.ni.is/floraisl/hapl/listecor1g.jpg","fullName":"Hjartatv\xedbla\xf0ka (Listera cordata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Orchidaceae"},{"name":"Eggtv\xedbla\xf0ka","imgUrl":"https://myndir.ni.is/floraisl/hapl/listeova1g.jpg","fullName":"Eggtv\xedbla\xf0ka (Listera ovata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Orchidaceae"},{"name":"Tjarnalaukur","imgUrl":"https://myndir.ni.is/floraisl/hapl/littouni1b.jpg","fullName":"Tjarnalaukur (Littorella uniflora)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"Sau\xf0amergur","imgUrl":"https://myndir.ni.is/floraisl/hapl/loisepro1b.jpg","fullName":"Sau\xf0amergur (Loiseleuria procumbens)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"Bl\xe1stjarna","imgUrl":"https://myndir.ni.is/floraisl/hapl/lomatrot1b.jpg","fullName":"Bl\xe1stjarna (Lomatogonium rotatum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Gentianaceae"},{"name":"Alaskal\xfap\xedna","imgUrl":"https://myndir.ni.is/floraisl/hapl/lupinnoo2b.jpg","fullName":"Alaskal\xfap\xedna (Lupinus nootkatensis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Fabaceae"},{"name":"Bogh\xe6ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/luzularc1g.jpg","fullName":"Bogh\xe6ra (Luzula arcuata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"Kollh\xe6ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/luzulmul2g.jpg","fullName":"Kollh\xe6ra (Luzula multiflora)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"Axh\xe6ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/luzulspi1g.jpg","fullName":"Axh\xe6ra (Luzula spicata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"D\xf6kkh\xe6ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/luzulsud1b.jpg","fullName":"D\xf6kkh\xe6ra (Luzula sudetica)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaceae"},{"name":"Munkahetta","imgUrl":"https://myndir.ni.is/floraisl/hapl/lychnflo1b.jpg","fullName":"Munkahetta (Lychnis flos-cuculi)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Lyngjafni","imgUrl":"https://myndir.ni.is/floraisl/hapl/lycopann2y.jpg","fullName":"Lyngjafni (Lycopodium annotinum)","category":"Tracheophyta","category2":"Lycopodiopsida","category3":"Lycopodiaceae"},{"name":"Burstajafni","imgUrl":"https://myndir.ni.is/floraisl/hapl/lycopcla2y.jpg","fullName":"Burstajafni (Lycopodium clavatum)","category":"Tracheophyta","category2":"Lycopodiopsida","category3":"Lycopodiaceae"},{"name":"Krossjurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/melamsyl1b.jpg","fullName":"Krossjurt (Melampyrum sylvaticum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Orobanchaceae"},{"name":"Vatnamynta","imgUrl":"https://myndir.ni.is/floraisl/hapl/menthaqu1b.jpg","fullName":"Vatnamynta (Mentha aquatica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Lamiaceae"},{"name":"Horbla\xf0ka","imgUrl":"https://myndir.ni.is/floraisl/hapl/menyatri1b.jpg","fullName":"Horbla\xf0ka (Menyanthes trifoliata)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Menyanthaceae"},{"name":"Bl\xe1lilja","imgUrl":"https://myndir.ni.is/floraisl/hapl/mertemar1b.jpg","fullName":"Bl\xe1lilja (Mertensia maritima)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Boraginaceae"},{"name":"Skrautpuntur","imgUrl":"https://myndir.ni.is/floraisl/hapl/miliueff1g.jpg","fullName":"Skrautpuntur (Milium effusum)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Fjallan\xf3ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/minuabif1b.jpg","fullName":"Fjallan\xf3ra (Minuartia biflora)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Melan\xf3ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/minuarub1b.jpg","fullName":"Melan\xf3ra (Minuartia rubella)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"M\xf3an\xf3ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/minuastr1b.jpg","fullName":"M\xf3an\xf3ra (Minuartia stricta)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"L\xe6kjagr\xfdta","imgUrl":"https://myndir.ni.is/floraisl/hapl/montifon1b.jpg","fullName":"L\xe6kjagr\xfdta (Montia fontana)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Montiaceae"},{"name":"Gleym-m\xe9r-ei","imgUrl":"https://myndir.ni.is/floraisl/hapl/myosoarv2b.jpg","fullName":"Gleym-m\xe9r-ei (Myosotis arvensis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Boraginaceae"},{"name":"Kisugras","imgUrl":"https://myndir.ni.is/floraisl/svep/MYOSODIS.gif","fullName":"Kisugras (Myosotis discolor)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Boraginaceae"},{"name":"Engjamunabl\xf3m","imgUrl":"https://myndir.ni.is/floraisl/hapl/myososco1b.jpg","fullName":"Engjamunabl\xf3m (Myosotis scorpioides)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Boraginaceae"},{"name":"Sandmunabl\xf3m","imgUrl":"https://myndir.ni.is/floraisl/hapl/myosostr1b.jpg","fullName":"Sandmunabl\xf3m (Myosotis stricta)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Boraginaceae"},{"name":"S\xedkjamari","imgUrl":"https://myndir.ni.is/floraisl/hapl/myrioalt3b.jpg","fullName":"S\xedkjamari (Myriophyllum alterniflorum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Haloragaceae"},{"name":"Vatnamari","imgUrl":"https://myndir.ni.is/floraisl/hapl/myriospi1b.jpg","fullName":"Vatnamari (Myriophyllum sibiricum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Haloragaceae"},{"name":"Sp\xe1narkerfill","imgUrl":"https://myndir.ni.is/floraisl/hapl/myrrhodo2b.jpg","fullName":"Sp\xe1narkerfill (Myrrhis odorata)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Apiaceae"},{"name":"Finnungur","imgUrl":"https://myndir.ni.is/floraisl/hapl/nardustr1g.jpg","fullName":"Finnungur (Nardus stricta)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Fjandaf\xe6la","imgUrl":"https://myndir.ni.is/floraisl/hapl/omalonor1b.jpg","fullName":"Fjandaf\xe6la (Omalotheca norvegica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Gr\xe1mulla","imgUrl":"https://myndir.ni.is/floraisl/hapl/omalosup1b.jpg","fullName":"Gr\xe1mulla (Omalotheca supina)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Gr\xe1jurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/omalosyl2b.jpg","fullName":"Gr\xe1jurt (Omalotheca sylvatica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Na\xf0urtunga","imgUrl":"https://myndir.ni.is/floraisl/hapl/ophioazo2y.jpg","fullName":"Na\xf0urtunga (Ophioglossum azoricum)","category":"Tracheophyta","category2":"Psilotopsida","category3":"Ophioglossaceae"},{"name":"Gr\xe6nlilja","imgUrl":"https://myndir.ni.is/floraisl/hapl/orthisec1b.jpg","fullName":"Gr\xe6nlilja (Orthilia secunda)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"S\xfarsm\xe6ra","imgUrl":"https://myndir.ni.is/floraisl/hapl/oxaliace1b.jpg","fullName":"S\xfarsm\xe6ra (Oxalis acetosella)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Oxalidaceae"},{"name":"M\xfdraberjalyng","imgUrl":"https://myndir.ni.is/floraisl/hapl/vaccimic2b.jpg","fullName":"M\xfdraberjalyng (Oxycoccus microcarpus)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"\xd3lafss\xfara","imgUrl":"https://myndir.ni.is/floraisl/hapl/oxyridig1b.jpg","fullName":"\xd3lafss\xfara (Oxyria digyna)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Polygonaceae"},{"name":"Gar\xf0as\xf3l","imgUrl":"https://myndir.ni.is/floraisl/hapl/papavnud2b.jpg","fullName":"Gar\xf0as\xf3l (Papaver croceum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Papaveraceae"},{"name":"Melas\xf3l","imgUrl":"https://myndir.ni.is/floraisl/hapl/papavrad1b.jpg","fullName":"Melas\xf3l (Papaver radicatum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Papaveraceae"},{"name":"Ferlaufungur","imgUrl":"https://myndir.ni.is/floraisl/hapl/parisqua1g.jpg","fullName":"Ferlaufungur (Paris quadrifolia)","category":"Tracheophyta","category2":"Liliopsida","category3":"Melanthiaceae"},{"name":"M\xfdras\xf3ley","imgUrl":"https://myndir.ni.is/floraisl/hapl/parnapal1b.jpg","fullName":"M\xfdras\xf3ley (Parnassia palustris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Celastraceae"},{"name":"Tr\xf6llastakkur","imgUrl":"https://myndir.ni.is/floraisl/hapl/pedicfla2b.jpg","fullName":"Tr\xf6llastakkur (Pedicularis flammea)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Orobanchaceae"},{"name":"Tjarnabla\xf0ka","imgUrl":"https://myndir.ni.is/floraisl/hapl/persiamp1b.jpg","fullName":"Tjarnabla\xf0ka (Persicaria amphibia)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Polygonaceae"},{"name":"Fl\xf3ajurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/persimac1b.jpg","fullName":"Fl\xf3ajurt (Persicaria maculosa)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Polygonaceae"},{"name":"\xder\xedhyrnuburkni","imgUrl":"https://myndir.ni.is/floraisl/hapl/thelyphe1y.jpg","fullName":"\xder\xedhyrnuburkni (Phegopteris connectilis)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Thelypteridaceae"},{"name":"Sn\xe6narfagras","imgUrl":"https://myndir.ni.is/floraisl/hapl/phippalg1g.jpg","fullName":"Sn\xe6narfagras (Phippsia algida)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Fjallafoxgras","imgUrl":"https://myndir.ni.is/floraisl/hapl/phleualp1g.jpg","fullName":"Fjallafoxgras (Phleum alpinum)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Vallarfoxgras","imgUrl":"https://myndir.ni.is/floraisl/hapl/phleupra1g.jpg","fullName":"Vallarfoxgras (Phleum pratense)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Sitkagreni","imgUrl":"https://myndir.ni.is/floraisl/hapl/piceasit2b.jpg","fullName":"Sitkagreni (Picea sitchensis)","category":"Tracheophyta","category2":"Pinopsida","category3":"Pinaceae"},{"name":"\xcdslandsf\xedfill","imgUrl":"https://myndir.ni.is/floraisl/hapl/pilosisl2b.jpg","fullName":"\xcdslandsf\xedfill (Pilosella islandica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Lyfjagras","imgUrl":"https://myndir.ni.is/floraisl/hapl/pinguvul2b.jpg","fullName":"Lyfjagras (Pinguicula vulgaris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Lentibulariaceae"},{"name":"Gr\xe6\xf0is\xfara","imgUrl":"https://myndir.ni.is/floraisl/hapl/plantmaj2b.jpg","fullName":"Gr\xe6\xf0is\xfara (Plantago major)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"Friggjargras","imgUrl":"https://myndir.ni.is/floraisl/hapl/platahyp1g.jpg","fullName":"Friggjargras (Platanthera hyperborea)","category":"Tracheophyta","category2":"Liliopsida","category3":"Orchidaceae"},{"name":"Poa \xd7 jemtlandic","imgUrl":"https://myndir.ni.is/floraisl/hapl/poajemtl1g.jpg","fullName":"Poa \xd7 jemtlandica","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Fjallasveifgras","imgUrl":"https://myndir.ni.is/floraisl/hapl/poaalpin1g.jpg","fullName":"Fjallasveifgras (Poa alpina)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Varpasveifgras","imgUrl":"https://myndir.ni.is/floraisl/hapl/poaannua1g.jpg","fullName":"Varpasveifgras (Poa annua)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Lotsveifgras","imgUrl":"https://myndir.ni.is/floraisl/hapl/poaflexu1g.jpg","fullName":"Lotsveifgras (Poa flexuosa)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Bl\xe1sveifgras","imgUrl":"https://myndir.ni.is/floraisl/hapl/poaglauc1g.jpg","fullName":"Bl\xe1sveifgras (Poa glauca)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Vallarsveifgras","imgUrl":"https://myndir.ni.is/floraisl/hapl/poaprate1g.jpg","fullName":"Vallarsveifgras (Poa pratensis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"H\xe1sveifgras","imgUrl":"https://myndir.ni.is/floraisl/hapl/poatrivi1g.jpg","fullName":"H\xe1sveifgras (Poa trivialis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Bl\xf3\xf0arfi","imgUrl":"https://myndir.ni.is/floraisl/hapl/polygavi1b.jpg","fullName":"Bl\xf3\xf0arfi (Polygonum aviculare)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Polygonaceae"},{"name":"K\xf6ldugras","imgUrl":"https://myndir.ni.is/floraisl/hapl/polypvul1y.jpg","fullName":"K\xf6ldugras (Polypodium vulgare)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Polypodiaceae"},{"name":"Skjaldburkni","imgUrl":"https://myndir.ni.is/floraisl/hapl/polyslon1y.jpg","fullName":"Skjaldburkni (Polystichum lonchitis)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Dryopteridaceae"},{"name":"Bl\xe6\xf6sp","imgUrl":"https://myndir.ni.is/floraisl/hapl/popultre2b.jpg","fullName":"Bl\xe6\xf6sp (Populus tremula)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Salicaceae"},{"name":"Alaska\xf6sp","imgUrl":"https://myndir.ni.is/floraisl/hapl/popultri1b.jpg","fullName":"Alaska\xf6sp (Populus trichocarpa)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Salicaceae"},{"name":"Fjallnykra","imgUrl":"https://myndir.ni.is/floraisl/hapl/potamalp2g.jpg","fullName":"Fjallnykra (Potamogeton alpinus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Potamogetonaceae"},{"name":"Grasnykra","imgUrl":"https://myndir.ni.is/floraisl/hapl/potamgra1g.jpg","fullName":"Grasnykra (Potamogeton gramineus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Potamogetonaceae"},{"name":"Hjartanykra","imgUrl":"https://myndir.ni.is/floraisl/hapl/potamper1g.jpg","fullName":"Hjartanykra (Potamogeton perfoliatus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Potamogetonaceae"},{"name":"Langnykra","imgUrl":"https://myndir.ni.is/floraisl/hapl/potampra1g.jpg","fullName":"Langnykra (Potamogeton praelongus)","category":"Tracheophyta","category2":"Liliopsida","category3":"Potamogetonaceae"},{"name":"Gullmura","imgUrl":"https://myndir.ni.is/floraisl/hapl/potencra1b.jpg","fullName":"Gullmura (Potentilla crantzii)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Bl\xf3\xf0mura","imgUrl":"https://myndir.ni.is/floraisl/hapl/potenere1b.jpg","fullName":"Bl\xf3\xf0mura (Potentilla erecta)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Mar\xedulykill","imgUrl":"https://myndir.ni.is/floraisl/hapl/primustr1b.jpg","fullName":"Mar\xedulykill (Primula stricta)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Primulaceae"},{"name":"Bl\xe1kolla","imgUrl":"https://myndir.ni.is/floraisl/hapl/prunevul1b.jpg","fullName":"Bl\xe1kolla (Prunella vulgaris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Lamiaceae"},{"name":"Sj\xe1varfitjungur","imgUrl":"https://myndir.ni.is/floraisl/hapl/puccimar1g.jpg","fullName":"Sj\xe1varfitjungur (Puccinellia coarctata)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Bj\xf6llulilja","imgUrl":"https://myndir.ni.is/floraisl/hapl/pyrolgra1b.jpg","fullName":"Bj\xf6llulilja (Pyrola grandiflora)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"Klukkubl\xf3m","imgUrl":"https://myndir.ni.is/floraisl/hapl/pyrolmin1b.jpg","fullName":"Klukkubl\xf3m (Pyrola minor)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"Brennis\xf3ley","imgUrl":"https://myndir.ni.is/floraisl/hapl/ranunacr1b.jpg","fullName":"Brennis\xf3ley (Ranunculus acris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ranunculaceae"},{"name":"Trefjas\xf3ley","imgUrl":"https://myndir.ni.is/floraisl/hapl/ranunhyp1b.jpg","fullName":"Trefjas\xf3ley (Ranunculus hyperboreus)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ranunculaceae"},{"name":"Dvergs\xf3ley","imgUrl":"https://myndir.ni.is/floraisl/hapl/ranunpyg2b.jpg","fullName":"Dvergs\xf3ley (Ranunculus pygmaeus)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ranunculaceae"},{"name":"Skri\xf0s\xf3ley","imgUrl":"https://myndir.ni.is/floraisl/hapl/ranurepe1b.jpg","fullName":"Skri\xf0s\xf3ley (Ranunculus repens)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ranunculaceae"},{"name":"Flagas\xf3ley","imgUrl":"https://myndir.ni.is/floraisl/hapl/ranurept1b.jpg","fullName":"Flagas\xf3ley (Ranunculus reptans)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ranunculaceae"},{"name":"Eggjasj\xf3\xf0ur","imgUrl":"https://myndir.ni.is/floraisl/hapl/rhinamin1b.jpg","fullName":"Eggjasj\xf3\xf0ur (Rhinanthus minor)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Orobanchaceae"},{"name":"Burnir\xf3t","imgUrl":"https://myndir.ni.is/floraisl/hapl/rhodiros1b.jpg","fullName":"Burnir\xf3t (Rhodiola rosea)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Crassulaceae"},{"name":"Kattarjurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/roripisl1b.jpg","fullName":"Kattarjurt (Rorippa islandica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"Glitr\xf3s","imgUrl":"https://myndir.ni.is/floraisl/hapl/rosaduma1b.jpg","fullName":"Glitr\xf3s (Rosa dumalis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"\xdeyrnir\xf3s","imgUrl":"https://myndir.ni.is/floraisl/hapl/rosapimp1b.jpg","fullName":"\xdeyrnir\xf3s (Rosa pimpinellifolia)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Hr\xfataber","imgUrl":"https://myndir.ni.is/floraisl/hapl/rubussax2b.jpg","fullName":"Hr\xfataber (Rubus saxatilis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"T\xfans\xfara","imgUrl":"https://myndir.ni.is/floraisl/hapl/rumaceto1b.jpg","fullName":"T\xfans\xfara (Rumex acetosa)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Polygonaceae"},{"name":"Hundas\xfara","imgUrl":"https://myndir.ni.is/floraisl/hapl/rumacell1b.jpg","fullName":"Hundas\xfara (Rumex acetosella)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Polygonaceae"},{"name":"Nj\xf3li","imgUrl":"https://myndir.ni.is/floraisl/hapl/rumexlon2b.jpg","fullName":"Nj\xf3li (Rumex longifolius)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Polygonaceae"},{"name":"L\xf3najurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/ruppimar1g.jpg","fullName":"L\xf3najurt (Ruppia maritima)","category":"Tracheophyta","category2":"Liliopsida","category3":"Ruppiaceae"},{"name":"Fjallkr\xe6kill","imgUrl":"https://myndir.ni.is/floraisl/hapl/sagincae1b.jpg","fullName":"Fjallkr\xe6kill (Sagina caespitosa)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Hn\xfaskakr\xe6kill","imgUrl":"https://myndir.ni.is/floraisl/hapl/saginnod2b.jpg","fullName":"Hn\xfaskakr\xe6kill (Sagina nodosa)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Skammkr\xe6kill","imgUrl":"https://myndir.ni.is/floraisl/hapl/saginpro1b.jpg","fullName":"Skammkr\xe6kill (Sagina procumbens)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Langkr\xe6kill","imgUrl":"https://myndir.ni.is/floraisl/hapl/saginsag1b.jpg","fullName":"Langkr\xe6kill (Sagina saginoides)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Broddkr\xe6kill","imgUrl":"https://myndir.ni.is/floraisl/hapl/saginsub1b.jpg","fullName":"Broddkr\xe6kill (Sagina subulata)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Alaskav\xed\xf0ir","imgUrl":"https://myndir.ni.is/floraisl/hapl/salixala1b.jpg","fullName":"Alaskav\xed\xf0ir (Salix alaxensis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Salicaceae"},{"name":"Fjallav\xed\xf0ir","imgUrl":"https://myndir.ni.is/floraisl/hapl/salixarc2b.jpg","fullName":"Fjallav\xed\xf0ir (Salix arctica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Salicaceae"},{"name":"Grasv\xed\xf0ir","imgUrl":"https://myndir.ni.is/floraisl/hapl/salixher2b.jpg","fullName":"Grasv\xed\xf0ir (Salix herbacea)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Salicaceae"},{"name":"Lo\xf0v\xed\xf0ir","imgUrl":"https://myndir.ni.is/floraisl/hapl/salixlan1b.jpg","fullName":"Lo\xf0v\xed\xf0ir (Salix lanata)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Salicaceae"},{"name":"D\xf6kkv\xed\xf0ir","imgUrl":"https://myndir.ni.is/floraisl/hapl/salixbor3b.jpg","fullName":"D\xf6kkv\xed\xf0ir (Salix myrsinifolia)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Salicaceae"},{"name":"Gulv\xed\xf0ir","imgUrl":"https://myndir.ni.is/floraisl/hapl/salixphy1b.jpg","fullName":"Gulv\xed\xf0ir (Salix phylicifolia)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Salicaceae"},{"name":"Bl\xf3\xf0kollur","imgUrl":"https://myndir.ni.is/floraisl/hapl/sanguoff2b.jpg","fullName":"Bl\xf3\xf0kollur (Sanguisorba officinalis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Gullsteinbrj\xf3tur","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxifaiz1b.jpg","fullName":"Gullsteinbrj\xf3tur (Saxifraga aizoides)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"Laukasteinbrj\xf3tur","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxifcer1b.jpg","fullName":"Laukasteinbrj\xf3tur (Saxifraga cernua)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"\xde\xfafusteinbrj\xf3tur","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxifcae1b.jpg","fullName":"\xde\xfafusteinbrj\xf3tur (Saxifraga cespitosa)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"Klettafr\xfa","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxifcot1b.jpg","fullName":"Klettafr\xfa (Saxifraga cotyledon)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"Hreistursteinbrj\xf3tur","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxiffol2b.jpg","fullName":"Hreistursteinbrj\xf3tur (Saxifraga foliolosa)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"Gullbr\xe1","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxifhir1b.jpg","fullName":"Gullbr\xe1 (Saxifraga hirculus)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"Mosasteinbrj\xf3tur","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxifhyp1b.jpg","fullName":"Mosasteinbrj\xf3tur (Saxifraga hypnoides)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"Sn\xe6steinbrj\xf3tur","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxifniv1b.jpg","fullName":"Sn\xe6steinbrj\xf3tur (Saxifraga nivalis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"Vetrarbl\xf3m","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxifopp1b.jpg","fullName":"Vetrarbl\xf3m (Saxifraga oppositifolia)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"Bergsteinbrj\xf3tur","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxifpan1b.jpg","fullName":"Bergsteinbrj\xf3tur (Saxifraga paniculata)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"L\xe6kjasteinbrj\xf3tur","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxifriv1b.jpg","fullName":"L\xe6kjasteinbrj\xf3tur (Saxifraga rivularis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"Stj\xf6rnusteinbrj\xf3tur","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxifste2b.jpg","fullName":"Stj\xf6rnusteinbrj\xf3tur (Saxifraga stellaris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"Dvergsteinbrj\xf3tur","imgUrl":"https://myndir.ni.is/floraisl/hapl/saxiften1b.jpg","fullName":"Dvergsteinbrj\xf3tur (Saxifraga tenuis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Saxifragaceae"},{"name":"H\xe1vingull","imgUrl":"https://myndir.ni.is/floraisl/hapl/festupra1g.jpg","fullName":"H\xe1vingull (Schedonorus pratensis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"Helluhno\xf0ri","imgUrl":"https://myndir.ni.is/floraisl/hapl/sedumacr2b.jpg","fullName":"Helluhno\xf0ri (Sedum acre)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Crassulaceae"},{"name":"Skri\xf0uhno\xf0ri","imgUrl":"https://myndir.ni.is/floraisl/hapl/sedumann1b.jpg","fullName":"Skri\xf0uhno\xf0ri (Sedum annuum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Crassulaceae"},{"name":"Flagahno\xf0ri","imgUrl":"https://myndir.ni.is/floraisl/hapl/sedumvil1b.jpg","fullName":"Flagahno\xf0ri (Sedum villosum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Crassulaceae"},{"name":"Mosajafni","imgUrl":"https://myndir.ni.is/floraisl/hapl/selagsel1y.jpg","fullName":"Mosajafni (Selaginella selaginoides)","category":"Tracheophyta","category2":"Lycopodiopsida","category3":"Selaginellaceae"},{"name":"Krossf\xedfill","imgUrl":"https://myndir.ni.is/floraisl/hapl/senecvul1b.jpg","fullName":"Krossf\xedfill (Senecio vulgaris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Bl\xe1toppa","imgUrl":"https://myndir.ni.is/floraisl/hapl/seslealb2g.jpg","fullName":"Bl\xe1toppa (Sesleria albicans)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Fjallasm\xe1ri","imgUrl":"https://myndir.ni.is/floraisl/hapl/sibbapro1b.jpg","fullName":"Fjallasm\xe1ri (Sibbaldia procumbens)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"Lambagras","imgUrl":"https://myndir.ni.is/floraisl/hapl/silenaca1b.jpg","fullName":"Lambagras (Silene acaulis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Dagstjarna","imgUrl":"https://myndir.ni.is/floraisl/hapl/silendio1b.jpg","fullName":"Dagstjarna (Silene dioica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Holurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/silenuni1b.jpg","fullName":"Holurt (Silene uniflora)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Reynir","imgUrl":"https://myndir.ni.is/floraisl/hapl/sorbuauc1b.jpg","fullName":"Reynir (Sorbus aucuparia)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Rosaceae"},{"name":"M\xf3grafabr\xfasi","imgUrl":"https://myndir.ni.is/floraisl/hapl/sparghyp1g.jpg","fullName":"M\xf3grafabr\xfasi (Sparganium hyperboreum)","category":"Tracheophyta","category2":"Liliopsida","category3":"Typhaceae"},{"name":"Skurfa","imgUrl":"https://myndir.ni.is/floraisl/hapl/spergarv2b.jpg","fullName":"Skurfa (Spergula arvensis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Fl\xe6\xf0askurfa","imgUrl":"https://myndir.ni.is/floraisl/hapl/flaedaskrufa-Spergularia-salina-hk.jpg","fullName":"Fl\xe6\xf0askurfa (Spergularia salina)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Stj\xf6rnuarfi","imgUrl":"https://myndir.ni.is/floraisl/hapl/stellcra1b.jpg","fullName":"Stj\xf6rnuarfi (Stellaria crassifolia)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Akurarfi","imgUrl":"https://myndir.ni.is/floraisl/hapl/stellgra1b.jpg","fullName":"Akurarfi (Stellaria graminea)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"L\xe1garfi","imgUrl":"https://myndir.ni.is/floraisl/hapl/stellhum1b.jpg","fullName":"L\xe1garfi (Stellaria humifusa)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Haugarfi","imgUrl":"https://myndir.ni.is/floraisl/hapl/stellmed1b.jpg","fullName":"Haugarfi (Stellaria media)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"\xder\xe1\xf0nykra","imgUrl":"https://myndir.ni.is/floraisl/hapl/potamfil1g.jpg","fullName":"\xder\xe1\xf0nykra (Stuckenia filiformis)","category":"Tracheophyta","category2":"Liliopsida","category3":"Potamogetonaceae"},{"name":"Alurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/subulaqu1b.jpg","fullName":"Alurt (Subularia aquatica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Brassicaceae"},{"name":"St\xfafa","imgUrl":"https://myndir.ni.is/floraisl/hapl/succipra1b.jpg","fullName":"St\xfafa (Succisa pratensis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caprifoliaceae"},{"name":"T\xfanf\xedfill","imgUrl":"https://myndir.ni.is/floraisl/hapl/taraxoff3b.jpg","fullName":"T\xfanf\xedfill (Taraxacum officinale)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Brj\xf3stagras","imgUrl":"https://myndir.ni.is/floraisl/hapl/thalialp1b.jpg","fullName":"Brj\xf3stagras (Thalictrum alpinum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ranunculaceae"},{"name":"Bl\xf3\xf0berg","imgUrl":"https://myndir.ni.is/floraisl/hapl/thymupra2b.jpg","fullName":"Bl\xf3\xf0berg (Thymus praecox)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Lamiaceae"},{"name":"Vatns\xf6gn","imgUrl":"https://myndir.ni.is/floraisl/hapl/crassaqu1b.jpg","fullName":"Vatns\xf6gn (Tillaea aquatica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Crassulaceae"},{"name":"S\xfdkigras","imgUrl":"https://myndir.ni.is/floraisl/hapl/tofiepus2g.jpg","fullName":"S\xfdkigras (Tofieldia pusilla)","category":"Tracheophyta","category2":"Liliopsida","category3":"Tofieldiaceae"},{"name":"M\xfdrafinnungur","imgUrl":"https://myndir.ni.is/floraisl/hapl/trichcae1g.jpg","fullName":"M\xfdrafinnungur (Trichophorum cespitosum)","category":"Tracheophyta","category2":"Liliopsida","category3":"Cyperaceae"},{"name":"Sj\xf6stjarna","imgUrl":"https://myndir.ni.is/floraisl/hapl/trieneur1b.jpg","fullName":"Sj\xf6stjarna (Trientalis europaea)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Primulaceae"},{"name":"Sk\xf3garsm\xe1ri","imgUrl":"https://myndir.ni.is/floraisl/hapl/trifomed1b.jpg","fullName":"Sk\xf3garsm\xe1ri (Trifolium medium)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Fabaceae"},{"name":"Rau\xf0sm\xe1ri","imgUrl":"https://myndir.ni.is/floraisl/hapl/trifopra1b.jpg","fullName":"Rau\xf0sm\xe1ri (Trifolium pratense)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Fabaceae"},{"name":"Hv\xedtsm\xe1ri","imgUrl":"https://myndir.ni.is/floraisl/hapl/triforep3b.jpg","fullName":"Hv\xedtsm\xe1ri (Trifolium repens)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Fabaceae"},{"name":"M\xfdrasau\xf0laukur","imgUrl":"https://myndir.ni.is/floraisl/hapl/triglpal1g.jpg","fullName":"M\xfdrasau\xf0laukur (Triglochin palustris)","category":"Tracheophyta","category2":"Liliopsida","category3":"Juncaginaceae"},{"name":"Baldursbr\xe1","imgUrl":"https://myndir.ni.is/floraisl/hapl/matrimar3b.jpg","fullName":"Baldursbr\xe1 (Tripleurospermum maritimum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Fjallal\xf3gresi","imgUrl":"https://myndir.ni.is/floraisl/hapl/trisespi1g.jpg","fullName":"Fjallal\xf3gresi (Trisetum spicatum)","category":"Tracheophyta","category2":"Liliopsida","category3":"Poaceae"},{"name":"H\xf3ff\xedfill","imgUrl":"https://myndir.ni.is/floraisl/hapl/tussifar1b.jpg","fullName":"H\xf3ff\xedfill (Tussilago farfara)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Asteraceae"},{"name":"Brenninetla","imgUrl":"https://myndir.ni.is/floraisl/hapl/urticdio1b.jpg","fullName":"Brenninetla (Urtica dioica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Urticaceae"},{"name":"Bl\xf6\xf0rujurt","imgUrl":"https://myndir.ni.is/floraisl/hapl/utricmin2b.jpg","fullName":"Bl\xf6\xf0rujurt (Utricularia minor)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Lentibulariaceae"},{"name":"A\xf0albl\xe1berjalyng","imgUrl":"https://myndir.ni.is/floraisl/hapl/vaccimyr2b.jpg","fullName":"A\xf0albl\xe1berjalyng (Vaccinium myrtillus)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"Bl\xe1berjalyng","imgUrl":"https://myndir.ni.is/floraisl/hapl/vacciuli2b.jpg","fullName":"Bl\xe1berjalyng (Vaccinium uliginosum)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"Rau\xf0berjalyng","imgUrl":"https://myndir.ni.is/floraisl/hapl/vaccivit1b.jpg","fullName":"Rau\xf0berjalyng (Vaccinium vitis-idaea)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Ericaceae"},{"name":"Gar\xf0abr\xfa\xf0a","imgUrl":"https://myndir.ni.is/floraisl/hapl/valeroff1b.jpg","fullName":"Gar\xf0abr\xfa\xf0a (Valeriana officinalis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caprifoliaceae"},{"name":"Fjalladepla","imgUrl":"https://myndir.ni.is/floraisl/hapl/veronalp1b.jpg","fullName":"Fjalladepla (Veronica alpina)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"Laugadepla","imgUrl":"https://myndir.ni.is/floraisl/hapl/veronana2b.jpg","fullName":"Laugadepla (Veronica anagallis-aquatica)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"V\xf6ludepla","imgUrl":"https://myndir.ni.is/floraisl/hapl/veroncha1b.jpg","fullName":"V\xf6ludepla (Veronica chamaedrys)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"Steindepla","imgUrl":"https://myndir.ni.is/floraisl/hapl/veronfru1b.jpg","fullName":"Steindepla (Veronica fruticans)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"H\xe1rdepla","imgUrl":"https://myndir.ni.is/floraisl/hapl/veronoff1b.jpg","fullName":"H\xe1rdepla (Veronica officinalis)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"Skri\xf0depla","imgUrl":"https://myndir.ni.is/floraisl/hapl/veronscu1b.jpg","fullName":"Skri\xf0depla (Veronica scutellata)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"L\xe6kjadepla","imgUrl":"https://myndir.ni.is/floraisl/hapl/veronser2b.jpg","fullName":"L\xe6kjadepla (Veronica serpyllifolia)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Plantaginaceae"},{"name":"Umfe\xf0mingur","imgUrl":"https://myndir.ni.is/floraisl/hapl/viciacra2b.jpg","fullName":"Umfe\xf0mingur (Vicia cracca)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Fabaceae"},{"name":"Giljafl\xe6kja","imgUrl":"https://myndir.ni.is/floraisl/hapl/viciasep1b.jpg","fullName":"Giljafl\xe6kja (Vicia sepium)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Fabaceae"},{"name":"T\xfdsfj\xf3la","imgUrl":"https://myndir.ni.is/floraisl/hapl/violacan1b.jpg","fullName":"T\xfdsfj\xf3la (Viola canina)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Violaceae"},{"name":"Birkifj\xf3la","imgUrl":"https://myndir.ni.is/floraisl/hapl/violaepi1b.jpg","fullName":"Birkifj\xf3la (Viola epipsila)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Violaceae"},{"name":"M\xfdrfj\xf3la","imgUrl":"https://myndir.ni.is/floraisl/hapl/violapal1b.jpg","fullName":"M\xfdrfj\xf3la (Viola palustris)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Violaceae"},{"name":"Sk\xf3gfj\xf3la","imgUrl":"https://myndir.ni.is/floraisl/hapl/violariv2b.jpg","fullName":"Sk\xf3gfj\xf3la (Viola riviniana)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Violaceae"},{"name":"\xderenningarfj\xf3la","imgUrl":"https://myndir.ni.is/floraisl/hapl/violatri3b.jpg","fullName":"\xderenningarfj\xf3la (Viola tricolor)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Violaceae"},{"name":"Lj\xf3sberi","imgUrl":"https://myndir.ni.is/floraisl/hapl/lychnalp1b.jpg","fullName":"Lj\xf3sberi (Viscaria alpina)","category":"Tracheophyta","category2":"Magnoliopsida","category3":"Caryophyllaceae"},{"name":"Li\xf0f\xe6tla","imgUrl":"https://myndir.ni.is/floraisl/hapl/woodsilv1y.jpg","fullName":"Li\xf0f\xe6tla (Woodsia ilvensis)","category":"Tracheophyta","category2":"Polypodiopsida","category3":"Woodsiaceae"},{"name":"Hnots\xf6rvi","imgUrl":"https://myndir.ni.is/floraisl/hapl/zannipal1g.jpg","fullName":"Hnots\xf6rvi (Zannichellia palustris)","category":"Tracheophyta","category2":"Liliopsida","category3":"Potamogetonaceae"},{"name":"Marh\xe1lmur","imgUrl":"https://myndir.ni.is/floraisl/hapl/zostemar1g.jpg","fullName":"Marh\xe1lmur (Zostera angustifolia)","category":"Tracheophyta","category2":"Liliopsida","category3":"Zosteraceae"},{"name":"Holtas\xf3ti","imgUrl":"https://myndir.ni.is/floraisl/mosar/andrerup1m.jpg","fullName":"Holtas\xf3ti (Andreaea rupestris)","category":"Bryophyta","category2":"Andreaeopsida","category3":"Andreaea rupestris"},{"name":"Hei\xf0ah\xe9la","imgUrl":"https://myndir.ni.is/floraisl/mosar/anthejur1m.jpg","fullName":"Hei\xf0ah\xe9la (Anthelia juratzkana)","category":"Marchantiophyta","category2":"Marchantiopsida","category3":"Anthelia juratzkana"},{"name":"Bleikjukollur","imgUrl":"https://myndir.ni.is/floraisl/mosar/aulacpal1m.jpg","fullName":"Bleikjukollur (Aulacomnium palustre)","category":"Bryophyta","category2":"Bryopsida","category3":"Aulacomnium palustre"},{"name":"Bar\xf0astr\xfd","imgUrl":"https://myndir.ni.is/floraisl/mosar/bartrith1m.JPG","fullName":"Bar\xf0astr\xfd (Bartramia ithyphylla)","category":"Bryophyta","category2":"Bryopsida","category3":"Bartramia ithyphylla"},{"name":"L\xe6kjalokkur","imgUrl":"https://myndir.ni.is/floraisl/mosar/bracrivu1m.JPG","fullName":"L\xe6kjalokkur (Brachythecium rivulare)","category":"Bryophyta","category2":"Bryopsida","category3":"Brachythecium rivulare"},{"name":"Silfurhnokki","imgUrl":"https://myndir.ni.is/floraisl/mosar/bryuarge1m.jpg","fullName":"Silfurhnokki (Bryum argenteum)","category":"Bryophyta","category2":"Bryopsida","category3":"Bryum argenteum"},{"name":"Geirmosi","imgUrl":"https://myndir.ni.is/floraisl/mosar/callecus1m.jpg","fullName":"Geirmosi (Calliergonella cuspidata)","category":"Bryophyta","category2":"Bryopsida","category3":"Calliergonella cuspidata"},{"name":"Kr\xf3numosi","imgUrl":"https://myndir.ni.is/floraisl/mosar/climaden1m.jpg","fullName":"Kr\xf3numosi (Climacium dendroides)","category":"Bryophyta","category2":"Bryopsida","category3":"Climacium dendroides"},{"name":"Hei\xf0a\xfe\xf3fi","imgUrl":"https://myndir.ni.is/floraisl/mosar/conostet2m.jpg","fullName":"Hei\xf0a\xfe\xf3fi (Conostomum tetragonum)","category":"Bryophyta","category2":"Bryopsida","category3":"Conostomum tetragonum"},{"name":"K\xe1rmosi","imgUrl":"https://myndir.ni.is/floraisl/mosar/dicrwcri1m.JPG","fullName":"K\xe1rmosi (Dicranoweisia crispula)","category":"Bryophyta","category2":"Bryopsida","category3":"Dicranoweisia crispula"},{"name":"\xder\xe1\xf0m\xe6kir","imgUrl":"https://myndir.ni.is/floraisl/mosar/disticap1m.jpg","fullName":"\xder\xe1\xf0m\xe6kir (Distichium capillaceum)","category":"Bryophyta","category2":"Bryopsida","category3":"Distichium capillaceum"},{"name":"\xc1lfaklukka","imgUrl":"https://myndir.ni.is/floraisl/mosar/encalrha1m.jpg","fullName":"\xc1lfaklukka (Encalypta rhaptocarpa)","category":"Bryophyta","category2":"Bryopsida","category3":"Encalypta rhaptocarpa"},{"name":"\xc1rmosi","imgUrl":"https://myndir.ni.is/floraisl/mosar/fontiant1m.jpg","fullName":"\xc1rmosi (Fontinalis antipyretica)","category":"Bryophyta","category2":"Bryopsida","category3":"Fontinalis antipyretica"},{"name":"Hrokkinskeggi","imgUrl":"https://myndir.ni.is/floraisl/mosar/grimmtor1m.jpg","fullName":"Hrokkinskeggi (Grimmia torquata)","category":"Bryophyta","category2":"Bryopsida","category3":"Grimmia torquata"},{"name":"Gr\xe1k\xf3lfur","imgUrl":"https://myndir.ni.is/floraisl/mosar/gymmicor1m.jpg","fullName":"Gr\xe1k\xf3lfur (Gymnomitrion corallioides)","category":"Marchantiophyta","category2":"Marchantiopsida","category3":"Gymnomitrion corallioides"},{"name":"Klettapr\xfd\xf0i","imgUrl":"https://myndir.ni.is/floraisl/mosar/homthser1m.jpg","fullName":"Klettapr\xfd\xf0i (Homalothecium sericeum)","category":"Bryophyta","category2":"Bryopsida","category3":"Homalothecium sericeum"},{"name":"Tildurmosi","imgUrl":"https://myndir.ni.is/floraisl/mosar/hylocspl1m.jpg","fullName":"Tildurmosi (Hylocomium splendens)","category":"Bryophyta","category2":"Bryopsida","category3":"Hylocomium splendens"},{"name":"Melafaxi","imgUrl":"https://myndir.ni.is/floraisl/mosar/hypnurev2m.jpg","fullName":"Melafaxi (Hypnum revolutum)","category":"Bryophyta","category2":"Bryopsida","category3":"Hypnum revolutum"},{"name":"Lautahn\xfaskur","imgUrl":"https://myndir.ni.is/floraisl/mosar/kiaerfal1m.jpg","fullName":"Lautahn\xfaskur (Kiaeria falcata)","category":"Bryophyta","category2":"Bryopsida","category3":"Kiaeria falcata"},{"name":"D\xe6ldahn\xfaskur","imgUrl":"https://myndir.ni.is/floraisl/mosar/kiaersta1m.jpg","fullName":"D\xe6ldahn\xfaskur (Kiaeria starkei)","category":"Bryophyta","category2":"Bryopsida","category3":"Kiaeria starkei"},{"name":"Lautaleskja","imgUrl":"https://myndir.ni.is/floraisl/mosar/lescurad1m.jpg","fullName":"Lautaleskja (Lescuraea radicosa)","category":"Bryophyta","category2":"Bryopsida","category3":"Lescuraea radicosa"},{"name":"Stj\xf6rnumosi","imgUrl":"https://myndir.ni.is/floraisl/mosar/marchpol1m.jpg","fullName":"Stj\xf6rnumosi (Marchantia polymorpha)","category":"Marchantiophyta","category2":"Marchantiopsida","category3":"Marchantia polymorpha"},{"name":"D\xfdjahnappur","imgUrl":"https://myndir.ni.is/floraisl/mosar/philofon1m.jpg","fullName":"D\xfdjahnappur (Philonotis fontana)","category":"Bryophyta","category2":"Bryopsida","category3":"Philonotis fontana"},{"name":"Ur\xf0askart","imgUrl":"https://myndir.ni.is/floraisl/mosar/pohlicru1m.jpg","fullName":"Ur\xf0askart (Pohlia cruda)","category":"Bryophyta","category2":"Bryopsida","category3":"Pohlia cruda"},{"name":"Lindaskart","imgUrl":"https://myndir.ni.is/floraisl/mosar/pohliwah1m.jpg","fullName":"Lindaskart (Pohlia wahlenbergii)","category":"Bryophyta","category2":"Bryopsida","category3":"Pohlia wahlenbergii"},{"name":"M\xfdrhaddur","imgUrl":"https://myndir.ni.is/floraisl/mosar/polytcom2m.jpg","fullName":"M\xfdrhaddur (Polytrichum commune)","category":"Bryophyta","category2":"Polytrichopsida","category3":"Polytrichum commune"},{"name":"Jarphaddur","imgUrl":"https://myndir.ni.is/floraisl/mosar/polytjun1m.jpg","fullName":"Jarphaddur (Polytrichum juniperinum)","category":"Bryophyta","category2":"Polytrichopsida","category3":"Polytrichum juniperinum"},{"name":"Gr\xe1haddur","imgUrl":"https://myndir.ni.is/floraisl/mosar/polytpil1m.jpg","fullName":"Gr\xe1haddur (Polytrichum piliferum)","category":"Bryophyta","category2":"Polytrichopsida","category3":"Polytrichum piliferum"},{"name":"Sn\xe6haddur","imgUrl":"https://myndir.ni.is/floraisl/mosar/polytsex3m.jpg","fullName":"Sn\xe6haddur (Polytrichum sexangulare)","category":"Bryophyta","category2":"Polytrichopsida","category3":"Polytrichum sexangulare"},{"name":"Dr\xf6fnumosi","imgUrl":"https://myndir.ni.is/floraisl/mosar/preisqua1m.jpg","fullName":"Dr\xf6fnumosi (Preissia quadrata)","category":"Marchantiophyta","category2":"Marchantiopsida","category3":"Preissia quadrata"},{"name":"M\xf3atrefja","imgUrl":"https://myndir.ni.is/floraisl/mosar/ptilicil1m.jpg","fullName":"M\xf3atrefja (Ptilidium ciliare)","category":"Marchantiophyta","category2":"Marchantiopsida","category3":"Ptilidium ciliare"},{"name":"L\xe6kjagambri","imgUrl":"https://myndir.ni.is/floraisl/mosar/racomaci1m.jpg","fullName":"L\xe6kjagambri (Racomitrium aciculare)","category":"Bryophyta","category2":"Bryopsida","category3":"Racomitrium aciculare"},{"name":"H\xe6rugambri","imgUrl":"https://myndir.ni.is/floraisl/mosar/racomcan1m.jpg","fullName":"H\xe6rugambri (Racomitrium canescens)","category":"Bryophyta","category2":"Bryopsida","category3":"Racomitrium canescens"},{"name":"Melagambri","imgUrl":"https://myndir.ni.is/floraisl/mosar/racomeri1m.jpg","fullName":"Melagambri (Racomitrium ericoides)","category":"Bryophyta","category2":"Bryopsida","category3":"Racomitrium ericoides"},{"name":"Hraungambri","imgUrl":"https://myndir.ni.is/floraisl/mosar/racomlan1m.jpg","fullName":"Hraungambri (Racomitrium lanuginosum)","category":"Bryophyta","category2":"Bryopsida","category3":"Racomitrium lanuginosum"},{"name":"Lindafaldur","imgUrl":"https://myndir.ni.is/floraisl/mosar/mniummag1m.jpg","fullName":"Lindafaldur (Rhizomnium magnifolium)","category":"Bryophyta","category2":"Bryopsida","category3":"Rhizomnium magnifolium"},{"name":"Ur\xf0askraut","imgUrl":"https://myndir.ni.is/floraisl/mosar/rhydelor1m.jpg","fullName":"Ur\xf0askraut (Rhytidiadelphus loreus)","category":"Bryophyta","category2":"Bryopsida","category3":"Rhytidiadelphus loreus"},{"name":"Engjaskraut","imgUrl":"https://myndir.ni.is/floraisl/mosar/rhydesqu1m.jpg","fullName":"Engjaskraut (Rhytidiadelphus squarrosus)","category":"Bryophyta","category2":"Bryopsida","category3":"Rhytidiadelphus squarrosus"},{"name":"Runnaskraut","imgUrl":"https://myndir.ni.is/floraisl/mosar/rhydetri1m.jpg","fullName":"Runnaskraut (Rhytidiadelphus triquetrus)","category":"Bryophyta","category2":"Bryopsida","category3":"Rhytidiadelphus triquetrus"},{"name":"Rj\xfapumosi","imgUrl":"https://myndir.ni.is/floraisl/mosar/rhydirug1m.jpg","fullName":"Rj\xfapumosi (Rhytidium rugosum)","category":"Bryophyta","category2":"Bryopsida","category3":"Rhytidium rugosum"},{"name":"M\xf3asig\xf0","imgUrl":"https://myndir.ni.is/floraisl/mosar/drepaunc1m.jpg","fullName":"M\xf3asig\xf0 (Sanionia uncinata)","category":"Bryophyta","category2":"Bryopsida","category3":"Sanionia uncinata"},{"name":"L\xe6kjaleppur","imgUrl":"https://myndir.ni.is/floraisl/mosar/scapaund1m.jpg","fullName":"L\xe6kjaleppur (Scapania undulata)","category":"Marchantiophyta","category2":"Marchantiopsida","category3":"Scapania undulata"},{"name":"Fj\xf6rukragi","imgUrl":"https://myndir.ni.is/floraisl/mosar/schismar1m.jpg","fullName":"Fj\xf6rukragi (Schistidium maritimum)","category":"Bryophyta","category2":"Bryopsida","category3":"Schistidium maritimum"},{"name":"M\xfdrakr\xe6kja","imgUrl":"https://myndir.ni.is/floraisl/mosar/dreparev1m.jpg","fullName":"M\xfdrakr\xe6kja (Scorpidium revolvens)","category":"Bryophyta","category2":"Bryopsida","category3":"Scorpidium revolvens"},{"name":"Tjarnakr\xe6kja","imgUrl":"https://myndir.ni.is/floraisl/mosar/scorpsco1m.jpg","fullName":"Tjarnakr\xe6kja (Scorpidium scorpioides)","category":"Bryophyta","category2":"Bryopsida","category3":"Scorpidium scorpioides"},{"name":"Bleytuburi","imgUrl":"https://myndir.ni.is/floraisl/mosar/sphagter1m.jpg","fullName":"Bleytuburi (Sphagnum teres)","category":"Bryophyta","category2":"Sphagnopsida","category3":"Sphagnum teres"},{"name":"Rau\xf0buri","imgUrl":"https://myndir.ni.is/floraisl/mosar/sphagwar2m.jpg","fullName":"Rau\xf0buri (Sphagnum warnstorfii)","category":"Bryophyta","category2":"Sphagnopsida","category3":"Sphagnum warnstorfii"},{"name":"K\xfalute\xf0ill","imgUrl":"https://myndir.ni.is/floraisl/mosar/splacvas1m.jpg","fullName":"K\xfalute\xf0ill (Splachnum vasculosum)","category":"Bryophyta","category2":"Bryopsida","category3":"Splachnum vasculosum"},{"name":"H\xe6ruskr\xfafur","imgUrl":"https://myndir.ni.is/floraisl/mosar/torturur1m.jpg","fullName":"H\xe6ruskr\xfafur (Syntrichia ruralis)","category":"Bryophyta","category2":"Bryopsida","category3":"Syntrichia ruralis"},{"name":"Hagatoppur","imgUrl":"https://myndir.ni.is/floraisl/mosar/timmiaus1m.jpg","fullName":"Hagatoppur (Timmia austriaca)","category":"Bryophyta","category2":"Bryopsida","category3":"Timmia austriaca"},{"name":"L\xe9mosi","imgUrl":"https://myndir.ni.is/floraisl/mosar/homthnit1m.jpg","fullName":"L\xe9mosi (Tomentypnum nitens)","category":"Bryophyta","category2":"Bryopsida","category3":"Tomentypnum nitens"},{"name":"Klettasnyrill","imgUrl":"https://myndir.ni.is/floraisl/mosar/tortetor1m.jpg","fullName":"Klettasnyrill (Tortella tortuosa)","category":"Bryophyta","category2":"Bryopsida","category3":"Tortella tortuosa"},{"name":"Ur\xf0asn\xfa\xf0ur","imgUrl":"https://myndir.ni.is/floraisl/mosar/tortusub1m.jpg","fullName":"Ur\xf0asn\xfa\xf0ur (Tortula subulata)","category":"Bryophyta","category2":"Bryopsida","category3":"Tortula subulata"}]')}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".3ba6bdf3.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="bird-game-client:";n.l=function(r,a,i,o){if(e[r])e[r].push(a);else{var s,l;if(void 0!==i)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+i){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var a,i,o=r[0],s=r[1],l=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)l(n)}for(t&&t(r);u<o.length;u++)i=o[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkbird_game_client=self.webpackChunkbird_game_client||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(791),t=n(164);function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(l){s=!0,a=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,l,"next",e)}function l(e){o(i,r,a,s,l,"throw",e)}s(void 0)}))}}var l=n(757),u=n.n(l);function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(AS){return!1}}function f(e,t,n){return f=h()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&c(a,n.prototype),a},f.apply(null,arguments)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function m(){return m="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=p(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},m.apply(this,arguments)}function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){if(t&&("object"===y(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function w(e){var t=h();return function(){var n,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x(this,n)}}function _(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return f(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},E(e)}var A=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],a=0;a<e.length;a+=3){var i=e[a],o=a+1<e.length,s=o?e[a+1]:0,l=a+2<e.length,u=l?e[a+2]:0,c=i>>2,h=(3&i)<<4|s>>4,f=(15&s)<<2|u>>6,d=63&u;l||(d=64,o||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(A(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){var i=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&i)}else if(a>239&&a<365){var o=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],l=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&l)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],a=0;a<e.length;){var i=n[e.charAt(a++)],o=a<e.length?n[e.charAt(a)]:0,s=++a<e.length?n[e.charAt(a)]:64,l=++a<e.length?n[e.charAt(a)]:64;if(++a,null==i||null==o||null==s||null==l)throw Error();var u=i<<2|o>>4;if(r.push(u),64!==s){var c=o<<4&240|s>>2;if(r.push(c),64!==l){var h=s<<6&192|l;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},L=function(e){return function(e){var t=A(e);return C.encodeByteArray(t,!0)}(e).replace(/\./g,"")};var R=function(){function e(){var t=this;k(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return M(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function N(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}var P=function(e){v(n,e);var t=w(n);function n(e,r,a){var i;return k(this,n),(i=t.call(this,r)).code=e,i.customData=a,i.name="FirebaseError",Object.setPrototypeOf(b(i),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(i),I.prototype.create),i}return M(n)}(E(Error)),I=function(){function e(t,n,r){k(this,e),this.service=t,this.serviceName=n,this.errors=r}return M(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],a=r?D(r,t):"Error",i="".concat(this.serviceName,": ").concat(a," (").concat(n,")."),o=new P(n,i,t);return o}}]),e}();function D(e,t){return e.replace(U,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var U=/\{\$([^}]+)}/g;function j(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),a=0,i=n;a<i.length;a++){var o=i[a];if(!r.includes(o))return!1;var s=e[o],l=t[o];if(O(s)&&O(l)){if(!j(s,l))return!1}else if(s!==l)return!1}for(var u=0,c=r;u<c.length;u++){var h=c[u];if(!n.includes(h))return!1}return!0}function O(e){return null!==e&&"object"===typeof e}function F(e){return e&&e._delegate?e._delegate:e}function B(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var z=function(){function e(t){k(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return M(e,[{key:"transaction",value:function(e,t){return new H(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new V(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),H=function(){function e(t){var n=this;k(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return M(e,[{key:"objectStore",value:function(e){return new V(this._transaction.objectStore(e))}}]),e}(),V=function(){function e(t){k(this,e),this._store=t}return M(e,[{key:"index",value:function(e){return new G(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new G(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return B(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return B(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return B(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return B(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),G=function(){function e(t){k(this,e),this._index=t}return M(e,[{key:"get",value:function(e){return B(this._index.get(e),"Error reading from IndexedDB")}}]),e}();var W=function(){function e(t,n,r){k(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return M(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),q="[DEFAULT]",K=function(){function e(t,n){k(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return M(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new R;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(AS){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(AS){if(r)return null;throw AS}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:q})}catch(AS){}var t,n=g(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=i(t.value,2),a=r[0],o=r[1],s=this.normalizeInstanceIdentifier(a);try{var l=this.getOrInitializeService({instanceIdentifier:s});o.resolve(l)}catch(AS){}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=s(l.mark((function e(){var t;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(_(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),_(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a,o=this.getOrInitializeService({instanceIdentifier:r,options:n}),s=g(this.instancesDeferred.entries());try{for(s.s();!(a=s.n()).done;){var l=i(a.value,2),u=l[0],c=l[1],h=this.normalizeInstanceIdentifier(u);r===h&&c.resolve(o)}}catch(f){s.e(f)}finally{s.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);var i=this.instances.get(r);return i&&e(i,r),function(){a.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,a=g(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;try{i(e,t)}catch(o){}}}catch(s){a.e(s)}finally{a.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,a=void 0===r?{}:r,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===q?void 0:t),options:a}),this.instances.set(n,i),this.instancesOptions.set(n,a),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch(o){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return this.component?this.component.multipleInstances?e:q:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var X,Y,J=function(){function e(t){k(this,e),this.name=t,this.providers=new Map}return M(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new K(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Q=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Y||(Y={}));var Z,$,ee={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},te=Y.INFO,ne=(T(X={},Y.DEBUG,"log"),T(X,Y.VERBOSE,"log"),T(X,Y.INFO,"info"),T(X,Y.WARN,"warn"),T(X,Y.ERROR,"error"),X),re=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ne[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a,i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];(a=console)[r].apply(a,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ae=function(){function e(t){k(this,e),this.name=t,this._logLevel=te,this._logHandler=re,this._userLogHandler=null,Q.push(this)}return M(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Y))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ee[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Y.DEBUG].concat(t)),this._logHandler.apply(this,[this,Y.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Y.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Y.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Y.INFO].concat(t)),this._logHandler.apply(this,[this,Y.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Y.WARN].concat(t)),this._logHandler.apply(this,[this,Y.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Y.ERROR].concat(t)),this._logHandler.apply(this,[this,Y.ERROR].concat(t))}}]),e}();var ie=function(){function e(t){k(this,e),this.container=t}return M(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var oe="@firebase/app",se="0.7.20",le=new ae("@firebase/app"),ue="[DEFAULT]",ce=(T(Z={},oe,"fire-core"),T(Z,"@firebase/app-compat","fire-core-compat"),T(Z,"@firebase/analytics","fire-analytics"),T(Z,"@firebase/analytics-compat","fire-analytics-compat"),T(Z,"@firebase/app-check","fire-app-check"),T(Z,"@firebase/app-check-compat","fire-app-check-compat"),T(Z,"@firebase/auth","fire-auth"),T(Z,"@firebase/auth-compat","fire-auth-compat"),T(Z,"@firebase/database","fire-rtdb"),T(Z,"@firebase/database-compat","fire-rtdb-compat"),T(Z,"@firebase/functions","fire-fn"),T(Z,"@firebase/functions-compat","fire-fn-compat"),T(Z,"@firebase/installations","fire-iid"),T(Z,"@firebase/installations-compat","fire-iid-compat"),T(Z,"@firebase/messaging","fire-fcm"),T(Z,"@firebase/messaging-compat","fire-fcm-compat"),T(Z,"@firebase/performance","fire-perf"),T(Z,"@firebase/performance-compat","fire-perf-compat"),T(Z,"@firebase/remote-config","fire-rc"),T(Z,"@firebase/remote-config-compat","fire-rc-compat"),T(Z,"@firebase/storage","fire-gcs"),T(Z,"@firebase/storage-compat","fire-gcs-compat"),T(Z,"@firebase/firestore","fire-fst"),T(Z,"@firebase/firestore-compat","fire-fst-compat"),T(Z,"fire-js","fire-js"),T(Z,"firebase","fire-js-all"),Z),he=new Map,fe=new Map;function de(e,t){try{e.container.addComponent(t)}catch(AS){le.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),AS)}}function pe(e){var t=e.name;if(fe.has(t))return le.debug("There were multiple attempts to register component ".concat(t,".")),!1;fe.set(t,e);var n,r=g(he.values());try{for(r.s();!(n=r.n()).done;){de(n.value,e)}}catch(a){r.e(a)}finally{r.f()}return!0}function me(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var ge=(T($={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),T($,"bad-app-name","Illegal App name: '{$appName}"),T($,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),T($,"app-deleted","Firebase App named '{$appName}' already deleted"),T($,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),T($,"invalid-log-argument","First argument to `onLog` must be null or a function."),T($,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),T($,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),T($,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),T($,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),$),ve=new I("app","Firebase",ge),ye=function(){function e(t,n,r){var a=this;k(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new W("app",(function(){return a}),"PUBLIC"))}return M(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw ve.create("app-deleted",{appName:this._name})}}]),e}();function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=he.get(e);if(!t)throw ve.create("no-app",{appName:e});return t}function xe(e,t,n){var r,a=null!==(r=ce[e])&&void 0!==r?r:e;n&&(a+="-".concat(n));var i=a.match(/\s|\//),o=t.match(/\s|\//);if(i||o){var s=['Unable to register library "'.concat(a,'" with version "').concat(t,'":')];return i&&s.push('library name "'.concat(a,'" contains illegal characters (whitespace or "/")')),i&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void le.warn(s.join(" "))}pe(new W("".concat(a,"-version"),(function(){return{library:a,version:t}}),"VERSION"))}var we="firebase-heartbeat-store",_e=null;function ke(){var e,t,n;return _e||(_e=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(we)},new Promise((function(r,a){try{var i=indexedDB.open(e,t);i.onsuccess=function(e){r(new z(e.target.result))},i.onerror=function(e){var t;a("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},i.onupgradeneeded=function(e){n(new z(i.result),e.oldVersion,e.newVersion,new H(i.transaction))}}catch(AS){a("Error opening indexedDB: ".concat(AS.message))}}))).catch((function(e){throw ve.create("storage-open",{originalErrorMessage:e.message})}))),_e}function Se(e){return Me.apply(this,arguments)}function Me(){return Me=s(l.mark((function e(t){var n;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke();case 3:return n=e.sent,e.abrupt("return",n.transaction(we).objectStore(we).get(Ae(t)));case 7:throw e.prev=7,e.t0=e.catch(0),ve.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Me.apply(this,arguments)}function Te(e,t){return Ee.apply(this,arguments)}function Ee(){return Ee=s(l.mark((function e(t,n){var r,a,i;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke();case 3:return r=e.sent,a=r.transaction(we,"readwrite"),i=a.objectStore(we),e.next=8,i.put(n,Ae(t));case 8:return e.abrupt("return",a.complete);case 11:throw e.prev=11,e.t0=e.catch(0),ve.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Ee.apply(this,arguments)}function Ae(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ce=function(){function e(t){var n=this;k(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Pe(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return M(e,[{key:"triggerHeartbeat",value:function(){var e=s(l.mark((function e(){var t,n,r;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Le(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=s(l.mark((function e(){var t,n,r,a,i;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Le(),n=Re(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,a=n.unsentEntries,i=L(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Le(){return(new Date).toISOString().substring(0,10)}function Re(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],a=e.slice(),i=g(e);try{var o=function(){var e=t.value,i=r.find((function(t){return t.agent===e.agent}));if(i){if(i.dates.push(e.date),Ie(r)>n)return i.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ie(r)>n)return r.pop(),"break";a=a.slice(1)};for(i.s();!(t=i.n()).done;){var s=o();if("break"===s)break}}catch(l){i.e(l)}finally{i.f()}return{heartbeatsToSend:r,unsentEntries:a}}var Ne,Pe=function(){function e(t){k(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return M(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=s(l.mark((function e(){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===typeof indexedDB){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=function(){a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=function(){n=!1},a.onerror=function(){var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(i){t(i)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=s(l.mark((function e(){var t;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Se(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=s(l.mark((function e(t){var n,r;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Te(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=s(l.mark((function e(t){var n,r;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Te(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(_(r.heartbeats),_(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ie(e){return L(JSON.stringify({version:2,heartbeats:e})).length}Ne="",pe(new W("platform-logger",(function(e){return new ie(e)}),"PRIVATE")),pe(new W("heartbeat",(function(e){return new Ce(e)}),"PRIVATE")),xe(oe,se,Ne),xe(oe,se,"esm2017"),xe("fire-js","");var De,Ue="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},je={},Oe=Oe||{},Fe=Ue||self;function Be(){}function ze(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function He(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ve="closure_uid_"+(1e9*Math.random()>>>0),Ge=0;function We(e,t,n){return e.call.apply(e.bind,arguments)}function qe(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ke(e,t,n){return(Ke=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?We:qe).apply(null,arguments)}function Xe(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ye(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[n].apply(e,a)}}function Je(){this.s=this.s,this.o=this.o}var Qe={};Je.prototype.s=!1,Je.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Ve)&&e[Ve]||(e[Ve]=++Ge)}(this);delete Qe[e]}},Je.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ze=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},$e=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,a="string"===typeof e?e.split(""):e,i=0;i<r;i++)i in a&&t.call(n,a[i],i,e)};function et(e){return Array.prototype.concat.apply([],arguments)}function tt(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function nt(e){return/^[\s\xa0]*$/.test(e)}var rt,at=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function it(e,t){return-1!=e.indexOf(t)}function ot(e,t){return e<t?-1:e>t?1:0}e:{var st=Fe.navigator;if(st){var lt=st.userAgent;if(lt){rt=lt;break e}}rt=""}function ut(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ct(e){var t={};for(var n in e)t[n]=e[n];return t}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(e,t){for(var n,r,a=1;a<arguments.length;a++){for(n in r=arguments[a])e[n]=r[n];for(var i=0;i<ht.length;i++)n=ht[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function dt(e){return dt[" "](e),e}dt[" "]=Be;var pt,mt=it(rt,"Opera"),gt=it(rt,"Trident")||it(rt,"MSIE"),vt=it(rt,"Edge"),yt=vt||gt,bt=it(rt,"Gecko")&&!(it(rt.toLowerCase(),"webkit")&&!it(rt,"Edge"))&&!(it(rt,"Trident")||it(rt,"MSIE"))&&!it(rt,"Edge"),xt=it(rt.toLowerCase(),"webkit")&&!it(rt,"Edge");function wt(){var e=Fe.document;return e?e.documentMode:void 0}e:{var _t="",kt=function(){var e=rt;return bt?/rv:([^\);]+)(\)|;)/.exec(e):vt?/Edge\/([\d\.]+)/.exec(e):gt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):xt?/WebKit\/(\S+)/.exec(e):mt?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(kt&&(_t=kt?kt[1]:""),gt){var St=wt();if(null!=St&&St>parseFloat(_t)){pt=String(St);break e}}pt=_t}var Mt,Tt={};function Et(){return function(e){var t=Tt;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=at(String(pt)).split("."),n=at("9").split("."),r=Math.max(t.length,n.length),a=0;0==e&&a<r;a++){var i=t[a]||"",o=n[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;e=ot(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||ot(0==i[2].length,0==o[2].length)||ot(i[2],o[2]),i=i[3],o=o[3]}while(0==e)}return 0<=e}))}if(Fe.document&&gt){var At=wt();Mt=At||(parseInt(pt,10)||void 0)}else Mt=void 0;var Ct=Mt,Lt=function(){if(!Fe.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Fe.addEventListener("test",Be,t),Fe.removeEventListener("test",Be,t)}catch(n){}return e}();function Rt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Nt(e,t){if(Rt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(bt){e:{try{dt(t.nodeName);var a=!0;break e}catch(i){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Pt[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Nt.Z.h.call(this)}}Rt.prototype.h=function(){this.defaultPrevented=!0},Ye(Nt,Rt);var Pt={2:"touch",3:"pen",4:"mouse"};Nt.prototype.h=function(){Nt.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var It="closure_listenable_"+(1e6*Math.random()|0),Dt=0;function Ut(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=a,this.key=++Dt,this.ca=this.fa=!1}function jt(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Ot(e){this.src=e,this.g={},this.h=0}function Ft(e,t){var n=t.type;if(n in e.g){var r,a=e.g[n],i=Ze(a,t);(r=0<=i)&&Array.prototype.splice.call(a,i,1),r&&(jt(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Bt(e,t,n,r){for(var a=0;a<e.length;++a){var i=e[a];if(!i.ca&&i.listener==t&&i.capture==!!n&&i.ia==r)return a}return-1}Ot.prototype.add=function(e,t,n,r,a){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=Bt(e,t,r,a);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Ut(t,this.src,i,!!r,a)).fa=n,e.push(t)),t};var zt="closure_lm_"+(1e6*Math.random()|0),Ht={};function Vt(e,t,n,r,a){if(r&&r.once)return Wt(e,t,n,r,a);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Vt(e,t[i],n,r,a);return null}return n=Zt(n),e&&e[It]?e.N(t,n,He(r)?!!r.capture:!!r,a):Gt(e,t,n,!1,r,a)}function Gt(e,t,n,r,a,i){if(!t)throw Error("Invalid event type");var o=He(a)?!!a.capture:!!a,s=Jt(e);if(s||(e[zt]=s=new Ot(e)),(n=s.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Yt;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Lt||(a=o),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(Xt(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Wt(e,t,n,r,a){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Wt(e,t[i],n,r,a);return null}return n=Zt(n),e&&e[It]?e.O(t,n,He(r)?!!r.capture:!!r,a):Gt(e,t,n,!0,r,a)}function qt(e,t,n,r,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)qt(e,t[i],n,r,a);else r=He(r)?!!r.capture:!!r,n=Zt(n),e&&e[It]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Bt(i=e.g[t],n,r,a))&&(jt(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Jt(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Bt(t,n,r,a)),(n=-1<e?t[e]:null)&&Kt(n))}function Kt(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[It])Ft(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Xt(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Jt(t))?(Ft(n,e),0==n.h&&(n.src=null,t[zt]=null)):jt(e)}}}function Xt(e){return e in Ht?Ht[e]:Ht[e]="on"+e}function Yt(e,t){if(e.ca)e=!0;else{t=new Nt(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Kt(e),e=n.call(r,t)}return e}function Jt(e){return(e=e[zt])instanceof Ot?e:null}var Qt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zt(e){return"function"===typeof e?e:(e[Qt]||(e[Qt]=function(t){return e.handleEvent(t)}),e[Qt])}function $t(){Je.call(this),this.i=new Ot(this),this.P=this,this.I=null}function en(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Rt(t,e);else if(t instanceof Rt)t.target=t.target||e;else{var a=t;ft(t=new Rt(r,e),a)}if(a=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];a=tn(o,r,!0,t)&&a}if(a=tn(o=t.g=e,r,!0,t)&&a,a=tn(o,r,!1,t)&&a,n)for(i=0;i<n.length;i++)a=tn(o=t.g=n[i],r,!1,t)&&a}function tn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.ca&&o.capture==n){var s=o.listener,l=o.ia||o.src;o.fa&&Ft(e.i,o),a=!1!==s.call(l,r)&&a}}return a&&!r.defaultPrevented}Ye($t,Je),$t.prototype[It]=!0,$t.prototype.removeEventListener=function(e,t,n,r){qt(this,e,t,n,r)},$t.prototype.M=function(){if($t.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)jt(n[r]);delete t.g[e],t.h--}}this.I=null},$t.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$t.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var nn=Fe.JSON.stringify;function rn(){var e=fn,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var an,on=function(){function e(){k(this,e),this.h=this.g=null}return M(e,[{key:"add",value:function(e,t){var n=sn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),sn=new(function(){function e(t,n){k(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return M(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ln}),(function(e){return e.reset()})),ln=function(){function e(){k(this,e),this.next=this.g=this.h=null}return M(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function un(e){Fe.setTimeout((function(){throw e}),0)}function cn(e,t){an||function(){var e=Fe.Promise.resolve(void 0);an=function(){e.then(dn)}}(),hn||(an(),hn=!0),fn.add(e,t)}var hn=!1,fn=new on;function dn(){for(var e;e=rn();){try{e.h.call(e.g)}catch(n){un(n)}var t=sn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}hn=!1}function pn(e,t){$t.call(this),this.h=e||1,this.g=t||Fe,this.j=Ke(this.kb,this),this.l=Date.now()}function mn(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function gn(e,t,n){if("function"===typeof e)n&&(e=Ke(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ke(e.handleEvent,e)}return 2147483647<Number(t)?-1:Fe.setTimeout(e,t||0)}function vn(e){e.g=gn((function(){e.g=null,e.i&&(e.i=!1,vn(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ye(pn,$t),(De=pn.prototype).da=!1,De.S=null,De.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),en(this,"tick"),this.da&&(mn(this),this.start()))}},De.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},De.M=function(){pn.Z.M.call(this),mn(this),delete this.g};var yn=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this)).m=e,a.j=r,a.h=null,a.i=!1,a.g=null,a}return M(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:vn(this)}},{key:"M",value:function(){m(d(n.prototype),"M",this).call(this),this.g&&(Fe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Je);function bn(e){Je.call(this),this.h=e,this.g={}}Ye(bn,Je);var xn=[];function wn(e,t,n,r){Array.isArray(n)||(n&&(xn[0]=n.toString()),n=xn);for(var a=0;a<n.length;a++){var i=Vt(t,n[a],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function _n(e){ut(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Kt(e)}),e),e.g={}}function kn(){this.g=!0}function Sn(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var i=a[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<a.length;o++)a[o]=""}}}return nn(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}bn.prototype.M=function(){bn.Z.M.call(this),_n(this)},bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kn.prototype.Aa=function(){this.g=!1},kn.prototype.info=function(){};var Mn={},Tn=null;function En(){return Tn=Tn||new $t}function An(e){Rt.call(this,Mn.Ma,e)}function Cn(e){var t=En();en(t,new An(t,e))}function Ln(e,t){Rt.call(this,Mn.STAT_EVENT,e),this.stat=t}function Rn(e){var t=En();en(t,new Ln(t,e))}function Nn(e,t){Rt.call(this,Mn.Na,e),this.size=t}function Pn(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Fe.setTimeout((function(){e()}),t)}Mn.Ma="serverreachability",Ye(An,Rt),Mn.STAT_EVENT="statevent",Ye(Ln,Rt),Mn.Na="timingevent",Ye(Nn,Rt);var In={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Dn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Un(){}function jn(e){return e.h||(e.h=e.i())}function On(){}Un.prototype.h=null;var Fn,Bn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function zn(){Rt.call(this,"d")}function Hn(){Rt.call(this,"c")}function Vn(){}function Gn(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new bn(this),this.P=qn,e=yt?125:void 0,this.W=new pn(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Wn}function Wn(){this.i=null,this.g="",this.h=!1}Ye(zn,Rt),Ye(Hn,Rt),Ye(Vn,Un),Vn.prototype.g=function(){return new XMLHttpRequest},Vn.prototype.i=function(){return{}},Fn=new Vn;var qn=45e3,Kn={},Xn={};function Yn(e,t,n){e.K=1,e.v=yr(fr(t)),e.s=n,e.U=!0,Jn(e,null)}function Jn(e,t){e.F=Date.now(),er(e),e.A=fr(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Rr(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Wn,e.g=Pa(e.l,n?t:null,!e.s),0<e.O&&(e.L=new yn(Ke(e.Ia,e,e.g),e.O)),wn(e.V,e.g,"readystatechange",e.gb),t=e.H?ct(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Cn(1),function(e,t,n,r,a,i){e.info((function(){if(e.g)if(i)for(var o="",s=i.split("&"),l=0;l<s.length;l++){var u=s[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Qn(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Zn(e,t,n){for(var r,a=!0;!e.I&&e.C<n.length;){if((r=$n(e,n))==Xn){4==t&&(e.o=4,Rn(14),a=!1),Sn(e.j,e.m,null,"[Incomplete Response]");break}if(r==Kn){e.o=4,Rn(15),Sn(e.j,e.m,n,"[Invalid Chunk]"),a=!1;break}Sn(e.j,e.m,r,null),ir(e,r)}Qn(e)&&r!=Xn&&r!=Kn&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Rn(16),a=!1),e.i=e.i&&a,a?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ma(t),t.L=!0,Rn(11))):(Sn(e.j,e.m,n,"[Invalid Chunked Response]"),ar(e),rr(e))}function $n(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Xn:(n=Number(t.substring(n,r)),isNaN(n)?Kn:(r+=1)+n>t.length?Xn:(t=t.substr(r,n),e.C=r+n,t))}function er(e){e.Y=Date.now()+e.P,tr(e,e.P)}function tr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Pn(Ke(e.eb,e),t)}function nr(e){e.B&&(Fe.clearTimeout(e.B),e.B=null)}function rr(e){0==e.l.G||e.I||Aa(e.l,e)}function ar(e){nr(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,mn(e.W),_n(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ir(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Fr(n.i,e)))if(n.I=e.N,!e.J&&Fr(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(i){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Ea(n),ga(n)}Sa(n),Rn(18)}}else n.ta=a[1],0<n.ta-n.U&&37500>a[2]&&n.N&&0==n.A&&!n.v&&(n.v=Pn(Ke(n.ab,n),6e3));if(1>=Or(n.i)&&n.ka){try{n.ka()}catch(i){}n.ka=void 0}}else La(n,11)}else if((e.J||n.g==e)&&Ea(n),!nt(t))for(a=n.Ca.g.parse(t),t=0;t<a.length;t++){var i=a[t];if(n.U=i[0],i=i[1],2==n.G)if("c"==i[0]){n.J=i[1],n.la=i[2];var o=i[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=i[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var l=i[5];null!=l&&"number"===typeof l&&0<l&&(r=1.5*l,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var u=e.g;if(u){var c=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.i;!h.g&&(it(c,"spdy")||it(c,"quic")||it(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Br(h,h.h),h.h=null))}if(r.D){var f=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,vr(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Na(r,r.H?r.la:null,r.W),d.J){zr(r.i,d);var p=d,m=r.K;m&&p.setTimeout(m),p.B&&(nr(p),er(p)),r.g=d}else ka(r);0<n.l.length&&ba(n)}else"stop"!=i[0]&&"close"!=i[0]||La(n,7);else 3==n.G&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?La(n,7):ma(n):"noop"!=i[0]&&n.j&&n.j.wa(i),n.A=0)}Cn(4)}catch(i){}}function or(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ze(e)||"string"===typeof e)$e(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(ze(e)||"string"===typeof e){n=[];for(var r=e.length,a=0;a<r;a++)n.push(a)}else for(a in n=[],r=0,e)n[r++]=a;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(ze(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),a=r.length;for(var i=0;i<a;i++)t.call(void 0,r[i],n&&n[i],e)}}function sr(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof sr)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function lr(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];ur(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var a={};for(n=t=0;t<e.g.length;)ur(a,r=e.g[t])||(e.g[n++]=r,a[r]=1),t++;e.g.length=n}}function ur(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(De=Gn.prototype).setTimeout=function(e){this.P=e},De.gb=function(e){e=e.target;var t=this.L;t&&3==ca(e)?t.l():this.Ia(e)},De.Ia=function(e){try{if(e==this.g)e:{var t=ca(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||yt||this.g&&(this.h.h||this.g.ga()||ha(this.g)))){this.I||4!=t||7==n||Cn(8==n||0>=r?3:2),nr(this);var a=this.g.ba();this.N=a;t:if(Qn(this)){var i=ha(this.g);e="";var o=i.length,s=4==ca(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ar(this),rr(this);var l="";break t}this.h.i=new Fe.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:s&&n==o-1});i.splice(0,o),this.h.g+=e,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==a,function(e,t,n,r,a,i,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+n+"\n"+i+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,a),this.i){if(this.$&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nt(u)){var h=u;break t}}h=null}if(!(a=h)){this.i=!1,this.o=3,Rn(12),ar(this),rr(this);break e}Sn(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ir(this,a)}this.U?(Zn(this,t,l),yt&&this.i&&3==t&&(wn(this.V,this.W,"tick",this.fb),this.W.start())):(Sn(this.j,this.m,l,null),ir(this,l)),4==t&&ar(this),this.i&&!this.I&&(4==t?Aa(this.l,this):(this.i=!1,er(this)))}else 400==a&&0<l.indexOf("Unknown SID")?(this.o=3,Rn(12)):(this.o=0,Rn(13)),ar(this),rr(this)}}}catch(t){}},De.fb=function(){if(this.g){var e=ca(this.g),t=this.g.ga();this.C<t.length&&(nr(this),Zn(this,e,t),this.i&&4!=e&&er(this))}},De.cancel=function(){this.I=!0,ar(this)},De.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Cn(3),Rn(17)),ar(this),this.o=2,rr(this)):tr(this,this.Y-e)},(De=sr.prototype).R=function(){lr(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},De.T=function(){return lr(this),this.g.concat()},De.get=function(e,t){return ur(this.h,e)?this.h[e]:t},De.set=function(e,t){ur(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},De.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var a=n[r],i=this.get(a);e.call(t,i,a,this)}};var cr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function hr(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof hr){this.g=void 0!==t?t:e.g,dr(this,e.j),this.s=e.s,pr(this,e.i),mr(this,e.m),this.l=e.l,t=e.h;var n=new Er;n.i=t.i,t.g&&(n.g=new sr(t.g),n.h=t.h),gr(this,n),this.o=e.o}else e&&(n=String(e).match(cr))?(this.g=!!t,dr(this,n[1]||"",!0),this.s=br(n[2]||""),pr(this,n[3]||"",!0),mr(this,n[4]),this.l=br(n[5]||"",!0),gr(this,n[6]||"",!0),this.o=br(n[7]||"")):(this.g=!!t,this.h=new Er(null,this.g))}function fr(e){return new hr(e)}function dr(e,t,n){e.j=n?br(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function pr(e,t,n){e.i=n?br(t,!0):t}function mr(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function gr(e,t,n){t instanceof Er?(e.h=t,function(e,t){t&&!e.j&&(Ar(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Cr(this,t),Rr(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=xr(t,Mr)),e.h=new Er(t,e.g))}function vr(e,t,n){e.h.set(t,n)}function yr(e){return vr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function br(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xr(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wr),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wr(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}hr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(xr(t,_r,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(xr(t,_r,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(xr(n,"/"==n.charAt(0)?Sr:kr,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",xr(n,Tr)),e.join("")};var _r=/[#\/\?@]/g,kr=/[#\?:]/g,Sr=/[#\?]/g,Mr=/[#\?@]/g,Tr=/#/g;function Er(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ar(e){e.g||(e.g=new sr,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),a=null;if(0<=r){var i=e[n].substring(0,r);a=e[n].substring(r+1)}else i=e[n];t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Cr(e,t){Ar(e),t=Nr(e,t),ur(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,ur((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&lr(e)))}function Lr(e,t){return Ar(e),t=Nr(e,t),ur(e.g.h,t)}function Rr(e,t,n){Cr(e,t),0<n.length&&(e.i=null,e.g.set(Nr(e,t),tt(n)),e.h+=n.length)}function Nr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(De=Er.prototype).add=function(e,t){Ar(this),this.i=null,e=Nr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},De.forEach=function(e,t){Ar(this),this.g.forEach((function(n,r){$e(n,(function(n){e.call(t,n,r,this)}),this)}),this)},De.T=function(){Ar(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var a=e[r],i=0;i<a.length;i++)n.push(t[r]);return n},De.R=function(e){Ar(this);var t=[];if("string"===typeof e)Lr(this,e)&&(t=et(t,this.g.get(Nr(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=et(t,e[n])}return t},De.set=function(e,t){return Ar(this),this.i=null,Lr(this,e=Nr(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},De.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},De.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],a=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var o=a;""!==r[i]&&(o+="="+encodeURIComponent(String(r[i]))),e.push(o)}}return this.i=e.join("&")};var Pr=M((function e(t,n){k(this,e),this.h=t,this.g=n}));function Ir(e){this.l=e||Ur,Fe.PerformanceNavigationTiming?e=0<(e=Fe.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Fe.g&&Fe.g.Ea&&Fe.g.Ea()&&Fe.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Dr,Ur=10;function jr(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Or(e){return e.h?1:e.g?e.g.size:0}function Fr(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Br(e,t){e.g?e.g.add(t):e.h=t}function zr(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Hr(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=g(e.g.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;n=n.concat(a.D)}}catch(i){r.e(i)}finally{r.f()}return n}return tt(e.i)}function Vr(){}function Gr(){this.g=new Vr}function Wr(e,t,n){var r=n||"";try{or(e,(function(e,n){var a=e;He(e)&&(a=nn(e)),t.push(r+n+"="+encodeURIComponent(a))}))}catch(AS){throw t.push(r+"type="+encodeURIComponent("_badmap")),AS}}function qr(e,t,n,r,a){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,a(r)}catch(i){}}function Kr(e){this.l=e.$b||null,this.j=e.ib||!1}function Xr(e,t){$t.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Yr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ir.prototype.cancel=function(){if(this.i=Hr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=g(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Vr.prototype.stringify=function(e){return Fe.JSON.stringify(e,void 0)},Vr.prototype.parse=function(e){return Fe.JSON.parse(e,void 0)},Ye(Kr,Un),Kr.prototype.g=function(){return new Xr(this.l,this.j)},Kr.prototype.i=(Dr={},function(){return Dr}),Ye(Xr,$t);var Yr=0;function Jr(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Qr(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Zr(e)}function Zr(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(De=Xr.prototype).open=function(e,t){if(this.readyState!=Yr)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Zr(this)},De.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Fe).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},De.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qr(this)),this.readyState=Yr},De.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Fe.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Jr(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},De.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Qr(this):Zr(this),3==this.readyState&&Jr(this)}},De.Ua=function(e){this.g&&(this.response=this.responseText=e,Qr(this))},De.Ta=function(e){this.g&&(this.response=e,Qr(this))},De.ha=function(){this.g&&Qr(this)},De.setRequestHeader=function(e,t){this.v.append(e,t)},De.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},De.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Xr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var $r=Fe.JSON.parse;function ea(e){$t.call(this),this.headers=new sr,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ta,this.K=this.L=!1}Ye(ea,$t);var ta="",na=/^https?$/i,ra=["POST","PUT"];function aa(e){return"content-type"==e.toLowerCase()}function ia(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,oa(e),la(e)}function oa(e){e.D||(e.D=!0,en(e,"complete"),en(e,"error"))}function sa(e){if(e.h&&"undefined"!=typeof Oe&&(!e.C[1]||4!=ca(e)||2!=e.ba()))if(e.v&&4==ca(e))gn(e.Fa,0,e);else if(en(e,"readystatechange"),4==ca(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var a;if(a=0===n){var i=String(e.H).match(cr)[1]||null;if(!i&&Fe.self&&Fe.self.location){var o=Fe.self.location.protocol;i=o.substr(0,o.length-1)}a=!na.test(i?i.toLowerCase():"")}t=a}if(t)en(e,"complete"),en(e,"success");else{e.m=6;try{var s=2<ca(e)?e.g.statusText:""}catch(l){s=""}e.j=s+" ["+e.ba()+"]",oa(e)}}finally{la(e)}}}function la(e,t){if(e.g){ua(e);var n=e.g,r=e.C[0]?Be:null;e.g=null,e.C=null,t||en(e,"ready");try{n.onreadystatechange=r}catch(AS){}}}function ua(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Fe.clearTimeout(e.A),e.A=null)}function ca(e){return e.g?e.g.readyState:0}function ha(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ta:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function fa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return ut(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):vr(e,t,n))}function da(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function pa(e){this.za=0,this.l=[],this.h=new kn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=da("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=da("baseRetryDelayMs",5e3,e),this.$a=da("retryDelaySeedMs",1e4,e),this.Ya=da("forwardChannelMaxRetries",2,e),this.ra=da("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ir(e&&e.concurrentRequestLimit),this.Ca=new Gr,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ma(e){if(va(e),3==e.G){var t=e.V++,n=fr(e.F);vr(n,"SID",e.J),vr(n,"RID",t),vr(n,"TYPE","terminate"),wa(e,n),(t=new Gn(e,e.h,t,void 0)).K=2,t.v=yr(fr(n)),n=!1,Fe.navigator&&Fe.navigator.sendBeacon&&(n=Fe.navigator.sendBeacon(t.v.toString(),"")),!n&&Fe.Image&&((new Image).src=t.v,n=!0),n||(t.g=Pa(t.l,null),t.g.ea(t.v)),t.F=Date.now(),er(t)}Ra(e)}function ga(e){e.g&&(Ma(e),e.g.cancel(),e.g=null)}function va(e){ga(e),e.u&&(Fe.clearTimeout(e.u),e.u=null),Ea(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Fe.clearTimeout(e.m),e.m=null)}function ya(e,t){e.l.push(new Pr(e.Za++,t)),3==e.G&&ba(e)}function ba(e){jr(e.i)||e.m||(e.m=!0,cn(e.Ha,e),e.C=0)}function xa(e,t){var n;n=t?t.m:e.V++;var r=fr(e.F);vr(r,"SID",e.J),vr(r,"RID",n),vr(r,"AID",e.U),wa(e,r),e.o&&e.s&&fa(r,e.o,e.s),n=new Gn(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=_a(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Br(e.i,n),Yn(n,r,t)}function wa(e,t){e.j&&or({},(function(e,n){vr(t,n,e)}))}function _a(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Ke(e.j.Oa,e.j,e):null;e:for(var a=e.l,i=-1;;){var o=["count="+n];-1==i?0<n?(i=a[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);for(var s=!0,l=0;l<n;l++){var u=a[l].h,c=a[l].g;if(0>(u-=i))i=Math.max(0,a[l].h-100),s=!1;else try{Wr(c,o,"req"+u+"_")}catch(oi){r&&r(c)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ka(e){e.g||e.u||(e.Y=1,cn(e.Ga,e),e.A=0)}function Sa(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Pn(Ke(e.Ga,e),Ca(e,e.A)),e.A++,!0)}function Ma(e){null!=e.B&&(Fe.clearTimeout(e.B),e.B=null)}function Ta(e){e.g=new Gn(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=fr(e.oa);vr(t,"RID","rpc"),vr(t,"SID",e.J),vr(t,"CI",e.N?"0":"1"),vr(t,"AID",e.U),wa(e,t),vr(t,"TYPE","xmlhttp"),e.o&&e.s&&fa(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=yr(fr(t)),n.s=null,n.U=!0,Jn(n,e)}function Ea(e){null!=e.v&&(Fe.clearTimeout(e.v),e.v=null)}function Aa(e,t){var n=null;if(e.g==t){Ea(e),Ma(e),e.g=null;var r=2}else{if(!Fr(e.i,t))return;n=t.D,zr(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var a=e.C;en(r=En(),new Nn(r,n,t,a)),ba(e)}else ka(e);else if(3==(a=t.o)||0==a&&0<e.I||!(1==r&&function(e,t){return!(Or(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Pn(Ke(e.Ha,e,t),Ca(e,e.C)),e.C++,!0))}(e,t)||2==r&&Sa(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),a){case 1:La(e,5);break;case 4:La(e,10);break;case 3:La(e,6);break;default:La(e,2)}}function Ca(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function La(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Ke(e.jb,e);n||(n=new hr("//www.google.com/images/cleardot.gif"),Fe.location&&"http"==Fe.location.protocol||dr(n,"https"),yr(n)),function(e,t){var n=new kn;if(Fe.Image){var r=new Image;r.onload=Xe(qr,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Xe(qr,n,r,"TestLoadImage: error",!1,t),r.onabort=Xe(qr,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Xe(qr,n,r,"TestLoadImage: timeout",!1,t),Fe.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Rn(2);e.G=0,e.j&&e.j.va(t),Ra(e),va(e)}function Ra(e){e.G=0,e.I=-1,e.j&&(0==Hr(e.i).length&&0==e.l.length||(e.i.i.length=0,tt(e.l),e.l.length=0),e.j.ua())}function Na(e,t,n){var r=function(e){return e instanceof hr?fr(e):new hr(e,void 0)}(n);if(""!=r.i)t&&pr(r,t+"."+r.i),mr(r,r.m);else{var a=Fe.location;r=function(e,t,n,r){var a=new hr(null,void 0);return e&&dr(a,e),t&&pr(a,t),n&&mr(a,n),r&&(a.l=r),a}(a.protocol,t?t+"."+a.hostname:a.hostname,+a.port,n)}return e.aa&&ut(e.aa,(function(e,t){vr(r,t,e)})),t=e.D,n=e.sa,t&&n&&vr(r,t,n),vr(r,"VER",e.ma),wa(e,r),r}function Pa(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new ea(new Kr({ib:!0})):new ea(e.qa)).L=e.H,t}function Ia(){}function Da(){if(gt&&!(10<=Number(Ct)))throw Error("Environmental error: no available transport.")}function Ua(e,t){$t.call(this),this.g=new pa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!nt(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!nt(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Fa(this)}function ja(e){zn.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Oa(){Hn.call(this),this.status=1}function Fa(e){this.g=e}(De=ea.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Fn.g(),this.C=this.u?jn(this.u):jn(Fn),this.g.onreadystatechange=Ke(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(i){return void ia(this,i)}e=n||"";var a=new sr(this.headers);r&&or(r,(function(e,t){a.set(t,e)})),r=function(e){e:{for(var t=aa,n=e.length,r="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in r&&t.call(void 0,r[a],a,e)){t=a;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(a.T()),n=Fe.FormData&&e instanceof Fe.FormData,!(0<=Ze(ra,t))||r||n||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ua(this),0<this.B&&((this.K=function(e){return gt&&Et()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ke(this.pa,this)):this.A=gn(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){ia(this,i)}},De.pa=function(){"undefined"!=typeof Oe&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,en(this,"timeout"),this.abort(8))},De.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,en(this,"complete"),en(this,"abort"),la(this))},De.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),la(this,!0)),ea.Z.M.call(this)},De.Fa=function(){this.s||(this.F||this.v||this.l?sa(this):this.cb())},De.cb=function(){sa(this)},De.ba=function(){try{return 2<ca(this)?this.g.status:-1}catch(Dr){return-1}},De.ga=function(){try{return this.g?this.g.responseText:""}catch(Dr){return""}},De.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),$r(t)}},De.Da=function(){return this.m},De.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(De=pa.prototype).ma=8,De.G=1,De.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},De.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Gn(this,this.h,e,void 0),n=this.s;if(this.P&&(n?ft(n=ct(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,a=0;a<this.l.length;a++){var i=this.l[a];if(void 0===(i="__data__"in i.g&&"string"===typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(r+=i)){r=a;break e}if(4096===r||a===this.l.length-1){r=a+1;break e}}r=1e3}else r=1e3;r=_a(this,t,r),vr(a=fr(this.F),"RID",e),vr(a,"CVER",22),this.D&&vr(a,"X-HTTP-Session-Id",this.D),wa(this,a),this.o&&n&&fa(a,this.o,n),Br(this.i,t),this.Ra&&vr(a,"TYPE","init"),this.ja?(vr(a,"$req",r),vr(a,"SID","null"),t.$=!0,Yn(t,a,null)):Yn(t,a,r),this.G=2}}else 3==this.G&&(e?xa(this,e):0==this.l.length||jr(this.i)||xa(this))},De.Ga=function(){if(this.u=null,Ta(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Pn(Ke(this.bb,this),e)}},De.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Rn(10),ga(this),Ta(this))},De.ab=function(){null!=this.v&&(this.v=null,ga(this),Sa(this),Rn(19))},De.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Rn(2)):(this.h.info("Failed to ping google.com"),Rn(1))},(De=Ia.prototype).xa=function(){},De.wa=function(){},De.va=function(){},De.ua=function(){},De.Oa=function(){},Da.prototype.g=function(e,t){return new Ua(e,t)},Ye(Ua,$t),Ua.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),cn(Ke(e.hb,e,t))),Rn(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Na(e,null,e.W),ba(e)},Ua.prototype.close=function(){ma(this.g)},Ua.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,ya(this.g,t)}else this.v?((t={}).__data__=nn(e),ya(this.g,t)):ya(this.g,e)},Ua.prototype.M=function(){this.g.j=null,delete this.j,ma(this.g),delete this.g,Ua.Z.M.call(this)},Ye(ja,zn),Ye(Oa,Hn),Ye(Fa,Ia),Fa.prototype.xa=function(){en(this.g,"a")},Fa.prototype.wa=function(e){en(this.g,new ja(e))},Fa.prototype.va=function(e){en(this.g,new Oa(e))},Fa.prototype.ua=function(){en(this.g,"b")},Da.prototype.createWebChannel=Da.prototype.g,Ua.prototype.send=Ua.prototype.u,Ua.prototype.open=Ua.prototype.m,Ua.prototype.close=Ua.prototype.close,In.NO_ERROR=0,In.TIMEOUT=8,In.HTTP_ERROR=6,Dn.COMPLETE="complete",On.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",$t.prototype.listen=$t.prototype.N,ea.prototype.listenOnce=ea.prototype.O,ea.prototype.getLastError=ea.prototype.La,ea.prototype.getLastErrorCode=ea.prototype.Da,ea.prototype.getStatus=ea.prototype.ba,ea.prototype.getResponseJson=ea.prototype.Qa,ea.prototype.getResponseText=ea.prototype.ga,ea.prototype.send=ea.prototype.ea;var Ba=je.createWebChannelTransport=function(){return new Da},za=je.getStatEventTarget=function(){return En()},Ha=je.ErrorCode=In,Va=je.EventType=Dn,Ga=je.Event=Mn,Wa=je.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},qa=je.FetchXmlHttpFactory=Kr,Ka=je.WebChannel=On,Xa=je.XhrIo=ea,Ya="@firebase/firestore",Ja=function(){function e(t){k(this,e),this.uid=t}return M(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ja.UNAUTHENTICATED=new Ja(null),Ja.GOOGLE_CREDENTIALS=new Ja("google-credentials-uid"),Ja.FIRST_PARTY=new Ja("first-party-uid"),Ja.MOCK_USER=new Ja("mock-user");var Qa="9.6.10",Za=new ae("@firebase/firestore");function $a(){return Za.logLevel}function ei(e){if(Za.logLevel<=Y.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(ri);Za.debug.apply(Za,["Firestore (".concat(Qa,"): ").concat(e)].concat(_(a)))}}function ti(e){if(Za.logLevel<=Y.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(ri);Za.error.apply(Za,["Firestore (".concat(Qa,"): ").concat(e)].concat(_(a)))}}function ni(e){if(Za.logLevel<=Y.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(ri);Za.warn.apply(Za,["Firestore (".concat(Qa,"): ").concat(e)].concat(_(a)))}}function ri(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Qa,") INTERNAL ASSERTION FAILED: ")+e;throw ti(t),new Error(t)}function ii(e,t){e||ai()}function oi(e,t){return e}var si={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},li=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this,e,r)).code=e,a.message=r,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},a}return M(n)}(P),ui=M((function e(){var t=this;k(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),ci=M((function e(t,n){k(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),hi=function(){function e(){k(this,e)}return M(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ja.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),fi=function(){function e(t){k(this,e),this.t=t,this.currentUser=Ja.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return M(e,[{key:"start",value:function(e,t){var n=this,r=this.i,a=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},i=new ui;this.o=function(){n.i++,n.currentUser=n.u(),i.resolve(),i=new ui,e.enqueueRetryable((function(){return a(n.currentUser)}))};var o=function(){var t=i;e.enqueueRetryable(s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},l=function(e){ei("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return l(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?l(e):(ei("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ui)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ei("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ii("string"==typeof n.accessToken),new ci(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ii(null===e||"string"==typeof e),new Ja(e)}}]),e}(),di=M((function e(t,n,r){k(this,e),this.type="FirstParty",this.user=Ja.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var a=t.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),pi=function(){function e(t,n,r){k(this,e),this.h=t,this.l=n,this.m=r}return M(e,[{key:"getToken",value:function(){return Promise.resolve(new di(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ja.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),mi=M((function e(t){k(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),gi=function(){function e(t){k(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return M(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ei("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ei("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var a=function(e){ei("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return a(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?a(e):ei("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(ii("string"==typeof t.token),e.p=t.token,new mi(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),vi=function(){function e(t,n){var r=this;k(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return M(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function yi(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}vi.A=-1;var bi=function(){function e(){k(this,e)}return M(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=yi(40),a=0;a<r.length;++a)n.length<20&&r[a]<t&&(n+=e.charAt(r[a]%e.length));return n}}]),e}();function xi(e,t){return e<t?-1:e>t?1:0}function wi(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var _i=function(){function e(t,n){if(k(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new li(si.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new li(si.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new li(si.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new li(si.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return M(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?xi(this.nanoseconds,e.nanoseconds):xi(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ki=function(){function e(t){k(this,e),this.timestamp=t}return M(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new _i(0,0))}},{key:"max",value:function(){return new e(new _i(253402300799,999999999))}}]),e}();function Si(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Mi(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ti(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ei=function(){function e(t,n,r){k(this,e),void 0===n?n=0:n>t.length&&ai(),void 0===r?r=t.length-n:r>t.length-n&&ai(),this.segments=t,this.offset=n,this.len=r}return M(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var a=e.get(r),i=t.get(r);if(a<i)return-1;if(a>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ai=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var i=0,o=r;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new li(si.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,_(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ei),Ci=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Li=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ci.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",a=0,i=function(){if(0===r.length)throw new li(si.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;a<e.length;){var s=e[a];if("\\"===s){if(a+1===e.length)throw new li(si.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var l=e[a+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new li(si.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,a+=2}else"`"===s?(o=!o,a++):"."!==s||o?(r+=s,a++):(i(),a++)}if(i(),o)throw new li(si.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ei),Ri=function(){function e(t){k(this,e),this.fields=t,t.sort(Li.comparator)}return M(e,[{key:"covers",value:function(e){var t,n=g(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return wi(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Ni=function(e){function t(e){k(this,t),this.binaryString=e}return M(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return xi(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Ni.EMPTY_BYTE_STRING=new Ni("");var Pi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(e){if(ii(!!e),"string"==typeof e){var t=0,n=Pi.exec(e);if(ii(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:Di(e.seconds),nanos:Di(e.nanos)}}function Di(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ui(e){return"string"==typeof e?Ni.fromBase64String(e):Ni.fromUint8Array(e)}function ji(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Oi(e){var t=e.mapValue.fields.__previous_value__;return ji(t)?Oi(t):t}function Fi(e){var t=Ii(e.mapValue.fields.__local_write_time__.timestampValue);return new _i(t.seconds,t.nanos)}var Bi=M((function e(t,n,r,a,i,o,s,l){k(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=l})),zi=function(){function e(t,n){k(this,e),this.projectId=t,this.database=n||"(default)"}return M(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Hi(e){return null==e}function Vi(e){return 0===e&&1/e==-1/0}function Gi(e){return"number"==typeof e&&Number.isInteger(e)&&!Vi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Wi=function(){function e(t){k(this,e),this.path=t}return M(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ai.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ai.fromString(t))}},{key:"fromName",value:function(t){return new e(Ai.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ai.emptyPath())}},{key:"comparator",value:function(e,t){return Ai.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ai(t.slice()))}}]),e}();function qi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ji(e)?4:io(e)?9:10:ai()}function Ki(e,t){if(e===t)return!0;var n=qi(e);if(n!==qi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fi(e).isEqual(Fi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ii(e.timestampValue),r=Ii(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ui(e.bytesValue).isEqual(Ui(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Di(e.geoPointValue.latitude)===Di(t.geoPointValue.latitude)&&Di(e.geoPointValue.longitude)===Di(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Di(e.integerValue)===Di(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Di(e.doubleValue),r=Di(t.doubleValue);return n===r?Vi(n)===Vi(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return wi(e.arrayValue.values||[],t.arrayValue.values||[],Ki);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Si(n)!==Si(r))return!1;for(var a in n)if(n.hasOwnProperty(a)&&(void 0===r[a]||!Ki(n[a],r[a])))return!1;return!0}(e,t);default:return ai()}}function Xi(e,t){return void 0!==(e.values||[]).find((function(e){return Ki(e,t)}))}function Yi(e,t){if(e===t)return 0;var n=qi(e),r=qi(t);if(n!==r)return xi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xi(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Di(e.integerValue||e.doubleValue),r=Di(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ji(e.timestampValue,t.timestampValue);case 4:return Ji(Fi(e),Fi(t));case 5:return xi(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Ui(e),r=Ui(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),a=0;a<n.length&&a<r.length;a++){var i=xi(n[a],r[a]);if(0!==i)return i}return xi(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=xi(Di(e.latitude),Di(t.latitude));return 0!==n?n:xi(Di(e.longitude),Di(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],a=0;a<n.length&&a<r.length;++a){var i=Yi(n[a],r[a]);if(i)return i}return xi(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),a=t.fields||{},i=Object.keys(a);r.sort(),i.sort();for(var o=0;o<r.length&&o<i.length;++o){var s=xi(r[o],i[o]);if(0!==s)return s;var l=Yi(n[r[o]],a[i[o]]);if(0!==l)return l}return xi(r.length,i.length)}(e.mapValue,t.mapValue);default:throw ai()}}function Ji(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return xi(e,t);var n=Ii(e),r=Ii(t),a=xi(n.seconds,r.seconds);return 0!==a?a:xi(n.nanos,r.nanos)}function Qi(e){return Zi(e)}function Zi(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ii(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ui(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Wi.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,a=g(e.values||[]);try{for(a.s();!(t=a.n()).done;){var i=t.value;r?r=!1:n+=",",n+=Zi(i)}}catch(o){a.e(o)}finally{a.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,a=g(Object.keys(e.fields||{}).sort());try{for(a.s();!(t=a.n()).done;){var i=t.value;r?r=!1:n+=",",n+="".concat(i,":").concat(Zi(e.fields[i]))}}catch(o){a.e(o)}finally{a.f()}return n+"}"}(e.mapValue):ai();var t,n}function $i(e){return!!e&&"integerValue"in e}function eo(e){return!!e&&"arrayValue"in e}function to(e){return!!e&&"nullValue"in e}function no(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ro(e){return!!e&&"mapValue"in e}function ao(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Mi(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ao(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ao(e.arrayValue.values[r]);return n}return Object.assign({},e)}function io(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var oo=function(){function e(t){k(this,e),this.value=t}return M(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ro(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ao(t)}},{key:"setAll",value:function(e){var t=this,n=Li.emptyPath(),r={},a=[];e.forEach((function(e,i){if(!n.isImmediateParentOf(i)){var o=t.getFieldsMap(n);t.applyChanges(o,r,a),r={},a=[],n=i.popLast()}e?r[i.lastSegment()]=ao(e):a.push(i.lastSegment())}));var i=this.getFieldsMap(n);this.applyChanges(i,r,a)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ro(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ki(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ro(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Mi(t,(function(t,n){return e[t]=n}));var r,a=g(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;delete e[i]}}catch(o){a.e(o)}finally{a.f()}}},{key:"clone",value:function(){return new e(ao(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function so(e){var t=[];return Mi(e.fields,(function(e,n){var r=new Li([e]);if(ro(n)){var a=so(n.mapValue).fields;if(0===a.length)t.push(r);else{var i,o=g(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.push(r.child(s))}}catch(l){o.e(l)}finally{o.f()}}}else t.push(r)})),new Ri(t)}var lo=function(){function e(t,n,r,a,i,o){k(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.data=i,this.documentState=o}return M(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=oo.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=oo.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ki.min(),ki.min(),oo.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,ki.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ki.min(),oo.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ki.min(),oo.empty(),2)}}]),e}(),uo=M((function e(t,n,r,a){k(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=a}));uo.UNKNOWN_ID=-1;function co(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=ki.fromTimestamp(1e9===r?new _i(n+1,0):new _i(n,r));return new fo(a,Wi.empty(),t)}function ho(e){return new fo(e.readTime,e.key,-1)}var fo=function(){function e(t,n,r){k(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return M(e,null,[{key:"min",value:function(){return new e(ki.min(),Wi.empty(),-1)}},{key:"max",value:function(){return new e(ki.max(),Wi.empty(),-1)}}]),e}();function po(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Wi.comparator(e.documentKey,t.documentKey))?n:xi(e.largestBatchId,t.largestBatchId)}var mo=M((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;k(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=i,this.startAt=o,this.endAt=s,this.P=null}));function go(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new mo(e,t,n,r,a,i,o)}function vo(e){var t=oi(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Qi(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Hi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Qi(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Qi(e)})).join(",")),t.P=n}return t.P}function yo(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ro(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(a=e.filters[r],i=t.filters[r],a.op!==i.op||!a.field.isEqual(i.field)||!Ki(a.value,i.value))return!1;var a,i;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Po(e.startAt,t.startAt)&&Po(e.endAt,t.endAt)}function bo(e){return Wi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var xo=function(e){v(n,e);var t=w(n);function n(e,r,a){var i;return k(this,n),(i=t.call(this)).field=e,i.op=r,i.value=a,i}return M(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Yi(t,this.value)):null!==t&&qi(this.value)===qi(t)&&this.v(Yi(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ai()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new wo(e,t,r):"array-contains"===t?new Mo(e,r):"in"===t?new To(e,r):"not-in"===t?new Eo(e,r):"array-contains-any"===t?new Ao(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new _o(e,n):new ko(e,n)}}]),n}(function(){return M((function e(){k(this,e)}))}()),wo=function(e){v(n,e);var t=w(n);function n(e,r,a){var i;return k(this,n),(i=t.call(this,e,r,a)).key=Wi.fromName(a.referenceValue),i}return M(n,[{key:"matches",value:function(e){var t=Wi.comparator(e.key,this.key);return this.v(t)}}]),n}(xo),_o=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this,e,"in",r)).keys=So("in",r),a}return M(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(xo),ko=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this,e,"not-in",r)).keys=So("not-in",r),a}return M(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(xo);function So(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Wi.fromName(e.referenceValue)}))}var Mo=function(e){v(n,e);var t=w(n);function n(e,r){return k(this,n),t.call(this,e,"array-contains",r)}return M(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return eo(t)&&Xi(t.arrayValue,this.value)}}]),n}(xo),To=function(e){v(n,e);var t=w(n);function n(e,r){return k(this,n),t.call(this,e,"in",r)}return M(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Xi(this.value.arrayValue,t)}}]),n}(xo),Eo=function(e){v(n,e);var t=w(n);function n(e,r){return k(this,n),t.call(this,e,"not-in",r)}return M(n,[{key:"matches",value:function(e){if(Xi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Xi(this.value.arrayValue,t)}}]),n}(xo),Ao=function(e){v(n,e);var t=w(n);function n(e,r){return k(this,n),t.call(this,e,"array-contains-any",r)}return M(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!eo(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Xi(t.value.arrayValue,e)}))}}]),n}(xo),Co=M((function e(t,n){k(this,e),this.position=t,this.inclusive=n})),Lo=M((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";k(this,e),this.field=t,this.dir=n}));function Ro(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function No(e,t,n){for(var r=0,a=0;a<e.position.length;a++){var i=t[a],o=e.position[a];if(r=i.field.isKeyField()?Wi.comparator(Wi.fromName(o.referenceValue),n.key):Yi(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Po(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ki(e.position[n],t.position[n]))return!1;return!0}var Io=M((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;k(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=l,this.D=null,this.C=null,this.startAt,this.endAt}));function Do(e,t,n,r,a,i,o,s){return new Io(e,t,n,r,a,i,o,s)}function Uo(e){return new Io(e)}function jo(e){return!Hi(e.limit)&&"F"===e.limitType}function Oo(e){return!Hi(e.limit)&&"L"===e.limitType}function Fo(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Bo(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(a){n.e(a)}finally{n.f()}return null}function zo(e){return null!==e.collectionGroup}function Ho(e){var t=oi(e);if(null===t.D){t.D=[];var n=Bo(t),r=Fo(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Lo(n)),t.D.push(new Lo(Li.keyField(),"asc"));else{var a,i=!1,o=g(t.explicitOrderBy);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.D.push(s),s.field.isKeyField()&&(i=!0)}}catch(u){o.e(u)}finally{o.f()}if(!i){var l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Lo(Li.keyField(),l))}}}return t.D}function Vo(e){var t=oi(e);if(!t.C)if("F"===t.limitType)t.C=go(t.path,t.collectionGroup,Ho(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],a=g(Ho(t));try{for(a.s();!(n=a.n()).done;){var i=n.value,o="desc"===i.dir?"asc":"desc";r.push(new Lo(i.field,o))}}catch(u){a.e(u)}finally{a.f()}var s=t.endAt?new Co(t.endAt.position,!t.endAt.inclusive):null,l=t.startAt?new Co(t.startAt.position,!t.startAt.inclusive):null;t.C=go(t.path,t.collectionGroup,r,t.filters,t.limit,s,l)}return t.C}function Go(e,t,n){return new Io(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wo(e,t){return yo(Vo(e),Vo(t))&&e.limitType===t.limitType}function qo(e){return"".concat(vo(Vo(e)),"|lt:").concat(e.limitType)}function Ko(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Qi(t.value));var t})).join(", "),"]")),Hi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Qi(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Qi(e)})).join(",")),"Target(".concat(t,")")}(Vo(e)),"; limitType=").concat(e.limitType,")")}function Xo(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Wi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=g(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!a.field.isKeyField()&&null===t.data.field(a.field))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=g(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=No(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ho(e),t))&&!(e.endAt&&!function(e,t,n){var r=No(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ho(e),t))}(e,t)}function Yo(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Jo(e){return function(t,n){var r,a=!1,i=g(Ho(e));try{for(i.s();!(r=i.n()).done;){var o=r.value,s=Qo(o,t,n);if(0!==s)return s;a=a||o.field.isKeyField()}}catch(l){i.e(l)}finally{i.f()}return 0}}function Qo(e,t,n){var r=e.field.isKeyField()?Wi.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),a=n.data.field(e);return null!==r&&null!==a?Yi(r,a):ai()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ai()}}function Zo(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vi(t)?"-0":t}}function $o(e){return{integerValue:""+e}}function es(e,t){return Gi(t)?$o(t):Zo(e,t)}var ts=M((function e(){k(this,e),this._=void 0}));function ns(e,t,n){return e instanceof is?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof os?ss(e,t):e instanceof ls?us(e,t):function(e,t){var n=as(e,t),r=hs(n)+hs(e.k);return $i(n)&&$i(e.k)?$o(r):Zo(e.M,r)}(e,t)}function rs(e,t,n){return e instanceof os?ss(e,t):e instanceof ls?us(e,t):n}function as(e,t){return e instanceof cs?$i(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var is=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n)}(ts),os=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).elements=e,r}return M(n)}(ts);function ss(e,t){var n,r=fs(t),a=g(e.elements);try{var i=function(){var e=n.value;r.some((function(t){return Ki(t,e)}))||r.push(e)};for(a.s();!(n=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}return{arrayValue:{values:r}}}var ls=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).elements=e,r}return M(n)}(ts);function us(e,t){var n,r=fs(t),a=g(e.elements);try{var i=function(){var e=n.value;r=r.filter((function(t){return!Ki(t,e)}))};for(a.s();!(n=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}return{arrayValue:{values:r}}}var cs=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this)).M=e,a.k=r,a}return M(n)}(ts);function hs(e){return Di(e.integerValue||e.doubleValue)}function fs(e){return eo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ds=M((function e(t,n){k(this,e),this.version=t,this.transformResults=n})),ps=function(){function e(t,n){k(this,e),this.updateTime=t,this.exists=n}return M(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ms(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var gs=M((function e(){k(this,e)}));function vs(e,t,n){e instanceof _s?function(e,t,n){var r=e.value.clone(),a=Ms(e.fieldTransforms,t,n.transformResults);r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ks?function(e,t,n){if(ms(e.precondition,t)){var r=Ms(e.fieldTransforms,t,n.transformResults),a=t.data;a.setAll(Ss(e)),a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ys(e,t,n){e instanceof _s?function(e,t,n){if(ms(e.precondition,t)){var r=e.value.clone(),a=Ts(e.fieldTransforms,n,t);r.setAll(a),t.convertToFoundDocument(ws(t),r).setHasLocalMutations()}}(e,t,n):e instanceof ks?function(e,t,n){if(ms(e.precondition,t)){var r=Ts(e.fieldTransforms,n,t),a=t.data;a.setAll(Ss(e)),a.setAll(r),t.convertToFoundDocument(ws(t),a).setHasLocalMutations()}}(e,t,n):function(e,t){ms(e.precondition,t)&&t.convertToNoDocument(ki.min())}(e,t)}function bs(e,t){var n,r=null,a=g(e.fieldTransforms);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=t.data.field(i.field),s=as(i.transform,o||null);null!=s&&(null==r&&(r=oo.empty()),r.set(i.field,s))}}catch(l){a.e(l)}finally{a.f()}return r||null}function xs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&wi(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof os&&t instanceof os||e instanceof ls&&t instanceof ls?wi(e.elements,t.elements,Ki):e instanceof cs&&t instanceof cs?Ki(e.k,t.k):e instanceof is&&t instanceof is}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function ws(e){return e.isFoundDocument()?e.version:ki.min()}var _s=function(e){v(n,e);var t=w(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return k(this,n),(i=t.call(this)).key=e,i.value=r,i.precondition=a,i.fieldTransforms=o,i.type=0,i}return M(n)}(gs),ks=function(e){v(n,e);var t=w(n);function n(e,r,a,i){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return k(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=a,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return M(n)}(gs);function Ss(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ms(e,t,n){var r=new Map;ii(e.length===n.length);for(var a=0;a<n.length;a++){var i=e[a],o=i.transform,s=t.data.field(i.field);r.set(i.field,rs(o,s,n[a]))}return r}function Ts(e,t,n){var r,a=new Map,i=g(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.transform,l=n.data.field(o.field);a.set(o.field,ns(s,l,t))}}catch(u){i.e(u)}finally{i.f()}return a}var Es,As,Cs=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=2,a.fieldTransforms=[],a}return M(n)}(gs),Ls=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=3,a.fieldTransforms=[],a}return M(n)}(gs),Rs=M((function e(t){k(this,e),this.count=t}));function Ns(e){switch(e){default:return ai();case si.CANCELLED:case si.UNKNOWN:case si.DEADLINE_EXCEEDED:case si.RESOURCE_EXHAUSTED:case si.INTERNAL:case si.UNAVAILABLE:case si.UNAUTHENTICATED:return!1;case si.INVALID_ARGUMENT:case si.NOT_FOUND:case si.ALREADY_EXISTS:case si.PERMISSION_DENIED:case si.FAILED_PRECONDITION:case si.ABORTED:case si.OUT_OF_RANGE:case si.UNIMPLEMENTED:case si.DATA_LOSS:return!0}}function Ps(e){if(void 0===e)return ti("GRPC error has no .code"),si.UNKNOWN;switch(e){case Es.OK:return si.OK;case Es.CANCELLED:return si.CANCELLED;case Es.UNKNOWN:return si.UNKNOWN;case Es.DEADLINE_EXCEEDED:return si.DEADLINE_EXCEEDED;case Es.RESOURCE_EXHAUSTED:return si.RESOURCE_EXHAUSTED;case Es.INTERNAL:return si.INTERNAL;case Es.UNAVAILABLE:return si.UNAVAILABLE;case Es.UNAUTHENTICATED:return si.UNAUTHENTICATED;case Es.INVALID_ARGUMENT:return si.INVALID_ARGUMENT;case Es.NOT_FOUND:return si.NOT_FOUND;case Es.ALREADY_EXISTS:return si.ALREADY_EXISTS;case Es.PERMISSION_DENIED:return si.PERMISSION_DENIED;case Es.FAILED_PRECONDITION:return si.FAILED_PRECONDITION;case Es.ABORTED:return si.ABORTED;case Es.OUT_OF_RANGE:return si.OUT_OF_RANGE;case Es.UNIMPLEMENTED:return si.UNIMPLEMENTED;case Es.DATA_LOSS:return si.DATA_LOSS;default:return ai()}}(As=Es||(Es={}))[As.OK=0]="OK",As[As.CANCELLED=1]="CANCELLED",As[As.UNKNOWN=2]="UNKNOWN",As[As.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",As[As.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",As[As.NOT_FOUND=5]="NOT_FOUND",As[As.ALREADY_EXISTS=6]="ALREADY_EXISTS",As[As.PERMISSION_DENIED=7]="PERMISSION_DENIED",As[As.UNAUTHENTICATED=16]="UNAUTHENTICATED",As[As.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",As[As.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",As[As.ABORTED=10]="ABORTED",As[As.OUT_OF_RANGE=11]="OUT_OF_RANGE",As[As.UNIMPLEMENTED=12]="UNIMPLEMENTED",As[As.INTERNAL=13]="INTERNAL",As[As.UNAVAILABLE=14]="UNAVAILABLE",As[As.DATA_LOSS=15]="DATA_LOSS";var Is=function(){function e(t,n){k(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return M(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,a=g(n);try{for(a.s();!(r=a.n()).done;){var o=i(r.value,2),s=o[0],l=o[1];if(this.equalsFn(s,e))return l}}catch(u){a.e(u)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Mi(this.inner,(function(t,n){var r,a=g(n);try{for(a.s();!(r=a.n()).done;){var o=i(r.value,2),s=o[0],l=o[1];e(s,l)}}catch(u){a.e(u)}finally{a.f()}}))}},{key:"isEmpty",value:function(){return Ti(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Ds=function(){function e(t,n){k(this,e),this.comparator=t,this.root=n||js.EMPTY}return M(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,js.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,js.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Us(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Us(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Us(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Us(this.root,e,this.comparator,!0)}}]),e}(),Us=function(){function e(t,n,r,a){k(this,e),this.isReverse=a,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&a&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return M(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),js=function(){function e(t,n,r,a,i){k(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=a?a:e.EMPTY,this.right=null!=i?i:e.EMPTY,this.size=this.left.size+1+this.right.size}return M(e,[{key:"copy",value:function(t,n,r,a,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=i?i:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,a=n(e,r.key);return(r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===n(t,a.key)){if(a.right.isEmpty())return e.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ai();if(this.right.isRed())throw ai();var e=this.left.check();if(e!==this.right.check())throw ai();return e+(this.isRed()?0:1)}}]),e}();js.EMPTY=null,js.RED=!0,js.BLACK=!1,js.EMPTY=new(function(){function e(){k(this,e),this.size=0}return M(e,[{key:"key",get:function(){throw ai()}},{key:"value",get:function(){throw ai()}},{key:"color",get:function(){throw ai()}},{key:"left",get:function(){throw ai()}},{key:"right",get:function(){throw ai()}},{key:"copy",value:function(e,t,n,r,a){return this}},{key:"insert",value:function(e,t,n){return new js(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Os=function(){function e(t){k(this,e),this.comparator=t,this.data=new Ds(this.comparator)}return M(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Fs(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Fs(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(0!==this.comparator(a,i))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Fs=function(){function e(t){k(this,e),this.iter=t}return M(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var Bs=new Ds(Wi.comparator);function zs(){return Bs}var Hs=new Ds(Wi.comparator);function Vs(){return Hs}function Gs(){return new Is((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Ws=new Ds(Wi.comparator),qs=new Os(Wi.comparator);function Ks(){for(var e=qs,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=e.add(o)}return e}var Xs=new Os(xi);function Ys(){return Xs}var Js=function(){function e(t,n,r,a,i){k(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=i}return M(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Qs.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(ki.min(),r,Ys(),zs(),Ks())}}]),e}(),Qs=function(){function e(t,n,r,a,i){k(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=i}return M(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Ni.EMPTY_BYTE_STRING,n,Ks(),Ks(),Ks())}}]),e}(),Zs=M((function e(t,n,r,a){k(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=a})),$s=M((function e(t,n){k(this,e),this.targetId=t,this.$=n})),el=M((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ni.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;k(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a})),tl=function(){function e(){k(this,e),this.B=0,this.L=al(),this.U=Ni.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}return M(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"K",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.G}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}},{key:"H",value:function(){var e=Ks(),t=Ks(),n=Ks();return this.L.forEach((function(r,a){switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ai()}})),new Qs(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.G=!1,this.L=al()}},{key:"Y",value:function(e,t){this.G=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.G=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.G=!0,this.q=!0}}]),e}(),nl=function(){function e(t){k(this,e),this.nt=t,this.st=new Map,this.it=zs(),this.rt=rl(),this.ot=new Os(xi)}return M(e,[{key:"ut",value:function(e){var t,n=g(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var a,i=g(e.removedTargetIds);try{for(i.s();!(a=i.n()).done;){var o=a.value;this.ct(o,e.key,e.F)}}catch(s){i.e(s)}finally{i.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:ai()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var a=r.target;if(bo(a))if(0===n){var i=new Wi(a.path);this.ct(t,i,lo.newNoDocument(i,ki.min()))}else ii(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,a){var i=t.wt(a);if(i){if(r.current&&bo(i.target)){var o=new Wi(i.target.path);null!==t.it.get(o)||t.It(a,o)||t.ct(a,o,lo.newNoDocument(o,e))}r.j&&(n.set(a,r.H()),r.J())}}));var r=Ks();this.rt.forEach((function(e,n){var a=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(a=!1,!1)})),a&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var a=new Js(e,n,this.ot,this.it,r);return this.it=zs(),this.rt=rl(),this.ot=new Os(xi),a}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new tl,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Os(xi),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||ei("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new tl),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function rl(){return new Ds(Wi.comparator)}function al(){return new Ds(Wi.comparator)}var il={asc:"ASCENDING",desc:"DESCENDING"},ol={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sl=M((function e(t,n){k(this,e),this.databaseId=t,this.N=n}));function ll(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ul(e,t){return e.N?t.toBase64():t.toUint8Array()}function cl(e,t){return ll(e,t.toTimestamp())}function hl(e){return ii(!!e),ki.fromTimestamp(function(e){var t=Ii(e);return new _i(t.seconds,t.nanos)}(e))}function fl(e,t){return function(e){return new Ai(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function dl(e){var t=Ai.fromString(e);return ii(Pl(t)),t}function pl(e,t){return fl(e.databaseId,t.path)}function ml(e,t){var n=dl(t);if(n.get(1)!==e.databaseId.projectId)throw new li(si.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new li(si.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Wi(bl(n))}function gl(e,t){return fl(e.databaseId,t)}function vl(e){var t=dl(e);return 4===t.length?Ai.emptyPath():bl(t)}function yl(e){return new Ai(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bl(e){return ii(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function xl(e,t,n){return{name:pl(e,t),fields:n.value.mapValue.fields}}function wl(e,t){var n;if(t instanceof _s)n={update:xl(e,t.key,t.value)};else if(t instanceof Cs)n={delete:pl(e,t.key)};else if(t instanceof ks)n={update:xl(e,t.key,t.data),updateMask:Nl(t.fieldMask)};else{if(!(t instanceof Ls))return ai();n={verify:pl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof is)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof os)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ls)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof cs)return{fieldPath:t.field.canonicalString(),increment:n.k};throw ai()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:cl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ai()}(e,t.precondition)),n}function _l(e,t){return{documents:[gl(e,t.path)]}}function kl(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=gl(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=gl(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var a=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(no(e.value))return{unaryFilter:{field:Al(e.field),op:"IS_NAN"}};if(to(e.value))return{unaryFilter:{field:Al(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(no(e.value))return{unaryFilter:{field:Al(e.field),op:"IS_NOT_NAN"}};if(to(e.value))return{unaryFilter:{field:Al(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Al(e.field),op:El(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);a&&(n.structuredQuery.where=a);var i=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Al(e.field),direction:Tl(e.dir)}}(e)}))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);var o,s=function(e,t){return e.N||Hi(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Sl(e){var t=vl(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,a=null;if(r>0){ii(1===r);var i=n.from[0];i.allDescendants?a=i.collectionId:t=t.child(i.collectionId)}var o=[];n.where&&(o=Ml(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Lo(Cl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var l=null;n.limit&&(l=function(e){var t;return Hi(t="object"==typeof e?e.value:e)?null:t}(n.limit));var u=null;n.startAt&&(u=function(e){var t=!!e.before,n=e.values||[];return new Co(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new Co(n,t)}(n.endAt)),Do(t,a,s,o,l,"F",u,c)}function Ml(e){return e?void 0!==e.unaryFilter?[Rl(e)]:void 0!==e.fieldFilter?[Ll(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Ml(e)})).reduce((function(e,t){return e.concat(t)})):ai():[]}function Tl(e){return il[e]}function El(e){return ol[e]}function Al(e){return{fieldPath:e.canonicalString()}}function Cl(e){return Li.fromServerFormat(e.fieldPath)}function Ll(e){return xo.create(Cl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ai()}}(e.fieldFilter.op),e.fieldFilter.value)}function Rl(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Cl(e.unaryFilter.field);return xo.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Cl(e.unaryFilter.field);return xo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cl(e.unaryFilter.field);return xo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var a=Cl(e.unaryFilter.field);return xo.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ai()}}function Nl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Pl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Il=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Dl=([].concat(_(Il),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Ul=([].concat(Dl,["indexConfiguration","indexState","indexEntries"]),"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."),jl=function(){function e(){k(this,e),this.onCommittedListeners=[]}return M(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Ol=function(){function e(t){var n=this;k(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return M(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ai(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,a){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,a)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,a)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,a=0,i=!1;t.forEach((function(t){++r,t.next((function(){++a,i&&a===r&&e()}),(function(e){return n(e)}))})),i=!0,a===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),a=g(t);try{var i=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(a.s();!(n=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,a){r.push(t.call(n,e,a))})),this.waitFor(r)}}]),e}();function Fl(e){return"IndexedDbTransactionError"===e.name}var Bl=function(){function e(t,n,r,a){k(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}return M(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var a=this.mutations[r];a.key.isEqual(e.key)&&vs(a,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=g(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&ys(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var a,i=g(this.mutations);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.key.isEqual(e.key)&&ys(o,e,this.localWriteTime)}}catch(s){i.e(s)}finally{i.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),a=r;t.applyToLocalView(a),r.isValidDocument()||a.convertToNoDocument(ki.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ks())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&wi(this.mutations,e.mutations,(function(e,t){return xs(e,t)}))&&wi(this.baseMutations,e.baseMutations,(function(e,t){return xs(e,t)}))}}]),e}(),zl=function(){function e(t,n,r,a){k(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}return M(e,null,[{key:"from",value:function(t,n,r){ii(t.mutations.length===r.length);for(var a=Ws,i=t.mutations,o=0;o<i.length;o++)a=a.insert(i[o].key,r[o].version);return new e(t,n,r,a)}}]),e}(),Hl=function(){function e(t,n){k(this,e),this.largestBatchId=t,this.mutation=n}return M(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Vl=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ki.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ki.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ni.EMPTY_BYTE_STRING;k(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return M(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Gl=M((function e(t){k(this,e),this.Jt=t}));function Wl(e){var t=Sl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Go(t,t.limit,"L"):t}var ql=function(){function e(){k(this,e)}return M(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Di(e.integerValue));else if("doubleValue"in e){var n=Di(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Vi(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ui(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var a=e.geoPointValue;this.ne(t,45),t.se(a.latitude||0),t.se(a.longitude||0)}else"mapValue"in e?io(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ai()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,a=Object.keys(n);r<a.length;r++){var i=a[r];this.re(i,t),this.te(n[i],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,a=g(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.te(i,t)}}catch(o){a.e(o)}finally{a.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Wi.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();ql.fe=new ql;var Kl=function(){function e(){k(this,e),this.qe=new Xl}return M(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Ol.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ol.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ol.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ol.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ol.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return Ol.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return Ol.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ol.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return Ol.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ol.resolve()}}]),e}(),Xl=function(){function e(){k(this,e),this.index={}}return M(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Os(Ai.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Os(Ai.comparator)).toArray()}}]),e}();new Uint8Array(0);var Yl=function(){function e(t,n,r){k(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return M(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();Yl.DEFAULT_COLLECTION_PERCENTILE=10,Yl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yl.DEFAULT=new Yl(41943040,Yl.DEFAULT_COLLECTION_PERCENTILE,Yl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yl.DISABLED=new Yl(-1,0,0);var Jl=function(){function e(t){k(this,e),this.wn=t}return M(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}();function Ql(e){return Zl.apply(this,arguments)}function Zl(){return Zl=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===si.FAILED_PRECONDITION&&t.message===Ul){e.next=2;break}throw t;case 2:ei("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Zl.apply(this,arguments)}var $l=function(){function e(){k(this,e),this.changes=new Is((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return M(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,lo.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ol.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var eu=function(){function e(t,n,r){k(this,e),this.fs=t,this.$s=n,this.indexManager=r}return M(e,[{key:"Bs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.fs.getEntry(e,t).next((function(e){var t,r=g(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(a){r.e(a)}finally{r.f()}return e}))}},{key:"Us",value:function(e,t){e.forEach((function(e,n){var r,a=g(t);try{for(a.s();!(r=a.n()).done;){r.value.applyToLocalView(n)}}catch(i){a.e(i)}finally{a.f()}}))}},{key:"qs",value:function(e,t){var n=this;return this.fs.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Us(t,e)}))}},{key:"Ks",value:function(e,t,n){return function(e){return Wi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):zo(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new Wi(t)).next((function(e){var t=Vs();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,a=t.collectionGroup,i=Vs();return this.indexManager.getCollectionParents(e,a).next((function(o){return Ol.forEach(o,(function(o){var s=function(e,t){return new Io(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(a));return r.Ws(e,s,n).next((function(e){e.forEach((function(e,t){i=i.insert(e,t)}))}))})).next((function(){return i}))}))}},{key:"Ws",value:function(e,t,n){var r,a=this;return this.fs.getAllFromCollection(e,t.path,n).next((function(n){return r=n,a.$s.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var a,i=t.value,o=g(i.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.key,u=r.get(l);null==u&&(u=lo.newInvalidDocument(l),r=r.insert(l,u)),ys(s,u,i.localWriteTime),u.isFoundDocument()||(r=r.remove(l))}}catch(c){o.e(c)}finally{o.f()}}}catch(c){n.e(c)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Xo(t,n)||(r=r.remove(e))})),r}))}}]),e}(),tu=function(){function e(t,n,r,a){k(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=a}return M(e,null,[{key:"Js",value:function(t,n){var r,a=Ks(),i=Ks(),o=g(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:a=a.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}}catch(l){o.e(l)}finally{o.f()}return new e(t,n.fromCache,a,i)}}]),e}(),nu=function(){function e(){k(this,e)}return M(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Ks",value:function(e,t,n,r){var a=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(ki.min())?this.Zs(e,t):this.Xs.qs(e,r).next((function(i){var o=a.ti(t,i);return(jo(t)||Oo(t))&&a.ei(t.limitType,o,r,n)?a.Zs(e,t):($a()<=Y.DEBUG&&ei("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ko(t)),a.Xs.Ks(e,t,co(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new Os(Jo(e));return t.forEach((function(t,r){Xo(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return $a()<=Y.DEBUG&&ei("QueryEngine","Using full collection scan to execute query:",Ko(t)),this.Xs.Ks(e,t,fo.min())}}]),e}(),ru=function(){function e(t,n,r,a){k(this,e),this.persistence=t,this.ni=n,this.M=a,this.si=new Ds(xi),this.ii=new Is((function(e){return vo(e)}),yo),this.ri=new Map,this.oi=t.getRemoteDocumentCache(),this.ls=t.getTargetCache(),this.ds=t.getBundleCache(),this.ui(r)}return M(e,[{key:"ui",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new eu(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function au(e,t,n,r){return new ru(e,t,n,r)}function iu(e,t){return ou.apply(this,arguments)}function ou(){return ou=s(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oi(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.$s.getAllMutationBatches(e).next((function(a){return t=a,r.ui(n),r.$s.getAllMutationBatches(e)})).next((function(n){var a,i=[],o=[],s=Ks(),l=g(t);try{for(l.s();!(a=l.n()).done;){var u=a.value;i.push(u.batchId);var c,h=g(u.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value;s=s.add(f.key)}}catch(x){h.e(x)}finally{h.f()}}}catch(x){l.e(x)}finally{l.f()}var d,p=g(n);try{for(p.s();!(d=p.n()).done;){var m=d.value;o.push(m.batchId);var v,y=g(m.mutations);try{for(y.s();!(v=y.n()).done;){var b=v.value;s=s.add(b.key)}}catch(x){y.e(x)}finally{y.f()}}}catch(x){p.e(x)}finally{p.f()}return r.ai.qs(e,s).next((function(e){return{ci:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),ou.apply(this,arguments)}function su(e,t){var n=oi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),a=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var a=n.batch,i=a.keys(),o=Ol.resolve();return i.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var i=n.docVersions.get(e);ii(null!==i),t.version.compareTo(i)<0&&(a.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.$s.removeMutationBatch(t,a)}))}(n,e,t,a).next((function(){return a.apply(e)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}function lu(e){var t=oi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ls.getLastRemoteSnapshotVersion(e)}))}function uu(e,t){var n=oi(e),r=t.snapshotVersion,a=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var i=n.oi.newChangeBuffer({trackRemovals:!0});a=n.si;var o=[];t.targetChanges.forEach((function(i,s){var l=a.get(s);if(l){o.push(n.ls.removeMatchingKeys(e,i.removedDocuments,s).next((function(){return n.ls.addMatchingKeys(e,i.addedDocuments,s)})));var u=l.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?u=u.withResumeToken(Ni.EMPTY_BYTE_STRING,ki.min()).withLastLimboFreeSnapshotVersion(ki.min()):i.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(i.resumeToken,r)),a=a.insert(s,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,u,i)&&o.push(n.ls.updateTargetData(e,u))}}));var s=zs();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(cu(e,i,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(ki.min())){var l=n.ls.getLastRemoteSnapshotVersion(e).next((function(t){return n.ls.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(l)}return Ol.waitFor(o).next((function(){return i.apply(e)})).next((function(){return n.ai.Gs(e,s)})).next((function(){return s}))})).then((function(e){return n.si=a,e}))}function cu(e,t,n){var r=Ks();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=zs();return n.forEach((function(n,a){var i=e.get(n);a.isNoDocument()&&a.version.isEqual(ki.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!i.isValidDocument()||a.version.compareTo(i.version)>0||0===a.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ei("LocalStore","Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",a.version)})),r}))}function hu(e,t){var n=oi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t)}))}function fu(e,t){var n=oi(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ls.getTargetData(e,t).next((function(a){return a?(r=a,Ol.resolve(r)):n.ls.allocateTargetId(e).next((function(a){return r=new Vl(t,a,0,e.currentSequenceNumber),n.ls.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function du(e,t,n){return pu.apply(this,arguments)}function pu(){return pu=s(u().mark((function e(t,n,r){var a,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=oi(t),i=a.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,a.persistence.runTransaction("Release target",o,(function(e){return a.persistence.referenceDelegate.removeTarget(e,i)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Fl(e.t1)){e.next=12;break}throw e.t1;case 12:ei("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:a.si=a.si.remove(n),a.ii.delete(i.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),pu.apply(this,arguments)}function mu(e,t,n){var r=oi(e),a=ki.min(),i=Ks();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=oi(e),a=r.ii.get(n);return void 0!==a?Ol.resolve(r.si.get(a)):r.ls.getTargetData(t,n)}(r,e,Vo(t)).next((function(t){if(t)return a=t.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(e,t.targetId).next((function(e){i=e}))})).next((function(){return r.ni.Ks(e,t,n?a:ki.min(),n?i:Ks())})).next((function(e){return gu(r,Yo(t),e),{documents:e,hi:i}}))}))}function gu(e,t,n){var r=ki.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ri.set(t,r)}var vu=function(){function e(t){k(this,e),this.M=t,this._i=new Map,this.wi=new Map}return M(e,[{key:"getBundleMetadata",value:function(e,t){return Ol.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:hl(n.createTime)}),Ol.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ol.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:Wl(e.bundledQuery),readTime:hl(e.readTime)}}(t)),Ol.resolve()}}]),e}(),yu=function(){function e(){k(this,e),this.overlays=new Ds(Wi.comparator),this.mi=new Map}return M(e,[{key:"getOverlay",value:function(e,t){return Ol.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,a){r.Xt(e,t,a)})),Ol.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,a=this.mi.get(n);return void 0!==a&&(a.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),Ol.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Gs(),a=t.length+1,i=new Wi(t.child("")),o=this.overlays.getIteratorFrom(i);o.hasNext();){var s=o.getNext().value,l=s.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===a&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Ol.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var a=new Ds((function(e,t){return e-t})),i=this.overlays.getIterator();i.hasNext();){var o=i.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=a.get(o.largestBatchId);null===s&&(s=Gs(),a=a.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var l=Gs(),u=a.getIterator();u.hasNext()&&(u.getNext().value.forEach((function(e,t){return l.set(e,t)})),!(l.size()>=r)););return Ol.resolve(l)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var a=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Hl(t,n));var i=this.mi.get(t);void 0===i&&(i=Ks(),this.mi.set(t,i)),this.mi.set(t,i.add(n.key))}}}]),e}(),bu=function(){function e(){k(this,e),this.gi=new Os(xu.yi),this.pi=new Os(xu.Ii)}return M(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new xu(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new xu(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new Wi(new Ai([])),r=new xu(n,e),a=new xu(n,e+1),i=[];return this.pi.forEachInRange([r,a],(function(e){t.Ei(e),i.push(e.key)})),i}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new Wi(new Ai([])),n=new xu(t,e),r=new xu(t,e+1),a=Ks();return this.pi.forEachInRange([n,r],(function(e){a=a.add(e.key)})),a}},{key:"containsKey",value:function(e){var t=new xu(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),xu=function(){function e(t,n){k(this,e),this.key=t,this.Vi=n}return M(e,null,[{key:"yi",value:function(e,t){return Wi.comparator(e.key,t.key)||xi(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return xi(e.Vi,t.Vi)||Wi.comparator(e.key,t.key)}}]),e}(),wu=function(){function e(t,n){k(this,e),this.indexManager=t,this.referenceDelegate=n,this.$s=[],this.vi=1,this.Si=new Os(xu.yi)}return M(e,[{key:"checkEmpty",value:function(e){return Ol.resolve(0===this.$s.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var a=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];var i=new Bl(a,t,n,r);this.$s.push(i);var o,s=g(r);try{for(s.s();!(o=s.n()).done;){var l=o.value;this.Si=this.Si.add(new xu(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast())}}catch(u){s.e(u)}finally{s.f()}return Ol.resolve(i)}},{key:"lookupMutationBatch",value:function(e,t){return Ol.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),a=r<0?0:r;return Ol.resolve(this.$s.length>a?this.$s[a]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ol.resolve(0===this.$s.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return Ol.resolve(this.$s.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new xu(t,0),a=new xu(t,Number.POSITIVE_INFINITY),i=[];return this.Si.forEachInRange([r,a],(function(e){var t=n.Di(e.Vi);i.push(t)})),Ol.resolve(i)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Os(xi);return t.forEach((function(e){var t=new xu(e,0),a=new xu(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,a],(function(e){r=r.add(e.Vi)}))})),Ol.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,a=n;Wi.isDocumentKey(a)||(a=a.child(""));var i=new xu(new Wi(a),0),o=new Os(xi);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),i),Ol.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ii(0===this.Ni(t.batchId,"removed")),this.$s.shift();var r=this.Si;return Ol.forEach(t.mutations,(function(a){var i=new xu(a.key,t.batchId);return r=r.delete(i),n.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new xu(t,0),r=this.Si.firstAfterOrEqual(n);return Ol.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.$s.length,Ol.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.$s.length?0:e-this.$s[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}]),e}(),_u=function(){function e(t){k(this,e),this.ki=t,this.docs=new Ds(Wi.comparator),this.size=0}return M(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),a=r?r.size:0,i=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ol.resolve(n?n.document.mutableCopy():lo.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=zs();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():lo.newInvalidDocument(e))})),Ol.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=zs(),a=new Wi(t.child("")),i=this.docs.getIteratorFrom(a);i.hasNext();){var o=i.getNext(),s=o.key,l=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||po(ho(l),n)<=0||(r=r.insert(l.key,l.mutableCopy()))}return Ol.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ai()}},{key:"Mi",value:function(e,t){return Ol.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ku(this)}},{key:"getSize",value:function(e){return Ol.resolve(this.size)}}]),e}(),ku=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).qn=e,r}return M(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,a){a.isValidDocument()?n.push(t.qn.addEntry(e,a)):t.qn.removeEntry(r)})),Ol.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.qn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.qn.getEntries(e,t)}}]),n}($l),Su=function(){function e(t){k(this,e),this.persistence=t,this.Oi=new Is((function(e){return vo(e)}),yo),this.lastRemoteSnapshotVersion=ki.min(),this.highestTargetId=0,this.Fi=0,this.$i=new bu,this.targetCount=0,this.Bi=Jl.mn()}return M(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),Ol.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ol.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ol.resolve(this.Fi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),Ol.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),Ol.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new Jl(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,Ol.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),Ol.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,Ol.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,a=0,i=[];return this.Oi.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Oi.delete(o),i.push(r.removeMatchingKeysForTargetId(e,s.targetId)),a++)})),Ol.waitFor(i).next((function(){return a}))}},{key:"getTargetCount",value:function(e){return Ol.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return Ol.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.$i.Ti(t,n),Ol.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.$i.Ai(t,n);var r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((function(t){a.push(r.markPotentiallyOrphaned(e,t))})),Ol.waitFor(a)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.$i.Ri(t),Ol.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.$i.Pi(t);return Ol.resolve(n)}},{key:"containsKey",value:function(e,t){return Ol.resolve(this.$i.containsKey(t))}}]),e}(),Mu=function(){function e(t,n){var r=this;k(this,e),this.Li={},this.overlays={},this.ts=new vi(0),this.es=!1,this.es=!0,this.referenceDelegate=t(this),this.ls=new Su(this),this.indexManager=new Kl,this.fs=new _u((function(e){return r.referenceDelegate.Ui(e)})),this.M=new Gl(n),this.ds=new vu(this.M)}return M(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.es=!1,Promise.resolve()}},{key:"started",get:function(){return this.es}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new yu,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new wu(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;ei("MemoryPersistence","Starting transaction:",e);var a=new Tu(this.ts.next());return this.referenceDelegate.qi(),n(a).next((function(e){return r.referenceDelegate.Gi(a).next((function(){return e}))})).toPromise().then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Ki",value:function(e,t){return Ol.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Tu=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return M(n)}(jl),Eu=function(){function e(t){k(this,e),this.persistence=t,this.Qi=new bu,this.ji=null}return M(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw ai()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),Ol.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),Ol.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),Ol.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qi",value:function(){this.ji=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ol.forEach(this.zi,(function(r){var a=Wi.fromPath(r);return t.Hi(e,a).next((function(e){e||n.removeEntry(a,ki.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"Ui",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return Ol.or([function(){return Ol.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ki(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();var Au=function(){function e(){k(this,e),this.activeTargetIds=Ys()}return M(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Cu=function(){function e(){k(this,e),this.Fr=new Au,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return M(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Au,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Lu=function(){function e(){k(this,e)}return M(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Ru=function(){function e(){var t=this;k(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Gr()},this.Kr=[],this.Qr()}return M(e,[{key:"Br",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){ei("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=g(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){ei("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=g(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Nu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Pu=function(){function e(t){k(this,e),this.jr=t.jr,this.Wr=t.Wr}return M(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),Iu=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return M(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(a,i){var o=new Xa;o.listenOnce(Va.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Ha.NO_ERROR:var t=o.getResponseJson();ei("Connection","XHR received:",JSON.stringify(t)),a(t);break;case Ha.TIMEOUT:ei("Connection",'RPC "'+e+'" timed out'),i(new li(si.DEADLINE_EXCEEDED,"Request time out"));break;case Ha.HTTP_ERROR:var n=o.getStatus();if(ei("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(si).indexOf(t)>=0?t:si.UNKNOWN}(r.status);i(new li(s,r.message))}else i(new li(si.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new li(si.UNAVAILABLE,"Connection failed."));break;default:ai()}}finally{ei("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Ba(),i=za(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new qa({})),this.uo(o.initMessageHeaders,t,n),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(N())||"object"===typeof navigator&&"ReactNative"===navigator.product||N().indexOf("Electron/")>=0||function(){var e=N();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||N().indexOf("MSAppHost/")>=0||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");ei("Connection","Creating WebChannel: "+s,o);var l=a.createWebChannel(s,o),u=!1,c=!1,h=new Pu({jr:function(e){c?ei("Connection","Not sending because WebChannel is closed:",e):(u||(ei("Connection","Opening WebChannel transport."),l.open(),u=!0),ei("Connection","WebChannel sending:",e),l.send(e))},Wr:function(){return l.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(l,Ka.EventType.OPEN,(function(){c||ei("Connection","WebChannel transport opened.")})),f(l,Ka.EventType.CLOSE,(function(){c||(c=!0,ei("Connection","WebChannel transport closed"),h.eo())})),f(l,Ka.EventType.ERROR,(function(e){c||(c=!0,ni("Connection","WebChannel transport errored:",e),h.eo(new li(si.UNAVAILABLE,"The operation could not be completed")))})),f(l,Ka.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];ii(!!n);var r=n,a=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(a){ei("Connection","WebChannel received error:",a);var i=a.status,o=function(e){var t=Es[e];if(void 0!==t)return Ps(t)}(i),s=a.message;void 0===o&&(o=si.INTERNAL,s="Unknown error status: "+i+" with message "+a.message),c=!0,h.eo(new li(o,s)),l.close()}else ei("Connection","WebChannel received:",n),h.no(n)}})),f(i,Ga.STAT_EVENT,(function(e){e.stat===Wa.PROXY?ei("Connection","Detected buffering proxy"):e.stat===Wa.NOPROXY&&ei("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){k(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return M(e,[{key:"ro",value:function(e,t,n,r,a){var i=this.oo(e,t);ei("RestConnection","Sending: ",i,n);var o={};return this.uo(o,r,a),this.ao(e,i,o,n).then((function(e){return ei("RestConnection","Received: ",e),e}),(function(t){throw ni("RestConnection","".concat(e," failed with error: "),t,"url: ",i,"request:",n),t}))}},{key:"co",value:function(e,t,n,r,a){return this.ro(e,t,n,r,a)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Qa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=Nu[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function Du(){return"undefined"!=typeof document?document:null}function Uu(e){return new sl(e,!0)}var ju=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;k(this,e),this.Jn=t,this.timerId=n,this.lo=r,this.fo=a,this._o=i,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return M(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),a=Math.max(0,n-r);a>0&&ei("ExponentialBackoff","Backing off for ".concat(a," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.Jn.enqueueAfterDelay(this.timerId,a,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),Ou=function(){function e(t,n,r,a,i,o,s,l){k(this,e),this.Jn=t,this.Ao=r,this.Ro=a,this.bo=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=l,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new ju(t,n)}return M(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"close",value:function(){var e=s(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===si.RESOURCE_EXHAUSTED?(ti(n.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===si.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=i(t,2),a=r[0],o=r[1];e.Po===n&&e.Uo(a,o)}),(function(n){t((function(){var t=new li(si.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.vo=n.Jn.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(s(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return ei("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.Jn.enqueueAndForget((function(){return t.Po===e?n():(ei("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Fu=function(e){v(n,e);var t=w(n);function n(e,r,a,i,o,s){var l;return k(this,n),(l=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,i,s)).M=o,l}return M(n,[{key:"Go",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ai()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],i=function(e,t){return e.N?(ii(void 0===t||"string"==typeof t),Ni.fromBase64String(t||"")):(ii(void 0===t||t instanceof Uint8Array),Ni.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?si.UNKNOWN:Ps(e.code);return new li(t,e.message||"")}(o);n=new el(r,a,i,s||null)}else if("documentChange"in t){t.documentChange;var l=t.documentChange;l.document,l.document.name,l.document.updateTime;var u=ml(e,l.document.name),c=hl(l.document.updateTime),h=new oo({mapValue:{fields:l.document.fields}}),f=lo.newFoundDocument(u,c,h),d=l.targetIds||[],p=l.removedTargetIds||[];n=new Zs(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=ml(e,m.document),v=m.readTime?hl(m.readTime):ki.min(),y=lo.newNoDocument(g,v),b=m.removedTargetIds||[];n=new Zs([],b,y.key,y)}else if("documentRemove"in t){t.documentRemove;var x=t.documentRemove;x.document;var w=ml(e,x.document),_=x.removedTargetIds||[];n=new Zs([],_,w,null)}else{if(!("filter"in t))return ai();t.filter;var k=t.filter;k.targetId;var S=k.count||0,M=new Rs(S),T=k.targetId;n=new $s(T,M)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return ki.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ki.min():t.readTime?hl(t.readTime):ki.min()}(e);return this.listener.Ko(t,n)}},{key:"Qo",value:function(e){var t={};t.database=yl(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=bo(r)?{documents:_l(e,r)}:{query:kl(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=ul(e,t.resumeToken):t.snapshotVersion.compareTo(ki.min())>0&&(n.readTime=ll(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ai()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=yl(this.M),t.removeTarget=e,this.Oo(t)}}]),n}(Ou),Bu=function(e){v(n,e);var t=w(n);function n(e,r,a,i,o,s){var l;return k(this,n),(l=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,i,s)).M=o,l.Wo=!1,l}return M(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,m(d(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Go",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(ii(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(ii(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?hl(e.updateTime):hl(t);return n.isEqual(ki.min())&&(n=hl(t)),new ds(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=hl(e.commitTime);return this.listener.Jo(n,t)}return ii(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=yl(this.M),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return wl(t.M,e)}))};this.Oo(n)}}]),n}(Ou),zu=function(e){v(n,e);var t=w(n);function n(e,r,a,i){var o;return k(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=a,o.M=i,o.Zo=!1,o}return M(n,[{key:"tu",value:function(){if(this.Zo)throw new li(si.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=i(a,2),s=o[0],l=o[1];return r.bo.ro(e,t,n,s,l)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===si.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new li(si.UNKNOWN,e.toString())}))}},{key:"co",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=i(a,2),s=o[0],l=o[1];return r.bo.co(e,t,n,s,l)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===si.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new li(si.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return M((function e(){k(this,e)}))}()),Hu=function(){function e(t,n){k(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return M(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(ti(t),this.su=!1):ei("OnlineStateTracker",t)}},{key:"au",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),Vu=M((function e(t,n,r,a,i){var o=this;k(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=i,this.du.Br((function(e){r.enqueueAndForget(s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ec(o),!e.t0){e.next=5;break}return ei("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=s(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=oi(t)).lu.add(4),e.next=4,qu(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,Gu(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new Hu(r,a)}));function Gu(e){return Wu.apply(this,arguments)}function Wu(){return Wu=s(u().mark((function e(t){var n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ec(t)){e.next=18;break}n=g(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Wu.apply(this,arguments)}function qu(e){return Ku.apply(this,arguments)}function Ku(){return Ku=s(u().mark((function e(t){var n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return a=r.value,e.next=7,a(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Ku.apply(this,arguments)}function Xu(e,t){var n=oi(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),$u(n)?Zu(n):Cc(n).Co()&&Ju(n,t))}function Yu(e,t){var n=oi(e),r=Cc(n);n.hu.delete(t),r.Co()&&Qu(n,t),0===n.hu.size&&(r.Co()?r.ko():ec(n)&&n._u.set("Unknown"))}function Ju(e,t){e.wu.Z(t.targetId),Cc(e).Qo(t)}function Qu(e,t){e.wu.Z(t),Cc(e).jo(t)}function Zu(e){e.wu=new nl({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.hu.get(t)||null}}),Cc(e).start(),e._u.iu()}function $u(e){return ec(e)&&!Cc(e).Do()&&e.hu.size>0}function ec(e){return 0===oi(e).lu.size}function tc(e){e.wu=void 0}function nc(e){return rc.apply(this,arguments)}function rc(){return rc=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){Ju(t,e)}));case 1:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}function ac(e,t){return ic.apply(this,arguments)}function ic(){return ic=s(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tc(t),$u(t)?(t._u.uu(n),Zu(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),ic.apply(this,arguments)}function oc(e,t,n){return sc.apply(this,arguments)}function sc(){return sc=s(u().mark((function e(t,n,r){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof el&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=s(u().mark((function e(t,n){var r,a,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,a=g(n.targetIds),e.prev=2,a.s();case 4:if((i=a.n()).done){e.next=14;break}if(o=i.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ei("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,lc(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Zs?t.wu.ut(n):n instanceof $s?t.wu._t(n):t.wu.ht(n),r.isEqual(ki.min())){e.next=29;break}return e.prev=14,e.next=17,lu(t.localStore);case 17:if(a=e.sent,e.t1=r.compareTo(a)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var a=e.hu.get(r);a&&e.hu.set(r,a.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Ni.EMPTY_BYTE_STRING,n.snapshotVersion)),Qu(e,t);var r=new Vl(n.target,t,1,n.sequenceNumber);Ju(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ei("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,lc(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),sc.apply(this,arguments)}function lc(e,t,n){return uc.apply(this,arguments)}function uc(){return uc=s(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,qu(t);case 5:t._u.set("Offline"),r||(r=function(){return lu(t.localStore)}),t.asyncQueue.enqueueRetryable(s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ei("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,Gu(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),uc.apply(this,arguments)}function cc(e,t){return t().catch((function(n){return lc(e,n,t)}))}function hc(e){return fc.apply(this,arguments)}function fc(){return fc=s(u().mark((function e(t){var n,r,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=oi(t),r=Lc(n),a=n.cu.length>0?n.cu[n.cu.length-1].batchId:-1;case 2:if(!dc(n)){e.next=19;break}return e.prev=3,e.next=6,hu(n.localStore,a);case 6:if(null!==(i=e.sent)){e.next=10;break}return 0===n.cu.length&&r.ko(),e.abrupt("break",19);case 10:a=i.batchId,pc(n,i),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,lc(n,e.t0);case 17:e.next=2;break;case 19:mc(n)&&gc(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),fc.apply(this,arguments)}function dc(e){return ec(e)&&e.cu.length<10}function pc(e,t){e.cu.push(t);var n=Lc(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function mc(e){return ec(e)&&!Lc(e).Do()&&e.cu.length>0}function gc(e){Lc(e).start()}function vc(e){return yc.apply(this,arguments)}function yc(){return yc=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Lc(t).Xo();case 1:case"end":return e.stop()}}),e)}))),yc.apply(this,arguments)}function bc(e){return xc.apply(this,arguments)}function xc(){return xc=s(u().mark((function e(t){var n,r,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Lc(t),r=g(t.cu);try{for(r.s();!(a=r.n()).done;)i=a.value,n.Ho(i.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),xc.apply(this,arguments)}function wc(e,t,n){return _c.apply(this,arguments)}function _c(){return _c=s(u().mark((function e(t,n,r){var a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cu.shift(),i=zl.from(a,n,r),e.next=3,cc(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}));case 3:return e.next=5,hc(t);case 5:case"end":return e.stop()}}),e)}))),_c.apply(this,arguments)}function kc(e,t){return Sc.apply(this,arguments)}function Sc(){return Sc=s(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Lc(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=s(u().mark((function e(t,n){var r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ns(a=n.code)||a===si.ABORTED){e.next=7;break}return r=t.cu.shift(),Lc(t).No(),e.next=5,cc(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,hc(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:mc(t)&&gc(t);case 5:case"end":return e.stop()}}),e)}))),Sc.apply(this,arguments)}function Mc(e,t){return Tc.apply(this,arguments)}function Tc(){return Tc=s(u().mark((function e(t,n){var r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=oi(t)).asyncQueue.verifyOperationInProgress(),ei("RemoteStore","RemoteStore received new credentials"),a=ec(r),r.lu.add(3),e.next=6,qu(r);case 6:return a&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,Gu(r);case 12:case"end":return e.stop()}}),e)}))),Tc.apply(this,arguments)}function Ec(e,t){return Ac.apply(this,arguments)}function Ac(){return Ac=s(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=oi(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,Gu(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,qu(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Ac.apply(this,arguments)}function Cc(e){return e.mu||(e.mu=function(e,t,n){var r=oi(e);return r.tu(),new Fu(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:nc.bind(null,e),Jr:ac.bind(null,e),Ko:oc.bind(null,e)}),e.fu.push(function(){var t=s(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),$u(e)?Zu(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:tc(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function Lc(e){return e.gu||(e.gu=function(e,t,n){var r=oi(e);return r.tu(),new Bu(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:vc.bind(null,e),Jr:kc.bind(null,e),Yo:bc.bind(null,e),Jo:wc.bind(null,e)}),e.fu.push(function(){var t=s(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,hc(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.cu.length>0&&(ei("RemoteStore","Stopping write stream with ".concat(e.cu.length," pending writes")),e.cu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var Rc=function(){function e(t,n,r,a,i){k(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=i,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return M(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new li(si.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,a,i){var o=new e(t,n,Date.now()+r,a,i);return o.start(r),o}}]),e}();function Nc(e,t){if(ti("AsyncQueue","".concat(t,": ").concat(e)),Fl(e))return new li(si.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Pc=function(){function e(t){k(this,e),this.comparator=t?function(e,n){return t(e,n)||Wi.comparator(e.key,n.key)}:function(e,t){return Wi.comparator(e.key,t.key)},this.keyedMap=Vs(),this.sortedSet=new Ds(this.comparator)}return M(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(!a.isEqual(i))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Ic=function(){function e(){k(this,e),this.yu=new Ds(Wi.comparator)}return M(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ai():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Dc=function(){function e(t,n,r,a,i,o,s,l){k(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=l}return M(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,a){var i=[];return n.forEach((function(e){i.push({type:0,doc:e})})),new e(t,n,Pc.emptySet(n),i,r,a,!0,!1)}}]),e}(),Uc=M((function e(){k(this,e),this.Iu=void 0,this.listeners=[]})),jc=M((function e(){k(this,e),this.queries=new Is((function(e){return qo(e)}),Wo),this.onlineState="Unknown",this.Tu=new Set}));function Oc(e,t){return Fc.apply(this,arguments)}function Fc(){return Fc=s(u().mark((function e(t,n){var r,a,i,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=oi(t),a=n.query,i=!1,(o=r.queries.get(a))||(i=!0,o=new Uc),!i){e.next=13;break}return e.prev=3,e.next=6,r.onListen(a);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Nc(e.t0,"Initialization of query '".concat(Ko(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(a,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&Gc(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Fc.apply(this,arguments)}function Bc(e,t){return zc.apply(this,arguments)}function zc(){return zc=s(u().mark((function e(t,n){var r,a,i,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=oi(t),a=n.query,i=!1,(o=r.queries.get(a))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),!i){e.next=6;break}return e.abrupt("return",(r.queries.delete(a),r.onUnlisten(a)));case 6:case"end":return e.stop()}}),e)}))),zc.apply(this,arguments)}function Hc(e,t){var n,r=oi(e),a=!1,i=g(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.query,l=r.queries.get(s);if(l){var u,c=g(l.listeners);try{for(c.s();!(u=c.n()).done;){u.value.Au(o)&&(a=!0)}}catch(h){c.e(h)}finally{c.f()}l.Iu=o}}}catch(h){i.e(h)}finally{i.f()}a&&Gc(r)}function Vc(e,t,n){var r=oi(e),a=r.queries.get(t);if(a){var i,o=g(a.listeners);try{for(o.s();!(i=o.n()).done;){i.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Gc(e){e.Tu.forEach((function(e){e.next()}))}var Wc=function(){function e(t,n,r){k(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return M(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=g(e.docChanges);try{for(r.s();!(t=r.n()).done;){var a=t.value;3!==a.type&&n.push(a)}}catch(o){r.e(o)}finally{r.f()}e=new Dc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var i=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),i=!0):this.vu(e,this.onlineState)&&(this.Su(e),i=!0),this.Pu=e,i}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=Dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}();var qc=M((function e(t){k(this,e),this.key=t})),Kc=M((function e(t){k(this,e),this.key=t})),Xc=function(){function e(t,n){k(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Ks(),this.mutatedKeys=Ks(),this.Lu=Jo(t),this.Uu=new Pc(this.Lu)}return M(e,[{key:"qu",get:function(){return this.Fu}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Ku:new Ic,a=t?t.Uu:this.Uu,i=t?t.mutatedKeys:this.mutatedKeys,o=a,s=!1,l=jo(this.query)&&a.size===this.query.limit?a.last():null,u=Oo(this.query)&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((function(e,t){var c=a.get(e),h=Xo(n.query,t)?t:null,f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(c,h)||(r.track({type:2,doc:h}),p=!0,(l&&n.Lu(h,l)>0||u&&n.Lu(h,u)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(l||u)&&(s=!0)),p&&(h?(o=o.add(h),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),jo(this.query)||Oo(this.query))for(;o.size>this.query.limit;){var c=jo(this.query)?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),r.track({type:1,doc:c})}return{Uu:o,Ku:r,ei:s,mutatedKeys:i}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,a=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var i=e.Ku.pu();i.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ai()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],s=0===this.Bu.size&&this.current?1:0,l=s!==this.$u;return this.$u=s,0!==i.length||l?{snapshot:new Dc(this.query,e.Uu,a,i,e.mutatedKeys,0===s,l,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new Ic,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Ks(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new Kc(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new qc(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.hi,this.Bu=Ks();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return Dc.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),Yc=M((function e(t,n,r){k(this,e),this.query=t,this.targetId=n,this.view=r})),Jc=M((function e(t){k(this,e),this.key=t,this.Xu=!1})),Qc=function(){function e(t,n,r,a,i,o){k(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Zu={},this.ta=new Is((function(e){return qo(e)}),Wo),this.ea=new Map,this.na=new Set,this.sa=new Ds(Wi.comparator),this.ia=new Map,this.ra=new bu,this.oa={},this.ua=new Map,this.aa=Jl.gn(),this.onlineState="Unknown",this.ca=void 0}return M(e,[{key:"isPrimaryClient",get:function(){return!0===this.ca}}]),e}();function Zc(e,t){return $c.apply(this,arguments)}function $c(){return $c=s(u().mark((function e(t,n){var r,a,i,o,s,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Eh(t),!(o=r.ta.get(n))){e.next=6;break}a=o.targetId,r.sharedClientState.addLocalQueryTarget(a),i=o.view.Yu(),e.next=15;break;case 6:return e.next=8,fu(r.localStore,Vo(n));case 8:return s=e.sent,r.isPrimaryClient&&Xu(r.remoteStore,s),l=r.sharedClientState.addLocalQueryTarget(s.targetId),a=s.targetId,e.next=14,eh(r,n,a,"current"===l);case 14:i=e.sent;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)}))),$c.apply(this,arguments)}function eh(e,t,n,r){return th.apply(this,arguments)}function th(){return th=s(u().mark((function e(t,n,r,a){var i,o,l,c,h,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ha=function(e,n,r){return function(){var e=s(u().mark((function e(t,n,r,a){var i,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.view.Gu(r),e.t0=i.ei,!e.t0){e.next=6;break}return e.next=5,mu(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,i)}));case 5:i=e.sent;case 6:return o=a&&a.targetChanges.get(n.targetId),s=n.view.applyChanges(i,t.isPrimaryClient,o),e.abrupt("return",(bh(t,n.targetId,s.zu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,mu(t.localStore,n,!0);case 3:return i=e.sent,o=new Xc(n,i.hi),l=o.Gu(i.documents),c=Qs.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==t.onlineState),h=o.applyChanges(l,t.isPrimaryClient,c),bh(t,r,h.zu),f=new Yc(n,r,o),e.abrupt("return",(t.ta.set(n,f),t.ea.has(r)?t.ea.get(r).push(n):t.ea.set(r,[n]),h.snapshot));case 11:case"end":return e.stop()}}),e)}))),th.apply(this,arguments)}function nh(e,t){return rh.apply(this,arguments)}function rh(){return rh=s(u().mark((function e(t,n){var r,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=oi(t),a=r.ta.get(n),!((i=r.ea.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ea.set(a.targetId,i.filter((function(e){return!Wo(e,n)}))),void r.ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,du(r.localStore,a.targetId,!1).then((function(){r.sharedClientState.clearQueryState(a.targetId),Yu(r.remoteStore,a.targetId),vh(r,a.targetId)})).catch(Ql);case 9:e.next=14;break;case 11:return vh(r,a.targetId),e.next=14,du(r.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),rh.apply(this,arguments)}function ah(e,t,n){return ih.apply(this,arguments)}function ih(){return ih=s(u().mark((function e(t,n,r){var a,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ah(t),e.prev=1,e.next=4,function(e,t){var n,r=oi(e),a=_i.now(),i=t.reduce((function(e,t){return e.add(t.key)}),Ks());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ai.qs(e,i).next((function(i){n=i;var o,s=[],l=g(t);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=bs(u,n.get(u.key));null!=c&&s.push(new ks(u.key,c,so(c.value.mapValue),ps.exists(!0)))}}catch(h){l.e(h)}finally{l.f()}return r.$s.addMutationBatch(e,a,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(a.localStore,n);case 4:return i=e.sent,a.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.oa[e.currentUser.toKey()];r||(r=new Ds(xi)),r=r.insert(t,n),e.oa[e.currentUser.toKey()]=r}(a,i.batchId,r),e.next=9,_h(a,i.changes);case 9:return e.next=11,hc(a.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Nc(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),ih.apply(this,arguments)}function oh(e,t){return sh.apply(this,arguments)}function sh(){return sh=s(u().mark((function e(t,n){var r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oi(t),e.prev=1,e.next=4,uu(r.localStore,n);case 4:return a=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ia.get(t);n&&(ii(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?ii(n.Xu):e.removedDocuments.size>0&&(ii(n.Xu),n.Xu=!1))})),e.next=8,_h(r,a,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ql(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),sh.apply(this,arguments)}function lh(e,t,n){var r=oi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var a=[];r.ta.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&a.push(r.snapshot)})),function(e,t){var n=oi(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var a,i=g(n.listeners);try{for(i.s();!(a=i.n()).done;){a.value.Eu(t)&&(r=!0)}}catch(o){i.e(o)}finally{i.f()}})),r&&Gc(n)}(r.eventManager,t),a.length&&r.Zu.Ko(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function uh(e,t,n){return ch.apply(this,arguments)}function ch(){return ch=s(u().mark((function e(t,n,r){var a,i,o,s,l,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=oi(t)).sharedClientState.updateQueryState(n,"rejected",r),i=a.ia.get(n),!(o=i&&i.key)){e.next=14;break}return s=(s=new Ds(Wi.comparator)).insert(o,lo.newNoDocument(o,ki.min())),l=Ks().add(o),c=new Js(ki.min(),new Map,new Os(xi),s,l),e.next=9,oh(a,c);case 9:a.sa=a.sa.remove(o),a.ia.delete(n),wh(a),e.next=16;break;case 14:return e.next=16,du(a.localStore,n,!1).then((function(){return vh(a,n,r)})).catch(Ql);case 16:case"end":return e.stop()}}),e)}))),ch.apply(this,arguments)}function hh(e,t){return fh.apply(this,arguments)}function fh(){return fh=s(u().mark((function e(t,n){var r,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oi(t),a=n.batch.batchId,e.prev=1,e.next=4,su(r.localStore,n);case 4:return i=e.sent,gh(r,a,null),mh(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),e.next=10,_h(r,i);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ql(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),fh.apply(this,arguments)}function dh(e,t,n){return ph.apply(this,arguments)}function ph(){return ph=s(u().mark((function e(t,n,r){var a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oi(t),e.prev=1,e.next=4,function(e,t){var n=oi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.$s.lookupMutationBatch(e,t).next((function(t){return ii(null!==t),r=t.keys(),n.$s.removeMutationBatch(e,t)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}(a.localStore,n);case 4:return i=e.sent,gh(a,n,r),mh(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,_h(a,i);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ql(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ph.apply(this,arguments)}function mh(e,t){(e.ua.get(t)||[]).forEach((function(e){e.resolve()})),e.ua.delete(t)}function gh(e,t,n){var r=oi(e),a=r.oa[r.currentUser.toKey()];if(a){var i=a.get(t);i&&(n?i.reject(n):i.resolve(),a=a.remove(t)),r.oa[r.currentUser.toKey()]=a}}function vh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,a=g(e.ea.get(t));try{for(a.s();!(r=a.n()).done;){var i=r.value;e.ta.delete(i),n&&e.Zu.la(i,n)}}catch(o){a.e(o)}finally{a.f()}e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach((function(t){e.ra.containsKey(t)||yh(e,t)}))}function yh(e,t){e.na.delete(t.path.canonicalString());var n=e.sa.get(t);null!==n&&(Yu(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),wh(e))}function bh(e,t,n){var r,a=g(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;i instanceof qc?(e.ra.addReference(i.key,t),xh(e,i)):i instanceof Kc?(ei("SyncEngine","Document no longer in limbo: "+i.key),e.ra.removeReference(i.key,t),e.ra.containsKey(i.key)||yh(e,i.key)):ai()}}catch(o){a.e(o)}finally{a.f()}}function xh(e,t){var n=t.key,r=n.path.canonicalString();e.sa.get(n)||e.na.has(r)||(ei("SyncEngine","New document in limbo: "+n),e.na.add(r),wh(e))}function wh(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){var t=e.na.values().next().value;e.na.delete(t);var n=new Wi(Ai.fromString(t)),r=e.aa.next();e.ia.set(r,new Jc(n)),e.sa=e.sa.insert(n,r),Xu(e.remoteStore,new Vl(Vo(Uo(n.path)),r,2,vi.A))}}function _h(e,t,n){return kh.apply(this,arguments)}function kh(){return kh=s(u().mark((function e(t,n,r){var a,i,o,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=oi(t),i=[],o=[],l=[],e.t0=a.ta.isEmpty(),e.t0){e.next=9;break}return a.ta.forEach((function(e,t){l.push(a.ha(t,n,r).then((function(e){if(e){a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),i.push(e);var n=tu.Js(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(l);case 6:return a.Zu.Ko(i),e.next=9,function(){var e=s(u().mark((function e(t,n){var r,a,i,o,s,l,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oi(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ol.forEach(n,(function(t){return Ol.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ol.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Fl(e.t0)){e.next=10;break}throw e.t0;case 10:ei("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:a=g(n);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.targetId,o.fromCache||(l=r.si.get(s),c=l.snapshotVersion,h=l.withLastLimboFreeSnapshotVersion(c),r.si=r.si.insert(s,h))}catch(u){a.e(u)}finally{a.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(a.localStore,o);case 9:case"end":return e.stop()}}),e)}))),kh.apply(this,arguments)}function Sh(e,t){return Mh.apply(this,arguments)}function Mh(){return Mh=s(u().mark((function e(t,n){var r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=oi(t)).currentUser.isEqual(n)){e.next=11;break}return ei("SyncEngine","User change. New user:",n.toKey()),e.next=5,iu(r.localStore,n);case 5:return a=e.sent,r.currentUser=n,function(e,t){e.ua.forEach((function(e){e.forEach((function(e){e.reject(new li(si.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ua.clear()}(r),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),e.next=11,_h(r,a.ci);case 11:case"end":return e.stop()}}),e)}))),Mh.apply(this,arguments)}function Th(e,t){var n=oi(e),r=n.ia.get(t);if(r&&r.Xu)return Ks().add(r.key);var a=Ks(),i=n.ea.get(t);if(!i)return a;var o,s=g(i);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=n.ta.get(l);a=a.unionWith(u.view.qu)}}catch(c){s.e(c)}finally{s.f()}return a}function Eh(e){var t=oi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=oh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Th.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=uh.bind(null,t),t.Zu.Ko=Hc.bind(null,t.eventManager),t.Zu.la=Vc.bind(null,t.eventManager),t}function Ah(e){var t=oi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=dh.bind(null,t),t}var Ch=function(){function e(){k(this,e),this.synchronizeTabs=!1}return M(e,[{key:"initialize",value:function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=Uu(t.databaseInfo.databaseId),this.sharedClientState=this.da(t),this.persistence=this._a(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.wa(t),this.localStore=this.ma(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wa",value:function(e){return null}},{key:"ma",value:function(e){return au(this.persistence,new nu,e.initialUser,this.M)}},{key:"_a",value:function(e){return new Mu(Eu.Wi,this.M)}},{key:"da",value:function(e){return new Cu}},{key:"terminate",value:function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Lh=function(){function e(){k(this,e)}return M(e,[{key:"initialize",value:function(){var e=s(u().mark((function e(t,n){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return lh(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Sh.bind(null,this.syncEngine),e.next=12,Ec(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new jc}},{key:"createDatastore",value:function(e){var t,n=Uu(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Iu(t));return function(e,t,n,r){return new zu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,a,i,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,a=function(e){return lh(o.syncEngine,e,0)},i=Ru.vt()?new Ru:new Lu,new Vu(t,n,r,a,i)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,a,i,o){var s=new Qc(e,t,n,r,a,i);return o&&(s.ca=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=s(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oi(t),ei("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,qu(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var Rh=function(){function e(t){k(this,e),this.observer=t,this.muted=!1}return M(e,[{key:"next",value:function(e){this.observer.next&&this.ya(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"pa",value:function(){this.muted=!0}},{key:"ya",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Nh=function(){function e(t,n,r,a){var i=this;k(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=Ja.UNAUTHENTICATED,this.clientId=bi.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ei("FirestoreClient","Received user=",t.uid),e.next=3,i.authCredentialListener(t);case 3:i.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ei("FirestoreClient","Received new app check token=",e),i.appCheckCredentialListener(e,i.user)}))}return M(e,[{key:"getConfiguration",value:function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new li(si.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(s(u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Nc(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Ph(e,t){return Ih.apply(this,arguments)}function Ih(){return Ih=s(u().mark((function e(t,n){var r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ei("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:a=r.initialUser,t.setCredentialChangeListener(function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(t),e.t0){e.next=5;break}return e.next=4,iu(n.localStore,t);case 4:a=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Ih.apply(this,arguments)}function Dh(e,t){return Uh.apply(this,arguments)}function Uh(){return Uh=s(u().mark((function e(t,n){var r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,jh(t);case 3:return r=e.sent,ei("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return a=e.sent,e.next=10,n.initialize(r,a);case 10:t.setCredentialChangeListener((function(e){return Mc(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Mc(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Uh.apply(this,arguments)}function jh(e){return Oh.apply(this,arguments)}function Oh(){return Oh=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ei("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Ph(t,new Ch);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Oh.apply(this,arguments)}function Fh(e){return Bh.apply(this,arguments)}function Bh(){return Bh=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ei("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Dh(t,new Lh);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Bh.apply(this,arguments)}function zh(e){return Fh(e).then((function(e){return e.syncEngine}))}function Hh(e){return Vh.apply(this,arguments)}function Vh(){return Vh=s(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fh(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Zc.bind(null,n.syncEngine),r.onUnlisten=nh.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Vh.apply(this,arguments)}function Gh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ui;return e.asyncQueue.enqueueAndForget(s(u().mark((function a(){return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(e,t,n,r,a){var i=new Rh({next:function(n){t.enqueueAndForget((function(){return Bc(e,o)})),n.fromCache&&"server"===r.source?a.reject(new li(si.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(n)},error:function(e){return a.reject(e)}}),o=new Wc(n,i,{includeMetadataChanges:!0,Du:!0});return Oc(e,o)},a.next=3,Hh(e);case 3:return a.t1=a.sent,a.t2=e.asyncQueue,a.t3=t,a.t4=n,a.t5=r,a.abrupt("return",(0,a.t0)(a.t1,a.t2,a.t3,a.t4,a.t5));case 9:case"end":return a.stop()}}),a)})))),r.promise}var Wh=new Map;function qh(e,t,n){if(!n)throw new li(si.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Kh(e){if(!Wi.isDocumentKey(e))throw new li(si.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Xh(e){if(Wi.isDocumentKey(e))throw new li(si.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Yh(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ai()}function Jh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new li(si.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Yh(e);throw new li(si.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Qh(e,t){if(t<=0)throw new li(si.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Zh=function(){function e(t){var n;if(k(this,e),void 0===t.host){if(void 0!==t.ssl)throw new li(si.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new li(si.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new li(si.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return M(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),$h=function(){function e(t,n,r){k(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zh({}),this._settingsFrozen=!1,t instanceof zi?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new li(si.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zi(e.options.projectId)}(t))}return M(e,[{key:"app",get:function(){if(!this._app)throw new li(si.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new li(si.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zh(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new hi;switch(e.type){case"gapi":var t=e.client;return ii(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new pi(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new li(si.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Wh.get(e);t&&(ei("ComponentProvider","Removing Datastore"),Wh.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();var ef=function(){function e(t,n,r){k(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return M(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new nf(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),tf=function(){function e(t,n,r){k(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return M(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),nf=function(e){v(n,e);var t=w(n);function n(e,r,a){var i;return k(this,n),(i=t.call(this,e,r,Uo(a)))._path=a,i.type="collection",i}return M(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ef(this.firestore,null,new Wi(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(tf);function rf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=F(e),qh("collection","path",t),e instanceof $h){var i=Ai.fromString.apply(Ai,[t].concat(r));return Xh(i),new nf(e,null,i)}if(!(e instanceof ef||e instanceof nf))throw new li(si.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ai.fromString.apply(Ai,[t].concat(r)));return Xh(o),new nf(e.firestore,null,o)}var af=function(){function e(){var t=this;k(this,e),this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new ju(this,"async_queue_retry"),this.Ua=function(){var e=Du();e&&ei("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=Du();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ua)}return M(e,[{key:"isShuttingDown",get:function(){return this.Ma}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.qa(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;var t=Du();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}},{key:"enqueue",value:function(e){var t=this;if(this.qa(),this.Ma)return new Promise((function(){}));var n=new ui;return this.Ga((function(){return t.Ma&&t.Ba?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ka.push(e),t.Ka()}))}},{key:"Ka",value:function(){var e=s(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ka.length){e.next=14;break}return e.prev=1,e.next=4,this.ka[0]();case 4:this.ka.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Fl(e.t0)){e.next=12;break}throw e.t0;case 12:ei("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ka.length>0&&this.So.Io((function(){return t.Ka()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.Na.then((function(){return t.$a=!0,e().catch((function(e){t.Fa=e,t.$a=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ti("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.$a=!1,e}))}));return this.Na=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.qa(),this.La.indexOf(e)>-1&&(t=0);var a=Rc.createAndSchedule(this,e,t,n,(function(e){return r.Qa(e)}));return this.Oa.push(a),a}},{key:"qa",value:function(){this.Fa&&ai()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ja",value:function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Na,e.next=3,t;case 3:if(t!==this.Na){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t,n=g(this.Oa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"za",value:function(e){var t=this;return this.ja().then((function(){t.Oa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=g(t.Oa);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.skipDelay(),"all"!==e&&a.timerId===e)break}}catch(i){r.e(i)}finally{r.f()}return t.ja()}))}},{key:"Ha",value:function(e){this.La.push(e)}},{key:"Qa",value:function(e){var t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}]),e}();var of=function(e){v(n,e);var t=w(n);function n(e,r,a){var i;return k(this,n),(i=t.call(this,e,r,a)).type="firestore",i._queue=new af,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return M(n,[{key:"_terminate",value:function(){return this._firestoreClient||lf(this),this._firestoreClient.terminate()}}]),n}($h);function sf(e){return e._firestoreClient||lf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function lf(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Bi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Nh(e._authCredentials,e._appCheckCredentials,e._queue,r)}var uf=function(){function e(){k(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0;a<n.length;++a)if(0===n[a].length)throw new li(si.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Li(n)}return M(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var cf=function(){function e(t){k(this,e),this._byteString=t}return M(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ni.fromBase64String(t))}catch(t){throw new li(si.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ni.fromUint8Array(t))}}]),e}(),hf=M((function e(t){k(this,e),this._methodName=t})),ff=function(){function e(t,n){if(k(this,e),!isFinite(t)||t<-90||t>90)throw new li(si.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new li(si.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return M(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return xi(this._lat,e._lat)||xi(this._long,e._long)}}]),e}(),df=/^__.*__$/,pf=function(){function e(t,n,r){k(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return M(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ks(e,this.data,this.fieldMask,t,this.fieldTransforms):new _s(e,this.data,t,this.fieldTransforms)}}]),e}();function mf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ai()}}var gf=function(){function e(t,n,r,a,i,o){k(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=a,void 0===i&&this.Ja(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return M(e,[{key:"path",get:function(){return this.settings.path}},{key:"Ya",get:function(){return this.settings.Ya}},{key:"Xa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Za",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.ec(e),r}},{key:"nc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.Ja(),r}},{key:"sc",value:function(e){return this.Xa({path:void 0,tc:!0})}},{key:"ic",value:function(e){return Ef(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ja",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ec(this.path.get(e))}},{key:"ec",value:function(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(mf(this.Ya)&&df.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}]),e}(),vf=function(){function e(t,n,r){k(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||Uu(t)}return M(e,[{key:"uc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new gf({Ya:e,methodName:t,oc:n,path:Li.emptyPath(),tc:!1,rc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function yf(e){var t=e._freezeSettings(),n=Uu(e._databaseId);return new vf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function bf(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.uc(i.merge||i.mergeFields?2:0,t,n,a);kf("Data must be an object, but it was:",o,r);var s,l,u=wf(r,o);if(i.merge)s=new Ri(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){var c,h=[],f=g(i.mergeFields);try{for(f.s();!(c=f.n()).done;){var d=c.value,p=Sf(t,d,n);if(!o.contains(p))throw new li(si.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Af(h,p)||h.push(p)}}catch(m){f.e(m)}finally{f.f()}s=new Ri(h),l=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,l=o.fieldTransforms;return new pf(new oo(u),s,l)}function xf(e,t){if(_f(e=F(e)))return kf("Unsupported field value:",t,e),wf(e,t);if(e instanceof hf)return function(e,t){if(!mf(t.Ya))throw t.ic("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ic("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){var n,r=[],a=0,i=g(e);try{for(i.s();!(n=i.n()).done;){var o=xf(n.value,t.sc(a));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),a++}}catch(s){i.e(s)}finally{i.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=F(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return es(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=_i.fromDate(e);return{timestampValue:ll(t.M,n)}}if(e instanceof _i){var r=new _i(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ll(t.M,r)}}if(e instanceof ff)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cf)return{bytesValue:ul(t.M,e._byteString)};if(e instanceof ef){var a=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(a))throw t.ic("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(a.projectId,"/").concat(a.database));return{referenceValue:fl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic("Unsupported field value: ".concat(Yh(e)))}(e,t)}function wf(e,t){var n={};return Ti(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Mi(e,(function(e,r){var a=xf(r,t.Za(e));null!=a&&(n[e]=a)})),{mapValue:{fields:n}}}function _f(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof _i||e instanceof ff||e instanceof cf||e instanceof ef||e instanceof hf)}function kf(e,t,n){if(!_f(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Yh(n);throw"an object"===r?t.ic(e+" a custom object"):t.ic(e+" "+r)}}function Sf(e,t,n){if((t=F(t))instanceof uf)return t._internalPath;if("string"==typeof t)return Tf(e,t);throw Ef("Field path arguments must be of type string or ",e,!1,void 0,n)}var Mf=new RegExp("[~\\*/\\[\\]]");function Tf(e,t,n){if(t.search(Mf)>=0)throw Ef("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return f(uf,_(t.split(".")))._internalPath}catch(r){throw Ef("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ef(e,t,n,r,a){var i=r&&!r.isEmpty(),o=void 0!==a,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var l="";return(i||o)&&(l+=" (found",i&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(a)),l+=")"),new li(si.INVALID_ARGUMENT,s+e+l)}function Af(e,t){return e.some((function(e){return e.isEqual(t)}))}var Cf=function(){function e(t,n,r,a,i){k(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=i}return M(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ef(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Lf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Rf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Lf=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n,[{key:"data",value:function(){return m(d(n.prototype),"data",this).call(this)}}]),n}(Cf);function Rf(e,t){return"string"==typeof t?Tf(e,t):t instanceof uf?t._internalPath:t._delegate._internalPath}var Nf=function(){function e(t,n){k(this,e),this.hasPendingWrites=t,this.fromCache=n}return M(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Pf=function(e){v(n,e);var t=w(n);function n(e,r,a,i,o,s){var l;return k(this,n),(l=t.call(this,e,r,a,i,s))._firestore=e,l._firestoreImpl=e,l.metadata=o,l}return M(n,[{key:"exists",value:function(){return m(d(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new If(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Rf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Cf),If=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m(d(n.prototype),"data",this).call(this,e)}}]),n}(Pf),Df=function(){function e(t,n,r,a){k(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new Nf(a.hasPendingWrites,a.fromCache),this.query=r}return M(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new If(n._firestore,n._userDataWriter,r.key,r,new Nf(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new li(si.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new If(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Nf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new If(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Nf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),a=-1,i=-1;return 0!==t.type&&(a=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(i=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Uf(t.type),doc:n,oldIndex:a,newIndex:i}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Uf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ai()}}function jf(e){if(Oo(e)&&0===e.explicitOrderBy.length)throw new li(si.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Of=M((function e(){k(this,e)}));function Ff(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=o._apply(e)}return e}var Bf=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this)).hc=e,a.dc=r,a.type="orderBy",a}return M(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new li(si.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new li(si.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Lo(t,n);return function(e,t){if(null===Fo(e)){var n=Bo(e);null!==n&&Gf(e,n,t.field)}}(e,r),r}(e._query,this.hc,this.dc);return new tf(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Io(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Of);function zf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=Rf("orderBy",e);return new Bf(r,n)}var Hf=function(e){v(n,e);var t=w(n);function n(e,r,a){var i;return k(this,n),(i=t.call(this)).type=e,i._c=r,i.wc=a,i}return M(n,[{key:"_apply",value:function(e){return new tf(e.firestore,e.converter,Go(e._query,this._c,this.wc))}}]),n}(Of);function Vf(e){return Qh("limit",e),new Hf("limit",e,"F")}function Gf(e,t,n){if(!n.isEqual(t))throw new li(si.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Wf=function(){function e(){k(this,e)}return M(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Di(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ai()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Mi(e.fields,(function(e,a){r[e]=n.convertValue(a,t)})),r}},{key:"convertGeoPoint",value:function(e){return new ff(Di(e.latitude),Di(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Oi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fi(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ii(e);return new _i(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ai.fromString(e);ii(Pl(n));var r=new zi(n.get(1),n.get(3)),a=new Wi(n.popFirst(5));return r.isEqual(t)||ti("Document ".concat(a," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),a}}]),e}();function qf(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Kf=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).firestore=e,r}return M(n,[{key:"convertBytes",value:function(e){return new cf(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ef(this.firestore,null,t)}}]),n}(Wf);function Xf(e){e=Jh(e,tf);var t=Jh(e.firestore,of),n=sf(t),r=new Kf(t);return jf(e._query),Gh(n,e._query).then((function(n){return new Df(t,r,e,n)}))}function Yf(e,t){var n=Jh(e.firestore,of),r=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=F(e),1===arguments.length&&(t=bi.R()),qh("doc","path",t),e instanceof $h){var i=Ai.fromString.apply(Ai,[t].concat(r));return Kh(i),new ef(e,null,new Wi(i))}if(!(e instanceof ef||e instanceof nf))throw new li(si.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ai.fromString.apply(Ai,[t].concat(r)));return Kh(o),new ef(e.firestore,e instanceof nf?e.converter:null,new Wi(o))}(e),a=qf(e.converter,t);return Jf(n,[bf(yf(e.firestore),"addDoc",r._key,a,null!==e.converter,{}).toMutation(r._key,ps.exists(!1))]).then((function(){return r}))}function Jf(e,t){return function(e,t){var n=new ui;return e.asyncQueue.enqueueAndForget(s(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=ah,r.next=3,zh(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(sf(e),t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Qa="9.6.10",pe(new W("firestore",(function(e,n){var r=n.options,a=e.getProvider("app").getImmediate(),i=new of(a,new fi(e.getProvider("auth-internal")),new gi(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),i._setSettings(r),i}),"PUBLIC")),xe(Ya,"3.4.7",e),xe(Ya,"3.4.7","esm2017")}();xe("firebase","9.6.10","app");for(var Qf,Zf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:ue,automaticDataCollectionEnabled:!1},t),a=r.name;if("string"!==typeof a||!a)throw ve.create("bad-app-name",{appName:String(a)});var i=he.get(a);if(i){if(j(e,i.options)&&j(r,i.config))return i;throw ve.create("duplicate-app",{appName:a})}var o,s=new J(a),l=g(fe.values());try{for(l.s();!(o=l.n()).done;){var u=o.value;s.addComponent(u)}}catch(h){l.e(h)}finally{l.f()}var c=new ye(e,r,s);return he.set(a,c),c}({apiKey:"AIzaSyDIbm5_tSRHMNsFOaatGvT-MjzFVGSOooc",authDomain:"fuglar-2fee1.firebaseapp.com",databaseURL:"https://fuglar-2fee1.firebaseio.com",projectId:"fuglar-2fee1",storageBucket:"fuglar-2fee1.appspot.com",messagingSenderId:"978314575412",appId:"1:978314575412:web:98f2f565ab80eb85e85461"}),$f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return me(e,"firestore").getImmediate()}(Zf),ed=function(e){switch(e){case"plant":return"plant-highscore";case"bird":return"bird-highscore";case"geo":return"geo-highscore";default:return"no-path"}},td=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(u().mark((function e(n,r){var a,i,o,s,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ed(t),i=rf($f,a),o=Ff(i,zf("score","desc"),Vf(25)),e.next=5,Xf(o);case 5:s=e.sent,l=[],s.forEach((function(e){l.push(e.data()),99===e.data().score&&console.log(e.id)})),console.log("got highscore",t),n(l);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nd=n(184),rd=function(){return(0,nd.jsx)("div",{className:"center",children:(0,nd.jsx)("button",{className:"btn",children:(0,nd.jsx)("a",{href:"https://ko-fi.com/hugiholm",children:"Kauptu fyrir mig kaffi"})})})},ad=function(t){var n=t.score,r=t.saveScore,a=i((0,e.useState)(window.localStorage.getItem("name")||""),2),o=a[0],s=a[1];return(0,nd.jsxs)("div",{className:"center",children:[(0,nd.jsx)("h2",{children:"Leik loki\xf0"}),(0,nd.jsxs)("div",{children:["\xde\xfa f\xe9kkst ",n," stig"]}),(0,nd.jsx)("div",{style:{marginTop:15,color:"gray",fontSize:12},children:"Skr\xe1\xf0u nafni\xf0 \xfeitt a\xf0 ne\xf0an til a\xf0 vista stigin \xfe\xedn"}),(0,nd.jsx)("input",{value:o,placeholder:"Nafn",className:"inp",type:"text",onChange:function(e){s(e.target.value)}}),(0,nd.jsx)("button",{className:"btn",onClick:function(){""!==o&&(window.localStorage.setItem("name",o),r(o))},children:"Vista stig"})]})},id=function(t){var n=t.onSelect,r=t.inGame,a=t.perc,o=t.setPerc,s=i((0,e.useState)(a),2),l=s[0],u=s[1];return r?null:(0,nd.jsxs)("div",{className:"center",children:[(0,nd.jsx)("h5",{children:"Veldu leik"}),(0,nd.jsx)("button",{className:"btn",style:{marginRight:15},onClick:function(){return n("bird")},children:"Fuglar"}),(0,nd.jsx)("button",{className:"btn",style:{marginRight:15},onClick:function(){return n("plant")},children:"Pl\xf6ntur"}),(0,nd.jsx)("button",{style:{marginRight:15},className:"btn",onClick:function(){return n("geo")},children:"Landafr\xe6\xf0i"}),(0,nd.jsx)("button",{className:"btn",children:(0,nd.jsx)("a",{href:"/island",style:{textDecoration:"none",color:"black"},children:"Sko\xf0a \xedsland"})}),(0,nd.jsx)("br",{}),(0,nd.jsxs)("label",{children:["Spila ",l," % "]}),(0,nd.jsx)("input",{type:"range",width:"200",className:"range",step:5,min:5,value:l,max:100,onBlur:function(e){o(l)},onChange:function(e){u(e.target.value)}})]})},od=function(e){return Math.floor(Math.random()*e)},sd=function(e){for(var t=e.length,n=0;n<20*t;n++){var r=od(t),a=od(t),i=e[r];e[r]=e[a],e[a]=i}},ld=function(e,t){var n,r=g(t);try{for(r.s();!(n=r.n()).done;){if(n.value===e)return!0}}catch(a){r.e(a)}finally{r.f()}return!1},ud=function(e){var t,n=md(e);return null!==(t=window.localStorage.getItem(n))&&void 0!==t?t:0},cd=n(468),hd=n(289),fd=n(851),dd=function(e){return JSON.parse(JSON.stringify(e))},pd=function(e){var t=(e=e.toLowerCase()).substring(0,1),n=e.substring(1);return t.toUpperCase()+n},md=function(e){switch(e){case"bird":return"bestBirdScore";case"plant":return"bestPlantScore";case"geo":return"bestGeoScore";default:return"\xf3\xfeekktur"}},gd=function(e){switch(e){case"bird":return"fugla";case"plant":return"pl\xf6ntu";case"geo":return"landafr\xe6\xf0i";default:return"\xf3\xfeekktur"}},vd=function(t){var n=t.gameType,r=t.data,a=i((0,e.useState)(0),2),o=(a[0],a[1]);(0,e.useEffect)((function(){var e=ud(n);o(e)}),[]);var s=gd(n);return(0,nd.jsxs)("div",{className:"center",style:{marginTop:15},children:[(0,nd.jsxs)("span",{style:{color:"gray",fontSize:20},children:["\xdeitt besta \xed ",s,"leik er ",r.pb," stig"]}),(0,nd.jsxs)("h4",{children:["25 h\xe6stu stig \xed ",s,"leik"]}),void 0===r.data?"Hle\xf0ur...":(0,nd.jsx)("div",{className:"highscore",children:r.data.map((function(e,t){return(0,nd.jsxs)("div",{className:"highscore-item",children:[(0,nd.jsxs)("span",{className:"highscore-item-name",children:[(0,nd.jsx)("span",{style:{color:"gray",fontSize:10},children:t+1})," ",e.name]}),(0,nd.jsx)("span",{className:"highscore-item-score",children:e.score})]},"".concat(e.name,"-").concat(t))}))})]})},yd=function(e){var t,n=e.card,r=e.correct,a=e.incorrect,i=e.roundOver,o=e.onClick,s="img";r&&i?s+=" correct":a&&i&&(s+=" incorrect");var l=null!==(t=n.thumb)&&void 0!==t?t:n.imgUrl;return(0,nd.jsx)("div",{className:"img-container",onClick:function(){o()},children:(0,nd.jsx)("img",{src:l,alt:"",className:s})})},bd=0,xd=0,wd=[],_d=[],kd=function(t){var n,r,a,o,s=t.gameOver,l=t.gameType,u=t.setScore,c=t.setTotal,h=t.percentPlay,f=i((0,e.useState)([]),2),d=f[0],p=f[1],m=i((0,e.useState)(!1),2),g=m[0],v=m[1],y=i((0,e.useState)(0),2),b=y[0],x=y[1],w=i((0,e.useState)(-1),2),_=w[0],k=w[1];(0,e.useEffect)((function(){if(""!==l){var e=function(e){switch(e){case"bird":return dd(cd);case"plant":return dd(hd);default:return dd(fd)}}(l);sd(e);var t=Math.floor(e.length*(h/100));t=Math.max(t,10),e=e.splice(0,t);var n=[];n=[];for(var r=0;r<e.length;r++)n.push(r);wd=e,_d=n,bd=0,u(0),c(0),xd=0,S()}}),[l,h]);var S=function(){if(0!==wd.length){var e,t,n=[];n.push(_d[0]);for(var r=0;r<3;r++){for(var a=od(wd.length),i=0;(ld(a,n)||(e=a,t=_d[0],"plant"!==l&&wd[e].category!==wd[t].category))&&i<20;)a=od(wd.length),i+=1;n.push(a)}x(_d[0]),sd(n),p(n)}},M=function(){var e;_d.splice(0,1),0===(null===(e=_d)||void 0===e?void 0:e.length)?(v(!0),s(bd,xd)):(k(-1),v(!1),S())};(0,e.useEffect)((function(){sd(_d),S()}),[]);var T="",E="",A="";return"plant"===l?(T="pl\xf6ntur",E="planta",A="N\xe6sta planta"):"bird"===l?(T="fuglar",E="fugl",A="N\xe6sti fugl"):"geo"===l&&(T="spurningar",A="N\xe6sta spurning",E=wd.length>0?function(e){switch(console.log("cate",e),e){case"river":return"\xe1";case"lake":return"st\xf6\xf0uvatn";case"glacier":return"j\xf6kull";case"fjord":return"fj\xf6r\xf0ur e\xf0a fl\xf3i";case"town":return"b\xe6r";default:return e}}(wd[_d[0]].category):""),(0,nd.jsx)("div",{children:(0,nd.jsxs)("div",{className:"imgs-container",children:[(0,nd.jsxs)("span",{style:{width:"25%",display:"inline-block",textAlign:"left"},children:[null!==(n=null===(r=_d)||void 0===r?void 0:r.length)&&void 0!==n?n:0," ",T," eftir"]}),(0,nd.jsxs)("span",{style:{width:"50%",display:"inline-block",textAlign:"center",fontSize:22,fontWeight:"bold"},children:["Hva\xf0a ",E," er ",null!==(a=null===(o=wd[b])||void 0===o?void 0:o.name)&&void 0!==a?a:"unkno","?"]}),(0,nd.jsxs)("span",{style:{width:"25%",display:"inline-block",textAlign:"right"},children:["Stig ",bd," / ",xd]}),(0,nd.jsx)("div",{style:{marginBottom:15}}),d.map((function(e,t){return(0,nd.jsx)(yd,{card:wd[e],roundOver:g,correct:e===b,incorrect:_===e,onClick:function(){g?M():(e===b?(bd++,u(bd)):k(e),xd++,v(!0))}},"".concat(e,"-img-").concat(t))})),(0,nd.jsxs)("div",{className:"center ".concat(g?"":"hide"),style:{marginBottom:15},children:[(0,nd.jsx)("button",{className:"btn ",onClick:function(){return M()},children:1===_d.length?"Lj\xfaka leik":A}),(0,nd.jsx)("br",{}),(0,nd.jsx)("span",{style:{borderRadius:10,padding:5,backgroundColor:-1===_?"rgba(0,255,0, .3)":"rgba(255,0,0, .3)"},children:-1===_?"R\xe9tt!":"Rangt"})]})]})})},Sd="percentPlay",Md=function(){var t,n=i((0,e.useState)(!1),2),r=n[0],a=n[1],o=i((0,e.useState)(0),2),s=o[0],l=o[1],u=i((0,e.useState)(0),2),c=u[0],h=u[1],f=i((0,e.useState)(""),2),d=f[0],p=f[1],m=i((0,e.useState)({data:void 0,pb:ud("bird")}),2),g=m[0],v=m[1],y=i((0,e.useState)({data:void 0,pb:ud("plant")}),2),b=y[0],x=y[1],w=i((0,e.useState)({data:void 0,pb:ud("geo")}),2),_=w[0],k=w[1],S=i((0,e.useState)(null!==(t=window.localStorage.getItem(Sd))&&void 0!==t?t:100),2),M=S[0],T=S[1],E=function(e){td(e).then((function(t){var n=ud(e);"bird"===e?v({data:t,pb:n}):"plant"===e?x({data:t,pb:n}):"geo"===e&&k({data:t,pb:n})}))};(0,e.useEffect)((function(){E("bird"),E("plant"),E("geo")}),[]);return(0,nd.jsxs)("div",{className:"container",children:[(0,nd.jsxs)("h3",{className:"center",children:[""===d?"Fugla":pd(gd(d))," ","leikurinn"]}),r?(0,nd.jsx)(ad,{score:s,saveScore:function(e){if(e.length>16&&(e=e.slice(0,16)),0!==s){var t=function(e,t){var n=md(e);return t>ud(e)&&(window.localStorage.setItem(n,t),!0)}(d,s),n=ud(d);t&&(n=s),"bird"===d?v({data:void 0,pb:n}):"plant"===d?x({data:void 0,pb:n}):"geo"===d&&k({data:void 0,pb:n}),function(e,t,n,r){return new Promise((function(a,i){var o=ed(e);Yf(rf($f,o),{name:r,score:t,date:_i.now(),total:n}).then((function(){a()}))}))}(d,s,c,e).then((function(){E(d)})),p(""),a(!1),l(0)}}}):(0,nd.jsx)(nd.Fragment,{children:""!==d?(0,nd.jsxs)(nd.Fragment,{children:[(0,nd.jsx)(kd,{setScore:l,setTotal:h,gameOver:function(e,t){a(!0),l(e),h(t)},gameType:d,percentPlay:M}),(0,nd.jsx)("div",{className:"center",children:(0,nd.jsx)("button",{onClick:function(){a(!0)},className:"btn",children:"H\xe6tta leik"})})]}):null}),(0,nd.jsx)(id,{onSelect:function(e){l(0),a(!1),p(e)},perc:M,setPerc:function(e){T(e),window.localStorage.setItem(Sd,e)}}),(0,nd.jsx)(rd,{}),(0,nd.jsx)(vd,{gameType:"bird",data:g}),(0,nd.jsx)(vd,{gameType:"plant",data:b}),(0,nd.jsx)(vd,{gameType:"geo",data:_})]})},Td="139",Ed=0,Ad=1,Cd=2,Ld=0,Rd=1,Nd=2,Pd=3,Id=100,Dd=301,Ud=302,jd=303,Od=304,Fd=306,Bd=1e3,zd=1001,Hd=1002,Vd=1003,Gd=1004,Wd=1005,qd=1006,Kd=1007,Xd=1008,Yd=1009,Jd=1012,Qd=1014,Zd=1015,$d=1016,ep=1020,tp=1023,np=1026,rp=1027,ap=33776,ip=33777,op=33778,sp=33779,lp=35840,up=35841,cp=35842,hp=35843,fp=37492,dp=37496,pp=37808,mp=37809,gp=37810,vp=37811,yp=37812,bp=37813,xp=37814,wp=37815,_p=37816,kp=37817,Sp=37818,Mp=37819,Tp=37820,Ep=37821,Ap=36492,Cp=2300,Lp=2301,Rp=2302,Np=2400,Pp=2401,Ip=2402,Dp=2500,Up=2501,jp=3e3,Op=3001,Fp="srgb",Bp="srgb-linear",zp=7680,Hp=35044,Vp=35048,Gp="300 es",Wp=1035,qp=function(){function e(){k(this,e)}return M(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,a=n.length;r<a;r++)n[r].call(this,e);e.target=null}}}}]),e}(),Kp=[],Xp=0;Xp<256;Xp++)Kp[Xp]=(Xp<16?"0":"")+Xp.toString(16);var Yp=1234567,Jp=Math.PI/180,Qp=180/Math.PI;function Zp(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Kp[255&e]+Kp[e>>8&255]+Kp[e>>16&255]+Kp[e>>24&255]+"-"+Kp[255&t]+Kp[t>>8&255]+"-"+Kp[t>>16&15|64]+Kp[t>>24&255]+"-"+Kp[63&n|128]+Kp[n>>8&255]+"-"+Kp[n>>16&255]+Kp[n>>24&255]+Kp[255&r]+Kp[r>>8&255]+Kp[r>>16&255]+Kp[r>>24&255]).toLowerCase()}function $p(e,t,n){return Math.max(t,Math.min(n,e))}function em(e,t){return(e%t+t)%t}function tm(e,t,n){return(1-n)*e+n*t}function nm(e){return 0===(e&e-1)&&0!==e}function rm(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function am(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var im=Object.freeze({__proto__:null,DEG2RAD:Jp,RAD2DEG:Qp,generateUUID:Zp,clamp:$p,euclideanModulo:em,mapLinear:function(e,t,n,r,a){return r+(e-t)*(a-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:tm,damp:function(e,t,n,r){return tm(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(em(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Yp=e);var t=Yp+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Jp},radToDeg:function(e){return e*Qp},isPowerOfTwo:nm,ceilPowerOfTwo:rm,floorPowerOfTwo:am,setQuaternionFromProperEuler:function(e,t,n,r,a){var i=Math.cos,o=Math.sin,s=i(n/2),l=o(n/2),u=i((t+r)/2),c=o((t+r)/2),h=i((t-r)/2),f=o((t-r)/2),d=i((r-t)/2),p=o((r-t)/2);switch(a){case"XYX":e.set(s*c,l*h,l*f,s*u);break;case"YZY":e.set(l*f,s*c,l*h,s*u);break;case"ZXZ":e.set(l*h,l*f,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*d,s*u);break;case"YXY":e.set(l*d,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*d,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}},normalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}},denormalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}}),om=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;k(this,t),this.x=e,this.y=n}return M(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),a=this.x-e.x,i=this.y-e.y;return this.x=a*n-i*r+e.x,this.y=a*r+i*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:l.mark((function e(){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}();om.prototype.isVector2=!0;var sm=function(){function e(){k(this,e),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return M(e,[{key:"set",value:function(e,t,n,r,a,i,o,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=a,u[5]=s,u[6]=n,u[7]=i,u[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,a=this.elements,i=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],w=r[5],_=r[8];return a[0]=i*p+o*v+s*x,a[3]=i*m+o*y+s*w,a[6]=i*g+o*b+s*_,a[1]=l*p+u*v+c*x,a[4]=l*m+u*y+c*w,a[7]=l*g+u*b+c*_,a[2]=h*p+f*v+d*x,a[5]=h*m+f*y+d*w,a[8]=h*g+f*b+d*_,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*i*u-t*o*l-n*a*u+n*o*s+r*a*l-r*i*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*i-o*l,h=o*s-u*a,f=l*a-i*s,d=t*c+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return e[0]=c*p,e[1]=(r*l-u*n)*p,e[2]=(o*n-r*i)*p,e[3]=h*p,e[4]=(u*t-r*s)*p,e[5]=(r*a-o*t)*p,e[6]=f*p,e[7]=(n*s-l*t)*p,e[8]=(i*t-n*a)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,a,i,o){var s=Math.cos(a),l=Math.sin(a);return this.set(n*s,n*l,-n*(s*i+l*o)+i+e,-r*l,r*s,-r*(-l*i+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,a=r[0],i=r[3],o=r[6],s=r[1],l=r[4],u=r[7];return r[0]=t*a+n*s,r[3]=t*i+n*l,r[6]=t*o+n*u,r[1]=-n*a+t*s,r[4]=-n*i+t*l,r[7]=-n*o+t*u,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function lm(e){for(var t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}sm.prototype.isMatrix3=!0;Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function um(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function cm(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function hm(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var fm=(T(Qf={},Fp,T({},Bp,cm)),T(Qf,Bp,T({},Fp,hm)),Qf),dm={legacyMode:!0,get workingColorSpace(){return Bp},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(fm[t]&&void 0!==fm[t][n]){var r=fm[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},pm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},mm={r:0,g:0,b:0},gm={h:0,s:0,l:0},vm={h:0,s:0,l:0};function ym(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function bm(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var xm,wm=function(){function e(t,n,r){return k(this,e),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return M(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fp;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,dm.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Bp;return this.r=e,this.g=t,this.b=n,dm.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Bp;if(e=em(e,1),t=$p(t,0,1),n=$p(n,0,1),0===t)this.r=this.g=this.b=n;else{var a=n<=.5?n*(1+t):n+t-n*t,i=2*n-a;this.r=ym(i,a,e+1/3),this.g=ym(i,a,e),this.b=ym(i,a,e-1/3)}return dm.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fp;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var a,i=t[1],o=t[2];switch(i){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,dm.toWorkingColorSpace(this,n),r(a[4]),this;if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,dm.toWorkingColorSpace(this,n),r(a[4]),this;break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var s=parseFloat(a[1])/360,l=parseInt(a[2],10)/100,u=parseInt(a[3],10)/100;return r(a[4]),this.setHSL(s,l,u,n)}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=t[1],h=c.length;if(3===h)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,dm.toWorkingColorSpace(this,n),this;if(6===h)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,dm.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fp,n=pm[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=cm(e.r),this.g=cm(e.g),this.b=cm(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=hm(e.r),this.g=hm(e.g),this.b=hm(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fp;return dm.fromWorkingColorSpace(bm(this,mm),e),$p(255*mm.r,0,255)<<16^$p(255*mm.g,0,255)<<8^$p(255*mm.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fp;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bp;dm.fromWorkingColorSpace(bm(this,mm),t);var n,r,a=mm.r,i=mm.g,o=mm.b,s=Math.max(a,i,o),l=Math.min(a,i,o),u=(l+s)/2;if(l===s)n=0,r=0;else{var c=s-l;switch(r=u<=.5?c/(s+l):c/(2-s-l),s){case a:n=(i-o)/c+(i<o?6:0);break;case i:n=(o-a)/c+2;break;case o:n=(a-i)/c+4}n/=6}return e.h=n,e.s=r,e.l=u,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bp;return dm.fromWorkingColorSpace(bm(this,mm),t),e.r=mm.r,e.g=mm.g,e.b=mm.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fp;return dm.fromWorkingColorSpace(bm(this,mm),e),e!==Fp?"color(".concat(e," ").concat(mm.r," ").concat(mm.g," ").concat(mm.b,")"):"rgb(".concat(255*mm.r|0,",").concat(255*mm.g|0,",").concat(255*mm.b|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(gm),gm.h+=e,gm.s+=t,gm.l+=n,this.setHSL(gm.h,gm.s,gm.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(gm),e.getHSL(vm);var n=tm(gm.h,vm.h,t),r=tm(gm.s,vm.s,t),a=tm(gm.l,vm.l,t);return this.setHSL(n,r,a),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();wm.NAMES=pm,wm.prototype.isColor=!0,wm.prototype.r=1,wm.prototype.g=1,wm.prototype.b=1;var _m=function(){function e(){k(this,e)}return M(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===xm&&(xm=um("canvas")),xm.width=e.width,xm.height=e.height;var n=xm.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=xm}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=um("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),a=r.data,i=0;i<a.length;i++)a[i]=255*cm(a[i]/255);return n.putImageData(r,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*cm(o[s]/255)):o[s]=cm(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),km=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;k(this,e),this.uuid=Zp(),this.data=t,this.version=0}return M(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var a;if(Array.isArray(r)){a=[];for(var i=0,o=r.length;i<o;i++)r[i].isDataTexture?a.push(Sm(r[i].image)):a.push(Sm(r[i]))}else a=Sm(r);n.url=a}return t||(e.images[this.uuid]=n),n}}]),e}();function Sm(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?_m.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}km.prototype.isSource=!0;var Mm=0,Tm=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zd,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zd,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:qd,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Xd,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:tp,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Yd,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:jp;return k(this,n),e=t.call(this),Object.defineProperty(b(e),"id",{value:Mm++}),e.uuid=Zp(),e.name="",e.source=new km(r),e.mipmaps=[],e.mapping=a,e.wrapS=i,e.wrapT=o,e.magFilter=s,e.minFilter=l,e.anisotropy=h,e.format=u,e.internalFormat=null,e.type=c,e.offset=new om(0,0),e.repeat=new om(1,1),e.center=new om(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new sm,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=f,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return M(n,[{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Bd:e.x=e.x-Math.floor(e.x);break;case zd:e.x=e.x<0?0:1;break;case Hd:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Bd:e.y=e.y-Math.floor(e.y);break;case zd:e.y=e.y<0?0:1;break;case Hd:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(qp);Tm.DEFAULT_IMAGE=null,Tm.DEFAULT_MAPPING=300,Tm.prototype.isTexture=!0;var Em=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;k(this,t),this.x=e,this.y=n,this.z=r,this.w=a}return M(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,a=this.w,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12]*a,this.y=i[1]*t+i[5]*n+i[9]*r+i[13]*a,this.z=i[2]*t+i[6]*n+i[10]*r+i[14]*a,this.w=i[3]*t+i[7]*n+i[11]*r+i[15]*a,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,a,i=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],h=s[1],f=s[5],d=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(u-h)<i&&Math.abs(c-p)<i&&Math.abs(d-m)<i){if(Math.abs(u+h)<o&&Math.abs(c+p)<o&&Math.abs(d+m)<o&&Math.abs(l+f+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var v=(l+1)/2,y=(f+1)/2,b=(g+1)/2,x=(u+h)/4,w=(c+p)/4,_=(d+m)/4;return v>y&&v>b?v<i?(n=0,r=.707106781,a=.707106781):(r=x/(n=Math.sqrt(v)),a=w/n):y>b?y<i?(n=.707106781,r=0,a=.707106781):(n=x/(r=Math.sqrt(y)),a=_/r):b<i?(n=.707106781,r=.707106781,a=0):(n=w/(a=Math.sqrt(b)),r=_/a),this.set(n,r,a,t),this}var k=Math.sqrt((m-d)*(m-d)+(c-p)*(c-p)+(h-u)*(h-u));return Math.abs(k)<.001&&(k=1),this.x=(m-d)/k,this.y=(c-p)/k,this.z=(h-u)/k,this.w=Math.acos((l+f+g-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:l.mark((function e(){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}();Em.prototype.isVector4=!0;var Am=function(e){v(n,e);var t=w(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};k(this,n),(a=t.call(this)).width=e,a.height=r,a.depth=1,a.scissor=new Em(0,0,e,r),a.scissorTest=!1,a.viewport=new Em(0,0,e,r);var o={width:e,height:r,depth:1};return a.texture=new Tm(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),a.texture.isRenderTargetTexture=!0,a.texture.flipY=!1,a.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,a.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,a.texture.minFilter=void 0!==i.minFilter?i.minFilter:qd,a.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,a.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,a.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,a.samples=void 0!==i.samples?i.samples:0,a}return M(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(qp);Am.prototype.isWebGLRenderTarget=!0;var Cm=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return k(this,n),(e=t.call(this,null)).image={data:r,width:a,height:i,depth:o},e.magFilter=Vd,e.minFilter=Vd,e.wrapR=zd,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return M(n)}(Tm);Cm.prototype.isDataArrayTexture=!0;var Lm=function(e){v(n,e);var t=w(n);function n(e,r,a){var i;return k(this,n),(i=t.call(this,e,r)).depth=a,i.texture=new Cm(null,e,r,a),i.texture.isRenderTargetTexture=!0,i}return M(n)}(Am);Lm.prototype.isWebGLArrayRenderTarget=!0;var Rm=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return k(this,n),(e=t.call(this,null)).image={data:r,width:a,height:i,depth:o},e.magFilter=Vd,e.minFilter=Vd,e.wrapR=zd,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return M(n)}(Tm);Rm.prototype.isData3DTexture=!0;var Nm=function(e){v(n,e);var t=w(n);function n(e,r,a){var i;return k(this,n),(i=t.call(this,e,r)).depth=a,i.texture=new Rm(null,e,r,a),i.texture.isRenderTargetTexture=!0,i}return M(n)}(Am);Nm.prototype.isWebGL3DRenderTarget=!0;var Pm=function(e){v(n,e);var t=w(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};k(this,n);var s=(i=t.call(this,e,r,o)).texture;i.texture=[];for(var l=0;l<a;l++)i.texture[l]=s.clone(),i.texture[l].isRenderTargetTexture=!0;return i}return M(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,a=this.texture.length;r<a;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}]),n}(Am);Pm.prototype.isWebGLMultipleRenderTargets=!0;var Im=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;k(this,e),this._x=t,this._y=n,this._z=r,this._w=a}return M(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,a=e._z,i=e._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(r/2),c=o(a/2),h=s(n/2),f=s(r/2),d=s(a/2);switch(i){case"XYZ":this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d;break;case"YXZ":this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d;break;case"ZXY":this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d;break;case"ZYX":this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d;break;case"YZX":this._x=h*u*c+l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c-h*f*d;break;case"XZY":this._x=h*u*c-l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],a=t[8],i=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],h=n+o+c;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-s)*f,this._y=(a-l)*f,this._z=(i-r)*f}else if(n>o&&n>c){var d=2*Math.sqrt(1+n-o-c);this._w=(u-s)/d,this._x=.25*d,this._y=(r+i)/d,this._z=(a+l)/d}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(a-l)/p,this._x=(r+i)/p,this._y=.25*p,this._z=(s+u)/p}else{var m=2*Math.sqrt(1+c-n-o);this._w=(i-r)/m,this._x=(a+l)/m,this._y=(s+u)/m,this._z=.25*m}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs($p(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,a=e._z,i=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+i*o+r*l-a*s,this._y=r*u+i*s+a*o-n*l,this._z=a*u+i*l+n*s-r*o,this._w=i*u-n*o-r*s-a*l,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,a=this._z,i=this._w,o=i*e._w+n*e._x+r*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=i,this._x=n,this._y=r,this._z=a,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*i+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*a+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),h=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=i*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=a*h+this._z*f,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(a),n*Math.cos(a),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,a,i,o){var s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],h=a[i+0],f=a[i+1],d=a[i+2],p=a[i+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=f,e[t+2]=d,void(e[t+3]=p);if(c!==p||s!==h||l!==f||u!==d){var m=1-o,g=s*h+l*f+u*d+c*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,g*v);m=Math.sin(m*x)/b,o=Math.sin(o*x)/b}var w=o*v;if(s=s*m+h*w,l=l*m+f*w,u=u*m+d*w,c=c*m+p*w,m===1-o){var _=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=_,l*=_,u*=_,c*=_}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,a,i){var o=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=a[i],h=a[i+1],f=a[i+2],d=a[i+3];return e[t]=o*d+u*c+s*f-l*h,e[t+1]=s*d+u*h+l*c-o*f,e[t+2]=l*d+u*f+o*h-s*c,e[t+3]=u*d-o*c-s*h-l*f,e}}]),e}();Im.prototype.isQuaternion=!0;var Dm=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;k(this,t),this.x=e,this.y=n,this.z=r}return M(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(jm.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(jm.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*r,this.y=a[1]*t+a[4]*n+a[7]*r,this.z=a[2]*t+a[5]*n+a[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements,i=1/(a[3]*t+a[7]*n+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*r+a[12])*i,this.y=(a[1]*t+a[5]*n+a[9]*r+a[13])*i,this.z=(a[2]*t+a[6]*n+a[10]*r+a[14])*i,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.x,i=e.y,o=e.z,s=e.w,l=s*t+i*r-o*n,u=s*n+o*t-a*r,c=s*r+a*n-i*t,h=-a*t-i*n-o*r;return this.x=l*s+h*-a+u*-o-c*-i,this.y=u*s+h*-i+c*-a-l*-o,this.z=c*s+h*-o+l*-i-u*-a,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r,this.y=a[1]*t+a[5]*n+a[9]*r,this.z=a[2]*t+a[6]*n+a[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=t.x,o=t.y,s=t.z;return this.x=r*s-a*o,this.y=a*i-n*s,this.z=n*o-r*i,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Um.copy(this).projectOnVector(e),this.sub(Um)}},{key:"reflect",value:function(e){return this.sub(Um.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos($p(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:l.mark((function e(){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}();Dm.prototype.isVector3=!0;var Um=new Dm,jm=new Im,Om=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dm(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dm(-1/0,-1/0,-1/0);k(this,e),this.min=t,this.max=n}return M(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,a=-1/0,i=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),u>a&&(a=u),c>i&&(i=c),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(a,i,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,a=-1/0,i=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),u>a&&(a=u),c>i&&(i=c),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(a,i,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Bm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position)for(var r=n.attributes.position,a=0,i=r.count;a<i;a++)Bm.fromBufferAttribute(r,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Bm);else null===n.boundingBox&&n.computeBoundingBox(),zm.copy(n.boundingBox),zm.applyMatrix4(e.matrixWorld),this.union(zm);for(var o=e.children,s=0,l=o.length;s<l;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Bm),Bm.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Xm),Ym.subVectors(this.max,Xm),Hm.subVectors(e.a,Xm),Vm.subVectors(e.b,Xm),Gm.subVectors(e.c,Xm),Wm.subVectors(Vm,Hm),qm.subVectors(Gm,Vm),Km.subVectors(Hm,Gm);var t=[0,-Wm.z,Wm.y,0,-qm.z,qm.y,0,-Km.z,Km.y,Wm.z,0,-Wm.x,qm.z,0,-qm.x,Km.z,0,-Km.x,-Wm.y,Wm.x,0,-qm.y,qm.x,0,-Km.y,Km.x,0];return!!Zm(t,Hm,Vm,Gm,Ym)&&(!!Zm(t=[1,0,0,0,1,0,0,0,1],Hm,Vm,Gm,Ym)&&(Jm.crossVectors(Wm,qm),Zm(t=[Jm.x,Jm.y,Jm.z],Hm,Vm,Gm,Ym)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Bm.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Bm).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Fm[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fm[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fm[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fm[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fm[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fm[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fm[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fm[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fm)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();Om.prototype.isBox3=!0;var Fm=[new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm],Bm=new Dm,zm=new Om,Hm=new Dm,Vm=new Dm,Gm=new Dm,Wm=new Dm,qm=new Dm,Km=new Dm,Xm=new Dm,Ym=new Dm,Jm=new Dm,Qm=new Dm;function Zm(e,t,n,r,a){for(var i=0,o=e.length-3;i<=o;i+=3){Qm.fromArray(e,i);var s=a.x*Math.abs(Qm.x)+a.y*Math.abs(Qm.y)+a.z*Math.abs(Qm.z),l=t.dot(Qm),u=n.dot(Qm),c=r.dot(Qm);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}var $m=new Om,eg=new Dm,tg=new Dm,ng=new Dm,rg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dm,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;k(this,e),this.center=t,this.radius=n}return M(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):$m.setFromPoints(e).getCenter(n);for(var r=0,a=0,i=e.length;a<i;a++)r=Math.max(r,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){ng.subVectors(e,this.center);var t=ng.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(ng.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return!0===this.center.equals(e.center)?tg.set(0,0,1).multiplyScalar(e.radius):tg.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(eg.copy(e.center).add(tg)),this.expandByPoint(eg.copy(e.center).sub(tg)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),ag=new Dm,ig=new Dm,og=new Dm,sg=new Dm,lg=new Dm,ug=new Dm,cg=new Dm,hg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dm,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dm(0,0,-1);k(this,e),this.origin=t,this.direction=n}return M(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,ag)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=ag.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ag.copy(this.direction).multiplyScalar(t).add(this.origin),ag.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){ig.copy(e).add(t).multiplyScalar(.5),og.copy(t).sub(e).normalize(),sg.copy(this.origin).sub(ig);var a,i,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot(og),c=sg.dot(this.direction),h=-sg.dot(og),f=sg.lengthSq(),d=Math.abs(1-u*u);if(d>0)if(i=u*c-h,s=l*d,(a=u*h-c)>=0)if(i>=-s)if(i<=s){var p=1/d;o=(a*=p)*(a+u*(i*=p)+2*c)+i*(u*a+i+2*h)+f}else i=l,o=-(a=Math.max(0,-(u*i+c)))*a+i*(i+2*h)+f;else i=-l,o=-(a=Math.max(0,-(u*i+c)))*a+i*(i+2*h)+f;else i<=-s?o=-(a=Math.max(0,-(-u*l+c)))*a+(i=a>0?-l:Math.min(Math.max(-l,-h),l))*(i+2*h)+f:i<=s?(a=0,o=(i=Math.min(Math.max(-l,-h),l))*(i+2*h)+f):o=-(a=Math.max(0,-(u*l+c)))*a+(i=a>0?l:Math.min(Math.max(-l,-h),l))*(i+2*h)+f;else i=u>0?-l:l,o=-(a=Math.max(0,-(u*i+c)))*a+i*(i+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(a).add(this.origin),r&&r.copy(og).multiplyScalar(i).add(ig),o}},{key:"intersectSphere",value:function(e,t){ag.subVectors(e.center,this.origin);var n=ag.dot(this.direction),r=ag.dot(ag)-n*n,a=e.radius*e.radius;if(r>a)return null;var i=Math.sqrt(a-r),o=n-i,s=n+i;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,a,i,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(a=(e.min.y-h.y)*u,i=(e.max.y-h.y)*u):(a=(e.max.y-h.y)*u,i=(e.min.y-h.y)*u),n>i||a>r?null:((a>n||n!==n)&&(n=a),(i<r||r!==r)&&(r=i),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,ag)}},{key:"intersectTriangle",value:function(e,t,n,r,a){lg.subVectors(t,e),ug.subVectors(n,e),cg.crossVectors(lg,ug);var i,o=this.direction.dot(cg);if(o>0){if(r)return null;i=1}else{if(!(o<0))return null;i=-1,o=-o}sg.subVectors(this.origin,e);var s=i*this.direction.dot(ug.crossVectors(sg,ug));if(s<0)return null;var l=i*this.direction.dot(lg.cross(sg));if(l<0)return null;if(s+l>o)return null;var u=-i*sg.dot(cg);return u<0?null:this.at(u/o,a)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),fg=function(){function e(){k(this,e),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return M(e,[{key:"set",value:function(e,t,n,r,a,i,o,s,l,u,c,h,f,d,p,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=a,g[5]=i,g[9]=o,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/dg.setFromMatrixColumn(e,0).length(),a=1/dg.setFromMatrixColumn(e,1).length(),i=1/dg.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,a=e.z,i=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(a),c=Math.sin(a);if("XYZ"===e.order){var h=i*u,f=i*c,d=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=f+d*l,t[5]=h-p*l,t[9]=-o*s,t[2]=p-h*l,t[6]=d+f*l,t[10]=i*s}else if("YXZ"===e.order){var m=s*u,g=s*c,v=l*u,y=l*c;t[0]=m+y*o,t[4]=v*o-g,t[8]=i*l,t[1]=i*c,t[5]=i*u,t[9]=-o,t[2]=g*o-v,t[6]=y+m*o,t[10]=i*s}else if("ZXY"===e.order){var b=s*u,x=s*c,w=l*u,_=l*c;t[0]=b-_*o,t[4]=-i*c,t[8]=w+x*o,t[1]=x+w*o,t[5]=i*u,t[9]=_-b*o,t[2]=-i*l,t[6]=o,t[10]=i*s}else if("ZYX"===e.order){var k=i*u,S=i*c,M=o*u,T=o*c;t[0]=s*u,t[4]=M*l-S,t[8]=k*l+T,t[1]=s*c,t[5]=T*l+k,t[9]=S*l-M,t[2]=-l,t[6]=o*s,t[10]=i*s}else if("YZX"===e.order){var E=i*s,A=i*l,C=o*s,L=o*l;t[0]=s*u,t[4]=L-E*c,t[8]=C*c+A,t[1]=c,t[5]=i*u,t[9]=-o*u,t[2]=-l*u,t[6]=A*c+C,t[10]=E-L*c}else if("XZY"===e.order){var R=i*s,N=i*l,P=o*s,I=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=R*c+I,t[5]=i*u,t[9]=N*c-P,t[2]=P*c-N,t[6]=o*u,t[10]=I*c+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(mg,e,gg)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return bg.subVectors(e,t),0===bg.lengthSq()&&(bg.z=1),bg.normalize(),vg.crossVectors(n,bg),0===vg.lengthSq()&&(1===Math.abs(n.z)?bg.x+=1e-4:bg.z+=1e-4,bg.normalize(),vg.crossVectors(n,bg)),vg.normalize(),yg.crossVectors(bg,vg),r[0]=vg.x,r[4]=yg.x,r[8]=bg.x,r[1]=vg.y,r[5]=yg.y,r[9]=bg.y,r[2]=vg.z,r[6]=yg.z,r[10]=bg.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,a=this.elements,i=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],k=r[8],S=r[12],M=r[1],T=r[5],E=r[9],A=r[13],C=r[2],L=r[6],R=r[10],N=r[14],P=r[3],I=r[7],D=r[11],U=r[15];return a[0]=i*w+o*M+s*C+l*P,a[4]=i*_+o*T+s*L+l*I,a[8]=i*k+o*E+s*R+l*D,a[12]=i*S+o*A+s*N+l*U,a[1]=u*w+c*M+h*C+f*P,a[5]=u*_+c*T+h*L+f*I,a[9]=u*k+c*E+h*R+f*D,a[13]=u*S+c*A+h*N+f*U,a[2]=d*w+p*M+m*C+g*P,a[6]=d*_+p*T+m*L+g*I,a[10]=d*k+p*E+m*R+g*D,a[14]=d*S+p*A+m*N+g*U,a[3]=v*w+y*M+b*C+x*P,a[7]=v*_+y*T+b*L+x*I,a[11]=v*k+y*E+b*R+x*D,a[15]=v*S+y*A+b*N+x*U,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],a=e[12],i=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+a*s*c-r*l*c-a*o*h+n*l*h+r*o*f-n*s*f)+e[7]*(+t*s*f-t*l*h+a*i*h-r*i*f+r*l*u-a*s*u)+e[11]*(+t*l*c-t*o*f-a*i*c+n*i*f+a*o*u-n*l*u)+e[15]*(-r*o*u-t*s*c+t*o*h+r*i*c-n*i*h+n*s*u)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],f=e[11],d=e[12],p=e[13],m=e[14],g=e[15],v=c*m*l-p*h*l+p*s*f-o*m*f-c*s*g+o*h*g,y=d*h*l-u*m*l-d*s*f+i*m*f+u*s*g-i*h*g,b=u*p*l-d*c*l+d*o*f-i*p*f-u*o*g+i*c*g,x=d*c*s-u*p*s-d*o*h+i*p*h+u*o*m-i*c*m,w=t*v+n*y+r*b+a*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var _=1/w;return e[0]=v*_,e[1]=(p*h*a-c*m*a-p*r*f+n*m*f+c*r*g-n*h*g)*_,e[2]=(o*m*a-p*s*a+p*r*l-n*m*l-o*r*g+n*s*g)*_,e[3]=(c*s*a-o*h*a-c*r*l+n*h*l+o*r*f-n*s*f)*_,e[4]=y*_,e[5]=(u*m*a-d*h*a+d*r*f-t*m*f-u*r*g+t*h*g)*_,e[6]=(d*s*a-i*m*a-d*r*l+t*m*l+i*r*g-t*s*g)*_,e[7]=(i*h*a-u*s*a+u*r*l-t*h*l-i*r*f+t*s*f)*_,e[8]=b*_,e[9]=(d*c*a-u*p*a-d*n*f+t*p*f+u*n*g-t*c*g)*_,e[10]=(i*p*a-d*o*a+d*n*l-t*p*l-i*n*g+t*o*g)*_,e[11]=(u*o*a-i*c*a-u*n*l+t*c*l+i*n*f-t*o*f)*_,e[12]=x*_,e[13]=(u*p*r-d*c*r+d*n*h-t*p*h-u*n*m+t*c*m)*_,e[14]=(d*o*r-i*p*r-d*n*s+t*p*s+i*n*m-t*o*m)*_,e[15]=(i*c*r-u*o*r+u*n*s-t*c*s-i*n*h+t*o*h)*_,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,a=e.z;return t[0]*=n,t[4]*=r,t[8]*=a,t[1]*=n,t[5]*=r,t[9]*=a,t[2]*=n,t[6]*=r,t[10]*=a,t[3]*=n,t[7]*=r,t[11]*=a,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),a=1-n,i=e.x,o=e.y,s=e.z,l=a*i,u=a*o;return this.set(l*i+n,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+n,u*s-r*i,0,l*s-r*o,u*s+r*i,a*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,a,i){return this.set(1,n,a,0,e,1,i,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,a=t._x,i=t._y,o=t._z,s=t._w,l=a+a,u=i+i,c=o+o,h=a*l,f=a*u,d=a*c,p=i*u,m=i*c,g=o*c,v=s*l,y=s*u,b=s*c,x=n.x,w=n.y,_=n.z;return r[0]=(1-(p+g))*x,r[1]=(f+b)*x,r[2]=(d-y)*x,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(h+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(d+y)*_,r[9]=(m-v)*_,r[10]=(1-(h+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,a=dg.set(r[0],r[1],r[2]).length(),i=dg.set(r[4],r[5],r[6]).length(),o=dg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],pg.copy(this);var s=1/a,l=1/i,u=1/o;return pg.elements[0]*=s,pg.elements[1]*=s,pg.elements[2]*=s,pg.elements[4]*=l,pg.elements[5]*=l,pg.elements[6]*=l,pg.elements[8]*=u,pg.elements[9]*=u,pg.elements[10]*=u,t.setFromRotationMatrix(pg),n.x=a,n.y=i,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,a,i){void 0===i&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*a/(t-e),l=2*a/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),h=-(i+a)/(i-a),f=-2*i*a/(i-a);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,a,i){var o=this.elements,s=1/(t-e),l=1/(n-r),u=1/(i-a),c=(t+e)*s,h=(n+r)*l,f=(i+a)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();fg.prototype.isMatrix4=!0;var dg=new Dm,pg=new fg,mg=new Dm(0,0,0),gg=new Dm(1,1,1),vg=new Dm,yg=new Dm,bg=new Dm,xg=new fg,wg=new Im,_g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;k(this,e),this._x=t,this._y=n,this._z=r,this._order=a}return M(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,a=r[0],i=r[4],o=r[8],s=r[1],l=r[5],u=r[9],c=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin($p(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-i,a)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-$p(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,a),this._z=0);break;case"ZXY":this._x=Math.asin($p(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-i,l)):(this._y=0,this._z=Math.atan2(s,a));break;case"ZYX":this._y=Math.asin(-$p(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,a)):(this._x=0,this._z=Math.atan2(-i,l));break;case"YZX":this._z=Math.asin($p(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,a)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-$p(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return xg.makeRotationFromQuaternion(e),this.setFromRotationMatrix(xg,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return wg.setFromEuler(this),this.setFromQuaternion(wg,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}]),e}();_g.prototype.isEuler=!0,_g.DefaultOrder="XYZ",_g.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var kg=function(){function e(){k(this,e),this.mask=1}return M(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),Sg=0,Mg=new Dm,Tg=new Im,Eg=new fg,Ag=new Dm,Cg=new Dm,Lg=new Dm,Rg=new Im,Ng=new Dm(1,0,0),Pg=new Dm(0,1,0),Ig=new Dm(0,0,1),Dg={type:"added"},Ug={type:"removed"},jg=function(e){v(n,e);var t=w(n);function n(){var e;k(this,n),e=t.call(this),Object.defineProperty(b(e),"id",{value:Sg++}),e.uuid=Zp(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new Dm,a=new _g,i=new Im,o=new Dm(1,1,1);return a._onChange((function(){i.setFromEuler(a,!1)})),i._onChange((function(){a.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(b(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new fg},normalMatrix:{value:new sm}}),e.matrix=new fg,e.matrixWorld=new fg,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new kg,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return M(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return Tg.setFromAxisAngle(e,t),this.quaternion.multiply(Tg),this}},{key:"rotateOnWorldAxis",value:function(e,t){return Tg.setFromAxisAngle(e,t),this.quaternion.premultiply(Tg),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Ng,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Pg,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Ig,e)}},{key:"translateOnAxis",value:function(e,t){return Mg.copy(e).applyQuaternion(this.quaternion),this.position.add(Mg.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Ng,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Pg,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Ig,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(Eg.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?Ag.copy(e):Ag.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Cg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Eg.lookAt(Cg,Ag,this.up):Eg.lookAt(Ag,Cg,this.up),this.quaternion.setFromRotationMatrix(Eg),r&&(Eg.extractRotation(r.matrixWorld),Tg.setFromRotationMatrix(Eg),this.quaternion.premultiply(Tg.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Dg)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Ug)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Ug)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Eg.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Eg.multiply(e.parent.matrixWorld)),e.applyMatrix4(Eg),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var a=this.children[n].getObjectByProperty(e,t);if(void 0!==a)return a}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cg,e,Lg),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cg,Rg,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,a=0,i=r.length;a<i;a++)r[a].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function a(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);var i=this.geometry.parameters;if(void 0!==i&&void 0!==i.shapes){var o=i.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];a(e.shapes,u)}else a(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,f=this.material.length;h<f;h++)c.push(a(e.materials,this.material[h]));r.material=c}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(var d=0;d<this.children.length;d++)r.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var m=this.animations[p];r.animations.push(a(e.animations,m))}}if(t){var g=S(e.geometries),v=S(e.materials),y=S(e.textures),b=S(e.images),x=S(e.shapes),w=S(e.skeletons),_=S(e.animations),k=S(e.nodes);g.length>0&&(n.geometries=g),v.length>0&&(n.materials=v),y.length>0&&(n.textures=y),b.length>0&&(n.images=b),x.length>0&&(n.shapes=x),w.length>0&&(n.skeletons=w),_.length>0&&(n.animations=_),k.length>0&&(n.nodes=k)}return n.object=r,n;function S(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(qp);jg.DefaultUp=new Dm(0,1,0),jg.DefaultMatrixAutoUpdate=!0,jg.prototype.isObject3D=!0;var Og=new Dm,Fg=new Dm,Bg=new Dm,zg=new Dm,Hg=new Dm,Vg=new Dm,Gg=new Dm,Wg=new Dm,qg=new Dm,Kg=new Dm,Xg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dm,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dm,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Dm;k(this,e),this.a=t,this.b=n,this.c=r}return M(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Og.subVectors(this.c,this.b),Fg.subVectors(this.a,this.b),.5*Og.cross(Fg).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,a,i){return e.getUV(t,this.a,this.b,this.c,n,r,a,i)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,a=this.a,i=this.b,o=this.c;Hg.subVectors(i,a),Vg.subVectors(o,a),Wg.subVectors(e,a);var s=Hg.dot(Wg),l=Vg.dot(Wg);if(s<=0&&l<=0)return t.copy(a);qg.subVectors(e,i);var u=Hg.dot(qg),c=Vg.dot(qg);if(u>=0&&c<=u)return t.copy(i);var h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(a).addScaledVector(Hg,n);Kg.subVectors(e,o);var f=Hg.dot(Kg),d=Vg.dot(Kg);if(d>=0&&f<=d)return t.copy(o);var p=f*l-s*d;if(p<=0&&l>=0&&d<=0)return r=l/(l-d),t.copy(a).addScaledVector(Vg,r);var m=u*d-f*c;if(m<=0&&c-u>=0&&f-d>=0)return Gg.subVectors(o,i),r=(c-u)/(c-u+(f-d)),t.copy(i).addScaledVector(Gg,r);var g=1/(m+p+h);return n=p*g,r=h*g,t.copy(a).addScaledVector(Hg,n).addScaledVector(Vg,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),Og.subVectors(e,t),r.cross(Og);var a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,a){Og.subVectors(r,t),Fg.subVectors(n,t),Bg.subVectors(e,t);var i=Og.dot(Og),o=Og.dot(Fg),s=Og.dot(Bg),l=Fg.dot(Fg),u=Fg.dot(Bg),c=i*l-o*o;if(0===c)return a.set(-2,-1,-1);var h=1/c,f=(l*s-o*u)*h,d=(i*u-o*s)*h;return a.set(1-f-d,d,f)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,zg),zg.x>=0&&zg.y>=0&&zg.x+zg.y<=1}},{key:"getUV",value:function(e,t,n,r,a,i,o,s){return this.getBarycoord(e,t,n,r,zg),s.set(0,0),s.addScaledVector(a,zg.x),s.addScaledVector(i,zg.y),s.addScaledVector(o,zg.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return Og.subVectors(n,t),Fg.subVectors(e,t),Og.cross(Fg).dot(r)<0}}]),e}(),Yg=0,Jg=function(e){v(n,e);var t=w(n);function n(){var e;return k(this,n),e=t.call(this),Object.defineProperty(b(e),"id",{value:Yg++}),e.uuid=Zp(),e.name="",e.type="Material",e.fog=!0,e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=Id,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=zp,e.stencilZFail=zp,e.stencilZPass=zp,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return M(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var a=r(e.textures),i=r(e.images);a.length>0&&(n.textures=a),i.length>0&&(n.images=i)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var a=0;a!==r;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(qp);Jg.prototype.isMaterial=!0,Jg.fromType=function(){return null};var Qg=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="MeshBasicMaterial",r.color=new wm(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Jg);Qg.prototype.isMeshBasicMaterial=!0;var Zg=new Dm,$g=new om,ev=function(){function e(t,n,r){if(k(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=Hp,this.updateRange={offset:0,count:-1},this.version=0}return M(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new wm),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new om),t[n++]=i.x,t[n++]=i.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new Dm),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Em),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)$g.fromBufferAttribute(this,t),$g.applyMatrix3(e),this.setXY(t,$g.x,$g.y);else if(3===this.itemSize)for(var r=0,a=this.count;r<a;r++)Zg.fromBufferAttribute(this,r),Zg.applyMatrix3(e),this.setXYZ(r,Zg.x,Zg.y,Zg.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)Zg.fromBufferAttribute(this,t),Zg.applyMatrix4(e),this.setXYZ(t,Zg.x,Zg.y,Zg.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Zg.fromBufferAttribute(this,t),Zg.applyNormalMatrix(e),this.setXYZ(t,Zg.x,Zg.y,Zg.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Zg.fromBufferAttribute(this,t),Zg.transformDirection(e),this.setXYZ(t,Zg.x,Zg.y,Zg.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=a,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Hp&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();ev.prototype.isBufferAttribute=!0;var tv=function(e){v(n,e);var t=w(n);function n(e,r,a){return k(this,n),t.call(this,new Uint16Array(e),r,a)}return M(n)}(ev),nv=function(e){v(n,e);var t=w(n);function n(e,r,a){return k(this,n),t.call(this,new Uint32Array(e),r,a)}return M(n)}(ev);(function(e){v(n,e);var t=w(n);function n(e,r,a){return k(this,n),t.call(this,new Uint16Array(e),r,a)}return M(n)})(ev).prototype.isFloat16BufferAttribute=!0;var rv=function(e){v(n,e);var t=w(n);function n(e,r,a){return k(this,n),t.call(this,new Float32Array(e),r,a)}return M(n)}(ev),av=0,iv=new fg,ov=new jg,sv=new Dm,lv=new Om,uv=new Om,cv=new Dm,hv=function(e){v(n,e);var t=w(n);function n(){var e;return k(this,n),e=t.call(this),Object.defineProperty(b(e),"id",{value:av++}),e.uuid=Zp(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return M(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(lm(e)?nv:tv)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new sm).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(e),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return iv.makeRotationFromQuaternion(e),this.applyMatrix4(iv),this}},{key:"rotateX",value:function(e){return iv.makeRotationX(e),this.applyMatrix4(iv),this}},{key:"rotateY",value:function(e){return iv.makeRotationY(e),this.applyMatrix4(iv),this}},{key:"rotateZ",value:function(e){return iv.makeRotationZ(e),this.applyMatrix4(iv),this}},{key:"translate",value:function(e,t,n){return iv.makeTranslation(e,t,n),this.applyMatrix4(iv),this}},{key:"scale",value:function(e,t,n){return iv.makeScale(e,t,n),this.applyMatrix4(iv),this}},{key:"lookAt",value:function(e){return ov.lookAt(e),ov.updateMatrix(),this.applyMatrix4(ov.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(sv).negate(),this.translate(sv.x,sv.y,sv.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new rv(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Om);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Dm(-1/0,-1/0,-1/0),new Dm(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var a=t[n];lv.setFromBufferAttribute(a),this.morphTargetsRelative?(cv.addVectors(this.boundingBox.min,lv.min),this.boundingBox.expandByPoint(cv),cv.addVectors(this.boundingBox.max,lv.max),this.boundingBox.expandByPoint(cv)):(this.boundingBox.expandByPoint(lv.min),this.boundingBox.expandByPoint(lv.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new rg);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Dm,1/0);if(e){var n=this.boundingSphere.center;if(lv.setFromBufferAttribute(e),t)for(var r=0,a=t.length;r<a;r++){var i=t[r];uv.setFromBufferAttribute(i),this.morphTargetsRelative?(cv.addVectors(lv.min,uv.min),lv.expandByPoint(cv),cv.addVectors(lv.max,uv.max),lv.expandByPoint(cv)):(lv.expandByPoint(uv.min),lv.expandByPoint(uv.max))}lv.getCenter(n);for(var o=0,s=0,l=e.count;s<l;s++)cv.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(cv));if(t)for(var u=0,c=t.length;u<c;u++)for(var h=t[u],f=this.morphTargetsRelative,d=0,p=h.count;d<p;d++)cv.fromBufferAttribute(h,d),f&&(sv.fromBufferAttribute(e,d),cv.add(sv)),o=Math.max(o,n.distanceToSquared(cv));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,a=t.normal.array,i=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ev(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,l=[],u=[],c=0;c<o;c++)l[c]=new Dm,u[c]=new Dm;var h=new Dm,f=new Dm,d=new Dm,p=new om,m=new om,g=new om,v=new Dm,y=new Dm,b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(var x=0,w=b.length;x<w;++x)for(var _=b[x],k=_.start,S=k,M=k+_.count;S<M;S+=3)U(n[S+0],n[S+1],n[S+2]);for(var T=new Dm,E=new Dm,A=new Dm,C=new Dm,L=0,R=b.length;L<R;++L)for(var N=b[L],P=N.start,I=P,D=P+N.count;I<D;I+=3)j(n[I+0]),j(n[I+1]),j(n[I+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function U(e,t,n){h.fromArray(r,3*e),f.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(i,2*e),m.fromArray(i,2*t),g.fromArray(i,2*n),f.sub(h),d.sub(h),m.sub(p),g.sub(p);var a=1/(m.x*g.y-g.x*m.y);isFinite(a)&&(v.copy(f).multiplyScalar(g.y).addScaledVector(d,-m.y).multiplyScalar(a),y.copy(d).multiplyScalar(m.x).addScaledVector(f,-g.x).multiplyScalar(a),l[e].add(v),l[t].add(v),l[n].add(v),u[e].add(y),u[t].add(y),u[n].add(y))}function j(e){A.fromArray(a,3*e),C.copy(A);var t=l[e];T.copy(t),T.sub(A.multiplyScalar(A.dot(t))).normalize(),E.crossVectors(C,t);var n=E.dot(u[e])<0?-1:1;s[4*e]=T.x,s[4*e+1]=T.y,s[4*e+2]=T.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new ev(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,a=n.count;r<a;r++)n.setXYZ(r,0,0,0);var i=new Dm,o=new Dm,s=new Dm,l=new Dm,u=new Dm,c=new Dm,h=new Dm,f=new Dm;if(e)for(var d=0,p=e.count;d<p;d+=3){var m=e.getX(d+0),g=e.getX(d+1),v=e.getX(d+2);i.fromBufferAttribute(t,m),o.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),h.subVectors(s,o),f.subVectors(i,o),h.cross(f),l.fromBufferAttribute(n,m),u.fromBufferAttribute(n,g),c.fromBufferAttribute(n,v),l.add(h),u.add(h),c.add(h),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,u.x,u.y,u.z),n.setXYZ(v,c.x,c.y,c.z)}else for(var y=0,b=t.count;y<b;y+=3)i.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),f.subVectors(i,o),h.cross(f),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var a=n[r].array,i=e.attributes[r],o=i.array,s=i.itemSize*t,l=Math.min(o.length,a.length-s),u=0,c=s;u<l;u++,c++)a[c]=o[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)cv.fromBufferAttribute(e,t),cv.normalize(),e.setXYZ(t,cv.x,cv.y,cv.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,a=e.normalized,i=new n.constructor(t.length*r),o=0,s=0,l=0,u=t.length;l<u;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(var c=0;c<r;c++)i[s++]=n[o++]}return new ev(i,r,a)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,a=this.attributes;for(var i in a){var o=e(a[i],r);t.setAttribute(i,o)}var s=this.morphAttributes;for(var l in s){for(var u=[],c=s[l],h=0,f=c.length;h<f;h++){var d=e(c[h],r);u.push(d)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,m=0,g=p.length;m<g;m++){var v=p[m];t.addGroup(v.start,v.count,v.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var a=this.attributes;for(var i in a){var o=a[i];e.data.attributes[i]=o.toJSON(e.data)}var s={},l=!1;for(var u in this.morphAttributes){for(var c=this.morphAttributes[u],h=[],f=0,d=c.length;f<d;f++){var p=c[f];h.push(p.toJSON(e.data))}h.length>0&&(s[u]=h,l=!0)}l&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var m=this.groups;m.length>0&&(e.data.groups=JSON.parse(JSON.stringify(m)));var g=this.boundingSphere;return null!==g&&(e.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var a in r){var i=r[a];this.setAttribute(a,i.clone(t))}var o=e.morphAttributes;for(var s in o){for(var l=[],u=o[s],c=0,h=u.length;c<h;c++)l.push(u[c].clone(t));this.morphAttributes[s]=l}this.morphTargetsRelative=e.morphTargetsRelative;for(var f=e.groups,d=0,p=f.length;d<p;d++){var m=f[d];this.addGroup(m.start,m.count,m.materialIndex)}var g=e.boundingBox;null!==g&&(this.boundingBox=g.clone());var v=e.boundingSphere;return null!==v&&(this.boundingSphere=v.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(qp);hv.prototype.isBufferGeometry=!0;var fv=new fg,dv=new hg,pv=new rg,mv=new Dm,gv=new Dm,vv=new Dm,yv=new Dm,bv=new Dm,xv=new Dm,wv=new Dm,_v=new Dm,kv=new Dm,Sv=new om,Mv=new om,Tv=new om,Ev=new Dm,Av=new Dm,Cv=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hv,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Qg;return k(this,n),(e=t.call(this)).type="Mesh",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,i=r.length;a<i;a++){var o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(e,t){var n,r=this.geometry,a=this.material,i=this.matrixWorld;if(void 0!==a&&(null===r.boundingSphere&&r.computeBoundingSphere(),pv.copy(r.boundingSphere),pv.applyMatrix4(i),!1!==e.ray.intersectsSphere(pv)&&(fv.copy(i).invert(),dv.copy(e.ray).applyMatrix4(fv),null===r.boundingBox||!1!==dv.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o=r.index,s=r.attributes.position,l=r.morphAttributes.position,u=r.morphTargetsRelative,c=r.attributes.uv,h=r.attributes.uv2,f=r.groups,d=r.drawRange;if(null!==o)if(Array.isArray(a))for(var p=0,m=f.length;p<m;p++)for(var g=f[p],v=a[g.materialIndex],y=Math.max(g.start,d.start),b=Math.min(o.count,Math.min(g.start+g.count,d.start+d.count));y<b;y+=3){var x=o.getX(y),w=o.getX(y+1),_=o.getX(y+2);(n=Lv(this,v,e,dv,s,l,u,c,h,x,w,_))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=g.materialIndex,t.push(n))}else for(var k=Math.max(0,d.start),S=Math.min(o.count,d.start+d.count);k<S;k+=3){var M=o.getX(k),T=o.getX(k+1),E=o.getX(k+2);(n=Lv(this,a,e,dv,s,l,u,c,h,M,T,E))&&(n.faceIndex=Math.floor(k/3),t.push(n))}else if(void 0!==s)if(Array.isArray(a))for(var A=0,C=f.length;A<C;A++)for(var L=f[A],R=a[L.materialIndex],N=Math.max(L.start,d.start),P=Math.min(s.count,Math.min(L.start+L.count,d.start+d.count));N<P;N+=3){(n=Lv(this,R,e,dv,s,l,u,c,h,N,N+1,N+2))&&(n.faceIndex=Math.floor(N/3),n.face.materialIndex=L.materialIndex,t.push(n))}else for(var I=Math.max(0,d.start),D=Math.min(s.count,d.start+d.count);I<D;I+=3){(n=Lv(this,a,e,dv,s,l,u,c,h,I,I+1,I+2))&&(n.faceIndex=Math.floor(I/3),t.push(n))}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(jg);function Lv(e,t,n,r,a,i,o,s,l,u,c,h){mv.fromBufferAttribute(a,u),gv.fromBufferAttribute(a,c),vv.fromBufferAttribute(a,h);var f=e.morphTargetInfluences;if(i&&f){wv.set(0,0,0),_v.set(0,0,0),kv.set(0,0,0);for(var d=0,p=i.length;d<p;d++){var m=f[d],g=i[d];0!==m&&(yv.fromBufferAttribute(g,u),bv.fromBufferAttribute(g,c),xv.fromBufferAttribute(g,h),o?(wv.addScaledVector(yv,m),_v.addScaledVector(bv,m),kv.addScaledVector(xv,m)):(wv.addScaledVector(yv.sub(mv),m),_v.addScaledVector(bv.sub(gv),m),kv.addScaledVector(xv.sub(vv),m)))}mv.add(wv),gv.add(_v),vv.add(kv)}e.isSkinnedMesh&&(e.boneTransform(u,mv),e.boneTransform(c,gv),e.boneTransform(h,vv));var v=function(e,t,n,r,a,i,o,s){if(null===(1===t.side?r.intersectTriangle(o,i,a,!0,s):r.intersectTriangle(a,i,o,2!==t.side,s)))return null;Av.copy(s),Av.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(Av);return l<n.near||l>n.far?null:{distance:l,point:Av.clone(),object:e}}(e,t,n,r,mv,gv,vv,Ev);if(v){s&&(Sv.fromBufferAttribute(s,u),Mv.fromBufferAttribute(s,c),Tv.fromBufferAttribute(s,h),v.uv=Xg.getUV(Ev,mv,gv,vv,Sv,Mv,Tv,new om)),l&&(Sv.fromBufferAttribute(l,u),Mv.fromBufferAttribute(l,c),Tv.fromBufferAttribute(l,h),v.uv2=Xg.getUV(Ev,mv,gv,vv,Sv,Mv,Tv,new om));var y={a:u,b:c,c:h,normal:new Dm,materialIndex:0};Xg.getNormal(mv,gv,vv,y.normal),v.face=y}return v}Cv.prototype.isMesh=!0;var Rv=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;k(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:a,depth:i,widthSegments:o,heightSegments:s,depthSegments:l};var u=b(e);o=Math.floor(o),s=Math.floor(s),l=Math.floor(l);var c=[],h=[],f=[],d=[],p=0,m=0;function g(e,t,n,r,a,i,o,s,l,g,v){for(var y=i/l,b=o/g,x=i/2,w=o/2,_=s/2,k=l+1,S=g+1,M=0,T=0,E=new Dm,A=0;A<S;A++)for(var C=A*b-w,L=0;L<k;L++){var R=L*y-x;E[e]=R*r,E[t]=C*a,E[n]=_,h.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=s>0?1:-1,f.push(E.x,E.y,E.z),d.push(L/l),d.push(1-A/g),M+=1}for(var N=0;N<g;N++)for(var P=0;P<l;P++){var I=p+P+k*N,D=p+P+k*(N+1),U=p+(P+1)+k*(N+1),j=p+(P+1)+k*N;c.push(I,D,j),c.push(D,U,j),T+=6}u.addGroup(m,T,v),m+=T,p+=M}return g("z","y","x",-1,-1,i,a,r,l,s,0),g("z","y","x",1,-1,i,a,-r,l,s,1),g("x","z","y",1,1,r,i,a,o,l,2),g("x","z","y",1,-1,r,i,-a,o,l,3),g("x","y","z",1,-1,r,a,i,o,s,4),g("x","y","z",-1,-1,r,a,-i,o,s,5),e.setIndex(c),e.setAttribute("position",new rv(h,3)),e.setAttribute("normal",new rv(f,3)),e.setAttribute("uv",new rv(d,2)),e}return M(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(hv);function Nv(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var a=e[n][r];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?t[n][r]=a.clone():Array.isArray(a)?t[n][r]=a.slice():t[n][r]=a}return t}function Pv(e){for(var t={},n=0;n<e.length;n++){var r=Nv(e[n]);for(var a in r)t[a]=r[a]}return t}var Iv={clone:Nv,merge:Pv},Dv=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Nv(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=m(d(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}]),n}(Jg);Dv.prototype.isShaderMaterial=!0;var Uv=function(e){v(n,e);var t=w(n);function n(){var e;return k(this,n),(e=t.call(this)).type="Camera",e.matrixWorldInverse=new fg,e.projectionMatrix=new fg,e.projectionMatrixInverse=new fg,e}return M(n,[{key:"copy",value:function(e,t){return m(d(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){m(d(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){m(d(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(jg);Uv.prototype.isCamera=!0;var jv=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return k(this,n),(e=t.call(this)).type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=i,e.far=o,e.focus=10,e.aspect=a,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return M(n,[{key:"copy",value:function(e,t){return m(d(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Qp*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Jp*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Qp*Math.atan(Math.tan(.5*Jp*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,a,i){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=i,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Jp*this.fov)/this.zoom,n=2*t,r=this.aspect*n,a=-.5*r,i=this.view;if(null!==this.view&&this.view.enabled){var o=i.fullWidth,s=i.fullHeight;a+=i.offsetX*r/o,t-=i.offsetY*n/s,r*=i.width/o,n*=i.height/s}var l=this.filmOffset;0!==l&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=m(d(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Uv);jv.prototype.isPerspectiveCamera=!0;var Ov=90,Fv=function(e){v(n,e);var t=w(n);function n(e,r,a){var i;if(k(this,n),(i=t.call(this)).type="CubeCamera",!0!==a.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),x(i);i.renderTarget=a;var o=new jv(Ov,1,e,r);o.layers=i.layers,o.up.set(0,-1,0),o.lookAt(new Dm(1,0,0)),i.add(o);var s=new jv(Ov,1,e,r);s.layers=i.layers,s.up.set(0,-1,0),s.lookAt(new Dm(-1,0,0)),i.add(s);var l=new jv(Ov,1,e,r);l.layers=i.layers,l.up.set(0,0,1),l.lookAt(new Dm(0,1,0)),i.add(l);var u=new jv(Ov,1,e,r);u.layers=i.layers,u.up.set(0,0,-1),u.lookAt(new Dm(0,-1,0)),i.add(u);var c=new jv(Ov,1,e,r);c.layers=i.layers,c.up.set(0,-1,0),c.lookAt(new Dm(0,0,1)),i.add(c);var h=new jv(Ov,1,e,r);return h.layers=i.layers,h.up.set(0,-1,0),h.lookAt(new Dm(0,0,-1)),i.add(h),i}return M(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=i(this.children,6),a=r[0],o=r[1],s=r[2],l=r[3],u=r[4],c=r[5],h=e.getRenderTarget(),f=e.outputEncoding,d=e.toneMapping,p=e.xr.enabled;e.outputEncoding=jp,e.toneMapping=0,e.xr.enabled=!1;var m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,a),e.setRenderTarget(n,1),e.render(t,o),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,l),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=m,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(h),e.outputEncoding=f,e.toneMapping=d,e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}]),n}(jg),Bv=function(e){v(n,e);var t=w(n);function n(e,r,a,i,o,s,l,u,c,h){var f;return k(this,n),e=void 0!==e?e:[],r=void 0!==r?r:Dd,(f=t.call(this,e,r,a,i,o,s,l,u,c,h)).flipY=!1,f}return M(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(Tm);Bv.prototype.isCubeTexture=!0;var zv=function(e){v(n,e);var t=w(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};k(this,n);var i={width:e,height:e,depth:1},o=[i,i,i,i,i,i];return(r=t.call(this,e,e,a)).texture=new Bv(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),r.texture.isRenderTargetTexture=!0,r.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,r.texture.minFilter=void 0!==a.minFilter?a.minFilter:qd,r}return M(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",a="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new Rv(5,5,5),o=new Dv({name:"CubemapFromEquirect",uniforms:Nv(n),vertexShader:r,fragmentShader:a,side:1,blending:0});o.uniforms.tEquirect.value=t;var s=new Cv(i,o),l=t.minFilter;return t.minFilter===Xd&&(t.minFilter=qd),new Fv(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var a=e.getRenderTarget(),i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(a)}}]),n}(Am);zv.prototype.isWebGLCubeRenderTarget=!0;var Hv=new Dm,Vv=new Dm,Gv=new sm,Wv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dm(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;k(this,e),this.normal=t,this.constant=n}return M(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=Hv.subVectors(n,t).cross(Vv.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(Hv),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(n).multiplyScalar(a).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Gv.getNormalMatrix(e),r=this.coplanarPoint(Hv).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(a),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();Wv.prototype.isPlane=!0;var qv=new rg,Kv=new Dm,Xv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wv,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wv,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wv,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Wv,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Wv,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Wv;k(this,e),this.planes=[t,n,r,a,i,o]}return M(e,[{key:"set",value:function(e,t,n,r,a,i){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(a),o[5].copy(i),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(o-r,c-s,p-h,y-m).normalize(),t[1].setComponents(o+r,c+s,p+h,y+m).normalize(),t[2].setComponents(o+a,c+l,p+f,y+g).normalize(),t[3].setComponents(o-a,c-l,p-f,y-g).normalize(),t[4].setComponents(o-i,c-u,p-d,y-v).normalize(),t[5].setComponents(o+i,c+u,p+d,y+v).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),qv.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(qv)}},{key:"intersectsSprite",value:function(e){return qv.center.set(0,0,0),qv.radius=.7071067811865476,qv.applyMatrix4(e.matrixWorld),this.intersectsSphere(qv)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,a=0;a<6;a++){if(t[a].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Kv.x=r.normal.x>0?e.max.x:e.min.x,Kv.y=r.normal.y>0?e.max.y:e.min.y,Kv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Kv)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function Yv(){var e=null,t=!1,n=null,r=null;function a(t,i){n(t,i),r=e.requestAnimationFrame(a)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(a),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Jv(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,a){if(t.isGLBufferAttribute){var i=r.get(t);(!i||i.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var a,i=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(r,s),e.bufferData(r,i,o),t.onUploadCallback(),i instanceof Float32Array)a=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=5131}else a=5123;else if(i instanceof Int16Array)a=5122;else if(i instanceof Uint32Array)a=5125;else if(i instanceof Int32Array)a=5124;else if(i instanceof Int8Array)a=5120;else if(i instanceof Uint8Array)a=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=5121}return{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,a)):o.version<t.version&&(!function(t,r,a){var i=r.array,o=r.updateRange;e.bindBuffer(a,t),-1===o.count?e.bufferSubData(a,0,i):(n?e.bufferSubData(a,o.offset*i.BYTES_PER_ELEMENT,i,o.offset,o.count):e.bufferSubData(a,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,a),o.version=t.version)}}}}var Qv=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;k(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:a,widthSegments:i,heightSegments:o};for(var s=r/2,l=a/2,u=Math.floor(i),c=Math.floor(o),h=u+1,f=c+1,d=r/u,p=a/c,m=[],g=[],v=[],y=[],b=0;b<f;b++)for(var x=b*p-l,w=0;w<h;w++){var _=w*d-s;g.push(_,-x,0),v.push(0,0,1),y.push(w/u),y.push(1-b/c)}for(var S=0;S<c;S++)for(var M=0;M<u;M++){var T=M+h*S,E=M+h*(S+1),A=M+1+h*(S+1),C=M+1+h*S;m.push(T,E,C),m.push(E,A,C)}return e.setIndex(m),e.setAttribute("position",new rv(g,3)),e.setAttribute("normal",new rv(v,3)),e.setAttribute("uv",new rv(y,2)),e}return M(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(hv),Zv={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},$v={common:{diffuse:{value:new wm(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new sm},uv2Transform:{value:new sm},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new om(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wm(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wm(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new sm}},sprite:{diffuse:{value:new wm(16777215)},opacity:{value:1},center:{value:new om(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new sm}}},ey={basic:{uniforms:Pv([$v.common,$v.specularmap,$v.envmap,$v.aomap,$v.lightmap,$v.fog]),vertexShader:Zv.meshbasic_vert,fragmentShader:Zv.meshbasic_frag},lambert:{uniforms:Pv([$v.common,$v.specularmap,$v.envmap,$v.aomap,$v.lightmap,$v.emissivemap,$v.fog,$v.lights,{emissive:{value:new wm(0)}}]),vertexShader:Zv.meshlambert_vert,fragmentShader:Zv.meshlambert_frag},phong:{uniforms:Pv([$v.common,$v.specularmap,$v.envmap,$v.aomap,$v.lightmap,$v.emissivemap,$v.bumpmap,$v.normalmap,$v.displacementmap,$v.fog,$v.lights,{emissive:{value:new wm(0)},specular:{value:new wm(1118481)},shininess:{value:30}}]),vertexShader:Zv.meshphong_vert,fragmentShader:Zv.meshphong_frag},standard:{uniforms:Pv([$v.common,$v.envmap,$v.aomap,$v.lightmap,$v.emissivemap,$v.bumpmap,$v.normalmap,$v.displacementmap,$v.roughnessmap,$v.metalnessmap,$v.fog,$v.lights,{emissive:{value:new wm(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Zv.meshphysical_vert,fragmentShader:Zv.meshphysical_frag},toon:{uniforms:Pv([$v.common,$v.aomap,$v.lightmap,$v.emissivemap,$v.bumpmap,$v.normalmap,$v.displacementmap,$v.gradientmap,$v.fog,$v.lights,{emissive:{value:new wm(0)}}]),vertexShader:Zv.meshtoon_vert,fragmentShader:Zv.meshtoon_frag},matcap:{uniforms:Pv([$v.common,$v.bumpmap,$v.normalmap,$v.displacementmap,$v.fog,{matcap:{value:null}}]),vertexShader:Zv.meshmatcap_vert,fragmentShader:Zv.meshmatcap_frag},points:{uniforms:Pv([$v.points,$v.fog]),vertexShader:Zv.points_vert,fragmentShader:Zv.points_frag},dashed:{uniforms:Pv([$v.common,$v.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zv.linedashed_vert,fragmentShader:Zv.linedashed_frag},depth:{uniforms:Pv([$v.common,$v.displacementmap]),vertexShader:Zv.depth_vert,fragmentShader:Zv.depth_frag},normal:{uniforms:Pv([$v.common,$v.bumpmap,$v.normalmap,$v.displacementmap,{opacity:{value:1}}]),vertexShader:Zv.meshnormal_vert,fragmentShader:Zv.meshnormal_frag},sprite:{uniforms:Pv([$v.sprite,$v.fog]),vertexShader:Zv.sprite_vert,fragmentShader:Zv.sprite_frag},background:{uniforms:{uvTransform:{value:new sm},t2D:{value:null}},vertexShader:Zv.background_vert,fragmentShader:Zv.background_frag},cube:{uniforms:Pv([$v.envmap,{opacity:{value:1}}]),vertexShader:Zv.cube_vert,fragmentShader:Zv.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Zv.equirect_vert,fragmentShader:Zv.equirect_frag},distanceRGBA:{uniforms:Pv([$v.common,$v.displacementmap,{referencePosition:{value:new Dm},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Zv.distanceRGBA_vert,fragmentShader:Zv.distanceRGBA_frag},shadow:{uniforms:Pv([$v.lights,$v.fog,{color:{value:new wm(0)},opacity:{value:1}}]),vertexShader:Zv.shadow_vert,fragmentShader:Zv.shadow_frag}};function ty(e,t,n,r,a,i){var o,s,l=new wm(0),u=!0===a?0:1,c=null,h=0,f=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return l},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l.set(e),d(l,u=t)},getClearAlpha:function(){return u},setClearAlpha:function(e){d(l,u=e)},render:function(n,a){var i=!1,p=!0===a.isScene?a.background:null;p&&p.isTexture&&(p=t.get(p));var m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(p=null),null===p?d(l,u):p&&p.isColor&&(d(p,1),i=!0),(e.autoClear||i)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===Fd)?(void 0===s&&((s=new Cv(new Rv(1,1,1),new Dv({name:"BackgroundCubeMaterial",uniforms:Nv(ey.cube.uniforms),vertexShader:ey.cube.vertexShader,fragmentShader:ey.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=p,s.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,c===p&&h===p.version&&f===e.toneMapping||(s.material.needsUpdate=!0,c=p,h=p.version,f=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):p&&p.isTexture&&(void 0===o&&((o=new Cv(new Qv(2,2),new Dv({name:"BackgroundMaterial",uniforms:Nv(ey.background.uniforms),vertexShader:ey.background.vertexShader,fragmentShader:ey.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),o.material.uniforms.uvTransform.value.copy(p.matrix),c===p&&h===p.version&&f===e.toneMapping||(o.material.needsUpdate=!0,c=p,h=p.version,f=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function ny(e,t,n,r){var a=e.getParameter(34921),i=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==i,s={},l=d(null),u=l,c=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):i.bindVertexArrayOES(t)}function f(t){return r.isWebGL2?e.deleteVertexArray(t):i.deleteVertexArrayOES(t)}function d(e){for(var t=[],n=[],r=[],i=0;i<a;i++)t[i]=0,n[i]=0,r[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){for(var e=u.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,a){var i=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors;(i[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==a)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,a),s[n]=a)}function v(){for(var t=u.newAttributes,n=u.enabledAttributes,r=0,a=n.length;r<a;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,a,i,o,s){!0!==r.isWebGL2||5124!==a&&5125!==a?e.vertexAttribPointer(t,n,a,i,o,s):e.vertexAttribIPointer(t,n,a,o,s)}function b(){x(),c=!0,u!==l&&h((u=l).object)}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(a,l,f,b,x){var w=!1;if(o){var _=function(t,n,a){var o=!0===a.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);var u=l[n.id];void 0===u&&(u={},l[n.id]=u);var c=u[o];void 0===c&&(c=d(r.isWebGL2?e.createVertexArray():i.createVertexArrayOES()),u[o]=c);return c}(b,f,l);u!==_&&h((u=_).object),w=function(e,t){var n=u.attributes,r=e.attributes,a=0;for(var i in r){var o=n[i],s=r[i];if(void 0===o)return!0;if(o.attribute!==s)return!0;if(o.data!==s.data)return!0;a++}return u.attributesNum!==a||u.index!==t}(b,x),w&&function(e,t){var n={},r=e.attributes,a=0;for(var i in r){var o=r[i],s={};s.attribute=o,o.data&&(s.data=o.data),n[i]=s,a++}u.attributes=n,u.attributesNum=a,u.index=t}(b,x)}else{var k=!0===l.wireframe;u.geometry===b.id&&u.program===f.id&&u.wireframe===k||(u.geometry=b.id,u.program=f.id,u.wireframe=k,w=!0)}!0===a.isInstancedMesh&&(w=!0),null!==x&&n.update(x,34963),(w||c)&&(c=!1,function(a,i,o,s){if(!1===r.isWebGL2&&(a.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();var l=s.attributes,u=o.getAttributes(),c=i.defaultAttributeValues;for(var h in u){var f=u[h];if(f.location>=0){var d=l[h];if(void 0===d&&("instanceMatrix"===h&&a.instanceMatrix&&(d=a.instanceMatrix),"instanceColor"===h&&a.instanceColor&&(d=a.instanceColor)),void 0!==d){var b=d.normalized,x=d.itemSize,w=n.get(d);if(void 0===w)continue;var _=w.buffer,k=w.type,S=w.bytesPerElement;if(d.isInterleavedBufferAttribute){var M=d.data,T=M.stride,E=d.offset;if(M.isInstancedInterleavedBuffer){for(var A=0;A<f.locationSize;A++)g(f.location+A,M.meshPerAttribute);!0!==a.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=M.meshPerAttribute*M.count)}else for(var C=0;C<f.locationSize;C++)m(f.location+C);e.bindBuffer(34962,_);for(var L=0;L<f.locationSize;L++)y(f.location+L,x/f.locationSize,k,b,T*S,(E+x/f.locationSize*L)*S)}else{if(d.isInstancedBufferAttribute){for(var R=0;R<f.locationSize;R++)g(f.location+R,d.meshPerAttribute);!0!==a.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=d.meshPerAttribute*d.count)}else for(var N=0;N<f.locationSize;N++)m(f.location+N);e.bindBuffer(34962,_);for(var P=0;P<f.locationSize;P++)y(f.location+P,x/f.locationSize,k,b,x*S,x/f.locationSize*P*S)}}else if(void 0!==c){var I=c[h];if(void 0!==I)switch(I.length){case 2:e.vertexAttrib2fv(f.location,I);break;case 3:e.vertexAttrib3fv(f.location,I);break;case 4:e.vertexAttrib4fv(f.location,I);break;default:e.vertexAttrib1fv(f.location,I)}}}}v()}(a,l,f,b),null!==x&&e.bindBuffer(34963,n.get(x).buffer))},reset:b,resetDefaultState:x,dispose:function(){for(var e in b(),s){var t=s[e];for(var n in t){var r=t[n];for(var a in r)f(r[a].object),delete r[a];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var a in r)f(r[a].object),delete r[a];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var a in r)f(r[a].object),delete r[a];delete n[e.id]}}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function ry(e,t,n,r){var a,i=r.isWebGL2;this.setMode=function(e){a=e},this.render=function(t,r){e.drawArrays(a,t,r),n.update(r,a,1)},this.renderInstances=function(r,o,s){if(0!==s){var l,u;if(i)l=e,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](a,r,o,s),n.update(o,a,s)}}}function ay(e,t,n){var r;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var i="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=a(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=i||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=h>0,b=i||t.has("OES_texture_float");return{isWebGL2:i,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:a,precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:i?e.getParameter(36183):0}}function iy(e){var t=this,n=null,r=0,a=!1,i=!1,o=new Wv,s=new sm,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,a){var i=null!==e?e.length:0,u=null;if(0!==i){if(u=l.value,!0!==a||null===u){var c=r+4*i,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var f=0,d=r;f!==i;++f,d+=4)o.copy(e[f]).applyMatrix4(h,s),o.normal.toArray(u,d),u[d+3]=o.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=i,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,i){var o=0!==e.length||t||0!==r||a;return a=t,n=c(e,i,0),r=e.length,o},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,u()},this.setState=function(t,o,s){var h=t.clippingPlanes,f=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!a||null===h||0===h.length||i&&!d)i?c(null):u();else{var m=i?0:r,g=4*m,v=p.clippingState||null;l.value=v,v=c(h,o,g,s);for(var y=0;y!==g;++y)v[y]=n[y];p.clippingState=v,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=m}}}function oy(e){var t=new WeakMap;function n(e,t){return t===jd?e.mapping=Dd:t===Od&&(e.mapping=Ud),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var a=t.get(n);void 0!==a&&(t.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){var i=a.mapping;if(i===jd||i===Od){if(t.has(a))return n(t.get(a).texture,a.mapping);var o=a.image;if(o&&o.height>0){var s=new zv(o.height/2);return s.fromEquirectangularTexture(e,a),t.set(a,s),a.addEventListener("dispose",r),n(s.texture,a.mapping)}return null}}return a},dispose:function(){t=new WeakMap}}}ey.physical={uniforms:Pv([ey.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new om(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new wm(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new om},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new wm(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new wm(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Zv.meshphysical_vert,fragmentShader:Zv.meshphysical_frag};var sy=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return k(this,n),(e=t.call(this)).type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=a,e.top=i,e.bottom=o,e.near=s,e.far=l,e.updateProjectionMatrix(),e}return M(n,[{key:"copy",value:function(e,t){return m(d(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,a,i){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=i,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,a=n-e,i=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i=(a+=l*this.view.offsetX)+l*this.view.width,s=(o-=u*this.view.offsetY)-u*this.view.height}this.projectionMatrix.makeOrthographic(a,i,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=m(d(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Uv);sy.prototype.isOrthographicCamera=!0;var ly=[.125,.215,.35,.446,.526,.582],uy=20,cy=new sy,hy=new wm,fy=null,dy=(1+Math.sqrt(5))/2,py=1/dy,my=[new Dm(1,1,1),new Dm(-1,1,1),new Dm(1,1,-1),new Dm(-1,1,-1),new Dm(0,dy,py),new Dm(0,dy,-py),new Dm(py,0,dy),new Dm(-py,0,dy),new Dm(dy,py,0),new Dm(-dy,py,0)],gy=function(){function e(t){k(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return M(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;fy=this._renderer.getRenderTarget(),this._setSize(256);var a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,n,r,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=xy(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=by(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(fy),e.scissorTest=!1,yy(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===Dd||e.mapping===Ud?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),fy=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize-32,n={magFilter:qd,minFilter:qd,generateMipmaps:!1,type:$d,format:tp,encoding:jp,depthBuffer:!1},r=vy(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=vy(e,t,n);var a=this._lodMax,i=function(e){for(var t=[],n=[],r=[],a=e,i=e-4+1+ly.length,o=0;o<i;o++){var s=Math.pow(2,a);n.push(s);var l=1/s;o>e-4?l=ly[o-e+4-1]:0===o&&(l=0),r.push(l);for(var u=1/(s-1),c=-u/2,h=1+u/2,f=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,p=6,m=3,g=2,v=1,y=new Float32Array(m*p*d),b=new Float32Array(g*p*d),x=new Float32Array(v*p*d),w=0;w<d;w++){var _=w%3*2/3-1,k=w>2?0:-1,S=[_,k,0,_+2/3,k,0,_+2/3,k+1,0,_,k,0,_+2/3,k+1,0,_,k+1,0];y.set(S,m*p*w),b.set(f,g*p*w);var M=[w,w,w,w,w,w];x.set(M,v*p*w)}var T=new hv;T.setAttribute("position",new ev(y,m)),T.setAttribute("uv",new ev(b,g)),T.setAttribute("faceIndex",new ev(x,v)),t.push(T),a>4&&a--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(a);this._sizeLods=i.sizeLods,this._lodPlanes=i.lodPlanes,this._sigmas=i.sigmas,this._blurMaterial=function(e,t,n){var r=new Float32Array(uy),a=new Dm(0,1,0);return new Dv({name:"SphericalGaussianBlur",defines:{n:uy,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(a,e,t)}return r}},{key:"_compileMaterial",value:function(e){var t=new Cv(this._lodPlanes[0],e);this._renderer.compile(t,cy)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var a=new jv(90,1,t,n),i=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(hy),s.toneMapping=0,s.autoClear=!1;var c=new Qg({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new Cv(new Rv,c),f=!1,d=e.background;d?d.isColor&&(c.color.copy(d),e.background=null,f=!0):(c.color.copy(hy),f=!0);for(var p=0;p<6;p++){var m=p%3;0===m?(a.up.set(0,i[p],0),a.lookAt(o[p],0,0)):1===m?(a.up.set(0,0,i[p]),a.lookAt(0,o[p],0)):(a.up.set(0,i[p],0),a.lookAt(0,0,o[p]));var g=this._cubeSize;yy(r,m*g,p>2?g:0,g,g),s.setRenderTarget(r),f&&s.render(h,a),s.render(e,a)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=d}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===Dd||e.mapping===Ud;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=xy()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=by());var a=r?this._cubemapMaterial:this._equirectMaterial,i=new Cv(this._lodPlanes[0],a);a.uniforms.envMap.value=e;var o=this._cubeSize;yy(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(i,cy)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<this._lodPlanes.length;r++){var a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),i=my[(r-1)%my.length];this._blur(e,r-1,r,a,i)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,a){var i=this._pingPongRenderTarget;this._halfBlur(e,i,t,n,r,"latitudinal",a),this._halfBlur(i,e,n,n,r,"longitudinal",a)}},{key:"_halfBlur",value:function(e,t,n,r,a,i,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==i&&"longitudinal"!==i&&console.error("blur direction must be either latitudinal or longitudinal!");var u=new Cv(this._lodPlanes[r],l),c=l.uniforms,h=this._sizeLods[n]-1,f=isFinite(a)?Math.PI/(2*h):2*Math.PI/39,d=a/f,p=isFinite(a)?1+Math.floor(3*d):uy;p>uy&&console.warn("sigmaRadians, ".concat(a,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(uy));for(var m=[],g=0,v=0;v<uy;++v){var y=v/d,b=Math.exp(-y*y/2);m.push(b),0===v?g+=b:v<p&&(g+=2*b)}for(var x=0;x<m.length;x++)m[x]=m[x]/g;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=m,c.latitudinal.value="latitudinal"===i,o&&(c.poleAxis.value=o);var w=this._lodMax;c.dTheta.value=f,c.mipInt.value=w-n;var _=this._sizeLods[r];yy(t,3*_*(r>w-4?r-w+4:0),4*(this._cubeSize-_),3*_,2*_),s.setRenderTarget(t),s.render(u,cy)}}]),e}();function vy(e,t,n){var r=new Am(e,t,n);return r.texture.mapping=Fd,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function yy(e,t,n,r,a){e.viewport.set(t,n,r,a),e.scissor.set(t,n,r,a)}function by(){return new Dv({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function xy(){return new Dv({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function wy(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var a=t.get(n);void 0!==a&&(t.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture){var i=a.mapping,o=i===jd||i===Od,s=i===Dd||i===Ud;if(o||s){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;var l=t.get(a);return null===n&&(n=new gy(e)),l=o?n.fromEquirectangular(a,l):n.fromCubemap(a,l),t.set(a,l),l.texture}if(t.has(a))return t.get(a).texture;var u=a.image;if(o&&u&&u.height>0||s&&u&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(u)){null===n&&(n=new gy(e));var c=o?n.fromEquirectangular(a):n.fromCubemap(a);return t.set(a,c),a.addEventListener("dispose",r),c.texture}return null}}return a},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function _y(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function ky(e,t,n,r){var a={},i=new WeakMap;function o(e){var s=e.target;for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);s.removeEventListener("dispose",o),delete a[s.id];var u=i.get(s);u&&(t.remove(u),i.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,a=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],h=s[l+1],f=s[l+2];n.push(c,h,h,f,f,c)}}else{var d=a.array;o=a.version;for(var p=0,m=d.length/3-1;p<m;p+=3){var g=p+0,v=p+1,y=p+2;n.push(g,v,v,y,y,g)}}var b=new(lm(n)?nv:tv)(n,1);b.version=o;var x=i.get(e);x&&t.remove(x),i.set(e,b)}return{get:function(e,t){return!0===a[t.id]||(t.addEventListener("dispose",o),a[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var a=e.morphAttributes;for(var i in a)for(var o=a[i],s=0,l=o.length;s<l;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=i.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return i.get(e)}}}function Sy(e,t,n,r){var a,i,o,s=r.isWebGL2;this.setMode=function(e){a=e},this.setIndex=function(e){i=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(a,r,i,t*o),n.update(r,a,1)},this.renderInstances=function(r,l,u){if(0!==u){var c,h;if(s)c=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](a,l,i,r*o,u),n.update(l,a,u)}}}function My(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Ty(e,t){return e[0]-t[0]}function Ey(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Ay(e,t){var n=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function Cy(e,t,n){for(var r={},a=new Float32Array(8),i=new WeakMap,o=new Em,s=[],l=0;l<8;l++)s[l]=[l,0];return{update:function(l,u,c,h){var f=l.morphTargetInfluences;if(!0===t.isWebGL2){var d=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==d?d.length:0,m=i.get(u);if(void 0===m||m.count!==p){void 0!==m&&m.texture.dispose();var g=void 0!==u.morphAttributes.position,v=void 0!==u.morphAttributes.normal,y=void 0!==u.morphAttributes.color,b=u.morphAttributes.position||[],x=u.morphAttributes.normal||[],w=u.morphAttributes.color||[],_=0;!0===g&&(_=1),!0===v&&(_=2),!0===y&&(_=3);var k=u.attributes.position.count*_,S=1;k>t.maxTextureSize&&(S=Math.ceil(k/t.maxTextureSize),k=t.maxTextureSize);var M=new Float32Array(k*S*4*p),T=new Cm(M,k,S,p);T.type=Zd,T.needsUpdate=!0;for(var E=4*_,A=0;A<p;A++)for(var C=b[A],L=x[A],R=w[A],N=k*S*4*A,P=0;P<C.count;P++){var I=P*E;!0===g&&(o.fromBufferAttribute(C,P),!0===C.normalized&&Ay(o,C),M[N+I+0]=o.x,M[N+I+1]=o.y,M[N+I+2]=o.z,M[N+I+3]=0),!0===v&&(o.fromBufferAttribute(L,P),!0===L.normalized&&Ay(o,L),M[N+I+4]=o.x,M[N+I+5]=o.y,M[N+I+6]=o.z,M[N+I+7]=0),!0===y&&(o.fromBufferAttribute(R,P),!0===R.normalized&&Ay(o,R),M[N+I+8]=o.x,M[N+I+9]=o.y,M[N+I+10]=o.z,M[N+I+11]=4===R.itemSize?o.w:1)}m={count:p,texture:T,size:new om(k,S)},i.set(u,m),u.addEventListener("dispose",(function e(){T.dispose(),i.delete(u),u.removeEventListener("dispose",e)}))}for(var D=0,U=0;U<f.length;U++)D+=f[U];var j=u.morphTargetsRelative?1:1-D;h.getUniforms().setValue(e,"morphTargetBaseInfluence",j),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",m.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{var O=void 0===f?0:f.length,F=r[u.id];if(void 0===F||F.length!==O){F=[];for(var B=0;B<O;B++)F[B]=[B,0];r[u.id]=F}for(var z=0;z<O;z++){var H=F[z];H[0]=z,H[1]=f[z]}F.sort(Ey);for(var V=0;V<8;V++)V<O&&F[V][1]?(s[V][0]=F[V][0],s[V][1]=F[V][1]):(s[V][0]=Number.MAX_SAFE_INTEGER,s[V][1]=0);s.sort(Ty);for(var G=u.morphAttributes.position,W=u.morphAttributes.normal,q=0,K=0;K<8;K++){var X=s[K],Y=X[0],J=X[1];Y!==Number.MAX_SAFE_INTEGER&&J?(G&&u.getAttribute("morphTarget"+K)!==G[Y]&&u.setAttribute("morphTarget"+K,G[Y]),W&&u.getAttribute("morphNormal"+K)!==W[Y]&&u.setAttribute("morphNormal"+K,W[Y]),a[K]=J,q+=J):(G&&!0===u.hasAttribute("morphTarget"+K)&&u.deleteAttribute("morphTarget"+K),W&&!0===u.hasAttribute("morphNormal"+K)&&u.deleteAttribute("morphNormal"+K),a[K]=0)}var Q=u.morphTargetsRelative?1:1-q;h.getUniforms().setValue(e,"morphTargetBaseInfluence",Q),h.getUniforms().setValue(e,"morphTargetInfluences",a)}}}}function Ly(e,t,n,r){var a=new WeakMap;function i(e){var t=e.target;t.removeEventListener("dispose",i),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=e.geometry,l=t.get(e,s);return a.get(l)!==o&&(t.update(l),a.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",i)&&e.addEventListener("dispose",i),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){a=new WeakMap}}}var Ry=new Tm,Ny=new Cm,Py=new Rm,Iy=new Bv,Dy=[],Uy=[],jy=new Float32Array(16),Oy=new Float32Array(9),Fy=new Float32Array(4);function By(e,t,n){var r=e[0];if(r<=0||r>0)return e;var a=t*n,i=Dy[a];if(void 0===i&&(i=new Float32Array(a),Dy[a]=i),0!==t){r.toArray(i,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(i,s)}return i}function zy(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Hy(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Vy(e,t){var n=Uy[t];void 0===n&&(n=new Int32Array(t),Uy[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Gy(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Wy(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(zy(n,t))return;e.uniform2fv(this.addr,t),Hy(n,t)}}function qy(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(zy(n,t))return;e.uniform3fv(this.addr,t),Hy(n,t)}}function Ky(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(zy(n,t))return;e.uniform4fv(this.addr,t),Hy(n,t)}}function Xy(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(zy(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Hy(n,t)}else{if(zy(n,r))return;Fy.set(r),e.uniformMatrix2fv(this.addr,!1,Fy),Hy(n,r)}}function Yy(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(zy(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Hy(n,t)}else{if(zy(n,r))return;Oy.set(r),e.uniformMatrix3fv(this.addr,!1,Oy),Hy(n,r)}}function Jy(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(zy(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Hy(n,t)}else{if(zy(n,r))return;jy.set(r),e.uniformMatrix4fv(this.addr,!1,jy),Hy(n,r)}}function Qy(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Zy(e,t){var n=this.cache;zy(n,t)||(e.uniform2iv(this.addr,t),Hy(n,t))}function $y(e,t){var n=this.cache;zy(n,t)||(e.uniform3iv(this.addr,t),Hy(n,t))}function eb(e,t){var n=this.cache;zy(n,t)||(e.uniform4iv(this.addr,t),Hy(n,t))}function tb(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function nb(e,t){var n=this.cache;zy(n,t)||(e.uniform2uiv(this.addr,t),Hy(n,t))}function rb(e,t){var n=this.cache;zy(n,t)||(e.uniform3uiv(this.addr,t),Hy(n,t))}function ab(e,t){var n=this.cache;zy(n,t)||(e.uniform4uiv(this.addr,t),Hy(n,t))}function ib(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture2D(t||Ry,a)}function ob(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture3D(t||Py,a)}function sb(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTextureCube(t||Iy,a)}function lb(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture2DArray(t||Ny,a)}function ub(e,t){e.uniform1fv(this.addr,t)}function cb(e,t){var n=By(t,this.size,2);e.uniform2fv(this.addr,n)}function hb(e,t){var n=By(t,this.size,3);e.uniform3fv(this.addr,n)}function fb(e,t){var n=By(t,this.size,4);e.uniform4fv(this.addr,n)}function db(e,t){var n=By(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function pb(e,t){var n=By(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function mb(e,t){var n=By(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function gb(e,t){e.uniform1iv(this.addr,t)}function vb(e,t){e.uniform2iv(this.addr,t)}function yb(e,t){e.uniform3iv(this.addr,t)}function bb(e,t){e.uniform4iv(this.addr,t)}function xb(e,t){e.uniform1uiv(this.addr,t)}function wb(e,t){e.uniform2uiv(this.addr,t)}function _b(e,t){e.uniform3uiv(this.addr,t)}function kb(e,t){e.uniform4uiv(this.addr,t)}function Sb(e,t,n){var r=t.length,a=Vy(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.setTexture2D(t[i]||Ry,a[i])}function Mb(e,t,n){var r=t.length,a=Vy(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.setTexture3D(t[i]||Py,a[i])}function Tb(e,t,n){var r=t.length,a=Vy(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.setTextureCube(t[i]||Iy,a[i])}function Eb(e,t,n){var r=t.length,a=Vy(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.setTexture2DArray(t[i]||Ny,a[i])}function Ab(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Gy;case 35664:return Wy;case 35665:return qy;case 35666:return Ky;case 35674:return Xy;case 35675:return Yy;case 35676:return Jy;case 5124:case 35670:return Qy;case 35667:case 35671:return Zy;case 35668:case 35672:return $y;case 35669:case 35673:return eb;case 5125:return tb;case 36294:return nb;case 36295:return rb;case 36296:return ab;case 35678:case 36198:case 36298:case 36306:case 35682:return ib;case 35679:case 36299:case 36307:return ob;case 35680:case 36300:case 36308:case 36293:return sb;case 36289:case 36303:case 36311:case 36292:return lb}}(t.type)}function Cb(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return ub;case 35664:return cb;case 35665:return hb;case 35666:return fb;case 35674:return db;case 35675:return pb;case 35676:return mb;case 5124:case 35670:return gb;case 35667:case 35671:return vb;case 35668:case 35672:return yb;case 35669:case 35673:return bb;case 5125:return xb;case 36294:return wb;case 36295:return _b;case 36296:return kb;case 35678:case 36198:case 36298:case 36306:case 35682:return Sb;case 35679:case 36299:case 36307:return Mb;case 35680:case 36300:case 36308:case 36293:return Tb;case 36289:case 36303:case 36311:case 36292:return Eb}}(t.type)}function Lb(e){this.id=e,this.seq=[],this.map={}}Cb.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Hy(t,e)},Lb.prototype.setValue=function(e,t,n){for(var r=this.seq,a=0,i=r.length;a!==i;++a){var o=r[a];o.setValue(e,t[o.id],n)}};var Rb=/(\w+)(\])?(\[|\.)?/g;function Nb(e,t){e.seq.push(t),e.map[t.id]=t}function Pb(e,t,n){var r=e.name,a=r.length;for(Rb.lastIndex=0;;){var i=Rb.exec(r),o=Rb.lastIndex,s=i[1],l="]"===i[2],u=i[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===a){Nb(n,void 0===u?new Ab(s,e,t):new Cb(s,e,t));break}var c=n.map[s];void 0===c&&Nb(n,c=new Lb(s)),n=c}}function Ib(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var a=e.getActiveUniform(t,r);Pb(a,e.getUniformLocation(t,a.name),this)}}function Db(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Ib.prototype.setValue=function(e,t,n,r){var a=this.map[t];void 0!==a&&a.setValue(e,n,r)},Ib.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Ib.upload=function(e,t,n,r){for(var a=0,i=t.length;a!==i;++a){var o=t[a],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},Ib.seqWithValue=function(e,t){for(var n=[],r=0,a=e.length;r!==a;++r){var i=e[r];i.id in t&&n.push(i)}return n};var Ub=0;function jb(e,t,n){var r=e.getShaderParameter(t,35713),a=e.getShaderInfoLog(t).trim();if(r&&""===a)return"";var i=parseInt(/ERROR: 0:(\d+)/.exec(a)[1]);return n.toUpperCase()+"\n\n"+a+"\n\n"+function(e,t){for(var n=e.split("\n"),r=[],a=Math.max(t-6,0),i=Math.min(t+6,n.length),o=a;o<i;o++)r.push(o+1+": "+n[o]);return r.join("\n")}(e.getShaderSource(t),i)}function Ob(e,t){var n=function(e){switch(e){case jp:return["Linear","( value )"];case Op:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Fb(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Bb(e){return""!==e}function zb(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Hb(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Vb=/^[ \t]*#include +<([\w\d./]+)>/gm;function Gb(e){return e.replace(Vb,Wb)}function Wb(e,t){var n=Zv[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Gb(n)}var qb=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Kb=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Xb(e){return e.replace(Kb,Jb).replace(qb,Yb)}function Yb(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Jb(e,t,n,r)}function Jb(e,t,n,r){for(var a="",i=parseInt(t);i<parseInt(n);i++)a+=r.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return a}function Qb(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Zb(e,t,n,r){var a,i,o=e.getContext(),s=n.defines,l=n.vertexShader,u=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Dd:case Ud:t="ENVMAP_TYPE_CUBE";break;case Fd:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),f=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Ud&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t/32+1)+3,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),m=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bb).join("\n")}(n),g=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),v=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((a=[g].filter(Bb).join("\n")).length>0&&(a+="\n"),(i=[m,g].filter(Bb).join("\n")).length>0&&(i+="\n")):(a=[Qb(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Bb).join("\n"),i=[m,Qb(n),"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Zv.tonemapping_pars_fragment:"",0!==n.toneMapping?Fb("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Zv.encodings_pars_fragment,Ob("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Bb).join("\n")),l=Hb(l=zb(l=Gb(l),n),n),u=Hb(u=zb(u=Gb(u),n),n),l=Xb(l),u=Xb(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",a=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+a,i=["#define varying in",n.glslVersion===Gp?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Gp?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+i);var b,x,w=y+i+u,_=Db(o,35633,y+a+l),k=Db(o,35632,w);if(o.attachShader(v,_),o.attachShader(v,k),void 0!==n.index0AttributeName?o.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(v,0,"position"),o.linkProgram(v),e.debug.checkShaderErrors){var S=o.getProgramInfoLog(v).trim(),M=o.getShaderInfoLog(_).trim(),T=o.getShaderInfoLog(k).trim(),E=!0,A=!0;if(!1===o.getProgramParameter(v,35714)){E=!1;var C=jb(o,_,"vertex"),L=jb(o,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+S+"\n"+C+"\n"+L)}else""!==S?console.warn("THREE.WebGLProgram: Program Info Log:",S):""!==M&&""!==T||(A=!1);A&&(this.diagnostics={runnable:E,programLog:S,vertexShader:{log:M,prefix:a},fragmentShader:{log:T,prefix:i}})}return o.deleteShader(_),o.deleteShader(k),this.getUniforms=function(){return void 0===b&&(b=new Ib(o,v)),b},this.getAttributes=function(){return void 0===x&&(x=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),a=0;a<r;a++){var i=e.getActiveAttrib(t,a),o=i.name,s=1;35674===i.type&&(s=2),35675===i.type&&(s=3),35676===i.type&&(s=4),n[o]={type:i.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,v)),x},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Ub++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=_,this.fragmentShader=k,this}var $b=0,ex=function(){function e(){k(this,e),this.shaderCache=new Map,this.materialCache=new Map}return M(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(n),i=this._getShaderCacheForMaterial(e);return!1===i.has(r)&&(i.add(r),r.usedTimes++),!1===i.has(a)&&(i.add(a),a.usedTimes++),this}},{key:"remove",value:function(e){var t,n=g(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code)}}catch(a){n.e(a)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache;if(!1===t.has(e)){var n=new tx(e);t.set(e,n)}return t.get(e)}}]),e}(),tx=M((function e(t){k(this,e),this.id=$b++,this.code=t,this.usedTimes=0}));function nx(e,t,n,r,a,i,o){var s=new kg,l=new ex,u=[],c=a.isWebGL2,h=a.logarithmicDepthBuffer,f=a.floatVertexTextures,d=a.maxVertexUniforms,p=a.vertexTextures,m=a.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(i,s,u,v,y){var b=v.fog,x=y.geometry,w=i.isMeshStandardMaterial?v.environment:null,_=(i.isMeshStandardMaterial?n:t).get(i.envMap||w),k=_&&_.mapping===Fd?_.image.height:null,S=g[i.type],M=y.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(f)return 1024;var n=d,r=Math.floor((n-20)/4),a=Math.min(r,t.length);return a<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+a+"."),0):a}(y):0;null!==i.precision&&(m=a.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",m,"instead.");var T,E,A,C,L=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,R=void 0!==L?L.length:0,N=0;if(void 0!==x.morphAttributes.position&&(N=1),void 0!==x.morphAttributes.normal&&(N=2),void 0!==x.morphAttributes.color&&(N=3),S){var P=ey[S];T=P.vertexShader,E=P.fragmentShader}else T=i.vertexShader,E=i.fragmentShader,l.update(i),A=l.getVertexShaderID(i),C=l.getFragmentShaderID(i);var I=e.getRenderTarget(),D=i.alphaTest>0,U=i.clearcoat>0;return{isWebGL2:c,shaderID:S,shaderName:i.type,vertexShader:T,fragmentShader:E,defines:i.defines,customVertexShaderID:A,customFragmentShaderID:C,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:m,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:p,outputEncoding:null===I?e.outputEncoding:!0===I.isXRRenderTarget?I.texture.encoding:jp,map:!!i.map,matcap:!!i.matcap,envMap:!!_,envMapMode:_&&_.mapping,envMapCubeUVHeight:k,lightMap:!!i.lightMap,aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,decodeVideoTexture:!!i.map&&!0===i.map.isVideoTexture&&i.map.encoding===Op,clearcoat:U,clearcoatMap:U&&!!i.clearcoatMap,clearcoatRoughnessMap:U&&!!i.clearcoatRoughnessMap,clearcoatNormalMap:U&&!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,specularIntensityMap:!!i.specularIntensityMap,specularColorMap:!!i.specularColorMap,opaque:!1===i.transparent&&1===i.blending,alphaMap:!!i.alphaMap,alphaTest:D,gradientMap:!!i.gradientMap,sheen:i.sheen>0,sheenColorMap:!!i.sheenColorMap,sheenRoughnessMap:!!i.sheenRoughnessMap,transmission:i.transmission>0,transmissionMap:!!i.transmissionMap,thicknessMap:!!i.thicknessMap,combine:i.combine,vertexTangents:!!i.normalMap&&!!x.attributes.tangent,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,vertexUvs:!!i.map||!!i.bumpMap||!!i.normalMap||!!i.specularMap||!!i.alphaMap||!!i.emissiveMap||!!i.roughnessMap||!!i.metalnessMap||!!i.clearcoatMap||!!i.clearcoatRoughnessMap||!!i.clearcoatNormalMap||!!i.displacementMap||!!i.transmissionMap||!!i.thicknessMap||!!i.specularIntensityMap||!!i.specularColorMap||!!i.sheenColorMap||!!i.sheenRoughnessMap,uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmission>0||i.transmissionMap||i.thicknessMap||i.specularIntensityMap||i.specularColorMap||i.sheen>0||i.sheenColorMap||i.sheenRoughnessMap)&&!!i.displacementMap,fog:!!b,useFog:i.fog,fogExp2:b&&b.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===y.isSkinnedMesh&&M>0,maxBones:M,useVertexTexture:f,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:R,morphTextureStride:N,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.maxBones),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0);t.supportsVertexTextures&&s.enable(1);t.instancing&&s.enable(2);t.instancingColor&&s.enable(3);t.map&&s.enable(4);t.matcap&&s.enable(5);t.envMap&&s.enable(6);t.lightMap&&s.enable(7);t.aoMap&&s.enable(8);t.emissiveMap&&s.enable(9);t.bumpMap&&s.enable(10);t.normalMap&&s.enable(11);t.objectSpaceNormalMap&&s.enable(12);t.tangentSpaceNormalMap&&s.enable(13);t.clearcoat&&s.enable(14);t.clearcoatMap&&s.enable(15);t.clearcoatRoughnessMap&&s.enable(16);t.clearcoatNormalMap&&s.enable(17);t.displacementMap&&s.enable(18);t.specularMap&&s.enable(19);t.roughnessMap&&s.enable(20);t.metalnessMap&&s.enable(21);t.gradientMap&&s.enable(22);t.alphaMap&&s.enable(23);t.alphaTest&&s.enable(24);t.vertexColors&&s.enable(25);t.vertexAlphas&&s.enable(26);t.vertexUvs&&s.enable(27);t.vertexTangents&&s.enable(28);t.uvsVertexOnly&&s.enable(29);t.fog&&s.enable(30);e.push(s.mask),s.disableAll(),t.useFog&&s.enable(0);t.flatShading&&s.enable(1);t.logarithmicDepthBuffer&&s.enable(2);t.skinning&&s.enable(3);t.useVertexTexture&&s.enable(4);t.morphTargets&&s.enable(5);t.morphNormals&&s.enable(6);t.morphColors&&s.enable(7);t.premultipliedAlpha&&s.enable(8);t.shadowMapEnabled&&s.enable(9);t.physicallyCorrectLights&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.depthPacking&&s.enable(13);t.dithering&&s.enable(14);t.specularIntensityMap&&s.enable(15);t.specularColorMap&&s.enable(16);t.transmission&&s.enable(17);t.transmissionMap&&s.enable(18);t.thicknessMap&&s.enable(19);t.sheen&&s.enable(20);t.sheenColorMap&&s.enable(21);t.sheenRoughnessMap&&s.enable(22);t.decodeVideoTexture&&s.enable(23);t.opaque&&s.enable(24);e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=g[e.type];if(n){var r=ey[n];t=Iv.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,a=0,o=u.length;a<o;a++){var s=u[a];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new Zb(e,n,t,i),u.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function rx(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function ax(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ix(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ox(){var e=[],t=0,n=[],r=[],a=[];function i(n,r,a,i,o,s){var l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:a,groupOrder:i,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=a,l.groupOrder=i,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:a,init:function(){t=0,n.length=0,r.length=0,a.length=0},push:function(e,t,o,s,l,u){var c=i(e,t,o,s,l,u);o.transmission>0?r.push(c):!0===o.transparent?a.push(c):n.push(c)},unshift:function(e,t,o,s,l,u){var c=i(e,t,o,s,l,u);o.transmission>0?r.unshift(c):!0===o.transparent?a.unshift(c):n.unshift(c)},finish:function(){for(var n=t,r=e.length;n<r;n++){var a=e[n];if(null===a.id)break;a.id=null,a.object=null,a.geometry=null,a.material=null,a.group=null}},sort:function(e,t){n.length>1&&n.sort(e||ax),r.length>1&&r.sort(t||ix),a.length>1&&a.sort(t||ix)}}}function sx(){var e=new WeakMap;return{get:function(t,n){var r;return!1===e.has(t)?(r=new ox,e.set(t,[r])):n>=e.get(t).length?(r=new ox,e.get(t).push(r)):r=e.get(t)[n],r},dispose:function(){e=new WeakMap}}}function lx(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Dm,color:new wm};break;case"SpotLight":n={position:new Dm,direction:new Dm,color:new wm,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Dm,color:new wm,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Dm,skyColor:new wm,groundColor:new wm};break;case"RectAreaLight":n={color:new wm,position:new Dm,halfWidth:new Dm,halfHeight:new Dm}}return e[t.id]=n,n}}}var ux=0;function cx(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function hx(e,t){for(var n=new lx,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new om};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new om,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;i<9;i++)a.probe.push(new Dm);var o=new Dm,s=new fg,l=new fg;return{setup:function(i,o){for(var s=0,l=0,u=0,c=0;c<9;c++)a.probe[c].set(0,0,0);var h=0,f=0,d=0,p=0,m=0,g=0,v=0,y=0;i.sort(cx);for(var b=!0!==o?Math.PI:1,x=0,w=i.length;x<w;x++){var _=i[x],k=_.color,S=_.intensity,M=_.distance,T=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)s+=k.r*S*b,l+=k.g*S*b,u+=k.b*S*b;else if(_.isLightProbe)for(var E=0;E<9;E++)a.probe[E].addScaledVector(_.sh.coefficients[E],S);else if(_.isDirectionalLight){var A=n.get(_);if(A.color.copy(_.color).multiplyScalar(_.intensity*b),_.castShadow){var C=_.shadow,L=r.get(_);L.shadowBias=C.bias,L.shadowNormalBias=C.normalBias,L.shadowRadius=C.radius,L.shadowMapSize=C.mapSize,a.directionalShadow[h]=L,a.directionalShadowMap[h]=T,a.directionalShadowMatrix[h]=_.shadow.matrix,g++}a.directional[h]=A,h++}else if(_.isSpotLight){var R=n.get(_);if(R.position.setFromMatrixPosition(_.matrixWorld),R.color.copy(k).multiplyScalar(S*b),R.distance=M,R.coneCos=Math.cos(_.angle),R.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),R.decay=_.decay,_.castShadow){var N=_.shadow,P=r.get(_);P.shadowBias=N.bias,P.shadowNormalBias=N.normalBias,P.shadowRadius=N.radius,P.shadowMapSize=N.mapSize,a.spotShadow[d]=P,a.spotShadowMap[d]=T,a.spotShadowMatrix[d]=_.shadow.matrix,y++}a.spot[d]=R,d++}else if(_.isRectAreaLight){var I=n.get(_);I.color.copy(k).multiplyScalar(S),I.halfWidth.set(.5*_.width,0,0),I.halfHeight.set(0,.5*_.height,0),a.rectArea[p]=I,p++}else if(_.isPointLight){var D=n.get(_);if(D.color.copy(_.color).multiplyScalar(_.intensity*b),D.distance=_.distance,D.decay=_.decay,_.castShadow){var U=_.shadow,j=r.get(_);j.shadowBias=U.bias,j.shadowNormalBias=U.normalBias,j.shadowRadius=U.radius,j.shadowMapSize=U.mapSize,j.shadowCameraNear=U.camera.near,j.shadowCameraFar=U.camera.far,a.pointShadow[f]=j,a.pointShadowMap[f]=T,a.pointShadowMatrix[f]=_.shadow.matrix,v++}a.point[f]=D,f++}else if(_.isHemisphereLight){var O=n.get(_);O.skyColor.copy(_.color).multiplyScalar(S*b),O.groundColor.copy(_.groundColor).multiplyScalar(S*b),a.hemi[m]=O,m++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(a.rectAreaLTC1=$v.LTC_FLOAT_1,a.rectAreaLTC2=$v.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=$v.LTC_HALF_1,a.rectAreaLTC2=$v.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=s,a.ambient[1]=l,a.ambient[2]=u;var F=a.hash;F.directionalLength===h&&F.pointLength===f&&F.spotLength===d&&F.rectAreaLength===p&&F.hemiLength===m&&F.numDirectionalShadows===g&&F.numPointShadows===v&&F.numSpotShadows===y||(a.directional.length=h,a.spot.length=d,a.rectArea.length=p,a.point.length=f,a.hemi.length=m,a.directionalShadow.length=g,a.directionalShadowMap.length=g,a.pointShadow.length=v,a.pointShadowMap.length=v,a.spotShadow.length=y,a.spotShadowMap.length=y,a.directionalShadowMatrix.length=g,a.pointShadowMatrix.length=v,a.spotShadowMatrix.length=y,F.directionalLength=h,F.pointLength=f,F.spotLength=d,F.rectAreaLength=p,F.hemiLength=m,F.numDirectionalShadows=g,F.numPointShadows=v,F.numSpotShadows=y,a.version=ux++)},setupView:function(e,t){for(var n=0,r=0,i=0,u=0,c=0,h=t.matrixWorldInverse,f=0,d=e.length;f<d;f++){var p=e[f];if(p.isDirectionalLight){var m=a.directional[n];m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(h),n++}else if(p.isSpotLight){var g=a.spot[i];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),g.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),g.direction.sub(o),g.direction.transformDirection(h),i++}else if(p.isRectAreaLight){var v=a.rectArea[u];v.position.setFromMatrixPosition(p.matrixWorld),v.position.applyMatrix4(h),l.identity(),s.copy(p.matrixWorld),s.premultiply(h),l.extractRotation(s),v.halfWidth.set(.5*p.width,0,0),v.halfHeight.set(0,.5*p.height,0),v.halfWidth.applyMatrix4(l),v.halfHeight.applyMatrix4(l),u++}else if(p.isPointLight){var y=a.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var b=a.hemi[c];b.direction.setFromMatrixPosition(p.matrixWorld),b.direction.transformDirection(h),b.direction.normalize(),c++}}},state:a}}function fx(e,t){var n=new hx(e,t),r=[],a=[];return{init:function(){r.length=0,a.length=0},state:{lightsArray:r,shadowsArray:a,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){a.push(e)}}}function dx(e,t){var n=new WeakMap;return{get:function(r){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(a=new fx(e,t),n.set(r,[a])):i>=n.get(r).length?(a=new fx(e,t),n.get(r).push(a)):a=n.get(r)[i],a},dispose:function(){n=new WeakMap}}}var px=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="MeshDepthMaterial",r.depthPacking=3200,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Jg);px.prototype.isMeshDepthMaterial=!0;var mx=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="MeshDistanceMaterial",r.referencePosition=new Dm,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Jg);mx.prototype.isMeshDistanceMaterial=!0;function gx(e,t,n){var r=new Xv,a=new om,i=new om,o=new Em,s=new px({depthPacking:3201}),l=new mx,u={},c=n.maxTextureSize,h={0:1,1:0,2:2},f=new Dv({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new om},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;var p=new hv;p.setAttribute("position",new ev(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new Cv(p,f),g=this;function v(n,r){var a=t.update(m);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,f,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,d,m,null)}function y(t,n,r,a,i,o){var c=null,f=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(c=void 0!==f?f:!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){var d=c.uuid,p=n.uuid,m=u[d];void 0===m&&(m={},u[d]=m);var g=m[p];void 0===g&&(g=c.clone(),m[p]=g),c=g}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=3===o?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=a,c.farDistance=i),c}function b(n,a,i,o,s){if(!1!==n.visible){if(n.layers.test(a.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=u[d.materialIndex];if(p&&p.visible){var m=y(n,p,o,i.near,i.far,s);e.renderBufferDirect(i,null,l,m,n,d)}}else if(u.visible){var g=y(n,u,o,i.near,i.far,s);e.renderBufferDirect(i,null,l,g,n,null)}}for(var v=n.children,x=0,w=v.length;x<w;x++)b(v[x],a,i,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1!==g.enabled&&(!1!==g.autoUpdate||!1!==g.needsUpdate)&&0!==t.length){var l=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=t.length;d<p;d++){var m=t[d],y=m.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){a.copy(y.mapSize);var x=y.getFrameExtents();if(a.multiply(x),i.copy(y.mapSize),(a.x>c||a.y>c)&&(a.x>c&&(i.x=Math.floor(c/x.x),a.x=i.x*x.x,y.mapSize.x=i.x),a.y>c&&(i.y=Math.floor(c/x.y),a.y=i.y*x.y,y.mapSize.y=i.y)),null!==y.map||y.isPointLightShadow||3!==this.type||(y.map=new Am(a.x,a.y),y.map.texture.name=m.name+".shadowMap",y.mapPass=new Am(a.x,a.y),y.camera.updateProjectionMatrix()),null===y.map){var w={minFilter:Vd,magFilter:Vd,format:tp};y.map=new Am(a.x,a.y,w),y.map.texture.name=m.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var _=y.getViewportCount(),k=0;k<_;k++){var S=y.getViewport(k);o.set(i.x*S.x,i.y*S.y,i.x*S.z,i.y*S.w),f.viewport(o),y.updateMatrices(m,k),r=y.getFrustum(),b(n,s,y.camera,m,this.type)}y.isPointLightShadow||3!==this.type||v(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}g.needsUpdate=!1,e.setRenderTarget(l,u,h)}}}function vx(e,t,n){var r,a,i=n.isWebGL2;var o=new function(){var t=!1,n=new Em,r=null,a=new Em(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,i,o,s){!0===s&&(t*=o,r*=o,i*=o),n.set(t,r,i,o),!1===a.equals(n)&&(e.clearColor(t,r,i,o),a.copy(n))},reset:function(){t=!1,r=null,a.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,a=null;return{setTest:function(e){e?z(2929):H(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){t=!1,n=null,r=null,a=null}}},l=new function(){var t=!1,n=null,r=null,a=null,i=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?z(2960):H(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&a===n&&i===o||(e.stencilFunc(t,n,o),r=t,a=n,i=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,a=null,i=null,o=null,s=null,l=null,u=null}}},u={},c={},h=new WeakMap,f=[],d=null,p=!1,m=null,g=null,v=null,y=null,b=null,x=null,w=null,_=!1,k=null,S=null,M=null,E=null,A=null,C=e.getParameter(35661),L=!1,R=0,N=e.getParameter(7938);-1!==N.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(N)[1]),L=R>=1):-1!==N.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),L=R>=2);var P=null,I={},D=e.getParameter(3088),U=e.getParameter(2978),j=(new Em).fromArray(D),O=(new Em).fromArray(U);function F(t,n,r){var a=new Uint8Array(4),i=e.createTexture();e.bindTexture(t,i),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,a);return i}var B={};function z(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function H(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}B[3553]=F(3553,3553,1),B[34067]=F(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),z(2929),s.setFunc(3),K(!1),X(1),z(2884),q(0);var V=(T(r={},Id,32774),T(r,101,32778),T(r,102,32779),r);if(i)V[103]=32775,V[104]=32776;else{var G=t.get("EXT_blend_minmax");null!==G&&(V[103]=G.MIN_EXT,V[104]=G.MAX_EXT)}var W=(T(a={},200,0),T(a,201,1),T(a,202,768),T(a,204,770),T(a,210,776),T(a,208,774),T(a,206,772),T(a,203,769),T(a,205,771),T(a,209,775),T(a,207,773),a);function q(t,n,r,a,i,o,s,l){if(0!==t){if(!1===p&&(z(3042),p=!0),5===t)i=i||n,o=o||r,s=s||a,n===g&&i===b||(e.blendEquationSeparate(V[n],V[i]),g=n,b=i),r===v&&a===y&&o===x&&s===w||(e.blendFuncSeparate(W[r],W[a],W[o],W[s]),v=r,y=a,x=o,w=s),m=t,_=null;else if(t!==m||l!==_){if(g===Id&&b===Id||(e.blendEquation(32774),g=Id,b=Id),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,x=null,w=null,m=t,_=l}}else!0===p&&(H(3042),p=!1)}function K(t){k!==t&&(t?e.frontFace(2304):e.frontFace(2305),k=t)}function X(t){0!==t?(z(2884),t!==S&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):H(2884),S=t}function Y(t,n,r){t?(z(32823),E===n&&A===r||(e.polygonOffset(n,r),E=n,A=r)):H(32823)}function J(t){void 0===t&&(t=33984+C-1),P!==t&&(e.activeTexture(t),P=t)}return{buffers:{color:o,depth:s,stencil:l},enable:z,disable:H,bindFramebuffer:function(t,n){return c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,i&&(36009===t&&(c[36160]=n),36160===t&&(c[36009]=n)),!0)},drawBuffers:function(r,a){var i=f,o=!1;if(r)if(void 0===(i=h.get(a))&&(i=[],h.set(a,i)),r.isWebGLMultipleRenderTargets){var s=r.texture;if(i.length!==s.length||36064!==i[0]){for(var l=0,u=s.length;l<u;l++)i[l]=36064+l;i.length=s.length,o=!0}}else 36064!==i[0]&&(i[0]=36064,o=!0);else 1029!==i[0]&&(i[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(i):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(i))},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:q,setMaterial:function(e,t){2===e.side?H(2884):z(2884);var n=1===e.side;t&&(n=!n),K(n),1===e.blending&&!1===e.transparent?q(0):q(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var r=e.stencilWrite;l.setTest(r),r&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Y(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?z(32926):H(32926)},setFlipSided:K,setCullFace:X,setLineWidth:function(t){t!==M&&(L&&e.lineWidth(t),M=t)},setPolygonOffset:Y,setScissorTest:function(e){e?z(3089):H(3089)},activeTexture:J,bindTexture:function(t,n){null===P&&J();var r=I[P];void 0===r&&(r={type:void 0,texture:void 0},I[P]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||B[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=I[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===j.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),j.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===i&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},P=null,I={},c={},h=new WeakMap,f=[],d=null,p=!1,m=null,g=null,v=null,y=null,b=null,x=null,w=null,_=!1,k=null,S=null,M=null,E=null,A=null,j.set(0,0,e.canvas.width,e.canvas.height),O.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),l.reset()}}}function yx(e,t,n,r,a,i,o){var s,l,u,c=a.isWebGL2,h=a.maxTextures,f=a.maxCubemapSize,d=a.maxTextureSize,p=a.maxSamples,m=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,g=/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap,y=new WeakMap,b=!1;try{b="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(W){}function x(e,t){return b?new OffscreenCanvas(e,t):um("canvas")}function w(e,t,n,r){var a=1;if((e.width>r||e.height>r)&&(a=r/Math.max(e.width,e.height)),a<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var i=t?am:Math.floor,o=i(a*e.width),s=i(a*e.height);void 0===u&&(u=x(o,s));var l=n?x(o,s):u;return l.width=o,l.height=s,l.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function _(e){return nm(e.width)&&nm(e.height)}function k(e,t){return e.generateMipmaps&&t&&e.minFilter!==Vd&&e.minFilter!==qd}function S(t){e.generateMipmap(t)}function M(n,r,a,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;return 6403===r&&(5126===a&&(s=33326),5131===a&&(s=33325),5121===a&&(s=33321)),33319===r&&(5126===a&&(s=33328),5131===a&&(s=33327),5121===a&&(s=33323)),6408===r&&(5126===a&&(s=34836),5131===a&&(s=34842),5121===a&&(s=i===Op&&!1===o?35907:32856),32819===a&&(s=32854),32820===a&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function E(e,t,n){return!0===k(e,n)||e.isFramebufferTexture&&e.minFilter!==Vd&&e.minFilter!==qd?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function A(e){return e===Vd||e===Gd||e===Wd?9728:9729}function C(e){var t=e.target;t.removeEventListener("dispose",C),function(e){var t=r.get(e);if(void 0===t.__webglInit)return;var n=e.source,a=y.get(n);if(a){var i=a[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&R(e),0===Object.keys(a).length&&y.delete(n)}r.remove(e)}(t),t.isVideoTexture&&v.delete(t)}function L(t){var n=t.target;n.removeEventListener("dispose",L),function(t){var n=t.texture,a=r.get(t),i=r.get(n);void 0!==i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(a.__webglFramebuffer[s]),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer[s]);else e.deleteFramebuffer(a.__webglFramebuffer),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer),a.__webglMultisampledFramebuffer&&e.deleteFramebuffer(a.__webglMultisampledFramebuffer),a.__webglColorRenderbuffer&&e.deleteRenderbuffer(a.__webglColorRenderbuffer),a.__webglDepthRenderbuffer&&e.deleteRenderbuffer(a.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(var l=0,u=n.length;l<u;l++){var c=r.get(n[l]);c.__webglTexture&&(e.deleteTexture(c.__webglTexture),o.memory.textures--),r.remove(n[l])}r.remove(n),r.remove(t)}(n)}function R(t){var n=r.get(t);e.deleteTexture(n.__webglTexture);var a=t.source;delete y.get(a)[n.__cacheKey],o.memory.textures--}var N=0;function P(e,t){var a=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;v.get(e)!==t&&(v.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&a.__version!==e.version){var i=e.image;if(null===i)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==i.complete)return void O(a,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,a.__webglTexture)}var I=(T(s={},Bd,10497),T(s,zd,33071),T(s,Hd,33648),s),D=(T(l={},Vd,9728),T(l,Gd,9984),T(l,Wd,9986),T(l,qd,9729),T(l,Kd,9985),T(l,Xd,9987),l);function U(n,i,o){if(o?(e.texParameteri(n,10242,I[i.wrapS]),e.texParameteri(n,10243,I[i.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,I[i.wrapR]),e.texParameteri(n,10240,D[i.magFilter]),e.texParameteri(n,10241,D[i.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),i.wrapS===zd&&i.wrapT===zd||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,A(i.magFilter)),e.texParameteri(n,10241,A(i.minFilter)),i.minFilter!==Vd&&i.minFilter!==qd&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(i.type===Zd&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&i.type===$d&&!1===t.has("OES_texture_half_float_linear"))return;(i.anisotropy>1||r.get(i).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,a.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy)}}function j(t,n){var r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",C));var a=n.source,i=y.get(a);void 0===i&&(i={},y.set(a,i));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===i[s]&&(i[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),i[s].usedTimes++;var l=i[t.__cacheKey];void 0!==l&&(i[t.__cacheKey].usedTimes--,0===l.usedTimes&&R(n)),t.__cacheKey=s,t.__webglTexture=i[s].texture}return r}function O(t,r,a){var o=3553;r.isDataArrayTexture&&(o=35866),r.isData3DTexture&&(o=32879);var s=j(t,r),l=r.source;if(n.activeTexture(33984+a),n.bindTexture(o,t.__webglTexture),l.version!==l.__currentVersion||!0===s){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var u,h=function(e){return!c&&(e.wrapS!==zd||e.wrapT!==zd||e.minFilter!==Vd&&e.minFilter!==qd)}(r)&&!1===_(r.image),f=w(r.image,h,!1,d),p=_(f=G(r,f))||c,m=i.convert(r.format,r.encoding),g=i.convert(r.type),v=M(r.internalFormat,m,g,r.encoding,r.isVideoTexture);U(o,r,p);var y=r.mipmaps,b=c&&!0!==r.isVideoTexture,x=void 0===t.__version,T=E(r,f,p);if(r.isDepthTexture)v=6402,c?v=r.type===Zd?36012:r.type===Qd?33190:r.type===ep?35056:33189:r.type===Zd&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===np&&6402===v&&r.type!==Jd&&r.type!==Qd&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Jd,g=i.convert(r.type)),r.format===rp&&6402===v&&(v=34041,r.type!==ep&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=ep,g=i.convert(r.type))),b&&x?n.texStorage2D(3553,1,v,f.width,f.height):n.texImage2D(3553,0,v,f.width,f.height,0,m,g,null);else if(r.isDataTexture)if(y.length>0&&p){b&&x&&n.texStorage2D(3553,T,v,y[0].width,y[0].height);for(var A=0,C=y.length;A<C;A++)u=y[A],b?n.texSubImage2D(3553,A,0,0,u.width,u.height,m,g,u.data):n.texImage2D(3553,A,v,u.width,u.height,0,m,g,u.data);r.generateMipmaps=!1}else b?(x&&n.texStorage2D(3553,T,v,f.width,f.height),n.texSubImage2D(3553,0,0,0,f.width,f.height,m,g,f.data)):n.texImage2D(3553,0,v,f.width,f.height,0,m,g,f.data);else if(r.isCompressedTexture){b&&x&&n.texStorage2D(3553,T,v,y[0].width,y[0].height);for(var L=0,R=y.length;L<R;L++)u=y[L],r.format!==tp?null!==m?b?n.compressedTexSubImage2D(3553,L,0,0,u.width,u.height,m,u.data):n.compressedTexImage2D(3553,L,v,u.width,u.height,0,u.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):b?n.texSubImage2D(3553,L,0,0,u.width,u.height,m,g,u.data):n.texImage2D(3553,L,v,u.width,u.height,0,m,g,u.data)}else if(r.isDataArrayTexture)b?(x&&n.texStorage3D(35866,T,v,f.width,f.height,f.depth),n.texSubImage3D(35866,0,0,0,0,f.width,f.height,f.depth,m,g,f.data)):n.texImage3D(35866,0,v,f.width,f.height,f.depth,0,m,g,f.data);else if(r.isData3DTexture)b?(x&&n.texStorage3D(32879,T,v,f.width,f.height,f.depth),n.texSubImage3D(32879,0,0,0,0,f.width,f.height,f.depth,m,g,f.data)):n.texImage3D(32879,0,v,f.width,f.height,f.depth,0,m,g,f.data);else if(r.isFramebufferTexture)b&&x?n.texStorage2D(3553,T,v,f.width,f.height):n.texImage2D(3553,0,v,f.width,f.height,0,m,g,null);else if(y.length>0&&p){b&&x&&n.texStorage2D(3553,T,v,y[0].width,y[0].height);for(var N=0,P=y.length;N<P;N++)u=y[N],b?n.texSubImage2D(3553,N,0,0,m,g,u):n.texImage2D(3553,N,v,m,g,u);r.generateMipmaps=!1}else b?(x&&n.texStorage2D(3553,T,v,f.width,f.height),n.texSubImage2D(3553,0,0,0,m,g,f)):n.texImage2D(3553,0,v,m,g,f);k(r,p)&&S(o),l.__currentVersion=l.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function F(t,a,o,s,l){var u=i.convert(o.format,o.encoding),c=i.convert(o.type),h=M(o.internalFormat,u,c,o.encoding);r.get(a).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,a.width,a.height,a.depth,0,u,c,null):n.texImage2D(l,0,h,a.width,a.height,0,u,c,null)),n.bindFramebuffer(36160,t),V(a)?m.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(o).__webglTexture,0,H(a)):e.framebufferTexture2D(36160,s,l,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function B(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var a=33189;if(r||V(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===Zd?a=36012:o.type===Qd&&(a=33190));var s=H(n);V(n)?m.renderbufferStorageMultisampleEXT(36161,s,a,n.width,n.height):e.renderbufferStorageMultisample(36161,s,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var l=H(n);r&&!1===V(n)?e.renderbufferStorageMultisample(36161,l,35056,n.width,n.height):V(n)?m.renderbufferStorageMultisampleEXT(36161,l,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{var u=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,c=i.convert(u.format,u.encoding),h=i.convert(u.type),f=M(u.internalFormat,c,h,u.encoding),d=H(n);r&&!1===V(n)?e.renderbufferStorageMultisample(36161,d,f,n.width,n.height):V(n)?m.renderbufferStorageMultisampleEXT(36161,d,f,n.width,n.height):e.renderbufferStorage(36161,f,n.width,n.height)}e.bindRenderbuffer(36161,null)}function z(t){var a=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!a.__autoAllocateDepthBuffer){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,a){if(a&&a.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!a.depthTexture||!a.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(a.depthTexture).__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),P(a.depthTexture,0);var i=r.get(a.depthTexture).__webglTexture,o=H(a);if(a.depthTexture.format===np)V(a)?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,i,0,o):e.framebufferTexture2D(36160,36096,3553,i,0);else{if(a.depthTexture.format!==rp)throw new Error("Unknown depthTexture format");V(a)?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,i,0,o):e.framebufferTexture2D(36160,33306,3553,i,0)}}(a.__webglFramebuffer,t)}else if(i){a.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,a.__webglFramebuffer[o]),a.__webglDepthbuffer[o]=e.createRenderbuffer(),B(a.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,a.__webglFramebuffer),a.__webglDepthbuffer=e.createRenderbuffer(),B(a.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function H(e){return Math.min(p,e.samples)}function V(e){var n=r.get(e);return c&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function G(e,n){var r=e.encoding,a=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Wp||r!==jp&&(r===Op?!1===c?!0===t.has("EXT_sRGB")&&a===tp?(e.format=Wp,e.minFilter=qd,e.generateMipmaps=!1):n=_m.sRGBToLinear(n):a===tp&&i===Yd||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){var e=N;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),N+=1,e},this.resetTextureUnits=function(){N=0},this.setTexture2D=P,this.setTexture2DArray=function(e,t){var a=r.get(e);e.version>0&&a.__version!==e.version?O(a,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,a.__webglTexture))},this.setTexture3D=function(e,t){var a=r.get(e);e.version>0&&a.__version!==e.version?O(a,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,a.__webglTexture))},this.setTextureCube=function(t,a){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,a){if(6!==r.image.length)return;var o=j(t,r),s=r.source;if(n.activeTexture(33984+a),n.bindTexture(34067,t.__webglTexture),s.version!==s.__currentVersion||!0===o){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var l=r.isCompressedTexture||r.image[0].isCompressedTexture,u=r.image[0]&&r.image[0].isDataTexture,h=[],d=0;d<6;d++)h[d]=l||u?u?r.image[d].image:r.image[d]:w(r.image[d],!1,!0,f),h[d]=G(r,h[d]);var p,m=h[0],g=_(m)||c,v=i.convert(r.format,r.encoding),y=i.convert(r.type),b=M(r.internalFormat,v,y,r.encoding),x=c&&!0!==r.isVideoTexture,T=void 0===t.__version,A=E(r,m,g);if(U(34067,r,g),l){x&&T&&n.texStorage2D(34067,A,b,m.width,m.height);for(var C=0;C<6;C++){p=h[C].mipmaps;for(var L=0;L<p.length;L++){var R=p[L];r.format!==tp?null!==v?x?n.compressedTexSubImage2D(34069+C,L,0,0,R.width,R.height,v,R.data):n.compressedTexImage2D(34069+C,L,b,R.width,R.height,0,R.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):x?n.texSubImage2D(34069+C,L,0,0,R.width,R.height,v,y,R.data):n.texImage2D(34069+C,L,b,R.width,R.height,0,v,y,R.data)}}}else{p=r.mipmaps,x&&T&&(p.length>0&&A++,n.texStorage2D(34067,A,b,h[0].width,h[0].height));for(var N=0;N<6;N++)if(u){x?n.texSubImage2D(34069+N,0,0,0,h[N].width,h[N].height,v,y,h[N].data):n.texImage2D(34069+N,0,b,h[N].width,h[N].height,0,v,y,h[N].data);for(var P=0;P<p.length;P++){var I=p[P].image[N].image;x?n.texSubImage2D(34069+N,P+1,0,0,I.width,I.height,v,y,I.data):n.texImage2D(34069+N,P+1,b,I.width,I.height,0,v,y,I.data)}}else{x?n.texSubImage2D(34069+N,0,0,0,v,y,h[N]):n.texImage2D(34069+N,0,b,v,y,h[N]);for(var D=0;D<p.length;D++){var O=p[D];x?n.texSubImage2D(34069+N,D+1,0,0,v,y,O.image[N]):n.texImage2D(34069+N,D+1,b,v,y,O.image[N])}}}k(r,g)&&S(34067),s.__currentVersion=s.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(o,t,a):(n.activeTexture(33984+a),n.bindTexture(34067,o.__webglTexture))},this.rebindTextures=function(e,t,n){var a=r.get(e);void 0!==t&&F(a.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&z(e)},this.setupRenderTarget=function(t){var s=t.texture,l=r.get(t),u=r.get(s);t.addEventListener("dispose",L),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=s.version,o.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,d=_(t)||c;if(h){l.__webglFramebuffer=[];for(var p=0;p<6;p++)l.__webglFramebuffer[p]=e.createFramebuffer()}else if(l.__webglFramebuffer=e.createFramebuffer(),f)if(a.drawBuffers)for(var m=t.texture,g=0,v=m.length;g<v;g++){var y=r.get(m[g]);void 0===y.__webglTexture&&(y.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(c&&t.samples>0&&!1===V(t)){l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer);var b=i.convert(s.format,s.encoding),x=i.convert(s.type),w=M(s.internalFormat,b,x,s.encoding),T=H(t);e.renderbufferStorageMultisample(36161,T,w,t.width,t.height),n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),B(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}if(h){n.bindTexture(34067,u.__webglTexture),U(34067,s,d);for(var E=0;E<6;E++)F(l.__webglFramebuffer[E],t,s,36064,34069+E);k(s,d)&&S(34067),n.unbindTexture()}else if(f){for(var A=t.texture,C=0,R=A.length;C<R;C++){var N=A[C],P=r.get(N);n.bindTexture(3553,P.__webglTexture),U(3553,N,d),F(l.__webglFramebuffer,t,N,36064+C,3553),k(N,d)&&S(3553)}n.unbindTexture()}else{var I=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(c?I=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(I,u.__webglTexture),U(I,s,d),F(l.__webglFramebuffer,t,s,36064,I),k(s,d)&&S(I),n.unbindTexture()}t.depthBuffer&&z(t)},this.updateRenderTargetMipmap=function(e){for(var t=_(e)||c,a=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],i=0,o=a.length;i<o;i++){var s=a[i];if(k(s,t)){var l=e.isWebGLCubeRenderTarget?34067:3553,u=r.get(s).__webglTexture;n.bindTexture(l,u),S(l),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(c&&t.samples>0&&!1===V(t)){var a=t.width,i=t.height,o=16384,s=[36064],l=t.stencilBuffer?33306:36096;t.depthBuffer&&s.push(l);var u=r.get(t),h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;!1===h&&(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024)),n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer),!0===h&&(e.invalidateFramebuffer(36008,[l]),e.invalidateFramebuffer(36009,[l])),e.blitFramebuffer(0,0,a,i,0,0,a,i,o,9728),g&&e.invalidateFramebuffer(36008,s),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=z,this.setupFrameBufferTexture=F,this.useMultisampledRTT=V}function bx(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e===Yd)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1010===e)return 5120;if(1011===e)return 5122;if(e===Jd)return 5123;if(1013===e)return 5124;if(e===Qd)return 5125;if(e===Zd)return 5126;if(e===$d)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===e)return 6406;if(e===tp)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(e===np)return 6402;if(e===rp)return 34041;if(1028===e)return 6403;if(1022===e)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(e===Wp)return null!==(n=t.get("EXT_sRGB"))?n.SRGB_ALPHA_EXT:null;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1033===e)return 36249;if(e===ap||e===ip||e===op||e===sp)if(a===Op){if(null===(n=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(e===ap)return n.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===ip)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===op)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===sp)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===ap)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===ip)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===op)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===sp)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===lp||e===up||e===cp||e===hp){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===lp)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===up)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===cp)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===hp)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if(e===fp||e===dp){if(null===(n=t.get("WEBGL_compressed_texture_etc")))return null;if(e===fp)return a===Op?n.COMPRESSED_SRGB8_ETC2:n.COMPRESSED_RGB8_ETC2;if(e===dp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:n.COMPRESSED_RGBA8_ETC2_EAC}if(e===pp||e===mp||e===gp||e===vp||e===yp||e===bp||e===xp||e===wp||e===_p||e===kp||e===Sp||e===Mp||e===Tp||e===Ep){if(null===(n=t.get("WEBGL_compressed_texture_astc")))return null;if(e===pp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:n.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===mp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:n.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===gp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:n.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===vp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:n.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===yp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:n.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===bp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:n.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===xp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:n.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===wp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:n.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===_p)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:n.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===kp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:n.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===Sp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:n.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===Mp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:n.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===Tp)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:n.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===Ep)return a===Op?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:n.COMPRESSED_RGBA_ASTC_12x12_KHR}if(e===Ap){if(null===(n=t.get("EXT_texture_compression_bptc")))return null;if(e===Ap)return a===Op?n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:n.COMPRESSED_RGBA_BPTC_UNORM_EXT}return e===ep?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}var xx=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return k(this,n),(e=t.call(this)).cameras=r,e}return M(n)}(jv);xx.prototype.isArrayCamera=!0;var wx=function(e){v(n,e);var t=w(n);function n(){var e;return k(this,n),(e=t.call(this)).type="Group",e}return M(n)}(jg);wx.prototype.isGroup=!0;var _x={type:"move"},kx=function(){function e(){k(this,e),this._targetRay=null,this._grip=null,this._hand=null}return M(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new wx,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new wx,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Dm,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Dm),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new wx,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Dm,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Dm),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,a=null,i=null,o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==o&&null!==(r=t.getPose(e.targetRaySpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(_x)),l&&e.hand){i=!0;var u,c=g(e.hand.values());try{for(c.s();!(u=c.n()).done;){var h=u.value,f=t.getJointPose(h,n);if(void 0===l.joints[h.jointName]){var d=new wx;d.matrixAutoUpdate=!1,d.visible=!1,l.joints[h.jointName]=d,l.add(d)}var p=l.joints[h.jointName];null!==f&&(p.matrix.fromArray(f.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=f.radius),p.visible=null!==f}}catch(b){c.e(b)}finally{c.f()}var m=l.joints["index-finger-tip"],v=l.joints["thumb-tip"],y=m.position.distanceTo(v.position);l.inputState.pinching&&y>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&y<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(a=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(a.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),a.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(a.linearVelocity)):s.hasLinearVelocity=!1,a.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(a.angularVelocity)):s.hasAngularVelocity=!1);return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==a),null!==l&&(l.visible=null!==i),this}}]),e}(),Sx=function(e){v(n,e);var t=w(n);function n(e,r,a,i,o,s,l,u,c,h){var f;if(k(this,n),(h=void 0!==h?h:np)!==np&&h!==rp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===a&&h===np&&(a=Jd),void 0===a&&h===rp&&(a=ep),(f=t.call(this,null,i,o,s,l,u,h,a,c)).image={width:e,height:r},f.magFilter=void 0!==l?l:Vd,f.minFilter=void 0!==u?u:Vd,f.flipY=!1,f.generateMipmaps=!1,f}return M(n)}(Tm);Sx.prototype.isDepthTexture=!0;var Mx=function(e){v(n,e);var t=w(n);function n(e,r){var a;k(this,n);var i=b(a=t.call(this)),o=null,u=1,c=null,h="local-floor",f=null,d=null,p=null,m=null,g=null,v=r.getContextAttributes(),y=null,x=null,w=[],_=new Map,S=new jv;S.layers.enable(1),S.viewport=new Em;var M=new jv;M.layers.enable(2),M.viewport=new Em;var T=[S,M],E=new xx;E.layers.enable(1),E.layers.enable(2);var A=null,C=null;function L(e){var t=_.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function R(){_.forEach((function(e,t){e.disconnect(t)})),_.clear(),A=null,C=null,e.setRenderTarget(y),m=null,p=null,d=null,o=null,x=null,j.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function N(e){for(var t=o.inputSources,n=0;n<w.length;n++)_.set(t[n],w[n]);for(var r=0;r<e.removed.length;r++){var a=e.removed[r],i=_.get(a);i&&(i.dispatchEvent({type:"disconnected",data:a}),_.delete(a))}for(var s=0;s<e.added.length;s++){var l=e.added[s],u=_.get(l);u&&u.dispatchEvent({type:"connected",data:l})}}a.cameraAutoUpdate=!0,a.enabled=!1,a.isPresenting=!1,a.getController=function(e){var t=w[e];return void 0===t&&(t=new kx,w[e]=t),t.getTargetRaySpace()},a.getControllerGrip=function(e){var t=w[e];return void 0===t&&(t=new kx,w[e]=t),t.getGripSpace()},a.getHand=function(e){var t=w[e];return void 0===t&&(t=new kx,w[e]=t),t.getHandSpace()},a.setFramebufferScaleFactor=function(e){u=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},a.setReferenceSpaceType=function(e){h=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},a.getReferenceSpace=function(){return c},a.getBaseLayer=function(){return null!==p?p:m},a.getBinding=function(){return d},a.getFrame=function(){return g},a.getSession=function(){return o},a.setSession=function(){var t=s(l.mark((function t(n){var a,s,f,g,b;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(o=n)){t.next=24;break}if(y=e.getRenderTarget(),o.addEventListener("select",L),o.addEventListener("selectstart",L),o.addEventListener("selectend",L),o.addEventListener("squeeze",L),o.addEventListener("squeezestart",L),o.addEventListener("squeezeend",L),o.addEventListener("end",R),o.addEventListener("inputsourceschange",N),!0===v.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return void 0===o.renderState.layers||!1===e.capabilities.isWebGL2?(a={antialias:void 0!==o.renderState.layers||v.antialias,alpha:v.alpha,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:u},m=new XRWebGLLayer(o,r,a),o.updateRenderState({baseLayer:m}),x=new Am(m.framebufferWidth,m.framebufferHeight,{format:tp,type:Yd,encoding:e.outputEncoding})):(s=null,f=null,g=null,v.depth&&(g=v.stencil?35056:33190,s=v.stencil?rp:np,f=v.stencil?ep:Jd),b={colorFormat:e.outputEncoding===Op?35907:32856,depthFormat:g,scaleFactor:u},d=new XRWebGLBinding(o,r),p=d.createProjectionLayer(b),o.updateRenderState({layers:[p]}),x=new Am(p.textureWidth,p.textureHeight,{format:tp,type:Yd,depthTexture:new Sx(p.textureWidth,p.textureHeight,f,void 0,void 0,void 0,void 0,void 0,void 0,s),stencilBuffer:v.stencil,encoding:e.outputEncoding,samples:v.antialias?4:0}),e.properties.get(x).__ignoreDepthValues=p.ignoreDepthValues),x.isXRRenderTarget=!0,this.setFoveation(1),t.next=19,o.requestReferenceSpace(h);case 19:c=t.sent,j.setContext(o),j.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"});case 24:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var P=new Dm,I=new Dm;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}a.updateCamera=function(e){if(null!==o){E.near=M.near=S.near=e.near,E.far=M.far=S.far=e.far,A===E.near&&C===E.far||(o.updateRenderState({depthNear:E.near,depthFar:E.far}),A=E.near,C=E.far);var t=e.parent,n=E.cameras;D(E,t);for(var r=0;r<n.length;r++)D(n[r],t);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),e.position.copy(E.position),e.quaternion.copy(E.quaternion),e.scale.copy(E.scale),e.matrix.copy(E.matrix),e.matrixWorld.copy(E.matrixWorld);for(var a=e.children,i=0,s=a.length;i<s;i++)a[i].updateMatrixWorld(!0);2===n.length?function(e,t,n){P.setFromMatrixPosition(t.matrixWorld),I.setFromMatrixPosition(n.matrixWorld);var r=P.distanceTo(I),a=t.projectionMatrix.elements,i=n.projectionMatrix.elements,o=a[14]/(a[10]-1),s=a[14]/(a[10]+1),l=(a[9]+1)/a[5],u=(a[9]-1)/a[5],c=(a[8]-1)/a[0],h=(i[8]+1)/i[0],f=o*c,d=o*h,p=r/(-c+h),m=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var g=o+p,v=s+p,y=f-m,b=d+(r-m),x=l*s/v*g,w=u*s/v*g;e.projectionMatrix.makePerspective(y,b,x,w,g,v)}(E,S,M):E.projectionMatrix.copy(S.projectionMatrix)}},a.getCamera=function(){return E},a.getFoveation=function(){return null!==p?p.fixedFoveation:null!==m?m.fixedFoveation:void 0},a.setFoveation=function(e){null!==p&&(p.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)};var U=null;var j=new Yv;return j.setAnimationLoop((function(t,n){if(f=n.getViewerPose(c),g=n,null!==f){var r=f.views;null!==m&&(e.setRenderTargetFramebuffer(x,m.framebuffer),e.setRenderTarget(x));var a=!1;r.length!==E.cameras.length&&(E.cameras.length=0,a=!0);for(var i=0;i<r.length;i++){var s=r[i],l=null;if(null!==m)l=m.getViewport(s);else{var u=d.getViewSubImage(p,s);l=u.viewport,0===i&&(e.setRenderTargetTextures(x,u.colorTexture,p.ignoreDepthValues?void 0:u.depthStencilTexture),e.setRenderTarget(x))}var h=T[i];h.matrix.fromArray(s.transform.matrix),h.projectionMatrix.fromArray(s.projectionMatrix),h.viewport.set(l.x,l.y,l.width,l.height),0===i&&E.matrix.copy(h.matrix),!0===a&&E.cameras.push(h)}}for(var v=o.inputSources,y=0;y<w.length;y++){var b=w[y],_=v[y];b.update(_,n,c)}U&&U(t,n),g=null})),a.setAnimationLoop=function(e){U=e},a.dispose=function(){},a}return M(n)}(qp);function Tx(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);var a,i,o=t.get(r).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;var s=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*s}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.roughnessMap?a=r.roughnessMap:r.metalnessMap?a=r.metalnessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap?a=r.emissiveMap:r.clearcoatMap?a=r.clearcoatMap:r.clearcoatNormalMap?a=r.clearcoatNormalMap:r.clearcoatRoughnessMap?a=r.clearcoatRoughnessMap:r.specularIntensityMap?a=r.specularIntensityMap:r.specularColorMap?a=r.specularColorMap:r.transmissionMap?a=r.transmissionMap:r.thicknessMap?a=r.thicknessMap:r.sheenColorMap?a=r.sheenColorMap:r.sheenRoughnessMap&&(a=r.sheenRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uvTransform.value.copy(a.matrix)),r.aoMap?i=r.aoMap:r.lightMap&&(i=r.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),n.uv2Transform.value.copy(i.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,a,i,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var a;t.map?a=t.map:t.alphaMap&&(a=t.alphaMap);void 0!==a&&(!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uvTransform.value.copy(a.matrix))}(e,r,a,i):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Ex(){var e=um("canvas");return e.style.display="block",e}function Ax(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=void 0!==t.canvas?t.canvas:Ex(),r=void 0!==t.context?t.context:null,a=void 0===t.depth||t.depth,i=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,u=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;e=void 0!==t.context?r.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;var h=null,f=null,d=[],p=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=jp,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var m=this,g=!1,v=0,y=0,b=null,x=-1,w=null,_=new Em,k=new Em,S=null,M=n.width,T=n.height,E=1,A=null,C=null,L=new Em(0,0,M,T),R=new Em(0,0,M,T),N=!1,P=new Xv,I=!1,D=!1,U=null,j=new fg,O=new om,F=new Dm,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function z(){return null===b?E:1}var H,V,G,W,q,K,X,Y,J,Q,Z,$,ee,te,ne,re,ae,ie,oe,se,le,ue,ce,he=r;function fe(e,t){for(var r=0;r<e.length;r++){var a=e[r],i=n.getContext(a,t);if(null!==i)return i}return null}try{var de={alpha:!0,depth:a,stencil:i,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r".concat(Td)),n.addEventListener("webglcontextlost",ve,!1),n.addEventListener("webglcontextrestored",ye,!1),null===he){var pe=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&pe.shift(),null===(he=fe(pe,de)))throw fe(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(je){throw console.error("THREE.WebGLRenderer: "+je.message),je}function me(){H=new _y(he),V=new ay(he,H,t),H.init(V),ue=new bx(he,H,V),G=new vx(he,H,V),W=new My(he),q=new rx,K=new yx(he,H,G,q,V,ue,W),X=new oy(m),Y=new wy(m),J=new Jv(he,V),ce=new ny(he,H,J,V),Q=new ky(he,J,W,ce),Z=new Ly(he,Q,J,W),oe=new Cy(he,V,K),re=new iy(q),$=new nx(m,X,Y,H,V,ce,re),ee=new Tx(m,q),te=new sx,ne=new dx(H,V),ie=new ty(m,X,G,Z,e,s),ae=new gx(m,Z,V),se=new ry(he,H,W,V),le=new Sy(he,H,W,V),W.programs=$.programs,m.capabilities=V,m.extensions=H,m.properties=q,m.renderLists=te,m.shadowMap=ae,m.state=G,m.info=W}me();var ge=new Mx(m,he);function ve(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;var e=W.autoReset,t=ae.enabled,n=ae.autoUpdate,r=ae.needsUpdate,a=ae.type;me(),W.autoReset=e,ae.enabled=t,ae.autoUpdate=n,ae.needsUpdate=r,ae.type=a}function be(e){var t=e.target;t.removeEventListener("dispose",be),xe(t)}function xe(e){we(e),q.remove(e)}function we(e){var t=q.get(e).programs;void 0!==t&&(t.forEach((function(e){$.releaseProgram(e)})),e.isShaderMaterial&&$.releaseShaderCache(e))}this.xr=ge,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){var e=H.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=H.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(e){void 0!==e&&(E=e,this.setSize(M,T,!1))},this.getSize=function(e){return e.set(M,T)},this.setSize=function(e,t,r){ge.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(M=e,T=t,n.width=Math.floor(e*E),n.height=Math.floor(t*E),!1!==r&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(M*E,T*E).floor()},this.setDrawingBufferSize=function(e,t,r){M=e,T=t,E=r,n.width=Math.floor(e*r),n.height=Math.floor(t*r),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(_)},this.getViewport=function(e){return e.copy(L)},this.setViewport=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),G.viewport(_.copy(L).multiplyScalar(E).floor())},this.getScissor=function(e){return e.copy(R)},this.setScissor=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),G.scissor(k.copy(R).multiplyScalar(E).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(e){G.setScissorTest(N=e)},this.setOpaqueSort=function(e){A=e},this.setTransparentSort=function(e){C=e},this.getClearColor=function(e){return e.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",ve,!1),n.removeEventListener("webglcontextrestored",ye,!1),te.dispose(),ne.dispose(),q.dispose(),X.dispose(),Y.dispose(),Z.dispose(),ce.dispose(),$.dispose(),ge.dispose(),ge.removeEventListener("sessionstart",Se),ge.removeEventListener("sessionend",Me),U&&(U.dispose(),U=null),Te.stop()},this.renderBufferDirect=function(e,t,n,r,a,i){null===t&&(t=B);var o=a.isMesh&&a.matrixWorld.determinant()<0,s=Ie(e,t,n,r,a);G.setMaterial(r,o);var l=n.index,u=n.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;var c,h=1;!0===r.wireframe&&(l=Q.getWireframeAttribute(n),h=2),ce.setup(a,r,s,n,l);var f=se;null!==l&&(c=J.get(l),(f=le).setIndex(c));var d=null!==l?l.count:u.count,p=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==i?i.start*h:0,v=null!==i?i.count*h:1/0,y=Math.max(p,g),b=Math.min(d,p+m,g+v)-1,x=Math.max(0,b-y+1);if(0!==x){if(a.isMesh)!0===r.wireframe?(G.setLineWidth(r.wireframeLinewidth*z()),f.setMode(1)):f.setMode(4);else if(a.isLine){var w=r.linewidth;void 0===w&&(w=1),G.setLineWidth(w*z()),a.isLineSegments?f.setMode(1):a.isLineLoop?f.setMode(2):f.setMode(3)}else a.isPoints?f.setMode(0):a.isSprite&&f.setMode(4);if(a.isInstancedMesh)f.renderInstances(y,x,a.count);else if(n.isInstancedBufferGeometry){var _=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(y,x,_)}else f.render(y,x)}},this.compile=function(e,t){(f=ne.get(e)).init(),p.push(f),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))})),f.setupLights(m.physicallyCorrectLights),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++){Ne(n[r],e,t)}else Ne(n,e,t)})),p.pop(),f=null};var _e=null;function ke(e){_e&&_e(e)}function Se(){Te.stop()}function Me(){Te.start()}var Te=new Yv;function Ee(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||P.intersectsSprite(e)){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);var a=Z.update(e),i=e.material;i.visible&&h.push(e,a,i,n,F.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||P.intersectsObject(e))){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);var o=Z.update(e),s=e.material;if(Array.isArray(s))for(var l=o.groups,u=0,c=l.length;u<c;u++){var d=l[u],p=s[d.materialIndex];p&&p.visible&&h.push(e,o,p,n,F.z,d)}else s.visible&&h.push(e,o,s,n,F.z,null)}for(var m=e.children,g=0,v=m.length;g<v;g++)Ee(m[g],t,n,r)}}function Ae(e,t,n,r){var a=e.opaque,i=e.transmissive,o=e.transparent;f.setupLightsView(n),i.length>0&&Ce(a,t,n),r&&G.viewport(_.copy(r)),a.length>0&&Le(a,t,n),i.length>0&&Le(i,t,n),o.length>0&&Le(o,t,n),G.buffers.depth.setTest(!0),G.buffers.depth.setMask(!0),G.buffers.color.setMask(!0),G.setPolygonOffset(!1)}function Ce(e,t,n){var r=V.isWebGL2;null===U&&(U=new Am(1,1,{generateMipmaps:!0,type:null!==ue.convert($d)?$d:Yd,minFilter:Xd,samples:r&&!0===o?4:0})),m.getDrawingBufferSize(O),r?U.setSize(O.x,O.y):U.setSize(am(O.x),am(O.y));var a=m.getRenderTarget();m.setRenderTarget(U),m.clear();var i=m.toneMapping;m.toneMapping=0,Le(e,t,n),m.toneMapping=i,K.updateMultisampleRenderTarget(U),K.updateRenderTargetMipmap(U),m.setRenderTarget(a)}function Le(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,a=0,i=e.length;a<i;a++){var o=e[a],s=o.object,l=o.geometry,u=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&Re(s,t,n,l,u,c)}}function Re(e,t,n,r,a,i){e.onBeforeRender(m,t,n,r,a,i),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),a.onBeforeRender(m,t,n,r,e,i),!0===a.transparent&&2===a.side?(a.side=1,a.needsUpdate=!0,m.renderBufferDirect(n,t,r,a,e,i),a.side=0,a.needsUpdate=!0,m.renderBufferDirect(n,t,r,a,e,i),a.side=2):m.renderBufferDirect(n,t,r,a,e,i),e.onAfterRender(m,t,n,r,a,i)}function Ne(e,t,n){!0!==t.isScene&&(t=B);var r=q.get(e),a=f.state.lights,i=f.state.shadowsArray,o=a.state.version,s=$.getParameters(e,a.state,i,t,n),l=$.getProgramCacheKey(s),u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Y:X).get(e.envMap||r.environment),void 0===u&&(e.addEventListener("dispose",be),u=new Map,r.programs=u);var c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Pe(e,s),c}else s.uniforms=$.getUniforms(e),e.onBuild(n,s,m),e.onBeforeCompile(s,m),c=$.acquireProgram(s,l),u.set(l,c),r.uniforms=s.uniforms;var h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=re.uniform),Pe(e,s),r.needsLights=Ue(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=a.state.ambient,h.lightProbe.value=a.state.probe,h.directionalLights.value=a.state.directional,h.directionalLightShadows.value=a.state.directionalShadow,h.spotLights.value=a.state.spot,h.spotLightShadows.value=a.state.spotShadow,h.rectAreaLights.value=a.state.rectArea,h.ltc_1.value=a.state.rectAreaLTC1,h.ltc_2.value=a.state.rectAreaLTC2,h.pointLights.value=a.state.point,h.pointLightShadows.value=a.state.pointShadow,h.hemisphereLights.value=a.state.hemi,h.directionalShadowMap.value=a.state.directionalShadowMap,h.directionalShadowMatrix.value=a.state.directionalShadowMatrix,h.spotShadowMap.value=a.state.spotShadowMap,h.spotShadowMatrix.value=a.state.spotShadowMatrix,h.pointShadowMap.value=a.state.pointShadowMap,h.pointShadowMatrix.value=a.state.pointShadowMatrix);var d=c.getUniforms(),p=Ib.seqWithValue(d.seq,h);return r.currentProgram=c,r.uniformsList=p,c}function Pe(e,t){var n=q.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function Ie(e,t,n,r,a){!0!==t.isScene&&(t=B),K.resetTextureUnits();var i=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===b?m.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:jp,l=(r.isMeshStandardMaterial?Y:X).get(r.envMap||o),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,g=r.toneMapped?m.toneMapping:0,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==v?v.length:0,_=q.get(r),k=f.state.lights;if(!0===I&&(!0===D||e!==w)){var S=e===w&&r.id===x;re.setState(r,e,S)}var M=!1;r.version===_.__version?_.needsLights&&_.lightsStateVersion!==k.state.version||_.outputEncoding!==s||a.isInstancedMesh&&!1===_.instancing?M=!0:a.isInstancedMesh||!0!==_.instancing?a.isSkinnedMesh&&!1===_.skinning?M=!0:a.isSkinnedMesh||!0!==_.skinning?_.envMap!==l||r.fog&&_.fog!==i?M=!0:void 0===_.numClippingPlanes||_.numClippingPlanes===re.numPlanes&&_.numIntersection===re.numIntersection?(_.vertexAlphas!==u||_.vertexTangents!==c||_.morphTargets!==h||_.morphNormals!==d||_.morphColors!==p||_.toneMapping!==g||!0===V.isWebGL2&&_.morphTargetsCount!==y)&&(M=!0):M=!0:M=!0:M=!0:(M=!0,_.__version=r.version);var A=_.currentProgram;!0===M&&(A=Ne(r,t,a));var C=!1,L=!1,R=!1,N=A.getUniforms(),P=_.uniforms;if(G.useProgram(A.program)&&(C=!0,L=!0,R=!0),r.id!==x&&(x=r.id,L=!0),C||w!==e){if(N.setValue(he,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&N.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,L=!0,R=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var j=N.map.cameraPosition;void 0!==j&&j.setValue(he,F.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&N.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||a.isSkinnedMesh)&&N.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(a.isSkinnedMesh){N.setOptional(he,a,"bindMatrix"),N.setOptional(he,a,"bindMatrixInverse");var O=a.skeleton;O&&(V.floatVertexTextures?(null===O.boneTexture&&O.computeBoneTexture(),N.setValue(he,"boneTexture",O.boneTexture,K),N.setValue(he,"boneTextureSize",O.boneTextureSize)):N.setOptional(he,O,"boneMatrices"))}var z=n.morphAttributes;return(void 0!==z.position||void 0!==z.normal||void 0!==z.color&&!0===V.isWebGL2)&&oe.update(a,n,r,A),(L||_.receiveShadow!==a.receiveShadow)&&(_.receiveShadow=a.receiveShadow,N.setValue(he,"receiveShadow",a.receiveShadow)),L&&(N.setValue(he,"toneMappingExposure",m.toneMappingExposure),_.needsLights&&De(P,R),i&&r.fog&&ee.refreshFogUniforms(P,i),ee.refreshMaterialUniforms(P,r,E,T,U),Ib.upload(he,_.uniformsList,P,K)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Ib.upload(he,_.uniformsList,P,K),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&N.setValue(he,"center",a.center),N.setValue(he,"modelViewMatrix",a.modelViewMatrix),N.setValue(he,"normalMatrix",a.normalMatrix),N.setValue(he,"modelMatrix",a.matrixWorld),A}function De(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Ue(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Te.setAnimationLoop(ke),"undefined"!==typeof self&&Te.setContext(self),this.setAnimationLoop=function(e){_e=e,ge.setAnimationLoop(e),null===e?Te.stop():Te.start()},ge.addEventListener("sessionstart",Se),ge.addEventListener("sessionend",Me),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==g){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===ge.enabled&&!0===ge.isPresenting&&(!0===ge.cameraAutoUpdate&&ge.updateCamera(t),t=ge.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,b),(f=ne.get(e,p.length)).init(),p.push(f),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),P.setFromProjectionMatrix(j),D=this.localClippingEnabled,I=re.init(this.clippingPlanes,D,t),(h=te.get(e,d.length)).init(),d.push(h),Ee(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(A,C),!0===I&&re.beginShadows();var n=f.state.shadowsArray;if(ae.render(n,e,t),!0===I&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),ie.render(h,e),f.setupLights(m.physicallyCorrectLights),t.isArrayCamera)for(var r=t.cameras,a=0,i=r.length;a<i;a++){var o=r[a];Ae(h,e,o,o.viewport)}else Ae(h,e,t);null!==b&&(K.updateMultisampleRenderTarget(b),K.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(m,e,t),ce.resetDefaultState(),x=-1,w=null,p.pop(),f=p.length>0?p[p.length-1]:null,d.pop(),h=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,n){q.get(e.texture).__webglTexture=t,q.get(e.depthTexture).__webglTexture=n;var r=q.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===H.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,v=t,y=n;var r=!0;if(e){var a=q.get(e);void 0!==a.__useDefaultFramebuffer?(G.bindFramebuffer(36160,null),r=!1):void 0===a.__webglFramebuffer?K.setupRenderTarget(e):a.__hasExternalTextures&&K.rebindTextures(e,q.get(e.texture).__webglTexture,q.get(e.depthTexture).__webglTexture)}var i=null,o=!1,s=!1;if(e){var l=e.texture;(l.isData3DTexture||l.isDataArrayTexture)&&(s=!0);var u=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=u[t],o=!0):i=V.isWebGL2&&e.samples>0&&!1===K.useMultisampledRTT(e)?q.get(e).__webglMultisampledFramebuffer:u,_.copy(e.viewport),k.copy(e.scissor),S=e.scissorTest}else _.copy(L).multiplyScalar(E).floor(),k.copy(R).multiplyScalar(E).floor(),S=N;var c=G.bindFramebuffer(36160,i);if(c&&V.drawBuffers&&r&&G.drawBuffers(e,i),G.viewport(_),G.scissor(k),G.setScissorTest(S),o){var h=q.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,h.__webglTexture,n)}else if(s){var f=q.get(e.texture),d=t||0;he.framebufferTextureLayer(36160,36064,f.__webglTexture,n||0,d)}x=-1},this.readRenderTargetPixels=function(e,t,n,r,a,i,o){if(e&&e.isWebGLRenderTarget){var s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){G.bindFramebuffer(36160,s);try{var l=e.texture,u=l.format,c=l.type;if(u!==tp&&ue.convert(u)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===$d&&(H.has("EXT_color_buffer_half_float")||V.isWebGL2&&H.has("EXT_color_buffer_float"));if(c!==Yd&&ue.convert(c)!==he.getParameter(35738)&&(c!==Zd||!(V.isWebGL2||H.has("OES_texture_float")||H.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-a&&he.readPixels(t,n,r,a,ue.convert(u),ue.convert(c),i)}finally{var f=null!==b?q.get(b).__webglFramebuffer:null;G.bindFramebuffer(36160,f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!0===t.isFramebufferTexture){var r=Math.pow(2,-n),a=Math.floor(t.image.width*r),i=Math.floor(t.image.height*r);K.setTexture2D(t,0),he.copyTexSubImage2D(3553,n,0,0,e.x,e.y,a,i),G.unbindTexture()}else console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.")},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.image.width,i=t.image.height,o=ue.convert(n.format),s=ue.convert(n.type);K.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,a,i,o,s,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),G.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var i,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,u=ue.convert(r.format),c=ue.convert(r.type);if(r.isData3DTexture)K.setTexture3D(r,0),i=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");K.setTexture2DArray(r,0),i=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);var h=he.getParameter(3314),f=he.getParameter(32878),d=he.getParameter(3316),p=he.getParameter(3315),g=he.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,v.width),he.pixelStorei(32878,v.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?he.texSubImage3D(i,a,t.x,t.y,t.z,o,s,l,u,c,v.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(i,a,t.x,t.y,t.z,o,s,l,u,v.data)):he.texSubImage3D(i,a,t.x,t.y,t.z,o,s,l,u,c,v),he.pixelStorei(3314,h),he.pixelStorei(32878,f),he.pixelStorei(3316,d),he.pixelStorei(3315,p),he.pixelStorei(32877,g),0===a&&r.generateMipmaps&&he.generateMipmap(i),G.unbindTexture()}},this.initTexture=function(e){K.setTexture2D(e,0),G.unbindTexture()},this.resetState=function(){v=0,y=0,b=null,G.reset(),ce.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Ax.prototype.isWebGLRenderer=!0;var Cx=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n)}(Ax);Cx.prototype.isWebGL1Renderer=!0;var Lx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;k(this,e),this.name="",this.color=new wm(t),this.density=n}return M(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}();Lx.prototype.isFogExp2=!0;var Rx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;k(this,e),this.name="",this.color=new wm(t),this.near=n,this.far=r}return M(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}();Rx.prototype.isFog=!0;var Nx=function(e){v(n,e);var t=w(n);function n(){var e;return k(this,n),(e=t.call(this)).type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:b(e)})),e}return M(n,[{key:"copy",value:function(e,t){return m(d(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=m(d(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(jg);Nx.prototype.isScene=!0;var Px=function(){function e(t,n){k(this,e),this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=Hp,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Zp()}return M(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Zp()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Zp()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();Px.prototype.isInterleavedBuffer=!0;var Ix=new Dm,Dx=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];k(this,e),this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===a}return M(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Ix.fromBufferAttribute(this,t),Ix.applyMatrix4(e),this.setXYZ(t,Ix.x,Ix.y,Ix.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Ix.fromBufferAttribute(this,t),Ix.applyNormalMatrix(e),this.setXYZ(t,Ix.x,Ix.y,Ix.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Ix.fromBufferAttribute(this,t),Ix.transformDirection(e),this.setXYZ(t,Ix.x,Ix.y,Ix.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=a,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var a=r*this.data.stride+this.offset,i=0;i<this.itemSize;i++)n.push(this.data.array[a+i]);return new ev(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,a=0;a<this.itemSize;a++)t.push(this.data.array[r+a]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();Dx.prototype.isInterleavedBufferAttribute=!0;var Ux,jx=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="SpriteMaterial",r.color=new wm(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(Jg);jx.prototype.isSpriteMaterial=!0;var Ox=new Dm,Fx=new Dm,Bx=new Dm,zx=new om,Hx=new om,Vx=new fg,Gx=new Dm,Wx=new Dm,qx=new Dm,Kx=new om,Xx=new om,Yx=new om,Jx=function(e){v(n,e);var t=w(n);function n(e){var r;if(k(this,n),(r=t.call(this)).type="Sprite",void 0===Ux){Ux=new hv;var a=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Px(a,5);Ux.setIndex([0,1,2,0,2,3]),Ux.setAttribute("position",new Dx(i,3,0,!1)),Ux.setAttribute("uv",new Dx(i,2,3,!1))}return r.geometry=Ux,r.material=void 0!==e?e:new jx,r.center=new om(.5,.5),r}return M(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fx.setFromMatrixScale(this.matrixWorld),Vx.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Bx.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Fx.multiplyScalar(-Bx.z);var n,r,a=this.material.rotation;0!==a&&(r=Math.cos(a),n=Math.sin(a));var i=this.center;Qx(Gx.set(-.5,-.5,0),Bx,i,Fx,n,r),Qx(Wx.set(.5,-.5,0),Bx,i,Fx,n,r),Qx(qx.set(.5,.5,0),Bx,i,Fx,n,r),Kx.set(0,0),Xx.set(1,0),Yx.set(1,1);var o=e.ray.intersectTriangle(Gx,Wx,qx,!1,Ox);if(null!==o||(Qx(Wx.set(-.5,.5,0),Bx,i,Fx,n,r),Xx.set(0,1),null!==(o=e.ray.intersectTriangle(Gx,qx,Wx,!1,Ox)))){var s=e.ray.origin.distanceTo(Ox);s<e.near||s>e.far||t.push({distance:s,point:Ox.clone(),uv:Xg.getUV(Ox,Gx,Wx,qx,Kx,Xx,Yx,new om),face:null,object:this})}}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(jg);function Qx(e,t,n,r,a,i){zx.subVectors(e,n).addScalar(.5).multiply(r),void 0!==a?(Hx.x=i*zx.x-a*zx.y,Hx.y=a*zx.x+i*zx.y):Hx.copy(zx),e.copy(t),e.x+=Hx.x,e.y+=Hx.y,e.applyMatrix4(Vx)}Jx.prototype.isSprite=!0;var Zx=new Dm,$x=new Em,ew=new Em,tw=new Dm,nw=new fg,rw=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this,e,r)).type="SkinnedMesh",a.bindMode="attached",a.bindMatrix=new fg,a.bindMatrixInverse=new fg,a}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Em,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);var a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){m(d(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;$x.fromBufferAttribute(r.attributes.skinIndex,e),ew.fromBufferAttribute(r.attributes.skinWeight,e),Zx.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var a=0;a<4;a++){var i=ew.getComponent(a);if(0!==i){var o=$x.getComponent(a);nw.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(tw.copy(Zx).applyMatrix4(nw),i)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(Cv);rw.prototype.isSkinnedMesh=!0;var aw=function(e){v(n,e);var t=w(n);function n(){var e;return k(this,n),(e=t.call(this)).type="Bone",e}return M(n)}(jg);aw.prototype.isBone=!0;var iw=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Vd,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Vd,d=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return k(this,n),(e=t.call(this,null,l,u,c,h,f,o,s,d,p)).image={data:r,width:a,height:i},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return M(n)}(Tm);iw.prototype.isDataTexture=!0;var ow=new fg,sw=new fg,lw=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];k(this,e),this.uuid=Zp(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return M(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new fg)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new fg;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,a=this.bones.length;r<a;r++){var i=this.bones[r];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,a=0,i=e.length;a<i;a++){var o=e[a]?e[a].matrixWorld:sw;ow.multiplyMatrices(o,t[a]),ow.toArray(n,16*a)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=rm(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new iw(t,e,e,tp,Zd);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var a=e.bones[n],i=t[a];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),i=new aw),this.bones.push(i),this.boneInverses.push((new fg).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,a=t.length;r<a;r++){var i=t[r];e.bones.push(i.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),uw=function(e){v(n,e);var t=w(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return k(this,n),"number"===typeof a&&(o=a,a=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(i=t.call(this,e,r,a)).meshPerAttribute=o,i}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(ev);uw.prototype.isInstancedBufferAttribute=!0;var cw=new fg,hw=new fg,fw=[],dw=new Cv,pw=function(e){v(n,e);var t=w(n);function n(e,r,a){var i;return k(this,n),(i=t.call(this,e,r)).instanceMatrix=new uw(new Float32Array(16*a),16),i.instanceColor=null,i.count=a,i.frustumCulled=!1,i}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(dw.geometry=this.geometry,dw.material=this.material,void 0!==dw.material)for(var a=0;a<r;a++){this.getMatrixAt(a,cw),hw.multiplyMatrices(n,cw),dw.matrixWorld=hw,dw.raycast(e,fw);for(var i=0,o=fw.length;i<o;i++){var s=fw[i];s.instanceId=a,s.object=this,t.push(s)}fw.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new uw(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Cv);pw.prototype.isInstancedMesh=!0;var mw=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="LineBasicMaterial",r.color=new wm(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}]),n}(Jg);mw.prototype.isLineBasicMaterial=!0;var gw=new Dm,vw=new Dm,yw=new fg,bw=new hg,xw=new rg,ww=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hv,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mw;return k(this,n),(e=t.call(this)).type="Line",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,a=t.count;r<a;r++)gw.fromBufferAttribute(t,r-1),vw.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=gw.distanceTo(vw);e.setAttribute("lineDistance",new rv(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),xw.copy(n.boundingSphere),xw.applyMatrix4(r),xw.radius+=a,!1!==e.ray.intersectsSphere(xw)){yw.copy(r).invert(),bw.copy(e.ray).applyMatrix4(yw);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new Dm,u=new Dm,c=new Dm,h=new Dm,f=this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,p=n.attributes.position;if(null!==d)for(var m=Math.max(0,i.start),g=Math.min(d.count,i.start+i.count)-1;m<g;m+=f){var v=d.getX(m),y=d.getX(m+1);if(l.fromBufferAttribute(p,v),u.fromBufferAttribute(p,y),!(bw.distanceSqToSegment(l,u,h,c)>s)){h.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(var x=Math.max(0,i.start),w=Math.min(p.count,i.start+i.count)-1;x<w;x+=f){if(l.fromBufferAttribute(p,x),u.fromBufferAttribute(p,x+1),!(bw.distanceSqToSegment(l,u,h,c)>s)){h.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(h);_<e.near||_>e.far||t.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,i=r.length;a<i;a++){var o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(jg);ww.prototype.isLine=!0;var _w=new Dm,kw=new Dm,Sw=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this,e,r)).type="LineSegments",a}return M(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,a=t.count;r<a;r+=2)_w.fromBufferAttribute(t,r),kw.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+_w.distanceTo(kw);e.setAttribute("lineDistance",new rv(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(ww);Sw.prototype.isLineSegments=!0;var Mw=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this,e,r)).type="LineLoop",a}return M(n)}(ww);Mw.prototype.isLineLoop=!0;var Tw=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="PointsMaterial",r.color=new wm(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(Jg);Tw.prototype.isPointsMaterial=!0;var Ew=new fg,Aw=new hg,Cw=new rg,Lw=new Dm,Rw=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hv,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tw;return k(this,n),(e=t.call(this)).type="Points",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Cw.copy(n.boundingSphere),Cw.applyMatrix4(r),Cw.radius+=a,!1!==e.ray.intersectsSphere(Cw)){Ew.copy(r).invert(),Aw.copy(e.ray).applyMatrix4(Ew);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var l=n.index,u=n.attributes.position;if(null!==l)for(var c=Math.max(0,i.start),h=Math.min(l.count,i.start+i.count);c<h;c++){var f=l.getX(c);Lw.fromBufferAttribute(u,f),Nw(Lw,f,s,r,e,t,this)}else for(var d=Math.max(0,i.start),p=Math.min(u.count,i.start+i.count);d<p;d++)Lw.fromBufferAttribute(u,d),Nw(Lw,d,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,i=r.length;a<i;a++){var o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(jg);function Nw(e,t,n,r,a,i,o){var s=Aw.distanceSqToPoint(e);if(s<n){var l=new Dm;Aw.closestPointToPoint(e,l),l.applyMatrix4(r);var u=a.ray.origin.distanceTo(l);if(u<a.near||u>a.far)return;i.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:o})}}Rw.prototype.isPoints=!0,function(e){v(n,e);var t=w(n);function n(e,r,a,i,o,s,l,u,c){var h;k(this,n),(h=t.call(this,e,r,a,i,o,s,l,u,c)).minFilter=void 0!==s?s:qd,h.magFilter=void 0!==o?o:qd,h.generateMipmaps=!1;var f=b(h);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){f.needsUpdate=!0,e.requestVideoFrameCallback(t)})),h}return M(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Tm).prototype.isVideoTexture=!0;var Pw=function(e){v(n,e);var t=w(n);function n(e,r,a){var i;return k(this,n),(i=t.call(this,{width:e,height:r})).format=a,i.magFilter=Vd,i.minFilter=Vd,i.generateMipmaps=!1,i.needsUpdate=!0,i}return M(n)}(Tm);Pw.prototype.isFramebufferTexture=!0;var Iw=function(e){v(n,e);var t=w(n);function n(e,r,a,i,o,s,l,u,c,h,f,d){var p;return k(this,n),(p=t.call(this,null,s,l,u,c,h,i,o,f,d)).image={width:r,height:a},p.mipmaps=e,p.flipY=!1,p.generateMipmaps=!1,p}return M(n)}(Tm);Iw.prototype.isCompressedTexture=!0,function(e){v(n,e);var t=w(n);function n(e,r,a,i,o,s,l,u,c){var h;return k(this,n),(h=t.call(this,e,r,a,i,o,s,l,u,c)).needsUpdate=!0,h}return M(n)}(Tm).prototype.isCanvasTexture=!0;var Dw=function(){function e(){k(this,e),this.type="Curve",this.arcLengthDivisions=200}return M(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),a=0;n.push(0);for(var i=1;i<=e;i++)a+=(t=this.getPoint(i/e)).distanceTo(r),n.push(a),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),a=0,i=r.length;n=t||e*r[i-1];for(var o,s=0,l=i-1;s<=l;)if((o=r[a=Math.floor(s+(l-s)/2)]-n)<0)s=a+1;else{if(!(o>0)){l=a;break}l=a-1}if(r[a=l]===n)return a/(i-1);var u=r[a];return(a+(n-u)/(r[a+1]-u))/(i-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,a=e+n;r<0&&(r=0),a>1&&(a=1);var i=this.getPoint(r),o=this.getPoint(a),s=t||(i.isVector2?new om:new Dm);return s.copy(o).sub(i).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Dm,r=[],a=[],i=[],o=new Dm,s=new fg,l=0;l<=e;l++){var u=l/e;r[l]=this.getTangentAt(u,new Dm)}a[0]=new Dm,i[0]=new Dm;var c=Number.MAX_VALUE,h=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),d<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),a[0].crossVectors(r[0],o),i[0].crossVectors(r[0],a[0]);for(var p=1;p<=e;p++){if(a[p]=a[p-1].clone(),i[p]=i[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var m=Math.acos($p(r[p-1].dot(r[p]),-1,1));a[p].applyMatrix4(s.makeRotationAxis(o,m))}i[p].crossVectors(r[p],a[p])}if(!0===t){var g=Math.acos($p(a[0].dot(a[e]),-1,1));g/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(g=-g);for(var v=1;v<=e;v++)a[v].applyMatrix4(s.makeRotationAxis(r[v],g*v)),i[v].crossVectors(r[v],a[v])}return{tangents:r,normals:a,binormals:i}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),Uw=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return k(this,n),(e=t.call(this)).type="EllipseCurve",e.aX=r,e.aY=a,e.xRadius=i,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=l,e.aClockwise=u,e.aRotation=c,e}return M(n,[{key:"getPoint",value:function(e,t){for(var n=t||new om,r=2*Math.PI,a=this.aEndAngle-this.aStartAngle,i=Math.abs(a)<Number.EPSILON;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(a=i?0:r),!0!==this.aClockwise||i||(a===r?a=-r:a-=r);var o=this.aStartAngle+e*a,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=l-this.aY;s=h*u-f*c+this.aX,l=h*c+f*u+this.aY}return n.set(s,l)}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return m(d(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(Dw);Uw.prototype.isEllipseCurve=!0;var jw=function(e){v(n,e);var t=w(n);function n(e,r,a,i,o,s){var l;return k(this,n),(l=t.call(this,e,r,a,a,i,o,s)).type="ArcCurve",l}return M(n)}(Uw);function Ow(){var e=0,t=0,n=0,r=0;function a(a,i,o,s){e=a,t=o,n=-3*a+3*i-2*o-s,r=2*a-2*i+o+s}return{initCatmullRom:function(e,t,n,r,i){a(t,n,i*(n-e),i*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,i,o,s){var l=(t-e)/i-(n-e)/(i+o)+(n-t)/o,u=(n-t)/o-(r-t)/(o+s)+(r-n)/s;a(t,n,l*=o,u*=o)},calc:function(a){var i=a*a;return e+t*a+n*i+r*(i*a)}}}jw.prototype.isArcCurve=!0;var Fw=new Dm,Bw=new Ow,zw=new Ow,Hw=new Ow,Vw=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return k(this,n),(e=t.call(this)).type="CatmullRomCurve3",e.points=r,e.closed=a,e.curveType=i,e.tension=o,e}return M(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dm,a=r,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e,l=Math.floor(s),u=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/o)+1)*o:0===u&&l===o-1&&(l=o-2,u=1),this.closed||l>0?t=i[(l-1)%o]:(Fw.subVectors(i[0],i[1]).add(i[0]),t=Fw);var c=i[l%o],h=i[(l+1)%o];if(this.closed||l+2<o?n=i[(l+2)%o]:(Fw.subVectors(i[o-1],i[o-2]).add(i[o-1]),n=Fw),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(c),f),p=Math.pow(c.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(n),f);p<1e-4&&(p=1),d<1e-4&&(d=p),m<1e-4&&(m=p),Bw.initNonuniformCatmullRom(t.x,c.x,h.x,n.x,d,p,m),zw.initNonuniformCatmullRom(t.y,c.y,h.y,n.y,d,p,m),Hw.initNonuniformCatmullRom(t.z,c.z,h.z,n.z,d,p,m)}else"catmullrom"===this.curveType&&(Bw.initCatmullRom(t.x,c.x,h.x,n.x,this.tension),zw.initCatmullRom(t.y,c.y,h.y,n.y,this.tension),Hw.initCatmullRom(t.z,c.z,h.z,n.z,this.tension));return a.set(Bw.calc(u),zw.calc(u),Hw.calc(u)),a}},{key:"copy",value:function(e){m(d(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){m(d(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push((new Dm).fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(Dw);function Gw(e,t,n,r,a){var i=.5*(r-t),o=.5*(a-n),s=e*e;return(2*n-2*r+i+o)*(e*s)+(-3*n+3*r-2*i-o)*s+i*e+n}function Ww(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function qw(e,t,n,r,a){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,a)}Vw.prototype.isCatmullRomCurve3=!0;var Kw=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new om,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new om,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new om,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new om;return k(this,n),(e=t.call(this)).type="CubicBezierCurve",e.v0=r,e.v1=a,e.v2=i,e.v3=o,e}return M(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new om,n=t,r=this.v0,a=this.v1,i=this.v2,o=this.v3;return n.set(qw(e,r.x,a.x,i.x,o.x),qw(e,r.y,a.y,i.y,o.y)),n}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return m(d(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Dw);Kw.prototype.isCubicBezierCurve=!0;var Xw=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dm,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dm,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Dm,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Dm;return k(this,n),(e=t.call(this)).type="CubicBezierCurve3",e.v0=r,e.v1=a,e.v2=i,e.v3=o,e}return M(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dm,n=t,r=this.v0,a=this.v1,i=this.v2,o=this.v3;return n.set(qw(e,r.x,a.x,i.x,o.x),qw(e,r.y,a.y,i.y,o.y),qw(e,r.z,a.z,i.z,o.z)),n}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return m(d(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Dw);Xw.prototype.isCubicBezierCurve3=!0;var Yw=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new om,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new om;return k(this,n),(e=t.call(this)).type="LineCurve",e.v1=r,e.v2=a,e}return M(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new om,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new om;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return m(d(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Dw);Yw.prototype.isLineCurve=!0;var Jw=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dm,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dm;return k(this,n),(e=t.call(this)).type="LineCurve3",e.isLineCurve3=!0,e.v1=r,e.v2=a,e}return M(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dm,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return m(d(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Dw),Qw=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new om,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new om,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new om;return k(this,n),(e=t.call(this)).type="QuadraticBezierCurve",e.v0=r,e.v1=a,e.v2=i,e}return M(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new om,n=t,r=this.v0,a=this.v1,i=this.v2;return n.set(Ww(e,r.x,a.x,i.x),Ww(e,r.y,a.y,i.y)),n}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return m(d(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Dw);Qw.prototype.isQuadraticBezierCurve=!0;var Zw=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dm,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dm,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Dm;return k(this,n),(e=t.call(this)).type="QuadraticBezierCurve3",e.v0=r,e.v1=a,e.v2=i,e}return M(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dm,n=t,r=this.v0,a=this.v1,i=this.v2;return n.set(Ww(e,r.x,a.x,i.x),Ww(e,r.y,a.y,i.y),Ww(e,r.z,a.z,i.z)),n}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return m(d(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Dw);Zw.prototype.isQuadraticBezierCurve3=!0;var $w=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return k(this,n),(e=t.call(this)).type="SplineCurve",e.points=r,e}return M(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new om,n=t,r=this.points,a=(r.length-1)*e,i=Math.floor(a),o=a-i,s=r[0===i?i:i-1],l=r[i],u=r[i>r.length-2?r.length-1:i+1],c=r[i>r.length-3?r.length-1:i+2];return n.set(Gw(o,s.x,l.x,u.x,c.x),Gw(o,s.y,l.y,u.y,c.y)),n}},{key:"copy",value:function(e){m(d(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push(a.clone())}return this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var a=this.points[t];e.points.push(a.toArray())}return e}},{key:"fromJSON",value:function(e){m(d(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push((new om).fromArray(a))}return this}}]),n}(Dw);$w.prototype.isSplineCurve=!0;var e_=Object.freeze({__proto__:null,ArcCurve:jw,CatmullRomCurve3:Vw,CubicBezierCurve:Kw,CubicBezierCurve3:Xw,EllipseCurve:Uw,LineCurve:Yw,LineCurve3:Jw,QuadraticBezierCurve:Qw,QuadraticBezierCurve3:Zw,SplineCurve:$w}),t_=function(e){v(n,e);var t=w(n);function n(){var e;return k(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return M(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Yw(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),a=0;a<r.length;){if(r[a]>=n){var i=r[a]-n,o=this.curves[a],s=o.getLength(),l=0===s?0:1-i/s;return o.getPointAt(l,t)}a++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,a=this.curves;r<a.length;r++)for(var i=a[r],o=i.isEllipseCurve?2*t:i.isLineCurve||i.isLineCurve3?1:i.isSplineCurve?t*i.points.length:t,s=i.getPoints(o),l=0;l<s.length;l++){var u=s[l];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){m(d(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var a=this.curves[t];e.curves.push(a.toJSON())}return e}},{key:"fromJSON",value:function(e){m(d(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var a=e.curves[t];this.curves.push((new e_[a.type]).fromJSON(a))}return this}}]),n}(Dw),n_=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="Path",r.currentPoint=new om,e&&r.setFromPoints(e),r}return M(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new Yw(this.currentPoint.clone(),new om(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var a=new Qw(this.currentPoint.clone(),new om(e,t),new om(n,r));return this.curves.push(a),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,a,i){var o=new Kw(this.currentPoint.clone(),new om(e,t),new om(n,r),new om(a,i));return this.curves.push(o),this.currentPoint.set(a,i),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new $w(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,a,i){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,a,i),this}},{key:"absarc",value:function(e,t,n,r,a,i){return this.absellipse(e,t,n,n,r,a,i),this}},{key:"ellipse",value:function(e,t,n,r,a,i,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,a,i,o,s),this}},{key:"absellipse",value:function(e,t,n,r,a,i,o,s){var l=new Uw(e,t,n,r,a,i,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return m(d(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(t_),r_=(new Dm,new Dm,new Dm,new Xg,function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this,e)).uuid=Zp(),r.type="Shape",r.holes=[],r}return M(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){m(d(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var a=e.holes[t];this.holes.push(a.clone())}return this}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var a=this.holes[t];e.holes.push(a.toJSON())}return e}},{key:"fromJSON",value:function(e){m(d(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var a=e.holes[t];this.holes.push((new n_).fromJSON(a))}return this}}]),n}(n_)),a_=function(e,t){var n,r,a,i,o,s,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,h=c?t[0]*u:e.length,f=i_(e,0,h,u,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=f_(e,t,f,u)),e.length>80*u){n=a=e[0],r=i=e[1];for(var p=u;p<h;p+=u)(o=e[p])<n&&(n=o),(s=e[p+1])<r&&(r=s),o>a&&(a=o),s>i&&(i=s);l=0!==(l=Math.max(a-n,i-r))?1/l:0}return s_(f,d,u,n,r,l),d};function i_(e,t,n,r,a){var i,o;if(a===function(e,t,n,r){for(var a=0,i=t,o=n-r;i<n;i+=r)a+=(e[o]-e[i])*(e[i+1]+e[o+1]),o=i;return a}(e,t,n,r)>0)for(i=t;i<n;i+=r)o=E_(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=E_(i,e[i],e[i+1],o);return o&&w_(o,o.next)&&(A_(o),o=o.next),o}function o_(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!w_(r,r.next)&&0!==x_(r.prev,r,r.next))r=r.next;else{if(A_(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function s_(e,t,n,r,a,i,o){if(e){!o&&i&&function(e,t,n,r){var a=e;do{null===a.z&&(a.z=g_(a.x,a.y,t,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,n,r,a,i,o,s,l,u=1;do{for(n=e,e=null,i=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(a=n,n=n.nextZ,s--):(a=r,r=r.nextZ,l--),i?i.nextZ=a:e=a,a.prevZ=i,i=a;n=r}i.nextZ=null,u*=2}while(o>1)}(a)}(e,r,a,i);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,i?u_(e,r,a,i):l_(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),A_(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?s_(e=c_(o_(e),t,n),t,n,r,a,i,2):2===o&&h_(e,t,n,r,a,i):s_(o_(e),t,n,r,a,i,1);break}}}function l_(e){var t=e.prev,n=e,r=e.next;if(x_(t,n,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(y_(t.x,t.y,n.x,n.y,r.x,r.y,a.x,a.y)&&x_(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function u_(e,t,n,r){var a=e.prev,i=e,o=e.next;if(x_(a,i,o)>=0)return!1;for(var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,l=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,u=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,c=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,h=g_(s,l,t,n,r),f=g_(u,c,t,n,r),d=e.prevZ,p=e.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==e.prev&&d!==e.next&&y_(a.x,a.y,i.x,i.y,o.x,o.y,d.x,d.y)&&x_(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&y_(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&x_(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&y_(a.x,a.y,i.x,i.y,o.x,o.y,d.x,d.y)&&x_(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&y_(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&x_(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function c_(e,t,n){var r=e;do{var a=r.prev,i=r.next.next;!w_(a,i)&&__(a,r,r.next,i)&&M_(a,i)&&M_(i,a)&&(t.push(a.i/n),t.push(r.i/n),t.push(i.i/n),A_(r),A_(r.next),r=e=i),r=r.next}while(r!==e);return o_(r)}function h_(e,t,n,r,a,i){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&b_(o,s)){var l=T_(o,s);return o=o_(o,o.next),l=o_(l,l.next),s_(o,t,n,r,a,i),void s_(l,t,n,r,a,i)}s=s.next}o=o.next}while(o!==e)}function f_(e,t,n,r){var a,i,o,s=[];for(a=0,i=t.length;a<i;a++)(o=i_(e,t[a]*r,a<i-1?t[a+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(v_(o));for(s.sort(d_),a=0;a<s.length;a++)p_(s[a],n),n=o_(n,n.next);return n}function d_(e,t){return e.x-t.x}function p_(e,t){if(t=function(e,t){var n,r=t,a=e.x,i=e.y,o=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>o){if(o=s,s===a){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(a===o)return n;var l,u=n,c=n.x,h=n.y,f=1/0;r=n;do{a>=r.x&&r.x>=c&&a!==r.x&&y_(i<h?a:o,i,c,h,i<h?o:a,i,r.x,r.y)&&(l=Math.abs(i-r.y)/(a-r.x),M_(r,e)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&m_(n,r)))&&(n=r,f=l)),r=r.next}while(r!==u);return n}(e,t),t){var n=T_(t,e);o_(t,t.next),o_(n,n.next)}}function m_(e,t){return x_(e.prev,e,t.prev)<0&&x_(t.next,e,e.next)<0}function g_(e,t,n,r,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*a)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*a)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function v_(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function y_(e,t,n,r,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(i-s)-(a-o)*(r-s)>=0}function b_(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&__(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(M_(e,t)&&M_(t,e)&&function(e,t){var n=e,r=!1,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!==n.next.y>i&&n.next.y!==n.y&&a<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(x_(e.prev,e,t.prev)||x_(e,t.prev,t))||w_(e,t)&&x_(e.prev,e,e.next)>0&&x_(t.prev,t,t.next)>0)}function x_(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function w_(e,t){return e.x===t.x&&e.y===t.y}function __(e,t,n,r){var a=S_(x_(e,t,n)),i=S_(x_(e,t,r)),o=S_(x_(n,r,e)),s=S_(x_(n,r,t));return a!==i&&o!==s||(!(0!==a||!k_(e,n,t))||(!(0!==i||!k_(e,r,t))||(!(0!==o||!k_(n,e,r))||!(0!==s||!k_(n,t,r)))))}function k_(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function S_(e){return e>0?1:e<0?-1:0}function M_(e,t){return x_(e.prev,e,e.next)<0?x_(e,t,e.next)>=0&&x_(e,e.prev,t)>=0:x_(e,t,e.prev)<0||x_(e,e.next,t)<0}function T_(e,t){var n=new C_(e.i,e.x,e.y),r=new C_(t.i,t.x,t.y),a=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=a,a.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function E_(e,t,n,r){var a=new C_(e,t,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function A_(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C_(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var L_=function(){function e(){k(this,e)}return M(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,a=0;a<t;r=a++)n+=e[r].x*e[a].y-e[a].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],a=[];R_(e),N_(n,e);var i=e.length;t.forEach(R_);for(var o=0;o<t.length;o++)r.push(i),i+=t[o].length,N_(n,t[o]);for(var s=a_(n,r),l=0;l<s.length;l+=3)a.push(s.slice(l,l+3));return a}}]),e}();function R_(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function N_(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var P_=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r_([new om(.5,.5),new om(-.5,.5),new om(-.5,-.5),new om(.5,-.5)]),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};k(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:a},r=Array.isArray(r)?r:[r];for(var i=b(e),o=[],s=[],l=0,u=r.length;l<u;l++){var c=r[l];h(c)}function h(e){var t=[],n=void 0!==a.curveSegments?a.curveSegments:12,r=void 0!==a.steps?a.steps:1,l=void 0!==a.depth?a.depth:1,u=void 0===a.bevelEnabled||a.bevelEnabled,c=void 0!==a.bevelThickness?a.bevelThickness:.2,h=void 0!==a.bevelSize?a.bevelSize:c-.1,f=void 0!==a.bevelOffset?a.bevelOffset:0,d=void 0!==a.bevelSegments?a.bevelSegments:3,p=a.extrudePath,m=void 0!==a.UVGenerator?a.UVGenerator:I_;void 0!==a.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=a.amount);var g,v,y,b,x,w=!1;p&&(g=p.getSpacedPoints(r),w=!0,u=!1,v=p.computeFrenetFrames(r,!1),y=new Dm,b=new Dm,x=new Dm),u||(d=0,c=0,h=0,f=0);var _=e.extractPoints(n),k=_.shape,S=_.holes;if(!L_.isClockWise(k)){k=k.reverse();for(var M=0,T=S.length;M<T;M++){var E=S[M];L_.isClockWise(E)&&(S[M]=E.reverse())}}for(var A=L_.triangulateShape(k,S),C=k,L=0,R=S.length;L<R;L++){var N=S[L];k=k.concat(N)}function P(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var I=k.length,D=A.length;function U(e,t,n){var r,a,i,o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=o*o+s*s,h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),d=Math.sqrt(l*l+u*u),p=t.x-s/f,m=t.y+o/f,g=((n.x-u/d-p)*u-(n.y+l/d-m)*l)/(o*u-s*l),v=(r=p+o*g-e.x)*r+(a=m+s*g-e.y)*a;if(v<=2)return new om(r,a);i=Math.sqrt(v/2)}else{var y=!1;o>Number.EPSILON?l>Number.EPSILON&&(y=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(r=-s,a=o,i=Math.sqrt(c)):(r=o,a=s,i=Math.sqrt(c/2))}return new om(r/i,a/i)}for(var j=[],O=0,F=C.length,B=F-1,z=O+1;O<F;O++,B++,z++)B===F&&(B=0),z===F&&(z=0),j[O]=U(C[O],C[B],C[z]);for(var H,V=[],G=j.concat(),W=0,q=S.length;W<q;W++){var K=S[W];H=[];for(var X=0,Y=K.length,J=Y-1,Q=X+1;X<Y;X++,J++,Q++)J===Y&&(J=0),Q===Y&&(Q=0),H[X]=U(K[X],K[J],K[Q]);V.push(H),G=G.concat(H)}for(var Z=0;Z<d;Z++){for(var $=Z/d,ee=c*Math.cos($*Math.PI/2),te=h*Math.sin($*Math.PI/2)+f,ne=0,re=C.length;ne<re;ne++){var ae=P(C[ne],j[ne],te);Re(ae.x,ae.y,-ee)}for(var ie=0,oe=S.length;ie<oe;ie++){var se=S[ie];H=V[ie];for(var le=0,ue=se.length;le<ue;le++){var ce=P(se[le],H[le],te);Re(ce.x,ce.y,-ee)}}}for(var he=h+f,fe=0;fe<I;fe++){var de=u?P(k[fe],G[fe],he):k[fe];w?(b.copy(v.normals[0]).multiplyScalar(de.x),y.copy(v.binormals[0]).multiplyScalar(de.y),x.copy(g[0]).add(b).add(y),Re(x.x,x.y,x.z)):Re(de.x,de.y,0)}for(var pe=1;pe<=r;pe++)for(var me=0;me<I;me++){var ge=u?P(k[me],G[me],he):k[me];w?(b.copy(v.normals[pe]).multiplyScalar(ge.x),y.copy(v.binormals[pe]).multiplyScalar(ge.y),x.copy(g[pe]).add(b).add(y),Re(x.x,x.y,x.z)):Re(ge.x,ge.y,l/r*pe)}for(var ve=d-1;ve>=0;ve--){for(var ye=ve/d,be=c*Math.cos(ye*Math.PI/2),xe=h*Math.sin(ye*Math.PI/2)+f,we=0,_e=C.length;we<_e;we++){var ke=P(C[we],j[we],xe);Re(ke.x,ke.y,l+be)}for(var Se=0,Me=S.length;Se<Me;Se++){var Te=S[Se];H=V[Se];for(var Ee=0,Ae=Te.length;Ee<Ae;Ee++){var Ce=P(Te[Ee],H[Ee],xe);w?Re(Ce.x,Ce.y+g[r-1].y,g[r-1].x+be):Re(Ce.x,Ce.y,l+be)}}}function Le(e,t){for(var n=e.length;--n>=0;){var a=n,i=n-1;i<0&&(i=e.length-1);for(var o=0,s=r+2*d;o<s;o++){var l=I*o,u=I*(o+1);Pe(t+a+l,t+i+l,t+i+u,t+a+u)}}}function Re(e,n,r){t.push(e),t.push(n),t.push(r)}function Ne(e,t,n){Ie(e),Ie(t),Ie(n);var r=o.length/3,a=m.generateTopUV(i,o,r-3,r-2,r-1);De(a[0]),De(a[1]),De(a[2])}function Pe(e,t,n,r){Ie(e),Ie(t),Ie(r),Ie(t),Ie(n),Ie(r);var a=o.length/3,s=m.generateSideWallUV(i,o,a-6,a-3,a-2,a-1);De(s[0]),De(s[1]),De(s[3]),De(s[1]),De(s[2]),De(s[3])}function Ie(e){o.push(t[3*e+0]),o.push(t[3*e+1]),o.push(t[3*e+2])}function De(e){s.push(e.x),s.push(e.y)}!function(){var e=o.length/3;if(u){for(var t=0,n=I*t,a=0;a<D;a++){var s=A[a];Ne(s[2]+n,s[1]+n,s[0]+n)}n=I*(t=r+2*d);for(var l=0;l<D;l++){var c=A[l];Ne(c[0]+n,c[1]+n,c[2]+n)}}else{for(var h=0;h<D;h++){var f=A[h];Ne(f[2],f[1],f[0])}for(var p=0;p<D;p++){var m=A[p];Ne(m[0]+I*r,m[1]+I*r,m[2]+I*r)}}i.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;Le(C,t),t+=C.length;for(var n=0,r=S.length;n<r;n++){var a=S[n];Le(a,t),t+=a.length}i.addGroup(e,o.length/3-e,1)}()}return e.setAttribute("position",new rv(o,3)),e.setAttribute("uv",new rv(s,2)),e.computeVertexNormals(),e}return M(n,[{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,a=e.length;r<a;r++){var i=e[r];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],a=0,i=e.shapes.length;a<i;a++){var o=t[e.shapes[a]];r.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new e_[s.type]).fromJSON(s)),new n(r,e.options)}}]),n}(hv),I_={generateTopUV:function(e,t,n,r,a){var i=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*a],c=t[3*a+1];return[new om(i,o),new om(s,l),new om(u,c)]},generateSideWallUV:function(e,t,n,r,a,i){var o=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],h=t[3*r+2],f=t[3*a],d=t[3*a+1],p=t[3*a+2],m=t[3*i],g=t[3*i+1],v=t[3*i+2];return Math.abs(s-c)<Math.abs(o-u)?[new om(o,1-l),new om(u,1-h),new om(f,1-p),new om(m,1-v)]:[new om(s,1-l),new om(c,1-h),new om(d,1-p),new om(g,1-v)]}};var D_=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r_([new om(0,.5),new om(-.5,-.5),new om(.5,-.5)]),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;k(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:a};var i=[],o=[],s=[],l=[],u=0,c=0;if(!1===Array.isArray(r))f(r);else for(var h=0;h<r.length;h++)f(r[h]),e.addGroup(u,c,h),u+=c,c=0;function f(e){var t=o.length/3,n=e.extractPoints(a),r=n.shape,u=n.holes;!1===L_.isClockWise(r)&&(r=r.reverse());for(var h=0,f=u.length;h<f;h++){var d=u[h];!0===L_.isClockWise(d)&&(u[h]=d.reverse())}for(var p=L_.triangulateShape(r,u),m=0,g=u.length;m<g;m++){var v=u[m];r=r.concat(v)}for(var y=0,b=r.length;y<b;y++){var x=r[y];o.push(x.x,x.y,0),s.push(0,0,1),l.push(x.x,x.y)}for(var w=0,_=p.length;w<_;w++){var k=p[w],S=k[0]+t,M=k[1]+t,T=k[2]+t;i.push(S,M,T),c+=3}}return e.setIndex(i),e.setAttribute("position",new rv(o,3)),e.setAttribute("normal",new rv(s,3)),e.setAttribute("uv",new rv(l,2)),e}return M(n,[{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var a=e[n];t.shapes.push(a.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],a=0,i=e.shapes.length;a<i;a++){var o=t[e.shapes[a]];r.push(o)}return new n(r,e.curveSegments)}}]),n}(hv);var U_=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="ShadowMaterial",r.color=new wm(0),r.transparent=!0,r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this}}]),n}(Jg);U_.prototype.isShadowMaterial=!0;var j_=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this,e)).type="RawShaderMaterial",r}return M(n)}(Dv);j_.prototype.isRawShaderMaterial=!0;var O_=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new wm(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new wm(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new om(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(Jg);O_.prototype.isMeshStandardMaterial=!0;var F_=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new om(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty(b(r),"reflectivity",{get:function(){return $p(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.sheenColor=new wm(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationColor=new wm(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new wm(1,1,1),r.specularColorMap=null,r._sheen=0,r._clearcoat=0,r._transmission=0,r.setValues(e),r}return M(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(O_);F_.prototype.isMeshPhysicalMaterial=!0;var B_=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="MeshPhongMaterial",r.color=new wm(16777215),r.specular=new wm(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new wm(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new om(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(Jg);B_.prototype.isMeshPhongMaterial=!0;var z_=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new wm(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new wm(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new om(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Jg);z_.prototype.isMeshToonMaterial=!0;var H_=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new om(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.flatShading=!1,r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(Jg);H_.prototype.isMeshNormalMaterial=!0;var V_=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="MeshLambertMaterial",r.color=new wm(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new wm(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Jg);V_.prototype.isMeshLambertMaterial=!0;var G_=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new wm(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new om(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}]),n}(Jg);G_.prototype.isMeshMatcapMaterial=!0;var W_=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(mw);W_.prototype.isLineDashedMaterial=!0;var q_={ShadowMaterial:U_,SpriteMaterial:jx,RawShaderMaterial:j_,ShaderMaterial:Dv,PointsMaterial:Tw,MeshPhysicalMaterial:F_,MeshStandardMaterial:O_,MeshPhongMaterial:B_,MeshToonMaterial:z_,MeshNormalMaterial:H_,MeshLambertMaterial:V_,MeshDepthMaterial:px,MeshDistanceMaterial:mx,MeshBasicMaterial:Qg,MeshMatcapMaterial:G_,LineDashedMaterial:W_,LineBasicMaterial:mw,Material:Jg};Jg.fromType=function(e){return new q_[e]};var K_={arraySlice:function(e,t,n){return K_.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,a=new e.constructor(r),i=0,o=0;o!==r;++i)for(var s=n[i]*t,l=0;l!==t;++l)a[o++]=e[s+l];return a},flattenJSON:function(e,t,n,r){for(var a=1,i=e[0];void 0!==i&&void 0===i[r];)i=e[a++];if(void 0!==i){var o=i[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=i[r])&&(t.push(i.time),n.push.apply(n,o)),i=e[a++]}while(void 0!==i);else if(void 0!==o.toArray)do{void 0!==(o=i[r])&&(t.push(i.time),o.toArray(n,n.length)),i=e[a++]}while(void 0!==i);else do{void 0!==(o=i[r])&&(t.push(i.time),n.push(o)),i=e[a++]}while(void 0!==i)}},subclip:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,i=e.clone();i.name=t;for(var o=[],s=0;s<i.tracks.length;++s){for(var l=i.tracks[s],u=l.getValueSize(),c=[],h=[],f=0;f<l.times.length;++f){var d=l.times[f]*a;if(!(d<n||d>=r)){c.push(l.times[f]);for(var p=0;p<u;++p)h.push(l.values[f*u+p])}}0!==c.length&&(l.times=K_.convertArray(c,l.times.constructor),l.values=K_.convertArray(h,l.values.constructor),o.push(l))}i.tracks=o;for(var m=1/0,g=0;g<i.tracks.length;++g)m>i.tracks[g].times[0]&&(m=i.tracks[g].times[0]);for(var v=0;v<i.tracks.length;++v)i.tracks[v].shift(-1*m);return i.resetDuration(),i},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var a=n.tracks.length,i=t/r,o=function(t){var r=n.tracks[t],a=r.ValueTypeName;if("bool"===a||"string"===a)return"continue";var o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===a}));if(void 0===o)return"continue";var s=0,l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);var u=0,c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);var h=r.times.length-1,f=void 0;if(i<=r.times[0]){var d=s,p=l-s;f=K_.arraySlice(r.values,d,p)}else if(i>=r.times[h]){var m=h*l+s,g=m+l-s;f=K_.arraySlice(r.values,m,g)}else{var v=r.createInterpolant(),y=s,b=l-s;v.evaluate(i),f=K_.arraySlice(v.resultBuffer,y,b)}"quaternion"===a&&(new Im).fromArray(f).normalize().conjugate().toArray(f);for(var x=o.times.length,w=0;w<x;++w){var _=w*c+u;if("quaternion"===a)Im.multiplyQuaternionsFlat(o.values,_,f,0,o.values,_);else for(var k=c-2*u,S=0;S<k;++S)o.values[_+S]-=f[S]}},s=0;s<a;++s)o(s);return e.blendMode=Up,e}},X_=function(){function e(t,n,r,a){k(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return M(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],a=t[n-1];e:{t:{var i;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<a)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,a)}if(n===o)break;if(a=r,e<(r=t[++n]))break t}i=t.length;break n}if(e>=a)break e;var s=t[1];e<s&&(n=2,a=s);for(var l=n-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===l)break;if(r=a,e>=(a=t[--n-1]))break t}i=n,n=0}for(;n<i;){var u=n+i>>>1;e<t[u]?i=u:n=u+1}if(r=t[n],void 0===(a=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,a,e)}this._cachedIndex=n,this.intervalChanged_(n,a,r)}return this.interpolate_(n,a,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r,i=0;i!==r;++i)t[i]=n[a+i];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();X_.prototype.beforeStart_=X_.prototype.copySampleValue_,X_.prototype.afterEnd_=X_.prototype.copySampleValue_;var Y_=function(e){v(n,e);var t=w(n);function n(e,r,a,i){var o;return k(this,n),(o=t.call(this,e,r,a,i))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:Np,endingEnd:Np},o}return M(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,a=e-2,i=e+1,o=r[a],s=r[i];if(void 0===o)switch(this.getSettings_().endingStart){case Pp:a=e,o=2*t-n;break;case Ip:o=t+r[a=r.length-2]-r[a+1];break;default:a=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Pp:i=e,s=2*n-t;break;case Ip:i=1,s=n+r[1]-r[0];break;default:i=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=a*u,this._offsetNext=i*u}},{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,m=p*d,g=-h*m+2*h*p-h*d,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p,x=0;x!==o;++x)a[x]=g*i[u+x]+v*i[l+x]+y*i[s+x]+b*i[c+x];return a}}]),n}(X_),J_=function(e){v(n,e);var t=w(n);function n(e,r,a,i){return k(this,n),t.call(this,e,r,a,i)}return M(n,[{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(r-t),c=1-u,h=0;h!==o;++h)a[h]=i[l+h]*c+i[s+h]*u;return a}}]),n}(X_),Q_=function(e){v(n,e);var t=w(n);function n(e,r,a,i){return k(this,n),t.call(this,e,r,a,i)}return M(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(X_),Z_=function(){function e(t,n,r,a){if(k(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=K_.convertArray(n,this.TimeBufferType),this.values=K_.convertArray(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}return M(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new Q_(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new J_(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new Y_(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Cp:t=this.InterpolantFactoryMethodDiscrete;break;case Lp:t=this.InterpolantFactoryMethodLinear;break;case Rp:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Cp;case this.InterpolantFactoryMethodLinear:return Lp;case this.InterpolantFactoryMethodSmooth:return Rp}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,a=0,i=r-1;a!==r&&n[a]<e;)++a;for(;-1!==i&&n[i]>t;)--i;if(++i,0!==a||i!==r){a>=i&&(a=(i=Math.max(i,1))-1);var o=this.getValueSize();this.times=K_.arraySlice(n,a,i),this.values=K_.arraySlice(this.values,a*o,i*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,a=n.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var i=null,o=0;o!==a;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==i&&i>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,i),e=!1;break}i=s}if(void 0!==r&&K_.isTypedArray(r))for(var l=0,u=r.length;l!==u;++l){var c=r[l];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=K_.arraySlice(this.times),t=K_.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Rp,a=e.length-1,i=1,o=1;o<a;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==e[0]))if(r)s=!0;else for(var u=o*n,c=u-n,h=u+n,f=0;f!==n;++f){var d=t[u+f];if(d!==t[c+f]||d!==t[h+f]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];for(var p=o*n,m=i*n,g=0;g!==n;++g)t[m+g]=t[p+g]}++i}}if(a>0){e[i]=e[a];for(var v=a*n,y=i*n,b=0;b!==n;++b)t[y+b]=t[v+b];++i}return i!==e.length?(this.times=K_.arraySlice(e,0,i),this.values=K_.arraySlice(t,0,i*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=K_.arraySlice(this.times,0),t=K_.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:K_.convertArray(e.times,Array),values:K_.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();Z_.prototype.TimeBufferType=Float32Array,Z_.prototype.ValueBufferType=Float32Array,Z_.prototype.DefaultInterpolation=Lp;var $_=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n)}(Z_);$_.prototype.ValueTypeName="bool",$_.prototype.ValueBufferType=Array,$_.prototype.DefaultInterpolation=Cp,$_.prototype.InterpolantFactoryMethodLinear=void 0,$_.prototype.InterpolantFactoryMethodSmooth=void 0;var ek=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n)}(Z_);ek.prototype.ValueTypeName="color";var tk=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n)}(Z_);tk.prototype.ValueTypeName="number";var nk=function(e){v(n,e);var t=w(n);function n(e,r,a,i){return k(this,n),t.call(this,e,r,a,i)}return M(n,[{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),l=e*o,u=l+o;l!==u;l+=4)Im.slerpFlat(a,0,i,l-o,i,l,s);return a}}]),n}(X_),rk=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new nk(this.times,this.values,this.getValueSize(),e)}}]),n}(Z_);rk.prototype.ValueTypeName="quaternion",rk.prototype.DefaultInterpolation=Lp,rk.prototype.InterpolantFactoryMethodSmooth=void 0;var ak=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n)}(Z_);ak.prototype.ValueTypeName="string",ak.prototype.ValueBufferType=Array,ak.prototype.DefaultInterpolation=Cp,ak.prototype.InterpolantFactoryMethodLinear=void 0,ak.prototype.InterpolantFactoryMethodSmooth=void 0;var ik=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n)}(Z_);ik.prototype.ValueTypeName="vector";var ok=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dp;k(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=a,this.uuid=Zp(),this.duration<0&&this.resetDuration()}return M(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),a=0,i=n.length;a!==i;++a)t.push(sk(n[a]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},a=0,i=n.length;a!==i;++a)t.push(Z_.toJSON(n[a]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var a=t.length,i=[],o=0;o<a;o++){var s=[],l=[];s.push((o+a-1)%a,o,(o+1)%a),l.push(0,1,0);var u=K_.getKeyframeOrder(s);s=K_.sortedArray(s,1,u),l=K_.sortedArray(l,1,u),r||0!==s[0]||(s.push(a),l.push(l[0])),i.push(new tk(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new this(e,-1,i)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var a=0;a<n.length;a++)if(n[a].name===t)return n[a];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},a=/^([\w-]*?)([\d]+)$/,i=0,o=e.length;i<o;i++){var s=e[i],l=s.name.match(a);if(l&&l.length>1){var u=l[1],c=r[u];c||(r[u]=c=[]),c.push(s)}}var h=[];for(var f in r)h.push(this.CreateFromMorphTargetSequence(f,r[f],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,a){if(0!==n.length){var i=[],o=[];K_.flattenJSON(n,i,o,r),0!==i.length&&a.push(new e(t,i,o))}},r=[],a=e.name||"default",i=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},f=void 0;for(f=0;f<c.length;f++)if(c[f].morphTargets)for(var d=0;d<c[f].morphTargets.length;d++)h[c[f].morphTargets[d]]=-1;for(var p in h){for(var m=[],g=[],v=0;v!==c[f].morphTargets.length;++v){var y=c[f];m.push(y.time),g.push(y.morphTarget===p?1:0)}r.push(new tk(".morphTargetInfluence["+p+"]",m,g))}s=h.length*i}else{var b=".bones["+t[u].name+"]";n(ik,b+".position",c,"pos",r),n(rk,b+".quaternion",c,"rot",r),n(ik,b+".scale",c,"scl",r)}}return 0===r.length?null:new this(a,s,r,o)}}]),e}();function sk(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return tk;case"vector":case"vector2":case"vector3":case"vector4":return ik;case"color":return ek;case"quaternion":return rk;case"bool":case"boolean":return $_;case"string":return ak}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];K_.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var lk={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},uk=M((function e(t,n,r){k(this,e);var a=this,i=!1,o=0,s=0,l=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===i&&void 0!==a.onStart&&a.onStart(e,o,s),i=!0},this.itemEnd=function(e){o++,void 0!==a.onProgress&&a.onProgress(e,o,s),o===s&&(i=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(e){void 0!==a.onError&&a.onError(e)},this.resolveURL=function(e){return l?l(e):e},this.setURLModifier=function(e){return l=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){var t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=u.length;t<n;t+=2){var r=u[t],a=u[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return a}return null}})),ck=new uk,hk=function(){function e(t){k(this,e),this.manager=void 0!==t?t:ck,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return M(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,a){n.load(e,r,t,a)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),fk={},dk=function(e){v(n,e);var t=w(n);function n(e){return k(this,n),t.call(this,e)}return M(n,[{key:"load",value:function(e,t,n,r){var a=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=lk.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;if(void 0===fk[e]){fk[e]=[],fk[e].push({onLoad:t,onProgress:n,onError:r});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=fk[e],r=t.body.getReader(),a=t.headers.get("Content-Length"),i=a?parseInt(a):0,o=0!==i,s=0,l=new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var a=r.done,l=r.value;if(a)e.close();else{s+=l.byteLength;for(var u=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:i}),c=0,h=n.length;c<h;c++){var f=n[c];f.onProgress&&f.onProgress(u)}e.enqueue(l),t()}}))}()}});return new Response(l)}throw Error('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText))})).then((function(e){switch(l){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((function(e){return r.decode(e)}))}})).then((function(t){lk.add(e,t);var n=fk[e];delete fk[e];for(var r=0,a=n.length;r<a;r++){var i=n[r];i.onLoad&&i.onLoad(t)}})).catch((function(t){var n=fk[e];if(void 0===n)throw a.manager.itemError(e),t;delete fk[e];for(var r=0,i=n.length;r<i;r++){var o=n[r];o.onError&&o.onError(t)}a.manager.itemError(e)})).finally((function(){a.manager.itemEnd(e)})),this.manager.itemStart(e)}else fk[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(hk),pk=function(e){v(n,e);var t=w(n);function n(e){return k(this,n),t.call(this,e)}return M(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=lk.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;var o=um("img");function s(){u(),lk.add(e,this),t&&t(this),a.manager.itemEnd(e)}function l(t){u(),r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}]),n}(hk),mk=function(e){v(n,e);var t=w(n);function n(e){return k(this,n),t.call(this,e)}return M(n,[{key:"load",value:function(e,t,n,r){var a=new Bv,i=new pk(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path);var o=0;function s(n){i.load(e[n],(function(e){a.images[n]=e,6===++o&&(a.needsUpdate=!0,t&&t(a))}),void 0,r)}for(var l=0;l<e.length;++l)s(l);return a}}]),n}(hk),gk=function(e){v(n,e);var t=w(n);function n(e){return k(this,n),t.call(this,e)}return M(n,[{key:"load",value:function(e,t,n,r){var a=new Tm,i=new pk(this.manager);return i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),i.load(e,(function(e){a.image=e,a.needsUpdate=!0,void 0!==t&&t(a)}),n,r),a}}]),n}(hk),vk=function(e){v(n,e);var t=w(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return k(this,n),(r=t.call(this)).type="Light",r.color=new wm(e),r.intensity=a,r}return M(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=m(d(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(jg);vk.prototype.isLight=!0;var yk=function(e){v(n,e);var t=w(n);function n(e,r,a){var i;return k(this,n),(i=t.call(this,e,a)).type="HemisphereLight",i.position.copy(jg.DefaultUp),i.updateMatrix(),i.groundColor=new wm(r),i}return M(n,[{key:"copy",value:function(e){return vk.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]),n}(vk);yk.prototype.isHemisphereLight=!0;var bk=new fg,xk=new Dm,wk=new Dm,_k=function(){function e(t){k(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new om(512,512),this.map=null,this.mapPass=null,this.matrix=new fg,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Xv,this._frameExtents=new om(1,1),this._viewportCount=1,this._viewports=[new Em(0,0,1,1)]}return M(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;xk.setFromMatrixPosition(e.matrixWorld),t.position.copy(xk),wk.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(wk),t.updateMatrixWorld(),bk.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bk),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),kk=function(e){v(n,e);var t=w(n);function n(){var e;return k(this,n),(e=t.call(this,new jv(50,1,.5,500))).focus=1,e}return M(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*Qp*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;r===t.fov&&a===t.aspect&&i===t.far||(t.fov=r,t.aspect=a,t.far=i,t.updateProjectionMatrix()),m(d(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(_k);kk.prototype.isSpotLightShadow=!0;var Sk=function(e){v(n,e);var t=w(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return k(this,n),(a=t.call(this,e,r)).type="SpotLight",a.position.copy(jg.DefaultUp),a.updateMatrix(),a.target=new jg,a.distance=i,a.angle=o,a.penumbra=s,a.decay=l,a.shadow=new kk,a}return M(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(vk);Sk.prototype.isSpotLight=!0;var Mk=new fg,Tk=new Dm,Ek=new Dm,Ak=function(e){v(n,e);var t=w(n);function n(){var e;return k(this,n),(e=t.call(this,new jv(90,1,.5,500)))._frameExtents=new om(4,2),e._viewportCount=6,e._viewports=[new Em(2,1,1,1),new Em(0,1,1,1),new Em(3,1,1,1),new Em(1,1,1,1),new Em(3,0,1,1),new Em(1,0,1,1)],e._cubeDirections=[new Dm(1,0,0),new Dm(-1,0,0),new Dm(0,0,1),new Dm(0,0,-1),new Dm(0,1,0),new Dm(0,-1,0)],e._cubeUps=[new Dm(0,1,0),new Dm(0,1,0),new Dm(0,1,0),new Dm(0,1,0),new Dm(0,0,1),new Dm(0,0,-1)],e}return M(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),Tk.setFromMatrixPosition(e.matrixWorld),n.position.copy(Tk),Ek.copy(n.position),Ek.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Ek),n.updateMatrixWorld(),r.makeTranslation(-Tk.x,-Tk.y,-Tk.z),Mk.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mk)}}]),n}(_k);Ak.prototype.isPointLightShadow=!0;var Ck=function(e){v(n,e);var t=w(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return k(this,n),(a=t.call(this,e,r)).type="PointLight",a.distance=i,a.decay=o,a.shadow=new Ak,a}return M(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(vk);Ck.prototype.isPointLight=!0;var Lk=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.call(this,new sy(-5,5,5,-5,.5,500))}return M(n)}(_k);Lk.prototype.isDirectionalLightShadow=!0;var Rk=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this,e,r)).type="DirectionalLight",a.position.copy(jg.DefaultUp),a.updateMatrix(),a.target=new jg,a.shadow=new Lk,a}return M(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(vk);Rk.prototype.isDirectionalLight=!0;var Nk=function(e){v(n,e);var t=w(n);function n(e,r){var a;return k(this,n),(a=t.call(this,e,r)).type="AmbientLight",a}return M(n)}(vk);Nk.prototype.isAmbientLight=!0;var Pk=function(e){v(n,e);var t=w(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return k(this,n),(a=t.call(this,e,r)).type="RectAreaLight",a.width=i,a.height=o,a}return M(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=m(d(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(vk);Pk.prototype.isRectAreaLight=!0;var Ik=function(){function e(){k(this,e),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Dm)}return M(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.282095),t.addScaledVector(i[1],.488603*r),t.addScaledVector(i[2],.488603*a),t.addScaledVector(i[3],.488603*n),t.addScaledVector(i[4],n*r*1.092548),t.addScaledVector(i[5],r*a*1.092548),t.addScaledVector(i[6],.315392*(3*a*a-1)),t.addScaledVector(i[7],n*a*1.092548),t.addScaledVector(i[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.886227),t.addScaledVector(i[1],1.023328*r),t.addScaledVector(i[2],1.023328*a),t.addScaledVector(i[3],1.023328*n),t.addScaledVector(i[4],.858086*n*r),t.addScaledVector(i[5],.858086*r*a),t.addScaledVector(i[6],.743125*a*a-.247708),t.addScaledVector(i[7],.858086*n*a),t.addScaledVector(i[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-r*r)}}]),e}();Ik.prototype.isSphericalHarmonics3=!0;var Dk=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ik,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return k(this,n),(e=t.call(this,void 0,a)).sh=r,e}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=m(d(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(vk);Dk.prototype.isLightProbe=!0;var Uk=function(){function e(){k(this,e)}return M(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(AS){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),jk=function(e){v(n,e);var t=w(n);function n(){var e;return k(this,n),(e=t.call(this)).type="InstancedBufferGeometry",e.instanceCount=1/0,e}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=m(d(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(hv);jk.prototype.isInstancedBufferGeometry=!0;var Ok,Fk=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),r=t.call(this,e),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return M(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=lk.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(a.options,{colorSpaceConversion:"none"}))})).then((function(n){lk.add(e,n),t&&t(n),a.manager.itemEnd(e)})).catch((function(t){r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)})),a.manager.itemStart(e)}}]),n}(hk);Fk.prototype.isImageBitmapLoader=!0;var Bk=function(){return void 0===Ok&&(Ok=new(window.AudioContext||window.webkitAudioContext)),Ok},zk=function(e){v(n,e);var t=w(n);function n(e){return k(this,n),t.call(this,e)}return M(n,[{key:"load",value:function(e,t,n,r){var a=this,i=new dk(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(n){try{var i=n.slice(0);Bk().decodeAudioData(i,(function(e){t(e)}))}catch(AS){r?r(AS):console.error(AS),a.manager.itemError(e)}}),n,r)}}]),n}(hk),Hk=function(e){v(n,e);var t=w(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;k(this,n),a=t.call(this,void 0,i);var o=(new wm).set(e),s=(new wm).set(r),l=new Dm(o.r,o.g,o.b),u=new Dm(s.r,s.g,s.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);return a.sh.coefficients[0].copy(l).add(u).multiplyScalar(c),a.sh.coefficients[1].copy(l).sub(u).multiplyScalar(h),a}return M(n)}(Dk);Hk.prototype.isHemisphereLightProbe=!0;var Vk=function(e){v(n,e);var t=w(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;k(this,n),r=t.call(this,void 0,a);var i=(new wm).set(e);return r.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return M(n)}(Dk);Vk.prototype.isAmbientLightProbe=!0;var Gk=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return M(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(jg),Wk=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;k(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return M(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),qk=function(){function e(t,n,r){var a,i,o;switch(k(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":a=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":a=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:a=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return M(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,a=e*r+r,i=this.cumulativeWeight;if(0===i){for(var o=0;o!==r;++o)n[a+o]=n[o];i=t}else{var s=t/(i+=t);this._mixBufferRegion(n,a,0,s,r)}this.cumulativeWeight=i}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,a=this.cumulativeWeight,i=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-a,t)}i>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var a=n,i=r;a!==i;++a)t[a]=t[r+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,a){if(r>=.5)for(var i=0;i!==a;++i)e[t+i]=e[n+i]}},{key:"_slerp",value:function(e,t,n,r){Im.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,a){var i=this._workIndex*a;Im.multiplyQuaternionsFlat(e,i,e,t,e,n),Im.slerpFlat(e,t,e,t,e,i,r)}},{key:"_lerp",value:function(e,t,n,r,a){for(var i=1-r,o=0;o!==a;++o){var s=t+o;e[s]=e[s]*i+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,a){for(var i=0;i!==a;++i){var o=t+i;e[o]=e[o]+e[n+i]*r}}}]),e}(),Kk="\\[\\]\\.:\\/",Xk=new RegExp("[\\[\\]\\.:\\/]","g"),Yk="[^\\[\\]\\.:\\/]",Jk="[^"+Kk.replace("\\.","")+"]",Qk=/((?:WC+[\/:])*)/.source.replace("WC",Yk),Zk=/(WCOD+)?/.source.replace("WCOD",Jk),$k=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Yk),eS=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Yk),tS=new RegExp("^"+Qk+Zk+$k+eS+"$"),nS=["material","materials","bones"],rS=function(){function e(t,n,r){k(this,e);var a=r||aS.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,a)}return M(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),aS=function(){function e(t,n,r){k(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return M(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,a=n.propertyName,i=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var l=t[a];if(void 0!==l){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===a){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}c=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=i}else void 0!==l.fromArray&&void 0!==l.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(c=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=a;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+a+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(Xk,"")}},{key:"parseTrackName",value:function(e){var t=tS.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var a=n.nodeName.substring(r+1);-1!==nS.indexOf(a)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=a)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var a=n[r];if(a.name===t||a.uuid===t)return a;var i=e(a.children);if(i)return i}return null}(e.children);if(r)return r}return null}}]),e}();aS.Composite=rS,aS.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},aS.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},aS.prototype.GetterByBindingType=[aS.prototype._getValue_direct,aS.prototype._getValue_array,aS.prototype._getValue_arrayElement,aS.prototype._getValue_toArray],aS.prototype.SetterByBindingTypeAndVersioning=[[aS.prototype._setValue_direct,aS.prototype._setValue_direct_setNeedsUpdate,aS.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[aS.prototype._setValue_array,aS.prototype._setValue_array_setNeedsUpdate,aS.prototype._setValue_array_setMatrixWorldNeedsUpdate],[aS.prototype._setValue_arrayElement,aS.prototype._setValue_arrayElement_setNeedsUpdate,aS.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[aS.prototype._setValue_fromArray,aS.prototype._setValue_fromArray_setNeedsUpdate,aS.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var iS=function(){function e(){k(this,e),this.uuid=Zp(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}return M(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,a=this._bindings,i=a.length,o=void 0,s=e.length,l=this.nCachedObjects_,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],f=h.uuid,d=t[f];if(void 0===d){d=s++,t[f]=d,e.push(h);for(var p=0,m=i;p!==m;++p)a[p].push(new aS(h,n[p],r[p]))}else if(d<l){o=e[d];var g=--l,v=e[g];t[v.uuid]=d,e[d]=v,t[f]=g,e[g]=h;for(var y=0,b=i;y!==b;++y){var x=a[y],w=x[g],_=x[d];x[d]=w,void 0===_&&(_=new aS(h,n[y],r[y])),x[g]=_}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,a=this.nCachedObjects_,i=0,o=arguments.length;i!==o;++i){var s=arguments[i],l=s.uuid,u=t[l];if(void 0!==u&&u>=a){var c=a++,h=e[c];t[h.uuid]=u,e[u]=h,t[l]=c,e[c]=s;for(var f=0,d=r;f!==d;++f){var p=n[f],m=p[c],g=p[u];p[u]=m,p[c]=g}}}this.nCachedObjects_=a}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,a=this.nCachedObjects_,i=e.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=t[u];if(void 0!==c)if(delete t[u],c<a){var h=--a,f=e[h],d=--i,p=e[d];t[f.uuid]=c,e[c]=f,t[p.uuid]=h,e[h]=p,e.pop();for(var m=0,g=r;m!==g;++m){var v=n[m],y=v[h],b=v[d];v[c]=y,v[h]=b,v.pop()}}else{var x=--i,w=e[x];x>0&&(t[w.uuid]=c),e[c]=w,e.pop();for(var _=0,k=r;_!==k;++_){var S=n[_];S[c]=S[x],S.pop()}}}this.nCachedObjects_=a}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],a=this._bindings;if(void 0!==r)return a[r];var i=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=a.length,n[e]=r,i.push(e),o.push(t),a.push(c);for(var h=u,f=s.length;h!==f;++h){var d=s[h];c[h]=new aS(d,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,a=this._parsedPaths,i=this._bindings,o=i.length-1,s=i[o];t[e[o]]=n,i[n]=s,i.pop(),a[n]=a[o],a.pop(),r[n]=r[o],r.pop()}}}]),e}();iS.prototype.isAnimationObjectGroup=!0;var oS=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;k(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=a;for(var i=n.tracks,o=i.length,s=new Array(o),l={endingStart:Np,endingEnd:Np},u=0;u!==o;++u){var c=i[u].createInterpolant(null);s[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return M(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,a=e._clip.duration,i=a/r,o=r/a;e.warp(1,i,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,a=r.time,i=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=a,s[1]=a+n,l[0]=e/i,l[1]=t/i,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var a=this._startTime;if(null!==a){var i=(e-a)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var l=this._interpolants,u=this._propertyBindings;if(this.blendMode===Up)for(var c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulateAdditive(s);else for(var f=0,d=l.length;f!==d;++f)l[f].evaluate(o),u[f].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,a=this._loopCount,i=2202===n;if(0===e)return-1===a?r:i&&1===(1&a)?t-r:r;if(2200===n){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===a&&(e>=0?(a=0,this._setEndings(!0,0===this.repetitions,i)):this._setEndings(0===this.repetitions,!0,i)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,a+=Math.abs(o);var s=this.repetitions-a;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,i)}else this._setEndings(!1,!1,i);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(i&&1===(1&a))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Pp,r.endingEnd=Pp):(r.endingStart=e?this.zeroSlopeAtStart?Pp:Np:Ip,r.endingEnd=t?this.zeroSlopeAtEnd?Pp:Np:Ip)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,a=r.time,i=this._weightInterpolant;null===i&&(i=r._lendControlInterpolant(),this._weightInterpolant=i);var o=i.parameterPositions,s=i.sampleValues;return o[0]=a,s[0]=t,o[1]=a+e,s[1]=n,this}}]),e}();(function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return M(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,a=r.length,i=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==a;++c){var h=r[c],f=h.name,d=u[f];if(void 0!==d)++d.referenceCount,i[c]=d;else{if(void 0!==(d=i[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(d=new qk(aS.create(n,f,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),i[c]=d}o[c].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var a=e._propertyBindings,i=0,o=a.length;i!==o;++i){var s=a[i];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var a=t[n];0===--a.useCount&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,a=this._actionsByClip,i=a[t];if(void 0===i)i={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=i;else{var o=i.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),i.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var a=e._clip.uuid,i=this._actionsByClip,o=i[a],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete i[a],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var a=t[n];0===--a.referenceCount&&this._removeInactiveBinding(a)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,a=this._bindings,i=r[t];void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=a.length,a.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,a=n.path,i=this._bindingsByRootAndName,o=i[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[a],0===Object.keys(o).length&&delete i[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new J_(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=n,t[n]=a}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,a=r.uuid,i="string"===typeof e?ok.findByName(r,e):e,o=null!==i?i.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==i?i.blendMode:Dp),void 0!==s){var u=s.actionByRoot[a];if(void 0!==u&&u.blendMode===n)return u;l=s.knownActions[0],null===i&&(i=l._clip)}if(null===i)return null;var c=new oS(this,i,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,a),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,a="string"===typeof e?ok.findByName(n,e):e,i=a?a.uuid:e,o=this._actionsByClip[i];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,a=Math.sign(e),i=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(r,e,a,i)}for(var s=this._bindings,l=this._nActiveBindings,u=0;u!==l;++u)s[u].apply(i);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,a=r[n];if(void 0!==a){for(var i=a.knownActions,o=0,s=i.length;o!==s;++o){var l=i[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var a=n[r].actionByRoot[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var i=this._bindingsByRootAndName[t];if(void 0!==i)for(var o in i){var s=i[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n})(qp).prototype._controlInterpolantsResultBuffer=new Float32Array(1);var sS=function(){function e(t){k(this,e),"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return M(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),lS=function(e){v(n,e);var t=w(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return k(this,n),(a=t.call(this,e,r)).meshPerAttribute=i,a}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=m(d(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=m(d(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(Px);lS.prototype.isInstancedInterleavedBuffer=!0,function(){function e(t,n,r,a,i){k(this,e),this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=a,this.count=i,this.version=0}return M(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}().prototype.isGLBufferAttribute=!0;var uS=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;k(this,e),this.ray=new hg(t,n),this.near=r,this.far=a,this.camera=null,this.layers=new kg,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return M(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return hS(e,this,n,t),n.sort(cS),n}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,a=e.length;r<a;r++)hS(e[r],this,n,t);return n.sort(cS),n}}]),e}();function cS(e,t){return e.distance-t.distance}function hS(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var a=e.children,i=0,o=a.length;i<o;i++)hS(a[i],t,n,!0)}var fS=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return k(this,e),this.radius=t,this.phi=n,this.theta=r,this}return M(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos($p(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),dS=new om,pS=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new om(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new om(-1/0,-1/0);k(this,e),this.min=t,this.max=n}return M(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=dS.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return dS.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();pS.prototype.isBox2=!0;var mS=new Dm,gS=new Dm,vS=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dm,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dm;k(this,e),this.start=t,this.end=n}return M(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){mS.subVectors(e,this.start),gS.subVectors(this.end,this.start);var n=gS.dot(gS),r=gS.dot(mS)/n;return t&&(r=$p(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),yS=new Dm,bS=new fg,xS=new fg,wS=function(e){v(n,e);var t=w(n);function n(e){var r;k(this,n);for(var a=_S(e),i=new hv,o=[],s=[],l=new wm(0,0,1),u=new wm(0,1,0),c=0;c<a.length;c++){var h=a[c];h.parent&&h.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(l.r,l.g,l.b),s.push(u.r,u.g,u.b))}i.setAttribute("position",new rv(o,3)),i.setAttribute("color",new rv(s,3));var f=new mw({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,i,f)).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=e,r.bones=a,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return M(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,a=r.getAttribute("position");xS.copy(this.root.matrixWorld).invert();for(var i=0,o=0;i<t.length;i++){var s=t[i];s.parent&&s.parent.isBone&&(bS.multiplyMatrices(xS,s.matrixWorld),yS.setFromMatrixPosition(bS),a.setXYZ(o,yS.x,yS.y,yS.z),bS.multiplyMatrices(xS,s.parent.matrixWorld),yS.setFromMatrixPosition(bS),a.setXYZ(o+1,yS.x,yS.y,yS.z),o+=2)}r.getAttribute("position").needsUpdate=!0,m(d(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Sw);function _S(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,_S(e.children[n]));return t}var kS=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;k(this,n),i=new wm(i),o=new wm(o);for(var s=a/2,l=r/a,u=r/2,c=[],h=[],f=0,d=0,p=-u;f<=a;f++,p+=l){c.push(-u,0,p,u,0,p),c.push(p,0,-u,p,0,u);var m=f===s?i:o;m.toArray(h,d),d+=3,m.toArray(h,d),d+=3,m.toArray(h,d),d+=3,m.toArray(h,d),d+=3}var g=new hv;g.setAttribute("position",new rv(c,3)),g.setAttribute("color",new rv(h,3));var v=new mw({vertexColors:!0,toneMapped:!1});return(e=t.call(this,g,v)).type="GridHelper",e}return M(n)}(Sw);for(var SS=new ArrayBuffer(4),MS=(new Float32Array(SS),new Uint32Array(SS),new Uint32Array(512)),TS=new Uint32Array(512),ES=0;ES<256;++ES){var AS=ES-127;AS<-27?(MS[ES]=0,MS[256|ES]=32768,TS[ES]=24,TS[256|ES]=24):AS<-14?(MS[ES]=1024>>-AS-14,MS[256|ES]=1024>>-AS-14|32768,TS[ES]=-AS-1,TS[256|ES]=-AS-1):AS<=15?(MS[ES]=AS+15<<10,MS[256|ES]=AS+15<<10|32768,TS[ES]=13,TS[256|ES]=13):AS<128?(MS[ES]=31744,MS[256|ES]=64512,TS[ES]=24,TS[256|ES]=24):(MS[ES]=31744,MS[256|ES]=64512,TS[ES]=13,TS[256|ES]=13)}for(var CS=new Uint32Array(2048),LS=new Uint32Array(64),RS=new Uint32Array(64),NS=1;NS<1024;++NS){for(var PS=NS<<13,IS=0;0===(8388608&PS);)PS<<=1,IS-=8388608;PS&=-8388609,IS+=947912704,CS[NS]=PS|IS}for(var DS=1024;DS<2048;++DS)CS[DS]=939524096+(DS-1024<<13);for(var US=1;US<31;++US)LS[US]=US<<23;LS[31]=1199570944,LS[32]=2147483648;for(var jS=33;jS<63;++jS)LS[jS]=2147483648+(jS-32<<23);LS[63]=3347054592;for(var OS=1;OS<64;++OS)32!==OS&&(RS[OS]=1024);Dw.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Dw.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},n_.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)};kS.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},wS.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};hk.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Uk.extractUrlBase(e)},hk.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};pS.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},pS.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},pS.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},pS.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},Om.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Om.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Om.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Om.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Om.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},_g.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},rg.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Xv.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},vS.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},sm.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},sm.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},sm.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},sm.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},sm.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},sm.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},fg.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},fg.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},fg.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Dm).setFromMatrixColumn(this,3)},fg.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},fg.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},fg.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},fg.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},fg.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},fg.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},fg.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},fg.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},fg.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},fg.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},fg.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},fg.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},fg.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},fg.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},fg.prototype.makeFrustum=function(e,t,n,r,a,i){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,a,i)},fg.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Wv.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Im.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Im.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},hg.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},hg.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},hg.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Xg.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Xg.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},Xg.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},Xg.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},Xg.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},Xg.barycoordFromPoint=function(e,t,n,r,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Xg.getBarycoord(e,t,n,r,a)},Xg.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Xg.getNormal(e,t,n,r)},r_.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},r_.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new P_(this,e)},r_.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new D_(this,e)},om.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},om.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},om.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Dm.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Dm.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Dm.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},Dm.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},Dm.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},Dm.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},Dm.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Dm.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Dm.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Em.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Em.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},jg.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},jg.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},jg.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},jg.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},jg.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(jg.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Cv.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Cv.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),rw.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},jv.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(vk.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(ev.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Vp},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Vp)}}}),ev.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Vp:Hp),this},ev.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ev.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},hv.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},hv.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new ev(arguments[1],arguments[2])))},hv.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},hv.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},hv.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},hv.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},hv.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(hv.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Px.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Vp:Hp),this},Px.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},P_.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},P_.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},P_.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Nx.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},sS.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Jg.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new wm}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Dv.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Ax.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},Ax.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Ax.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Ax.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Ax.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Ax.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Ax.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Ax.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Ax.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Ax.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Ax.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Ax.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Ax.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Ax.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Ax.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Ax.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Ax.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Ax.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Ax.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Ax.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Ax.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Ax.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Ax.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Ax.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Ax.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Ax.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Op:jp}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(gx.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Am.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Gk.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new zk).load(e,(function(e){t.setBuffer(e)})),this},Wk.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Fv.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Fv.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},_m.crossOrigin=void 0,_m.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var a=new gk;a.setCrossOrigin(this.crossOrigin);var i=a.load(e,n,void 0,r);return t&&(i.mapping=t),i},_m.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var a=new mk;a.setCrossOrigin(this.crossOrigin);var i=a.load(e,n,void 0,r);return t&&(i.mapping=t),i},_m.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},_m.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Td}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Td);var FS={type:"change"},BS={type:"start"},zS={type:"end"},HS=function(e){v(n,e);var t=w(n);function n(e,r){var a;k(this,n),a=t.call(this),void 0===r&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),r===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),a.object=e,a.domElement=r,a.domElement.style.touchAction="none",a.enabled=!0,a.target=new Dm,a.minDistance=0,a.maxDistance=1/0,a.minZoom=0,a.maxZoom=1/0,a.minPolarAngle=0,a.maxPolarAngle=Math.PI,a.minAzimuthAngle=-1/0,a.maxAzimuthAngle=1/0,a.enableDamping=!1,a.dampingFactor=.05,a.enableZoom=!0,a.zoomSpeed=1,a.enableRotate=!0,a.rotateSpeed=1,a.enablePan=!0,a.panSpeed=1,a.screenSpacePanning=!0,a.keyPanSpeed=7,a.autoRotate=!1,a.autoRotateSpeed=2,a.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},a.mouseButtons={LEFT:Ed,MIDDLE:Ad,RIGHT:Cd},a.touches={ONE:Ld,TWO:Nd},a.target0=a.target.clone(),a.position0=a.object.position.clone(),a.zoom0=a.object.zoom,a._domElementKeyEvents=null,a.getPolarAngle=function(){return u.phi},a.getAzimuthalAngle=function(){return u.theta},a.getDistance=function(){return this.object.position.distanceTo(this.target)},a.listenToKeyEvents=function(e){e.addEventListener("keydown",X),this._domElementKeyEvents=e},a.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},a.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(FS),i.update(),s=o.NONE},a.update=function(){var t=new Dm,n=(new Im).setFromUnitVectors(e.up,new Dm(0,1,0)),r=n.clone().invert(),a=new Dm,p=new Im,m=2*Math.PI;return function(){var e=i.object.position;t.copy(e).sub(i.target),t.applyQuaternion(n),u.setFromVector3(t),i.autoRotate&&s===o.NONE&&A(2*Math.PI/60/60*i.autoRotateSpeed),i.enableDamping?(u.theta+=c.theta*i.dampingFactor,u.phi+=c.phi*i.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi);var g=i.minAzimuthAngle,v=i.maxAzimuthAngle;return isFinite(g)&&isFinite(v)&&(g<-Math.PI?g+=m:g>Math.PI&&(g-=m),v<-Math.PI?v+=m:v>Math.PI&&(v-=m),u.theta=g<=v?Math.max(g,Math.min(v,u.theta)):u.theta>(g+v)/2?Math.max(g,u.theta):Math.min(v,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=h,u.radius=Math.max(i.minDistance,Math.min(i.maxDistance,u.radius)),!0===i.enableDamping?i.target.addScaledVector(f,i.dampingFactor):i.target.add(f),t.setFromSpherical(u),t.applyQuaternion(r),e.copy(i.target).add(t),i.object.lookAt(i.target),!0===i.enableDamping?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,f.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),f.set(0,0,0)),h=1,!!(d||a.distanceToSquared(i.object.position)>l||8*(1-p.dot(i.object.quaternion))>l)&&(i.dispatchEvent(FS),a.copy(i.object.position),p.copy(i.object.quaternion),d=!1,!0)}}(),a.dispose=function(){i.domElement.removeEventListener("contextmenu",Y),i.domElement.removeEventListener("pointerdown",V),i.domElement.removeEventListener("pointercancel",q),i.domElement.removeEventListener("wheel",K),i.domElement.removeEventListener("pointermove",G),i.domElement.removeEventListener("pointerup",W),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",X)};var i=b(a),o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=o.NONE,l=1e-6,u=new fS,c=new fS,h=1,f=new Dm,d=!1,p=new om,m=new om,g=new om,v=new om,y=new om,x=new om,w=new om,_=new om,S=new om,M=[],T={};function E(){return Math.pow(.95,i.zoomSpeed)}function A(e){c.theta-=e}function C(e){c.phi-=e}var L=function(){var e=new Dm;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),f.add(e)}}(),R=function(){var e=new Dm;return function(t,n){!0===i.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(i.object.up,e)),e.multiplyScalar(t),f.add(e)}}(),N=function(){var e=new Dm;return function(t,n){var r=i.domElement;if(i.object.isPerspectiveCamera){var a=i.object.position;e.copy(a).sub(i.target);var o=e.length();o*=Math.tan(i.object.fov/2*Math.PI/180),L(2*t*o/r.clientHeight,i.object.matrix),R(2*n*o/r.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(L(t*(i.object.right-i.object.left)/i.object.zoom/r.clientWidth,i.object.matrix),R(n*(i.object.top-i.object.bottom)/i.object.zoom/r.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function P(e){i.object.isPerspectiveCamera?h/=e:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*e)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function I(e){i.object.isPerspectiveCamera?h*=e:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/e)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function D(e){p.set(e.clientX,e.clientY)}function U(e){v.set(e.clientX,e.clientY)}function j(){if(1===M.length)p.set(M[0].pageX,M[0].pageY);else{var e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);p.set(e,t)}}function O(){if(1===M.length)v.set(M[0].pageX,M[0].pageY);else{var e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);v.set(e,t)}}function F(){var e=M[0].pageX-M[1].pageX,t=M[0].pageY-M[1].pageY,n=Math.sqrt(e*e+t*t);w.set(0,n)}function B(e){if(1==M.length)m.set(e.pageX,e.pageY);else{var t=Z(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);m.set(n,r)}g.subVectors(m,p).multiplyScalar(i.rotateSpeed);var a=i.domElement;A(2*Math.PI*g.x/a.clientHeight),C(2*Math.PI*g.y/a.clientHeight),p.copy(m)}function z(e){if(1===M.length)y.set(e.pageX,e.pageY);else{var t=Z(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);y.set(n,r)}x.subVectors(y,v).multiplyScalar(i.panSpeed),N(x.x,x.y),v.copy(y)}function H(e){var t=Z(e),n=e.pageX-t.x,r=e.pageY-t.y,a=Math.sqrt(n*n+r*r);_.set(0,a),S.set(0,Math.pow(_.y/w.y,i.zoomSpeed)),P(S.y),w.copy(_)}function V(e){!1!==i.enabled&&(0===M.length&&(i.domElement.setPointerCapture(e.pointerId),i.domElement.addEventListener("pointermove",G),i.domElement.addEventListener("pointerup",W)),function(e){M.push(e)}(e),"touch"===e.pointerType?function(e){switch(Q(e),M.length){case 1:switch(i.touches.ONE){case Ld:if(!1===i.enableRotate)return;j(),s=o.TOUCH_ROTATE;break;case Rd:if(!1===i.enablePan)return;O(),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(i.touches.TWO){case Nd:if(!1===i.enableZoom&&!1===i.enablePan)return;i.enableZoom&&F(),i.enablePan&&O(),s=o.TOUCH_DOLLY_PAN;break;case Pd:if(!1===i.enableZoom&&!1===i.enableRotate)return;i.enableZoom&&F(),i.enableRotate&&j(),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&i.dispatchEvent(BS)}(e):function(e){var t;switch(e.button){case 0:t=i.mouseButtons.LEFT;break;case 1:t=i.mouseButtons.MIDDLE;break;case 2:t=i.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Ad:if(!1===i.enableZoom)return;!function(e){w.set(e.clientX,e.clientY)}(e),s=o.DOLLY;break;case Ed:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===i.enablePan)return;U(e),s=o.PAN}else{if(!1===i.enableRotate)return;D(e),s=o.ROTATE}break;case Cd:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===i.enableRotate)return;D(e),s=o.ROTATE}else{if(!1===i.enablePan)return;U(e),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&i.dispatchEvent(BS)}(e))}function G(e){!1!==i.enabled&&("touch"===e.pointerType?function(e){switch(Q(e),s){case o.TOUCH_ROTATE:if(!1===i.enableRotate)return;B(e),i.update();break;case o.TOUCH_PAN:if(!1===i.enablePan)return;z(e),i.update();break;case o.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;!function(e){i.enableZoom&&H(e),i.enablePan&&z(e)}(e),i.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;!function(e){i.enableZoom&&H(e),i.enableRotate&&B(e)}(e),i.update();break;default:s=o.NONE}}(e):function(e){if(!1===i.enabled)return;switch(s){case o.ROTATE:if(!1===i.enableRotate)return;!function(e){m.set(e.clientX,e.clientY),g.subVectors(m,p).multiplyScalar(i.rotateSpeed);var t=i.domElement;A(2*Math.PI*g.x/t.clientHeight),C(2*Math.PI*g.y/t.clientHeight),p.copy(m),i.update()}(e);break;case o.DOLLY:if(!1===i.enableZoom)return;!function(e){_.set(e.clientX,e.clientY),S.subVectors(_,w),S.y>0?P(E()):S.y<0&&I(E()),w.copy(_),i.update()}(e);break;case o.PAN:if(!1===i.enablePan)return;!function(e){y.set(e.clientX,e.clientY),x.subVectors(y,v).multiplyScalar(i.panSpeed),N(x.x,x.y),v.copy(y),i.update()}(e)}}(e))}function W(e){J(e),0===M.length&&(i.domElement.releasePointerCapture(e.pointerId),i.domElement.removeEventListener("pointermove",G),i.domElement.removeEventListener("pointerup",W)),i.dispatchEvent(zS),s=o.NONE}function q(e){J(e)}function K(e){!1!==i.enabled&&!1!==i.enableZoom&&s===o.NONE&&(e.preventDefault(),i.dispatchEvent(BS),function(e){e.deltaY<0?I(E()):e.deltaY>0&&P(E()),i.update()}(e),i.dispatchEvent(zS))}function X(e){!1!==i.enabled&&!1!==i.enablePan&&function(e){var t=!1;switch(e.code){case i.keys.UP:N(0,i.keyPanSpeed),t=!0;break;case i.keys.BOTTOM:N(0,-i.keyPanSpeed),t=!0;break;case i.keys.LEFT:N(i.keyPanSpeed,0),t=!0;break;case i.keys.RIGHT:N(-i.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),i.update())}(e)}function Y(e){!1!==i.enabled&&e.preventDefault()}function J(e){delete T[e.pointerId];for(var t=0;t<M.length;t++)if(M[t].pointerId==e.pointerId)return void M.splice(t,1)}function Q(e){var t=T[e.pointerId];void 0===t&&(t=new om,T[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Z(e){var t=e.pointerId===M[0].pointerId?M[1]:M[0];return T[t.pointerId]}return i.domElement.addEventListener("contextmenu",Y),i.domElement.addEventListener("pointerdown",V),i.domElement.addEventListener("pointercancel",q),i.domElement.addEventListener("wheel",K,{passive:!1}),a.update(),a}return M(n)}(qp),VS=function(e){v(n,e);var t=w(n);function n(e){var r;return k(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new XS(e)})),r.register((function(e){return new eM(e)})),r.register((function(e){return new tM(e)})),r.register((function(e){return new YS(e)})),r.register((function(e){return new JS(e)})),r.register((function(e){return new QS(e)})),r.register((function(e){return new ZS(e)})),r.register((function(e){return new $S(e)})),r.register((function(e){return new qS(e)})),r.register((function(e){return new nM(e)})),r}return M(n,[{key:"load",value:function(e,t,n,r){var a,i=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Uk.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},s=new dk(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{i.parse(n,a,(function(n){t(n),i.manager.itemEnd(e)}),o)}catch(AS){o(AS)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var a,i={},o={};if("string"===typeof e)a=e;else if(Uk.decodeText(new Uint8Array(e,0,4))===rM){try{i[WS.KHR_BINARY_GLTF]=new oM(e)}catch(p){return void(r&&r(p))}a=i[WS.KHR_BINARY_GLTF].content}else a=Uk.decodeText(new Uint8Array(e));var s=JSON.parse(a);if(void 0===s.asset||s.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var l=new OM(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(var u=0;u<this.pluginCallbacks.length;u++){var c=this.pluginCallbacks[u](l);o[c.name]=c,i[c.name]=!0}if(s.extensionsUsed)for(var h=0;h<s.extensionsUsed.length;++h){var f=s.extensionsUsed[h],d=s.extensionsRequired||[];switch(f){case WS.KHR_MATERIALS_UNLIT:i[f]=new KS;break;case WS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:i[f]=new cM;break;case WS.KHR_DRACO_MESH_COMPRESSION:i[f]=new sM(s,this.dracoLoader);break;case WS.KHR_TEXTURE_TRANSFORM:i[f]=new lM;break;case WS.KHR_MESH_QUANTIZATION:i[f]=new hM;break;default:d.indexOf(f)>=0&&void 0===o[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(i),l.setPlugins(o),l.parse(n,r)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,a){n.parse(e,t,r,a)}))}}]),n}(hk);function GS(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var WS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},qS=function(){function e(t){k(this,e),this.parser=t,this.name=WS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return M(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var a=t[n];a.extensions&&a.extensions[this.name]&&void 0!==a.extensions[this.name].light&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var a,i=t.json,o=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e],s=new wm(16777215);void 0!==o.color&&s.fromArray(o.color);var l=void 0!==o.range?o.range:0;switch(o.type){case"directional":(a=new Rk(s)).target.position.set(0,0,-1),a.add(a.target);break;case"point":(a=new Ck(s)).distance=l;break;case"spot":(a=new Sk(s)).distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then((function(e){return n._getNodeRef(t.cache,a,e)}))}}]),e}(),KS=function(){function e(){k(this,e),this.name=WS.KHR_MATERIALS_UNLIT}return M(e,[{key:"getMaterialType",value:function(){return Qg}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new wm(1,1,1),e.opacity=1;var a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var i=a.baseColorFactor;e.color.fromArray(i),e.opacity=i[3]}void 0!==a.baseColorTexture&&r.push(n.assignTexture(e,"map",a.baseColorTexture,Op))}return Promise.all(r)}}]),e}(),XS=function(){function e(t){k(this,e),this.parser=t,this.name=WS.KHR_MATERIALS_CLEARCOAT}return M(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?F_:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];if(void 0!==i.clearcoatFactor&&(t.clearcoat=i.clearcoatFactor),void 0!==i.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),void 0!==i.clearcoatRoughnessFactor&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),void 0!==i.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),void 0!==i.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),void 0!==i.clearcoatNormalTexture.scale)){var o=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new om(o,o)}return Promise.all(a)}}]),e}(),YS=function(){function e(t){k(this,e),this.parser=t,this.name=WS.KHR_MATERIALS_SHEEN}return M(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?F_:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[];t.sheenColor=new wm(0,0,0),t.sheenRoughness=0,t.sheen=1;var i=r.extensions[this.name];return void 0!==i.sheenColorFactor&&t.sheenColor.fromArray(i.sheenColorFactor),void 0!==i.sheenRoughnessFactor&&(t.sheenRoughness=i.sheenRoughnessFactor),void 0!==i.sheenColorTexture&&a.push(n.assignTexture(t,"sheenColorMap",i.sheenColorTexture,Op)),void 0!==i.sheenRoughnessTexture&&a.push(n.assignTexture(t,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(a)}}]),e}(),JS=function(){function e(t){k(this,e),this.parser=t,this.name=WS.KHR_MATERIALS_TRANSMISSION}return M(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?F_:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];return void 0!==i.transmissionFactor&&(t.transmission=i.transmissionFactor),void 0!==i.transmissionTexture&&a.push(n.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(a)}}]),e}(),QS=function(){function e(t){k(this,e),this.parser=t,this.name=WS.KHR_MATERIALS_VOLUME}return M(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?F_:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];t.thickness=void 0!==i.thicknessFactor?i.thicknessFactor:0,void 0!==i.thicknessTexture&&a.push(n.assignTexture(t,"thicknessMap",i.thicknessTexture)),t.attenuationDistance=i.attenuationDistance||0;var o=i.attenuationColor||[1,1,1];return t.attenuationColor=new wm(o[0],o[1],o[2]),Promise.all(a)}}]),e}(),ZS=function(){function e(t){k(this,e),this.parser=t,this.name=WS.KHR_MATERIALS_IOR}return M(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?F_:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),$S=function(){function e(t){k(this,e),this.parser=t,this.name=WS.KHR_MATERIALS_SPECULAR}return M(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?F_:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];t.specularIntensity=void 0!==i.specularFactor?i.specularFactor:1,void 0!==i.specularTexture&&a.push(n.assignTexture(t,"specularIntensityMap",i.specularTexture));var o=i.specularColorFactor||[1,1,1];return t.specularColor=new wm(o[0],o[1],o[2]),void 0!==i.specularColorTexture&&a.push(n.assignTexture(t,"specularColorMap",i.specularColorTexture,Op)),Promise.all(a)}}]),e}(),eM=function(){function e(t){k(this,e),this.parser=t,this.name=WS.KHR_TEXTURE_BASISU}return M(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var a=r.extensions[this.name],i=t.options.ktx2Loader;if(!i){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,i)}}]),e}(),tM=function(){function e(t){k(this,e),this.parser=t,this.name=WS.EXT_TEXTURE_WEBP,this.isSupported=null}return M(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,a=r.textures[e];if(!a.extensions||!a.extensions[t])return null;var i=a.extensions[t],o=r.images[i.source],s=n.textureLoader;if(o.uri){var l=n.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then((function(a){if(a)return n.loadTextureImage(e,i.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),nM=function(){function e(t){k(this,e),this.name=WS.EXT_MESHOPT_COMPRESSION,this.parser=t}return M(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([a,i.ready]).then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,a=r.count,o=r.byteStride,s=new ArrayBuffer(a*o),l=new Uint8Array(e[0],t,n);return i.decodeGltfBuffer(new Uint8Array(s),a,o,l,r.mode,r.filter),s}))}return null}}]),e}(),rM="glTF",aM=1313821514,iM=5130562,oM=M((function e(t){k(this,e),this.name=WS.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:Uk.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==rM)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,a=new DataView(t,12),i=0;i<r;){var o=a.getUint32(i,!0);i+=4;var s=a.getUint32(i,!0);if(i+=4,s===aM){var l=new Uint8Array(t,12+i,o);this.content=Uk.decodeText(l)}else if(s===iM){var u=12+i;this.body=t.slice(u,u+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),sM=function(){function e(t,n){if(k(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=WS.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return M(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,o={},s={},l={};for(var u in i){var c=TM[u]||u.toLowerCase();o[c]=i[u]}for(var h in e.attributes){var f=TM[h]||h.toLowerCase();if(void 0!==i[h]){var d=n.accessors[e.attributes[h]],p=_M[d.componentType];l[f]=p,s[f]=!0===d.normalized}}return t.getDependency("bufferView",a).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],a=s[n];void 0!==a&&(r.normalized=a)}t(e)}),o,l)}))}))}}]),e}(),lM=function(){function e(){k(this,e),this.name=WS.KHR_TEXTURE_TRANSFORM}return M(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),uM=function(e){v(n,e);var t=w(n);function n(e){var r;k(this,n),(r=t.call(this)).isGLTFSpecularGlossinessMaterial=!0;var a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),l=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),u={specular:{value:(new wm).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return r._extraUniforms=u,r.onBeforeCompile=function(e){for(var t in u)e.uniforms[t]=u[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",l)},Object.defineProperties(b(r),{specular:{get:function(){return u.specular.value},set:function(e){u.specular.value=e}},specularMap:{get:function(){return u.specularMap.value},set:function(e){u.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return u.glossiness.value},set:function(e){u.glossiness.value=e}},glossinessMap:{get:function(){return u.glossinessMap.value},set:function(e){u.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete r.metalness,delete r.roughness,delete r.metalnessMap,delete r.roughnessMap,r.setValues(e),r}return M(n,[{key:"copy",value:function(e){return m(d(n.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(O_),cM=function(){function e(){k(this,e),this.name=WS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}return M(e,[{key:"getMaterialType",value:function(){return uM}},{key:"extendParams",value:function(e,t,n){var r=t.extensions[this.name];e.color=new wm(1,1,1),e.opacity=1;var a=[];if(Array.isArray(r.diffuseFactor)){var i=r.diffuseFactor;e.color.fromArray(i),e.opacity=i[3]}if(void 0!==r.diffuseTexture&&a.push(n.assignTexture(e,"map",r.diffuseTexture,Op)),e.emissive=new wm(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new wm(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var o=r.specularGlossinessTexture;a.push(n.assignTexture(e,"glossinessMap",o)),a.push(n.assignTexture(e,"specularMap",o,Op))}return Promise.all(a)}},{key:"createMaterial",value:function(e){var t=new uM(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}]),e}(),hM=M((function e(){k(this,e),this.name=WS.KHR_MESH_QUANTIZATION})),fM=function(e){v(n,e);var t=w(n);function n(e,r,a,i){return k(this,n),t.call(this,e,r,a,i)}return M(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r*3+r,i=0;i!==r;i++)t[i]=n[a+i];return t}}]),n}(X_);fM.prototype.beforeStart_=fM.prototype.copySampleValue_,fM.prototype.afterEnd_=fM.prototype.copySampleValue_,fM.prototype.interpolate_=function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,u=r-t,c=(n-t)/u,h=c*c,f=h*c,d=e*l,p=d-l,m=-2*f+3*h,g=f-h,v=1-m,y=g-h+c,b=0;b!==o;b++){var x=i[p+b+o],w=i[p+b+s]*u,_=i[d+b+o],k=i[d+b]*u;a[b]=v*x+y*w+m*_+g*k}return a};var dM=new Im,pM=function(e){v(n,e);var t=w(n);function n(){return k(this,n),t.apply(this,arguments)}return M(n,[{key:"interpolate_",value:function(e,t,r,a){var i=m(d(n.prototype),"interpolate_",this).call(this,e,t,r,a);return dM.fromArray(i).normalize().toArray(i),i}}]),n}(fM),mM=0,gM=1,vM=2,yM=3,bM=4,xM=5,wM=6,_M={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},kM={9728:Vd,9729:qd,9984:Gd,9985:Kd,9986:Wd,9987:Xd},SM={33071:zd,33648:Hd,10497:Bd},MM={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},TM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},EM={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},AM={CUBICSPLINE:void 0,LINEAR:Lp,STEP:Cp},CM="OPAQUE",LM="MASK",RM="BLEND";function NM(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function PM(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function IM(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var a=t.extras.targetNames;if(e.morphTargetInfluences.length===a.length){e.morphTargetDictionary={};for(var i=0,o=a.length;i<o;i++)e.morphTargetDictionary[a[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function DM(e){var t=e.extensions&&e.extensions[WS.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+UM(t.attributes):e.indices+":"+UM(e.attributes)+":"+e.mode}function UM(e){for(var t="",n=Object.keys(e).sort(),r=0,a=n.length;r<a;r++)t+=n[r]+":"+e[n[r]]+";";return t}function jM(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var OM=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};k(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new GS,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.textureLoader=new Fk(this.options.manager):this.textureLoader=new gk(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new dk(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return M(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,a=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var i={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};NM(a,i,r),PM(i,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(i)}))).then((function(){e(i)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,a=t.length;r<a;r++)for(var i=t[r].joints,o=0,s=i.length;o<s;o++)e[i[o]].isBone=!0;for(var l=0,u=e.length;l<u;l++){var c=e[l];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var a=n.clone();return function e(t,n){var a=r.associations.get(t);null!=a&&r.associations.set(n,a);var o,s=g(t.children.entries());try{for(s.s();!(o=s.n()).done;){var l=i(o.value,2),u=l[0];e(l[1],n.children[u])}}catch(c){s.e(c)}finally{s.f()}}(n,a),a.name+="_instance_"+e.uses[t]++,a}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var a=e(t[r]);a&&n.push(a)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[WS.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,a){n.load(Uk.resolveURL(t.uri,r.path),e,void 0,(function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var a=[];return void 0!==r.bufferView?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then((function(e){var a,i,o=e[0],s=MM[r.type],l=_M[r.componentType],u=l.BYTES_PER_ELEMENT,c=u*s,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;if(f&&f!==c){var p=Math.floor(h/f),m="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,g=t.cache.get(m);g||(a=new l(o,p*f,r.count*f/u),g=new Px(a,f/u),t.cache.add(m,g)),i=new Dx(g,s,h%f/u,d)}else a=null===o?new l(r.count*s):new l(o,h,r.count*s),i=new ev(a,s,d);if(void 0!==r.sparse){var v=MM.SCALAR,y=_M[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,w=new y(e[1],b,r.sparse.count*v),_=new l(e[2],x,r.sparse.count*s);null!==o&&(i=new ev(i.array.slice(),i.itemSize,i.normalized));for(var k=0,S=w.length;k<S;k++){var M=w[k];if(i.setX(M,_[k*s]),s>=2&&i.setY(M,_[k*s+1]),s>=3&&i.setZ(M,_[k*s+2]),s>=4&&i.setW(M,_[k*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e].source,a=t.images[r],i=this.textureLoader;if(a.uri){var o=n.manager.getHandler(a.uri);null!==o&&(i=o)}return this.loadTextureImage(e,r,i)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,a=this.json,i=a.textures[e],o=a.images[t],s=(o.uri||o.bufferView)+":"+i.sampler;if(this.textureCache[s])return this.textureCache[s];var l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,i.name&&(t.name=i.name);var n=(a.samplers||{})[i.sampler]||{};return t.magFilter=kM[n.magFilter]||qd,t.minFilter=kM[n.minFilter]||Xd,t.wrapS=SM[n.wrapS]||Bd,t.wrapT=SM[n.wrapT]||Bd,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=l,l}},{key:"loadImageSource",value:function(e,t){var n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()}));var a=n.images[e],i=self.URL||self.webkitURL,o=a.uri||"",s=!1;if(void 0!==a.bufferView)o=this.getDependency("bufferView",a.bufferView).then((function(e){s=!0;var t=new Blob([e],{type:a.mimeType});return o=i.createObjectURL(t)}));else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var l=Promise.resolve(o).then((function(e){return new Promise((function(n,a){var i=n;!0===t.isImageBitmapLoader&&(i=function(e){var t=new Tm(e);t.needsUpdate=!0,n(t)}),t.load(Uk.resolveURL(e,r.path),i,void 0,a)}))})).then((function(e){var t;return!0===s&&i.revokeObjectURL(o),e.userData.mimeType=a.mimeType||((t=a.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e}));return this.sourceCache[e]=l,l}},{key:"assignTexture",value:function(e,t,n,r){var a=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),a.extensions[WS.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[WS.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var s=a.associations.get(i);i=a.extensions[WS.KHR_TEXTURE_TRANSFORM].extendTexture(i,o),a.associations.set(i,s)}}return void 0!==r&&(i.encoding=r),e[t]=i,i}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,i=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new Tw,Jg.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var l="LineBasicMaterial:"+n.uuid,u=this.cache.get(l);u||(u=new mw,Jg.prototype.copy.call(u,n),u.color.copy(n.color),this.cache.add(l,u)),n=u}if(r||a||i){var c="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),r&&(c+="derivative-tangents:"),a&&(c+="vertex-colors:"),i&&(c+="flat-shading:");var h=this.cache.get(c);h||(h=n.clone(),a&&(h.vertexColors=!0),i&&(h.flatShading=!0),r&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(c,h),this.associations.set(h,this.associations.get(n))),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return O_}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,a=this.extensions,i=r.materials[e],o={},s=i.extensions||{},l=[];if(s[WS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=a[WS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(),l.push(u.extendParams(o,i,n))}else if(s[WS.KHR_MATERIALS_UNLIT]){var c=a[WS.KHR_MATERIALS_UNLIT];t=c.getMaterialType(),l.push(c.extendParams(o,i,n))}else{var h=i.pbrMetallicRoughness||{};if(o.color=new wm(1,1,1),o.opacity=1,Array.isArray(h.baseColorFactor)){var f=h.baseColorFactor;o.color.fromArray(f),o.opacity=f[3]}void 0!==h.baseColorTexture&&l.push(n.assignTexture(o,"map",h.baseColorTexture,Op)),o.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,o.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(l.push(n.assignTexture(o,"metalnessMap",h.metallicRoughnessTexture)),l.push(n.assignTexture(o,"roughnessMap",h.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===i.doubleSided&&(o.side=2);var d=i.alphaMode||CM;if(d===RM?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,d===LM&&(o.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&t!==Qg&&(l.push(n.assignTexture(o,"normalMap",i.normalTexture)),o.normalScale=new om(1,1),void 0!==i.normalTexture.scale)){var p=i.normalTexture.scale;o.normalScale.set(p,p)}return void 0!==i.occlusionTexture&&t!==Qg&&(l.push(n.assignTexture(o,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(o.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&t!==Qg&&(o.emissive=(new wm).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&t!==Qg&&l.push(n.assignTexture(o,"emissiveMap",i.emissiveTexture,Op)),Promise.all(l).then((function(){var r;return r=t===uM?a[WS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new t(o),i.name&&(r.name=i.name),PM(r,i),n.associations.set(r,{materials:e}),i.extensions&&NM(a,r,i),r}))}},{key:"createUniqueName",value:function(e){for(var t=aS.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function a(e){return n[WS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return BM(n,e,t)}))}for(var i=[],o=0,s=e.length;o<s;o++){var l=e[o],u=DM(l),c=r[u];if(c)i.push(c.promise);else{var h=void 0;h=l.extensions&&l.extensions[WS.KHR_DRACO_MESH_COMPRESSION]?a(l):BM(new hv,l,t),r[u]={primitive:l,promise:h},i.push(h)}}return Promise.all(i)}},{key:"loadMesh",value:function(e){for(var t,n=this,r=this.json,a=this.extensions,i=r.meshes[e],o=i.primitives,s=[],l=0,u=o.length;l<u;l++){var c=void 0===o[l].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new O_({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),t.DefaultMaterial):this.getDependency("material",o[l].material);s.push(c)}return s.push(n.loadGeometries(o)),Promise.all(s).then((function(t){for(var r=t.slice(0,t.length-1),s=t[t.length-1],l=[],u=0,c=s.length;u<c;u++){var h=s[u],f=o[u],d=void 0,p=r[u];if(f.mode===bM||f.mode===xM||f.mode===wM||void 0===f.mode)!0!==(d=!0===i.isSkinnedMesh?new rw(h,p):new Cv(h,p)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),f.mode===xM?d.geometry=zM(d.geometry,1):f.mode===wM&&(d.geometry=zM(d.geometry,2));else if(f.mode===gM)d=new Sw(h,p);else if(f.mode===yM)d=new ww(h,p);else if(f.mode===vM)d=new Mw(h,p);else{if(f.mode!==mM)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);d=new Rw(h,p)}Object.keys(d.geometry.morphAttributes).length>0&&IM(d,i),d.name=n.createUniqueName(i.name||"mesh_"+e),PM(d,i),f.extensions&&NM(a,d,f),n.assignFinalMaterial(d),l.push(d)}for(var m=0,g=l.length;m<g;m++)n.associations.set(l[m],{meshes:e,primitives:m});if(1===l.length)return l[0];var v=new wx;n.associations.set(v,{meshes:e});for(var y=0,b=l.length;y<b;y++)v.add(l[y]);return v}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new jv(im.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new sy(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),PM(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=[],r=[],a=[],i=[],o=[],s=0,l=t.channels.length;s<l;s++){var u=t.channels[s],c=t.samplers[u.sampler],h=u.target,f=void 0!==h.node?h.node:h.id,d=void 0!==t.parameters?t.parameters[c.input]:c.input,p=void 0!==t.parameters?t.parameters[c.output]:c.output;n.push(this.getDependency("node",f)),r.push(this.getDependency("accessor",d)),a.push(this.getDependency("accessor",p)),i.push(c),o.push(h)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(a),Promise.all(i),Promise.all(o)]).then((function(n){for(var r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],l=[],u=function(e,t){var n=r[e],u=a[e],c=i[e],h=o[e],f=s[e];if(void 0===n)return"continue";n.updateMatrix(),n.matrixAutoUpdate=!0;var d=void 0;switch(EM[f.path]){case EM.weights:d=tk;break;case EM.rotation:d=rk;break;default:d=ik}var p=n.name?n.name:n.uuid,m=void 0!==h.interpolation?AM[h.interpolation]:Lp,g=[];EM[f.path]===EM.weights?n.traverse((function(e){e.morphTargetInfluences&&g.push(e.name?e.name:e.uuid)})):g.push(p);var v=c.array;if(c.normalized){for(var y=jM(v.constructor),b=new Float32Array(v.length),x=0,w=v.length;x<w;x++)b[x]=v[x]*y;v=b}for(var _=0,k=g.length;_<k;_++){var S=new d(g[_]+"."+EM[f.path],u.array,v,m);"CUBICSPLINE"===h.interpolation&&(S.createInterpolant=function(e){return new(this instanceof rk?pM:fM)(this.times,this.values,this.getValueSize()/3,e)},S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(S)}},c=0,h=r.length;c<h;c++)u(c);var f=t.name?t.name:"animation_"+e;return new ok(f,void 0,l)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t=this.json,n=this.extensions,r=this,a=t.nodes[e],i=a.name?r.createUniqueName(a.name):"";return function(){var t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==a.camera&&t.push(r.getDependency("camera",a.camera).then((function(e){return r._getNodeRef(r.cameraCache,a.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var o;if((o=!0===a.isBone?new aw:t.length>1?new wx:1===t.length?t[0]:new jg)!==t[0])for(var s=0,l=t.length;s<l;s++)o.add(t[s]);if(a.name&&(o.userData.name=a.name,o.name=i),PM(o,a),a.extensions&&NM(n,o,a),void 0!==a.matrix){var u=new fg;u.fromArray(a.matrix),o.applyMatrix4(u)}else void 0!==a.translation&&o.position.fromArray(a.translation),void 0!==a.rotation&&o.quaternion.fromArray(a.rotation),void 0!==a.scale&&o.scale.fromArray(a.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o}))}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,r=this.json.scenes[e],a=this,o=new wx;r.name&&(o.name=a.createUniqueName(r.name)),PM(o,r),r.extensions&&NM(n,o,r);for(var s=r.nodes||[],l=[],u=0,c=s.length;u<c;u++)l.push(FM(s[u],o,t,a));return Promise.all(l).then((function(){return a.associations=function(e){var t,n=new Map,r=g(a.associations);try{for(r.s();!(t=r.n()).done;){var o=i(t.value,2),s=o[0],l=o[1];(s instanceof Jg||s instanceof Tm)&&n.set(s,l)}}catch(u){r.e(u)}finally{r.f()}return e.traverse((function(e){var t=a.associations.get(e);null!=t&&n.set(e,t)})),n}(o),o}))}}]),e}();function FM(e,t,n,r){var a=n.nodes[e];return r.getDependency("node",e).then((function(e){return void 0===a.skin?e:r.getDependency("skin",a.skin).then((function(e){for(var n=[],a=0,i=(t=e).joints.length;a<i;a++)n.push(r.getDependency("node",t.joints[a]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],a=[],i=0,o=n.length;i<o;i++){var s=n[i];if(s){r.push(s);var l=new fg;void 0!==t.inverseBindMatrices&&l.fromArray(t.inverseBindMatrices.array,16*i),a.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[i])}e.bind(new lw(r,a),e.matrixWorld)}})),e}));var t})).then((function(e){t.add(e);var i=[];if(a.children)for(var o=a.children,s=0,l=o.length;s<l;s++){var u=o[s];i.push(FM(u,e,n,r))}return Promise.all(i)}))}function BM(e,t,n){var r=t.attributes,a=[];function i(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=TM[o]||o.toLowerCase();s in e.attributes||a.push(i(r[o],s))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(l)}return PM(e,t),function(e,t,n){var r=t.attributes,a=new Om;if(void 0!==r.POSITION){var i=n.json.accessors[r.POSITION],o=i.min,s=i.max;if(void 0!==o&&void 0!==s){if(a.set(new Dm(o[0],o[1],o[2]),new Dm(s[0],s[1],s[2])),i.normalized){var l=jM(_M[i.componentType]);a.min.multiplyScalar(l),a.max.multiplyScalar(l)}var u=t.targets;if(void 0!==u){for(var c=new Dm,h=new Dm,f=0,d=u.length;f<d;f++){var p=u[f];if(void 0!==p.POSITION){var m=n.json.accessors[p.POSITION],g=m.min,v=m.max;if(void 0!==g&&void 0!==v){if(h.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),h.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),h.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),m.normalized){var y=jM(_M[m.componentType]);h.multiplyScalar(y)}c.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(c)}e.boundingBox=a;var b=new rg;a.getCenter(b.center),b.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=b}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(a).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,a=!1,i=!1,o=0,s=t.length;o<s;o++){var l=t[o];if(void 0!==l.POSITION&&(r=!0),void 0!==l.NORMAL&&(a=!0),void 0!==l.COLOR_0&&(i=!0),r&&a&&i)break}if(!r&&!a&&!i)return Promise.resolve(e);for(var u=[],c=[],h=[],f=0,d=t.length;f<d;f++){var p=t[f];if(r){var m=void 0!==p.POSITION?n.getDependency("accessor",p.POSITION):e.attributes.position;u.push(m)}if(a){var g=void 0!==p.NORMAL?n.getDependency("accessor",p.NORMAL):e.attributes.normal;c.push(g)}if(i){var v=void 0!==p.COLOR_0?n.getDependency("accessor",p.COLOR_0):e.attributes.color;h.push(v)}}return Promise.all([Promise.all(u),Promise.all(c),Promise.all(h)]).then((function(t){var n=t[0],o=t[1],s=t[2];return r&&(e.morphAttributes.position=n),a&&(e.morphAttributes.normal=o),i&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function zM(e,t){var n=e.getIndex();if(null===n){var r=[],a=e.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var i=0;i<a.count;i++)r.push(i);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(2===t)for(var l=1;l<=o;l++)s.push(n.getX(0)),s.push(n.getX(l)),s.push(n.getX(l+1));else for(var u=0;u<o;u++)u%2===0?(s.push(n.getX(u)),s.push(n.getX(u+1)),s.push(n.getX(u+2))):(s.push(n.getX(u+2)),s.push(n.getX(u+1)),s.push(n.getX(u)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c}var HM=document.createElement("div");HM.classList.add("loading-container"),HM.classList.add("hide"),document.body.appendChild(HM);var VM=document.createElement("div");VM.classList.add("progress-container"),HM.appendChild(VM);var GM=document.createElement("div");GM.classList.add("progress-bar"),VM.appendChild(GM);var WM,qM,KM,XM,YM,JM,QM,ZM,$M=function(e){var t=new VS,n="island/models/island.glb",r="localhost"===window.location.hostname?"http://localhost:80/"+n:n;t.load(r,(function(t){e.add(t.scene);var n,r=g(t.scene.children);try{for(r.s();!(n=r.n()).done;){var a=n.value;"Mesh"===a.type&&(a.castShadow=!0,a.receiveShadow=!0,a.material=a.material.clone())}}catch(i){r.e(i)}finally{r.f()}}),(function(e){var t;t=e.loaded/e.total,GM.setAttribute("style","\n    width:".concat(200*t,"px\n  ")),1===t?HM.classList.add("hide"):HM.classList.remove("hide")}))},eT=!1,tT=new Dm(0,0,0),nT=new om,rT=!0,aT=0,iT=function(){QM=window.innerWidth,QM=Math.min(window.innerWidth,QM),ZM=800,ZM=Math.min(window.innerHeight,ZM),ZM=window.innerHeight,(KM=new jv(70,QM/ZM,.01,2e3)).position.z=0,KM.position.x=0,KM.position.y=320,KM.lookAt(tT),KM.updateProjectionMatrix(),(WM=new Ax({antialias:!0})).setSize(QM,ZM),WM.setClearColor(16777215,0),XM=new uS,YM=new HS(KM,WM.domElement),document.body.appendChild(WM.domElement),WM.setAnimationLoop((function(e){if(rT){aT+=.005,KM.position.setX(200*Math.cos(aT)),KM.position.setZ(200*Math.sin(aT));var t=KM.position.y;t>100&&KM.position.setY(t-.01*(t-100)),KM.lookAt(tT),KM.updateMatrixWorld()}KM.position.y<10&&KM.position.setY(10);hT(),WM.render(qM,KM)})),(qM=new Nx).add(KM),function(e){var t=new Ck(16777215,1,10,0);t.castShadow=!0,t.shadow.bias=.01,t.position.set(0,500,0),t.shadow.camera.fov=2e3,window.addEventListener("keypress",(function(e){var n=t.position.y;"a"===e.key?t.position.setY(n+10):"d"===e.key&&t.position.setY(n-10)})),e.add(t);var n=new Ck(16777215,1,10,0);n.castShadow=!0,n.shadow.bias=.01,n.position.set(-50,500,-50),n.shadow.camera.fov=2e3,e.add(n);var r=new Nk(4210752,1);r.position.set(50,50,50),e.add(r)}(qM),$M(qM),window.addEventListener("resize",(function(){return fT()})),document.addEventListener("mousemove",dT),WM.domElement.addEventListener("click",(function(){rT=!1})),WM.domElement.addEventListener("touchstart",(function(e){rT=!1,eT=e.touches.length>1})),WM.domElement.addEventListener("mousedown",(function(){return sT(!0)})),WM.domElement.addEventListener("mouseup",(function(){return sT(!1)})),window.addEventListener("keydown",uT),window.addEventListener("keyup",lT);return WM.domElement},oT=!1,sT=function(e){oT=e},lT=function(e){e.shiftKey&&(eT=!1)},uT=function(e){e.shiftKey&&(eT=!1)},cT=function(e){e&&(mT(""),JM.material.emissive.setHex(JM.currentHex),JM.material.color.setHex(JM.currentColor),JM=null)},hT=function(){XM.setFromCamera(nT,KM);var e,t=XM.intersectObjects(qM.children,!0);if(t.length>0){var n=t[0];"\xedsland"===n.object.name.toLowerCase()?cT(JM):JM!==n.object&&(cT(JM),e=n.object,mT(e.name),(JM=e).currentHex=JM.material.emissive.getHex(),JM.currentColor=JM.material.color.getHex(),JM.material.color.setHex(16711680),JM.material.emissive.setHex(16711680))}else cT(JM)},fT=function(){QM=window.innerWidth,QM=Math.min(window.innerWidth,QM),ZM=800,ZM=Math.min(window.innerHeight,ZM),WM.setSize(QM,ZM),KM.aspect=QM/ZM,KM.updateProjectionMatrix()};function dT(e){if(e.preventDefault(),nT.x=e.clientX/QM*2-1,nT.y=-e.clientY/ZM*2+1,oT&&eT){var t=function(){XM.setFromCamera(nT,KM);var e=XM.intersectObjects(qM.children,!0);if(e.length>0)return e[0].point}();t&&(YM.target=t,tT=t)}}var pT=document.createElement("div");pT.classList.add("name-div"),document.body.appendChild(pT),pT.classList.add("hide");var mT=function(e){""===e?pT.classList.add("hide"):pT.classList.remove("hide"),pT.textContent=e},gT=function(){var t=(0,e.useRef)(),n=i((0,e.useState)(!1),2),r=n[0],a=n[1];(0,e.useEffect)((function(){var e=iT(),n=t.current;return n.appendChild(e),function(){n.removeChilde(e),window.removeEventListener("resize",(function(){return fT()})),qM=void 0,WM.setAnimationLoop(null),WM=void 0,KM=void 0}}),[]);return(0,nd.jsxs)("div",{style:{position:"relative"},children:[(0,nd.jsx)("div",{style:{height:r?"auto":0,transition:".1s",display:r?"block":"none"},className:"modal",children:(0,nd.jsxs)("div",{style:{},children:[(0,nd.jsx)("button",{className:"btn close-btn",onClick:function(){return a(!1)},children:"X"}),(0,nd.jsx)("div",{children:"Haltu ni\xf0ri SHIFT til a\xf0 hreyfa myndav\xe9lina."}),(0,nd.jsx)("p",{children:"St\xe6r\xf0ir \xe1 fj\xf6llum hafa veri\xf0 \xfdktar."}),(0,nd.jsx)("p",{children:"Settu m\xfasina yfir einhver sta\xf0 t.d. Langj\xf6kul."}),(0,nd.jsx)("p",{children:"Markmi\xf0i\xf0 ver\xf0ur a\xf0 b\xfaa til einhvern leik \xfat \xfar \xfeessu."}),(0,nd.jsx)("p",{children:"\xc9g hef ekki loki\xf0 vi\xf0 a\xf0 skr\xe1 inn alla sta\xf0i sem \xe9g vil."})]})}),(0,nd.jsx)("div",{style:{position:"absolute",right:10,top:5},children:(0,nd.jsx)("button",{className:"btn",style:{fontSize:16,margin:0,width:50},onClick:function(){return a(!r)},children:"?"})}),(0,nd.jsx)("div",{ref:t})]})},vT=function(){return(0,nd.jsx)("div",{className:"container",style:{margin:0,padding:0,backgroundColor:"rosybrown"},children:(0,nd.jsx)(gT,{})})};var yT=function(){var e=window.location.pathname;return console.log("paht",e),"/island"===e?(0,nd.jsx)(vT,{}):(0,nd.jsx)(Md,{})},bT=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};t.render((0,nd.jsx)(e.StrictMode,{children:(0,nd.jsx)(yT,{})}),document.getElementById("root")),bT()}()}();
//# sourceMappingURL=main.f7ab7bf5.js.map